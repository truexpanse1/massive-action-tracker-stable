var r4=Object.defineProperty;var a4=(t,e,n)=>e in t?r4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ng=(t,e,n)=>a4(t,typeof e!="symbol"?e+"":e,n);function vA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function fa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i4(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var rg={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk;function s4(){if(sk)return Qe;sk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),b=Symbol.iterator;function v(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function T(L,O,Z){this.props=L,this.context=O,this.refs=N,this.updater=Z||k}T.prototype.isReactComponent={},T.prototype.setState=function(L,O){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,O,"setState")},T.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function R(){}R.prototype=T.prototype;function E(L,O,Z){this.props=L,this.context=O,this.refs=N,this.updater=Z||k}var P=E.prototype=new R;P.constructor=E,C(P,T.prototype),P.isPureReactComponent=!0;var j=Array.isArray;function I(){}var D={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function H(L,O,Z){var U=Z.ref;return{$$typeof:t,type:L,key:O,ref:U!==void 0?U:null,props:Z}}function z(L,O){return H(L.type,O,L.props)}function F(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function V(L){var O={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Z){return O[Z]})}var K=/\/+/g;function pe(L,O){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):O.toString(36)}function Y(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(I,I):(L.status="pending",L.then(function(O){L.status==="pending"&&(L.status="fulfilled",L.value=O)},function(O){L.status==="pending"&&(L.status="rejected",L.reason=O)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function q(L,O,Z,U,J){var oe=typeof L;(oe==="undefined"||oe==="boolean")&&(L=null);var me=!1;if(L===null)me=!0;else switch(oe){case"bigint":case"string":case"number":me=!0;break;case"object":switch(L.$$typeof){case t:case e:me=!0;break;case m:return me=L._init,q(me(L._payload),O,Z,U,J)}}if(me)return J=J(L),me=U===""?"."+pe(L,0):U,j(J)?(Z="",me!=null&&(Z=me.replace(K,"$&/")+"/"),q(J,O,Z,"",function(we){return we})):J!=null&&(F(J)&&(J=z(J,Z+(J.key==null||L&&L.key===J.key?"":(""+J.key).replace(K,"$&/")+"/")+me)),O.push(J)),1;me=0;var xe=U===""?".":U+":";if(j(L))for(var Q=0;Q<L.length;Q++)U=L[Q],oe=xe+pe(U,Q),me+=q(U,O,Z,oe,J);else if(Q=v(L),typeof Q=="function")for(L=Q.call(L),Q=0;!(U=L.next()).done;)U=U.value,oe=xe+pe(U,Q++),me+=q(U,O,Z,oe,J);else if(oe==="object"){if(typeof L.then=="function")return q(Y(L),O,Z,U,J);throw O=String(L),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return me}function B(L,O,Z){if(L==null)return L;var U=[],J=0;return q(L,U,"","",function(oe){return O.call(Z,oe,J++)}),U}function ae(L){if(L._status===-1){var O=L._result;O=O(),O.then(function(Z){(L._status===0||L._status===-1)&&(L._status=1,L._result=Z)},function(Z){(L._status===0||L._status===-1)&&(L._status=2,L._result=Z)}),L._status===-1&&(L._status=0,L._result=O)}if(L._status===1)return L._result.default;throw L._result}var X=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ve={map:B,forEach:function(L,O,Z){B(L,function(){O.apply(this,arguments)},Z)},count:function(L){var O=0;return B(L,function(){O++}),O},toArray:function(L){return B(L,function(O){return O})||[]},only:function(L){if(!F(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Qe.Activity=g,Qe.Children=ve,Qe.Component=T,Qe.Fragment=n,Qe.Profiler=a,Qe.PureComponent=E,Qe.StrictMode=r,Qe.Suspense=d,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return D.H.useMemoCache(L)}},Qe.cache=function(L){return function(){return L.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(L,O,Z){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var U=C({},L.props),J=L.key;if(O!=null)for(oe in O.key!==void 0&&(J=""+O.key),O)!$.call(O,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&O.ref===void 0||(U[oe]=O[oe]);var oe=arguments.length-2;if(oe===1)U.children=Z;else if(1<oe){for(var me=Array(oe),xe=0;xe<oe;xe++)me[xe]=arguments[xe+2];U.children=me}return H(L.type,J,U)},Qe.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:i,_context:L},L},Qe.createElement=function(L,O,Z){var U,J={},oe=null;if(O!=null)for(U in O.key!==void 0&&(oe=""+O.key),O)$.call(O,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(J[U]=O[U]);var me=arguments.length-2;if(me===1)J.children=Z;else if(1<me){for(var xe=Array(me),Q=0;Q<me;Q++)xe[Q]=arguments[Q+2];J.children=xe}if(L&&L.defaultProps)for(U in me=L.defaultProps,me)J[U]===void 0&&(J[U]=me[U]);return H(L,oe,J)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(L){return{$$typeof:u,render:L}},Qe.isValidElement=F,Qe.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:ae}},Qe.memo=function(L,O){return{$$typeof:h,type:L,compare:O===void 0?null:O}},Qe.startTransition=function(L){var O=D.T,Z={};D.T=Z;try{var U=L(),J=D.S;J!==null&&J(Z,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(I,X)}catch(oe){X(oe)}finally{O!==null&&Z.types!==null&&(O.types=Z.types),D.T=O}},Qe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Qe.use=function(L){return D.H.use(L)},Qe.useActionState=function(L,O,Z){return D.H.useActionState(L,O,Z)},Qe.useCallback=function(L,O){return D.H.useCallback(L,O)},Qe.useContext=function(L){return D.H.useContext(L)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(L,O){return D.H.useDeferredValue(L,O)},Qe.useEffect=function(L,O){return D.H.useEffect(L,O)},Qe.useEffectEvent=function(L){return D.H.useEffectEvent(L)},Qe.useId=function(){return D.H.useId()},Qe.useImperativeHandle=function(L,O,Z){return D.H.useImperativeHandle(L,O,Z)},Qe.useInsertionEffect=function(L,O){return D.H.useInsertionEffect(L,O)},Qe.useLayoutEffect=function(L,O){return D.H.useLayoutEffect(L,O)},Qe.useMemo=function(L,O){return D.H.useMemo(L,O)},Qe.useOptimistic=function(L,O){return D.H.useOptimistic(L,O)},Qe.useReducer=function(L,O,Z){return D.H.useReducer(L,O,Z)},Qe.useRef=function(L){return D.H.useRef(L)},Qe.useState=function(L){return D.H.useState(L)},Qe.useSyncExternalStore=function(L,O,Z){return D.H.useSyncExternalStore(L,O,Z)},Qe.useTransition=function(){return D.H.useTransition()},Qe.version="19.2.0",Qe}var ok;function ll(){return ok||(ok=1,rg.exports=s4()),rg.exports}var _=ll();const zo=fa(_),o4=vA({__proto__:null,default:zo},[_]);var ag={exports:{}},mc={},ig={exports:{}},sg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lk;function l4(){return lk||(lk=1,(function(t){function e(q,B){var ae=q.length;q.push(B);e:for(;0<ae;){var X=ae-1>>>1,ve=q[X];if(0<a(ve,B))q[X]=B,q[ae]=ve,ae=X;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var B=q[0],ae=q.pop();if(ae!==B){q[0]=ae;e:for(var X=0,ve=q.length,L=ve>>>1;X<L;){var O=2*(X+1)-1,Z=q[O],U=O+1,J=q[U];if(0>a(Z,ae))U<ve&&0>a(J,Z)?(q[X]=J,q[U]=ae,X=U):(q[X]=Z,q[O]=ae,X=O);else if(U<ve&&0>a(J,ae))q[X]=J,q[U]=ae,X=U;else break e}}return B}function a(q,B){var ae=q.sortIndex-B.sortIndex;return ae!==0?ae:q.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],h=[],m=1,g=null,b=3,v=!1,k=!1,C=!1,N=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function P(q){for(var B=n(h);B!==null;){if(B.callback===null)r(h);else if(B.startTime<=q)r(h),B.sortIndex=B.expirationTime,e(d,B);else break;B=n(h)}}function j(q){if(C=!1,P(q),!k)if(n(d)!==null)k=!0,I||(I=!0,V());else{var B=n(h);B!==null&&Y(j,B.startTime-q)}}var I=!1,D=-1,$=5,H=-1;function z(){return N?!0:!(t.unstable_now()-H<$)}function F(){if(N=!1,I){var q=t.unstable_now();H=q;var B=!0;try{e:{k=!1,C&&(C=!1,R(D),D=-1),v=!0;var ae=b;try{t:{for(P(q),g=n(d);g!==null&&!(g.expirationTime>q&&z());){var X=g.callback;if(typeof X=="function"){g.callback=null,b=g.priorityLevel;var ve=X(g.expirationTime<=q);if(q=t.unstable_now(),typeof ve=="function"){g.callback=ve,P(q),B=!0;break t}g===n(d)&&r(d),P(q)}else r(d);g=n(d)}if(g!==null)B=!0;else{var L=n(h);L!==null&&Y(j,L.startTime-q),B=!1}}break e}finally{g=null,b=ae,v=!1}B=void 0}}finally{B?V():I=!1}}}var V;if(typeof E=="function")V=function(){E(F)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,pe=K.port2;K.port1.onmessage=F,V=function(){pe.postMessage(null)}}else V=function(){T(F,0)};function Y(q,B){D=T(function(){q(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(q){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var ae=b;b=B;try{return q()}finally{b=ae}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(q,B){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=b;b=q;try{return B()}finally{b=ae}},t.unstable_scheduleCallback=function(q,B,ae){var X=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?X+ae:X):ae=X,q){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ae+ve,q={id:m++,callback:B,priorityLevel:q,startTime:ae,expirationTime:ve,sortIndex:-1},ae>X?(q.sortIndex=ae,e(h,q),n(d)===null&&q===n(h)&&(C?(R(D),D=-1):C=!0,Y(j,ae-X))):(q.sortIndex=ve,e(d,q),k||v||(k=!0,I||(I=!0,V()))),q},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(q){var B=b;return function(){var ae=b;b=B;try{return q.apply(this,arguments)}finally{b=ae}}}})(sg)),sg}var ck;function c4(){return ck||(ck=1,ig.exports=l4()),ig.exports}var og={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uk;function u4(){if(uk)return Yn;uk=1;var t=ll();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:d,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Yn.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,m)},Yn.flushSync=function(d){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=m,r.d.f()}},Yn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Yn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Yn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,g=u(m,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:v}):m==="script"&&r.d.X(d,{crossOrigin:g,integrity:b,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Yn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Yn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=u(m,h.crossOrigin);r.d.L(d,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Yn.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Yn.requestFormReset=function(d){r.d.r(d)},Yn.unstable_batchedUpdates=function(d,h){return d(h)},Yn.useFormState=function(d,h,m){return l.H.useFormState(d,h,m)},Yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Yn.version="19.2.0",Yn}var dk;function wA(){if(dk)return og.exports;dk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),og.exports=u4(),og.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk;function d4(){if(fk)return mc;fk=1;var t=c4(),e=ll(),n=wA();function r(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function i(s){var c=s,f=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(f=c.return),s=c.return;while(s)}return c.tag===3?f:null}function l(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function u(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function d(s){if(i(s)!==s)throw Error(r(188))}function h(s){var c=s.alternate;if(!c){if(c=i(s),c===null)throw Error(r(188));return c!==s?null:s}for(var f=s,p=c;;){var w=f.return;if(w===null)break;var S=w.alternate;if(S===null){if(p=w.return,p!==null){f=p;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===f)return d(w),s;if(S===p)return d(w),c;S=S.sibling}throw Error(r(188))}if(f.return!==p.return)f=w,p=S;else{for(var A=!1,M=w.child;M;){if(M===f){A=!0,f=w,p=S;break}if(M===p){A=!0,p=w,f=S;break}M=M.sibling}if(!A){for(M=S.child;M;){if(M===f){A=!0,f=S,p=w;break}if(M===p){A=!0,p=S,f=w;break}M=M.sibling}if(!A)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:c}function m(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=m(s),c!==null)return c;s=s.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),E=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var K=Symbol.for("react.client.reference");function pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===K?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case T:return"Profiler";case N:return"StrictMode";case j:return"Suspense";case I:return"SuspenseList";case H:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case E:return s.displayName||"Context";case R:return(s._context.displayName||"Context")+".Consumer";case P:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return c=s.displayName||null,c!==null?c:pe(s.type)||"Memo";case $:c=s._payload,s=s._init;try{return pe(s(c))}catch{}}return null}var Y=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},X=[],ve=-1;function L(s){return{current:s}}function O(s){0>ve||(s.current=X[ve],X[ve]=null,ve--)}function Z(s,c){ve++,X[ve]=s.current,s.current=c}var U=L(null),J=L(null),oe=L(null),me=L(null);function xe(s,c){switch(Z(oe,c),Z(J,s),Z(U,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?A_(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=A_(c),s=j_(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}O(U),Z(U,s)}function Q(){O(U),O(J),O(oe)}function we(s){s.memoizedState!==null&&Z(me,s);var c=U.current,f=j_(c,s.type);c!==f&&(Z(J,s),Z(U,f))}function _e(s){J.current===s&&(O(U),O(J)),me.current===s&&(O(me),uc._currentValue=ae)}var ie,Le;function ce(s){if(ie===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);ie=c&&c[1]||"",Le=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+s+Le}var Se=!1;function je(s,c){if(!s||Se)return"";Se=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(le){var se=le}Reflect.construct(s,[],be)}else{try{be.call()}catch(le){se=le}s.call(be.prototype)}}else{try{throw Error()}catch(le){se=le}(be=s())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(le){if(le&&se&&typeof le.stack=="string")return[le.stack,se.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=p.DetermineComponentFrameRoot(),A=S[0],M=S[1];if(A&&M){var G=A.split(`
`),re=M.split(`
`);for(w=p=0;p<G.length&&!G[p].includes("DetermineComponentFrameRoot");)p++;for(;w<re.length&&!re[w].includes("DetermineComponentFrameRoot");)w++;if(p===G.length||w===re.length)for(p=G.length-1,w=re.length-1;1<=p&&0<=w&&G[p]!==re[w];)w--;for(;1<=p&&0<=w;p--,w--)if(G[p]!==re[w]){if(p!==1||w!==1)do if(p--,w--,0>w||G[p]!==re[w]){var he=`
`+G[p].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=p&&0<=w);break}}}finally{Se=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?ce(f):""}function Ye(s,c){switch(s.tag){case 26:case 27:case 5:return ce(s.type);case 16:return ce("Lazy");case 13:return s.child!==c&&c!==null?ce("Suspense Fallback"):ce("Suspense");case 19:return ce("SuspenseList");case 0:case 15:return je(s.type,!1);case 11:return je(s.type.render,!1);case 1:return je(s.type,!0);case 31:return ce("Activity");default:return""}}function Fe(s){try{var c="",f=null;do c+=Ye(s,f),f=s,s=s.return;while(s);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Je=Object.prototype.hasOwnProperty,fe=t.unstable_scheduleCallback,Ne=t.unstable_cancelCallback,ye=t.unstable_shouldYield,Re=t.unstable_requestPaint,Ce=t.unstable_now,He=t.unstable_getCurrentPriorityLevel,nt=t.unstable_ImmediatePriority,We=t.unstable_UserBlockingPriority,Dt=t.unstable_NormalPriority,Yt=t.unstable_LowPriority,Ut=t.unstable_IdlePriority,ln=t.log,cn=t.unstable_setDisableYieldValue,Qt=null,te=null;function de(s){if(typeof ln=="function"&&cn(s),te&&typeof te.setStrictMode=="function")try{te.setStrictMode(Qt,s)}catch{}}var ke=Math.clz32?Math.clz32:vt,Be=Math.log,ct=Math.LN2;function vt(s){return s>>>=0,s===0?32:31-(Be(s)/ct|0)|0}var it=256,Bt=262144,Ve=4194304;function Ae(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Et(s,c,f){var p=s.pendingLanes;if(p===0)return 0;var w=0,S=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var M=p&134217727;return M!==0?(p=M&~S,p!==0?w=Ae(p):(A&=M,A!==0?w=Ae(A):f||(f=M&~s,f!==0&&(w=Ae(f))))):(M=p&~S,M!==0?w=Ae(M):A!==0?w=Ae(A):f||(f=p&~s,f!==0&&(w=Ae(f)))),w===0?0:c!==0&&c!==w&&(c&S)===0&&(S=w&-w,f=c&-c,S>=f||S===32&&(f&4194048)!==0)?c:w}function dt(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function ht(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(){var s=Ve;return Ve<<=1,(Ve&62914560)===0&&(Ve=4194304),s}function Ke(s){for(var c=[],f=0;31>f;f++)c.push(s);return c}function Ze(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function rn(s,c,f,p,w,S){var A=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var M=s.entanglements,G=s.expirationTimes,re=s.hiddenUpdates;for(f=A&~f;0<f;){var he=31-ke(f),be=1<<he;M[he]=0,G[he]=-1;var se=re[he];if(se!==null)for(re[he]=null,he=0;he<se.length;he++){var le=se[he];le!==null&&(le.lane&=-536870913)}f&=~be}p!==0&&wt(s,p,0),S!==0&&w===0&&s.tag!==0&&(s.suspendedLanes|=S&~(A&~c))}function wt(s,c,f){s.pendingLanes|=c,s.suspendedLanes&=~c;var p=31-ke(c);s.entangledLanes|=c,s.entanglements[p]=s.entanglements[p]|1073741824|f&261930}function $t(s,c){var f=s.entangledLanes|=c;for(s=s.entanglements;f;){var p=31-ke(f),w=1<<p;w&c|s[p]&c&&(s[p]|=c),f&=~w}}function Xe(s,c){var f=c&-c;return f=(f&42)!==0?1:Ht(f),(f&(s.suspendedLanes|c))!==0?0:f}function Ht(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function bt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Sn(){var s=B.p;return s!==0?s:(s=window.event,s===void 0?32:Z_(s.type))}function Zt(s,c){var f=B.p;try{return B.p=s,c()}finally{B.p=f}}var Kn=Math.random().toString(36).slice(2),St="__reactFiber$"+Kn,un="__reactProps$"+Kn,pa="__reactContainer$"+Kn,Hs="__reactEvents$"+Kn,kl="__reactListeners$"+Kn,WM="__reactHandles$"+Kn,gv="__reactResources$"+Kn,Nl="__reactMarker$"+Kn;function Kh(s){delete s[St],delete s[un],delete s[Hs],delete s[kl],delete s[WM]}function Vs(s){var c=s[St];if(c)return c;for(var f=s.parentNode;f;){if(c=f[pa]||f[St]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(s=L_(s);s!==null;){if(f=s[St])return f;s=L_(s)}return c}s=f,f=s.parentNode}return null}function Ws(s){if(s=s[St]||s[pa]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function Cl(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(r(33))}function Ks(s){var c=s[gv];return c||(c=s[gv]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function In(s){s[Nl]=!0}var yv=new Set,bv={};function Xi(s,c){Ys(s,c),Ys(s+"Capture",c)}function Ys(s,c){for(bv[s]=c,s=0;s<c.length;s++)yv.add(c[s])}var KM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xv={},vv={};function YM(s){return Je.call(vv,s)?!0:Je.call(xv,s)?!1:KM.test(s)?vv[s]=!0:(xv[s]=!0,!1)}function fu(s,c,f){if(YM(c))if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+f)}}function hu(s,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+f)}}function Ta(s,c,f,p){if(p===null)s.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(c,f,""+p)}}function Mr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wv(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function JM(s,c,f){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var w=p.get,S=p.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return w.call(this)},set:function(A){f=""+A,S.call(this,A)}}),Object.defineProperty(s,c,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(A){f=""+A},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function Yh(s){if(!s._valueTracker){var c=wv(s)?"checked":"value";s._valueTracker=JM(s,c,""+s[c])}}function Sv(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var f=c.getValue(),p="";return s&&(p=wv(s)?s.checked?"true":"false":s.value),s=p,s!==f?(c.setValue(s),!0):!1}function mu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var XM=/[\n"\\]/g;function Dr(s){return s.replace(XM,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Jh(s,c,f,p,w,S,A,M){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),c!=null?A==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Mr(c)):s.value!==""+Mr(c)&&(s.value=""+Mr(c)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),c!=null?Xh(s,A,Mr(c)):f!=null?Xh(s,A,Mr(f)):p!=null&&s.removeAttribute("value"),w==null&&S!=null&&(s.defaultChecked=!!S),w!=null&&(s.checked=w&&typeof w!="function"&&typeof w!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+Mr(M):s.removeAttribute("name")}function _v(s,c,f,p,w,S,A,M){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.type=S),c!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||c!=null)){Yh(s);return}f=f!=null?""+Mr(f):"",c=c!=null?""+Mr(c):f,M||c===s.value||(s.value=c),s.defaultValue=c}p=p??w,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=M?s.checked:!!p,s.defaultChecked=!!p,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),Yh(s)}function Xh(s,c,f){c==="number"&&mu(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function Js(s,c,f,p){if(s=s.options,c){c={};for(var w=0;w<f.length;w++)c["$"+f[w]]=!0;for(f=0;f<s.length;f++)w=c.hasOwnProperty("$"+s[f].value),s[f].selected!==w&&(s[f].selected=w),w&&p&&(s[f].defaultSelected=!0)}else{for(f=""+Mr(f),c=null,w=0;w<s.length;w++){if(s[w].value===f){s[w].selected=!0,p&&(s[w].defaultSelected=!0);return}c!==null||s[w].disabled||(c=s[w])}c!==null&&(c.selected=!0)}}function kv(s,c,f){if(c!=null&&(c=""+Mr(c),c!==s.value&&(s.value=c),f==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=f!=null?""+Mr(f):""}function Nv(s,c,f,p){if(c==null){if(p!=null){if(f!=null)throw Error(r(92));if(Y(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),c=f}f=Mr(c),s.defaultValue=f,p=s.textContent,p===f&&p!==""&&p!==null&&(s.value=p),Yh(s)}function Xs(s,c){if(c){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=c;return}}s.textContent=c}var QM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cv(s,c,f){var p=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":p?s.setProperty(c,f):typeof f!="number"||f===0||QM.has(c)?c==="float"?s.cssFloat=f:s[c]=(""+f).trim():s[c]=f+"px"}function Ev(s,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(s=s.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var w in c)p=c[w],c.hasOwnProperty(w)&&f[w]!==p&&Cv(s,w,p)}else for(var S in c)c.hasOwnProperty(S)&&Cv(s,S,c[S])}function Qh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pu(s){return eD.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Aa(){}var Zh=null;function em(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qs=null,Zs=null;function Tv(s){var c=Ws(s);if(c&&(s=c.stateNode)){var f=s[un]||null;e:switch(s=c.stateNode,c.type){case"input":if(Jh(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Dr(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var p=f[c];if(p!==s&&p.form===s.form){var w=p[un]||null;if(!w)throw Error(r(90));Jh(p,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<f.length;c++)p=f[c],p.form===s.form&&Sv(p)}break e;case"textarea":kv(s,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Js(s,!!f.multiple,c,!1)}}}var tm=!1;function Av(s,c,f){if(tm)return s(c,f);tm=!0;try{var p=s(c);return p}finally{if(tm=!1,(Qs!==null||Zs!==null)&&(nd(),Qs&&(c=Qs,s=Zs,Zs=Qs=null,Tv(c),s)))for(c=0;c<s.length;c++)Tv(s[c])}}function El(s,c){var f=s.stateNode;if(f===null)return null;var p=f[un]||null;if(p===null)return null;f=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nm=!1;if(ja)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){nm=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{nm=!1}var pi=null,rm=null,gu=null;function jv(){if(gu)return gu;var s,c=rm,f=c.length,p,w="value"in pi?pi.value:pi.textContent,S=w.length;for(s=0;s<f&&c[s]===w[s];s++);var A=f-s;for(p=1;p<=A&&c[f-p]===w[S-p];p++);return gu=w.slice(s,1<p?1-p:void 0)}function yu(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function bu(){return!0}function Pv(){return!1}function cr(s){function c(f,p,w,S,A){this._reactName=f,this._targetInst=w,this.type=p,this.nativeEvent=S,this.target=A,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(f=s[M],this[M]=f?f(S):S[M]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?bu:Pv,this.isPropagationStopped=Pv,this}return g(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=bu)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=bu)},persist:function(){},isPersistent:bu}),c}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xu=cr(Qi),Al=g({},Qi,{view:0,detail:0}),tD=cr(Al),am,im,jl,vu=g({},Al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:om,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==jl&&(jl&&s.type==="mousemove"?(am=s.screenX-jl.screenX,im=s.screenY-jl.screenY):im=am=0,jl=s),am)},movementY:function(s){return"movementY"in s?s.movementY:im}}),Iv=cr(vu),nD=g({},vu,{dataTransfer:0}),rD=cr(nD),aD=g({},Al,{relatedTarget:0}),sm=cr(aD),iD=g({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),sD=cr(iD),oD=g({},Qi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),lD=cr(oD),cD=g({},Qi,{data:0}),Rv=cr(cD),uD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hD(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=fD[s])?!!c[s]:!1}function om(){return hD}var mD=g({},Al,{key:function(s){if(s.key){var c=uD[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=yu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dD[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:om,charCode:function(s){return s.type==="keypress"?yu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?yu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),pD=cr(mD),gD=g({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mv=cr(gD),yD=g({},Al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:om}),bD=cr(yD),xD=g({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),vD=cr(xD),wD=g({},vu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),SD=cr(wD),_D=g({},Qi,{newState:0,oldState:0}),kD=cr(_D),ND=[9,13,27,32],lm=ja&&"CompositionEvent"in window,Pl=null;ja&&"documentMode"in document&&(Pl=document.documentMode);var CD=ja&&"TextEvent"in window&&!Pl,Dv=ja&&(!lm||Pl&&8<Pl&&11>=Pl),Ov=" ",Lv=!1;function Uv(s,c){switch(s){case"keyup":return ND.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var eo=!1;function ED(s,c){switch(s){case"compositionend":return Bv(c);case"keypress":return c.which!==32?null:(Lv=!0,Ov);case"textInput":return s=c.data,s===Ov&&Lv?null:s;default:return null}}function TD(s,c){if(eo)return s==="compositionend"||!lm&&Uv(s,c)?(s=jv(),gu=rm=pi=null,eo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Dv&&c.locale!=="ko"?null:c.data;default:return null}}var AD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $v(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!AD[s.type]:c==="textarea"}function qv(s,c,f,p){Qs?Zs?Zs.push(p):Zs=[p]:Qs=p,c=cd(c,"onChange"),0<c.length&&(f=new xu("onChange","change",null,f,p),s.push({event:f,listeners:c}))}var Il=null,Rl=null;function jD(s){__(s,0)}function wu(s){var c=Cl(s);if(Sv(c))return s}function zv(s,c){if(s==="change")return c}var Gv=!1;if(ja){var cm;if(ja){var um="oninput"in document;if(!um){var Fv=document.createElement("div");Fv.setAttribute("oninput","return;"),um=typeof Fv.oninput=="function"}cm=um}else cm=!1;Gv=cm&&(!document.documentMode||9<document.documentMode)}function Hv(){Il&&(Il.detachEvent("onpropertychange",Vv),Rl=Il=null)}function Vv(s){if(s.propertyName==="value"&&wu(Rl)){var c=[];qv(c,Rl,s,em(s)),Av(jD,c)}}function PD(s,c,f){s==="focusin"?(Hv(),Il=c,Rl=f,Il.attachEvent("onpropertychange",Vv)):s==="focusout"&&Hv()}function ID(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return wu(Rl)}function RD(s,c){if(s==="click")return wu(c)}function MD(s,c){if(s==="input"||s==="change")return wu(c)}function DD(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var br=typeof Object.is=="function"?Object.is:DD;function Ml(s,c){if(br(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var f=Object.keys(s),p=Object.keys(c);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var w=f[p];if(!Je.call(c,w)||!br(s[w],c[w]))return!1}return!0}function Wv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Kv(s,c){var f=Wv(s);s=0;for(var p;f;){if(f.nodeType===3){if(p=s+f.textContent.length,s<=c&&p>=c)return{node:f,offset:c-s};s=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Wv(f)}}function Yv(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?Yv(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function Jv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=mu(s.document);c instanceof s.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)s=c.contentWindow;else break;c=mu(s.document)}return c}function dm(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var OD=ja&&"documentMode"in document&&11>=document.documentMode,to=null,fm=null,Dl=null,hm=!1;function Xv(s,c,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;hm||to==null||to!==mu(p)||(p=to,"selectionStart"in p&&dm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Dl&&Ml(Dl,p)||(Dl=p,p=cd(fm,"onSelect"),0<p.length&&(c=new xu("onSelect","select",null,c,f),s.push({event:c,listeners:p}),c.target=to)))}function Zi(s,c){var f={};return f[s.toLowerCase()]=c.toLowerCase(),f["Webkit"+s]="webkit"+c,f["Moz"+s]="moz"+c,f}var no={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},mm={},Qv={};ja&&(Qv=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function es(s){if(mm[s])return mm[s];if(!no[s])return s;var c=no[s],f;for(f in c)if(c.hasOwnProperty(f)&&f in Qv)return mm[s]=c[f];return s}var Zv=es("animationend"),ew=es("animationiteration"),tw=es("animationstart"),LD=es("transitionrun"),UD=es("transitionstart"),BD=es("transitioncancel"),nw=es("transitionend"),rw=new Map,pm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pm.push("scrollEnd");function aa(s,c){rw.set(s,c),Xi(c,[s])}var Su=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Or=[],ro=0,gm=0;function _u(){for(var s=ro,c=gm=ro=0;c<s;){var f=Or[c];Or[c++]=null;var p=Or[c];Or[c++]=null;var w=Or[c];Or[c++]=null;var S=Or[c];if(Or[c++]=null,p!==null&&w!==null){var A=p.pending;A===null?w.next=w:(w.next=A.next,A.next=w),p.pending=w}S!==0&&aw(f,w,S)}}function ku(s,c,f,p){Or[ro++]=s,Or[ro++]=c,Or[ro++]=f,Or[ro++]=p,gm|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function ym(s,c,f,p){return ku(s,c,f,p),Nu(s)}function ts(s,c){return ku(s,null,null,c),Nu(s)}function aw(s,c,f){s.lanes|=f;var p=s.alternate;p!==null&&(p.lanes|=f);for(var w=!1,S=s.return;S!==null;)S.childLanes|=f,p=S.alternate,p!==null&&(p.childLanes|=f),S.tag===22&&(s=S.stateNode,s===null||s._visibility&1||(w=!0)),s=S,S=S.return;return s.tag===3?(S=s.stateNode,w&&c!==null&&(w=31-ke(f),s=S.hiddenUpdates,p=s[w],p===null?s[w]=[c]:p.push(c),c.lane=f|536870912),S):null}function Nu(s){if(50<rc)throw rc=0,Cp=null,Error(r(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var ao={};function $D(s,c,f,p){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(s,c,f,p){return new $D(s,c,f,p)}function bm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Pa(s,c){var f=s.alternate;return f===null?(f=xr(s.tag,c,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=c,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,c=s.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function iw(s,c){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,c=f.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Cu(s,c,f,p,w,S){var A=0;if(p=s,typeof s=="function")bm(s)&&(A=1);else if(typeof s=="string")A=HO(s,f,U.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case H:return s=xr(31,f,c,w),s.elementType=H,s.lanes=S,s;case C:return ns(f.children,w,S,c);case N:A=8,w|=24;break;case T:return s=xr(12,f,c,w|2),s.elementType=T,s.lanes=S,s;case j:return s=xr(13,f,c,w),s.elementType=j,s.lanes=S,s;case I:return s=xr(19,f,c,w),s.elementType=I,s.lanes=S,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case E:A=10;break e;case R:A=9;break e;case P:A=11;break e;case D:A=14;break e;case $:A=16,p=null;break e}A=29,f=Error(r(130,s===null?"null":typeof s,"")),p=null}return c=xr(A,f,c,w),c.elementType=s,c.type=p,c.lanes=S,c}function ns(s,c,f,p){return s=xr(7,s,p,c),s.lanes=f,s}function xm(s,c,f){return s=xr(6,s,null,c),s.lanes=f,s}function sw(s){var c=xr(18,null,null,0);return c.stateNode=s,c}function vm(s,c,f){return c=xr(4,s.children!==null?s.children:[],s.key,c),c.lanes=f,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var ow=new WeakMap;function Lr(s,c){if(typeof s=="object"&&s!==null){var f=ow.get(s);return f!==void 0?f:(c={value:s,source:c,stack:Fe(c)},ow.set(s,c),c)}return{value:s,source:c,stack:Fe(c)}}var io=[],so=0,Eu=null,Ol=0,Ur=[],Br=0,gi=null,ga=1,ya="";function Ia(s,c){io[so++]=Ol,io[so++]=Eu,Eu=s,Ol=c}function lw(s,c,f){Ur[Br++]=ga,Ur[Br++]=ya,Ur[Br++]=gi,gi=s;var p=ga;s=ya;var w=32-ke(p)-1;p&=~(1<<w),f+=1;var S=32-ke(c)+w;if(30<S){var A=w-w%5;S=(p&(1<<A)-1).toString(32),p>>=A,w-=A,ga=1<<32-ke(c)+w|f<<w|p,ya=S+s}else ga=1<<S|f<<w|p,ya=s}function wm(s){s.return!==null&&(Ia(s,1),lw(s,1,0))}function Sm(s){for(;s===Eu;)Eu=io[--so],io[so]=null,Ol=io[--so],io[so]=null;for(;s===gi;)gi=Ur[--Br],Ur[Br]=null,ya=Ur[--Br],Ur[Br]=null,ga=Ur[--Br],Ur[Br]=null}function cw(s,c){Ur[Br++]=ga,Ur[Br++]=ya,Ur[Br++]=gi,ga=c.id,ya=c.overflow,gi=s}var Un=null,qt=null,ut=!1,yi=null,$r=!1,_m=Error(r(519));function bi(s){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ll(Lr(c,s)),_m}function uw(s){var c=s.stateNode,f=s.type,p=s.memoizedProps;switch(c[St]=s,c[un]=p,f){case"dialog":at("cancel",c),at("close",c);break;case"iframe":case"object":case"embed":at("load",c);break;case"video":case"audio":for(f=0;f<ic.length;f++)at(ic[f],c);break;case"source":at("error",c);break;case"img":case"image":case"link":at("error",c),at("load",c);break;case"details":at("toggle",c);break;case"input":at("invalid",c),_v(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":at("invalid",c);break;case"textarea":at("invalid",c),Nv(c,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||p.suppressHydrationWarning===!0||E_(c.textContent,f)?(p.popover!=null&&(at("beforetoggle",c),at("toggle",c)),p.onScroll!=null&&at("scroll",c),p.onScrollEnd!=null&&at("scrollend",c),p.onClick!=null&&(c.onclick=Aa),c=!0):c=!1,c||bi(s,!0)}function dw(s){for(Un=s.return;Un;)switch(Un.tag){case 5:case 31:case 13:$r=!1;return;case 27:case 3:$r=!0;return;default:Un=Un.return}}function oo(s){if(s!==Un)return!1;if(!ut)return dw(s),ut=!0,!1;var c=s.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||qp(s.type,s.memoizedProps)),f=!f),f&&qt&&bi(s),dw(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));qt=O_(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));qt=O_(s)}else c===27?(c=qt,Ii(s.type)?(s=Vp,Vp=null,qt=s):qt=c):qt=Un?zr(s.stateNode.nextSibling):null;return!0}function rs(){qt=Un=null,ut=!1}function km(){var s=yi;return s!==null&&(hr===null?hr=s:hr.push.apply(hr,s),yi=null),s}function Ll(s){yi===null?yi=[s]:yi.push(s)}var Nm=L(null),as=null,Ra=null;function xi(s,c,f){Z(Nm,c._currentValue),c._currentValue=f}function Ma(s){s._currentValue=Nm.current,O(Nm)}function Cm(s,c,f){for(;s!==null;){var p=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),s===f)break;s=s.return}}function Em(s,c,f,p){var w=s.child;for(w!==null&&(w.return=s);w!==null;){var S=w.dependencies;if(S!==null){var A=w.child;S=S.firstContext;e:for(;S!==null;){var M=S;S=w;for(var G=0;G<c.length;G++)if(M.context===c[G]){S.lanes|=f,M=S.alternate,M!==null&&(M.lanes|=f),Cm(S.return,f,s),p||(A=null);break e}S=M.next}}else if(w.tag===18){if(A=w.return,A===null)throw Error(r(341));A.lanes|=f,S=A.alternate,S!==null&&(S.lanes|=f),Cm(A,f,s),A=null}else A=w.child;if(A!==null)A.return=w;else for(A=w;A!==null;){if(A===s){A=null;break}if(w=A.sibling,w!==null){w.return=A.return,A=w;break}A=A.return}w=A}}function lo(s,c,f,p){s=null;for(var w=c,S=!1;w!==null;){if(!S){if((w.flags&524288)!==0)S=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var A=w.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var M=w.type;br(w.pendingProps.value,A.value)||(s!==null?s.push(M):s=[M])}}else if(w===me.current){if(A=w.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(s!==null?s.push(uc):s=[uc])}w=w.return}s!==null&&Em(c,s,f,p),c.flags|=262144}function Tu(s){for(s=s.firstContext;s!==null;){if(!br(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function is(s){as=s,Ra=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Bn(s){return fw(as,s)}function Au(s,c){return as===null&&is(s),fw(s,c)}function fw(s,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Ra===null){if(s===null)throw Error(r(308));Ra=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Ra=Ra.next=c;return f}var qD=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(f,p){s.push(p)}};this.abort=function(){c.aborted=!0,s.forEach(function(f){return f()})}},zD=t.unstable_scheduleCallback,GD=t.unstable_NormalPriority,dn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tm(){return{controller:new qD,data:new Map,refCount:0}}function Ul(s){s.refCount--,s.refCount===0&&zD(GD,function(){s.controller.abort()})}var Bl=null,Am=0,co=0,uo=null;function FD(s,c){if(Bl===null){var f=Bl=[];Am=0,co=Ip(),uo={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Am++,c.then(hw,hw),c}function hw(){if(--Am===0&&Bl!==null){uo!==null&&(uo.status="fulfilled");var s=Bl;Bl=null,co=0,uo=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function HD(s,c){var f=[],p={status:"pending",value:null,reason:null,then:function(w){f.push(w)}};return s.then(function(){p.status="fulfilled",p.value=c;for(var w=0;w<f.length;w++)(0,f[w])(c)},function(w){for(p.status="rejected",p.reason=w,w=0;w<f.length;w++)(0,f[w])(void 0)}),p}var mw=q.S;q.S=function(s,c){XS=Ce(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&FD(s,c),mw!==null&&mw(s,c)};var ss=L(null);function jm(){var s=ss.current;return s!==null?s:Rt.pooledCache}function ju(s,c){c===null?Z(ss,ss.current):Z(ss,c.pool)}function pw(){var s=jm();return s===null?null:{parent:dn._currentValue,pool:s}}var fo=Error(r(460)),Pm=Error(r(474)),Pu=Error(r(542)),Iu={then:function(){}};function gw(s){return s=s.status,s==="fulfilled"||s==="rejected"}function yw(s,c,f){switch(f=s[f],f===void 0?s.push(c):f!==c&&(c.then(Aa,Aa),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,xw(s),s;default:if(typeof c.status=="string")c.then(Aa,Aa);else{if(s=Rt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=c,s.status="pending",s.then(function(p){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=p}},function(p){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,xw(s),s}throw ls=c,fo}}function os(s){try{var c=s._init;return c(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(ls=f,fo):f}}var ls=null;function bw(){if(ls===null)throw Error(r(459));var s=ls;return ls=null,s}function xw(s){if(s===fo||s===Pu)throw Error(r(483))}var ho=null,$l=0;function Ru(s){var c=$l;return $l+=1,ho===null&&(ho=[]),yw(ho,s,c)}function ql(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function Mu(s,c){throw c.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(c),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function vw(s){function c(ee,W){if(s){var ne=ee.deletions;ne===null?(ee.deletions=[W],ee.flags|=16):ne.push(W)}}function f(ee,W){if(!s)return null;for(;W!==null;)c(ee,W),W=W.sibling;return null}function p(ee){for(var W=new Map;ee!==null;)ee.key!==null?W.set(ee.key,ee):W.set(ee.index,ee),ee=ee.sibling;return W}function w(ee,W){return ee=Pa(ee,W),ee.index=0,ee.sibling=null,ee}function S(ee,W,ne){return ee.index=ne,s?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<W?(ee.flags|=67108866,W):ne):(ee.flags|=67108866,W)):(ee.flags|=1048576,W)}function A(ee){return s&&ee.alternate===null&&(ee.flags|=67108866),ee}function M(ee,W,ne,ge){return W===null||W.tag!==6?(W=xm(ne,ee.mode,ge),W.return=ee,W):(W=w(W,ne),W.return=ee,W)}function G(ee,W,ne,ge){var qe=ne.type;return qe===C?he(ee,W,ne.props.children,ge,ne.key):W!==null&&(W.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===$&&os(qe)===W.type)?(W=w(W,ne.props),ql(W,ne),W.return=ee,W):(W=Cu(ne.type,ne.key,ne.props,null,ee.mode,ge),ql(W,ne),W.return=ee,W)}function re(ee,W,ne,ge){return W===null||W.tag!==4||W.stateNode.containerInfo!==ne.containerInfo||W.stateNode.implementation!==ne.implementation?(W=vm(ne,ee.mode,ge),W.return=ee,W):(W=w(W,ne.children||[]),W.return=ee,W)}function he(ee,W,ne,ge,qe){return W===null||W.tag!==7?(W=ns(ne,ee.mode,ge,qe),W.return=ee,W):(W=w(W,ne),W.return=ee,W)}function be(ee,W,ne){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=xm(""+W,ee.mode,ne),W.return=ee,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return ne=Cu(W.type,W.key,W.props,null,ee.mode,ne),ql(ne,W),ne.return=ee,ne;case k:return W=vm(W,ee.mode,ne),W.return=ee,W;case $:return W=os(W),be(ee,W,ne)}if(Y(W)||V(W))return W=ns(W,ee.mode,ne,null),W.return=ee,W;if(typeof W.then=="function")return be(ee,Ru(W),ne);if(W.$$typeof===E)return be(ee,Au(ee,W),ne);Mu(ee,W)}return null}function se(ee,W,ne,ge){var qe=W!==null?W.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return qe!==null?null:M(ee,W,""+ne,ge);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case v:return ne.key===qe?G(ee,W,ne,ge):null;case k:return ne.key===qe?re(ee,W,ne,ge):null;case $:return ne=os(ne),se(ee,W,ne,ge)}if(Y(ne)||V(ne))return qe!==null?null:he(ee,W,ne,ge,null);if(typeof ne.then=="function")return se(ee,W,Ru(ne),ge);if(ne.$$typeof===E)return se(ee,W,Au(ee,ne),ge);Mu(ee,ne)}return null}function le(ee,W,ne,ge,qe){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ee=ee.get(ne)||null,M(W,ee,""+ge,qe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:return ee=ee.get(ge.key===null?ne:ge.key)||null,G(W,ee,ge,qe);case k:return ee=ee.get(ge.key===null?ne:ge.key)||null,re(W,ee,ge,qe);case $:return ge=os(ge),le(ee,W,ne,ge,qe)}if(Y(ge)||V(ge))return ee=ee.get(ne)||null,he(W,ee,ge,qe,null);if(typeof ge.then=="function")return le(ee,W,ne,Ru(ge),qe);if(ge.$$typeof===E)return le(ee,W,ne,Au(W,ge),qe);Mu(W,ge)}return null}function Ie(ee,W,ne,ge){for(var qe=null,mt=null,Me=W,tt=W=0,ot=null;Me!==null&&tt<ne.length;tt++){Me.index>tt?(ot=Me,Me=null):ot=Me.sibling;var pt=se(ee,Me,ne[tt],ge);if(pt===null){Me===null&&(Me=ot);break}s&&Me&&pt.alternate===null&&c(ee,Me),W=S(pt,W,tt),mt===null?qe=pt:mt.sibling=pt,mt=pt,Me=ot}if(tt===ne.length)return f(ee,Me),ut&&Ia(ee,tt),qe;if(Me===null){for(;tt<ne.length;tt++)Me=be(ee,ne[tt],ge),Me!==null&&(W=S(Me,W,tt),mt===null?qe=Me:mt.sibling=Me,mt=Me);return ut&&Ia(ee,tt),qe}for(Me=p(Me);tt<ne.length;tt++)ot=le(Me,ee,tt,ne[tt],ge),ot!==null&&(s&&ot.alternate!==null&&Me.delete(ot.key===null?tt:ot.key),W=S(ot,W,tt),mt===null?qe=ot:mt.sibling=ot,mt=ot);return s&&Me.forEach(function(Li){return c(ee,Li)}),ut&&Ia(ee,tt),qe}function ze(ee,W,ne,ge){if(ne==null)throw Error(r(151));for(var qe=null,mt=null,Me=W,tt=W=0,ot=null,pt=ne.next();Me!==null&&!pt.done;tt++,pt=ne.next()){Me.index>tt?(ot=Me,Me=null):ot=Me.sibling;var Li=se(ee,Me,pt.value,ge);if(Li===null){Me===null&&(Me=ot);break}s&&Me&&Li.alternate===null&&c(ee,Me),W=S(Li,W,tt),mt===null?qe=Li:mt.sibling=Li,mt=Li,Me=ot}if(pt.done)return f(ee,Me),ut&&Ia(ee,tt),qe;if(Me===null){for(;!pt.done;tt++,pt=ne.next())pt=be(ee,pt.value,ge),pt!==null&&(W=S(pt,W,tt),mt===null?qe=pt:mt.sibling=pt,mt=pt);return ut&&Ia(ee,tt),qe}for(Me=p(Me);!pt.done;tt++,pt=ne.next())pt=le(Me,ee,tt,pt.value,ge),pt!==null&&(s&&pt.alternate!==null&&Me.delete(pt.key===null?tt:pt.key),W=S(pt,W,tt),mt===null?qe=pt:mt.sibling=pt,mt=pt);return s&&Me.forEach(function(n4){return c(ee,n4)}),ut&&Ia(ee,tt),qe}function jt(ee,W,ne,ge){if(typeof ne=="object"&&ne!==null&&ne.type===C&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case v:e:{for(var qe=ne.key;W!==null;){if(W.key===qe){if(qe=ne.type,qe===C){if(W.tag===7){f(ee,W.sibling),ge=w(W,ne.props.children),ge.return=ee,ee=ge;break e}}else if(W.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===$&&os(qe)===W.type){f(ee,W.sibling),ge=w(W,ne.props),ql(ge,ne),ge.return=ee,ee=ge;break e}f(ee,W);break}else c(ee,W);W=W.sibling}ne.type===C?(ge=ns(ne.props.children,ee.mode,ge,ne.key),ge.return=ee,ee=ge):(ge=Cu(ne.type,ne.key,ne.props,null,ee.mode,ge),ql(ge,ne),ge.return=ee,ee=ge)}return A(ee);case k:e:{for(qe=ne.key;W!==null;){if(W.key===qe)if(W.tag===4&&W.stateNode.containerInfo===ne.containerInfo&&W.stateNode.implementation===ne.implementation){f(ee,W.sibling),ge=w(W,ne.children||[]),ge.return=ee,ee=ge;break e}else{f(ee,W);break}else c(ee,W);W=W.sibling}ge=vm(ne,ee.mode,ge),ge.return=ee,ee=ge}return A(ee);case $:return ne=os(ne),jt(ee,W,ne,ge)}if(Y(ne))return Ie(ee,W,ne,ge);if(V(ne)){if(qe=V(ne),typeof qe!="function")throw Error(r(150));return ne=qe.call(ne),ze(ee,W,ne,ge)}if(typeof ne.then=="function")return jt(ee,W,Ru(ne),ge);if(ne.$$typeof===E)return jt(ee,W,Au(ee,ne),ge);Mu(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,W!==null&&W.tag===6?(f(ee,W.sibling),ge=w(W,ne),ge.return=ee,ee=ge):(f(ee,W),ge=xm(ne,ee.mode,ge),ge.return=ee,ee=ge),A(ee)):f(ee,W)}return function(ee,W,ne,ge){try{$l=0;var qe=jt(ee,W,ne,ge);return ho=null,qe}catch(Me){if(Me===fo||Me===Pu)throw Me;var mt=xr(29,Me,null,ee.mode);return mt.lanes=ge,mt.return=ee,mt}finally{}}}var cs=vw(!0),ww=vw(!1),vi=!1;function Im(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rm(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function wi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Si(s,c,f){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(xt&2)!==0){var w=p.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),p.pending=c,c=Nu(s),aw(s,null,f),c}return ku(s,p,c,f),Nu(s)}function zl(s,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var p=c.lanes;p&=s.pendingLanes,f|=p,c.lanes=f,$t(s,f)}}function Mm(s,c){var f=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var w=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var A={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?w=S=A:S=S.next=A,f=f.next}while(f!==null);S===null?w=S=c:S=S.next=c}else w=S=c;f={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:p.shared,callbacks:p.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=c:s.next=c,f.lastBaseUpdate=c}var Dm=!1;function Gl(){if(Dm){var s=uo;if(s!==null)throw s}}function Fl(s,c,f,p){Dm=!1;var w=s.updateQueue;vi=!1;var S=w.firstBaseUpdate,A=w.lastBaseUpdate,M=w.shared.pending;if(M!==null){w.shared.pending=null;var G=M,re=G.next;G.next=null,A===null?S=re:A.next=re,A=G;var he=s.alternate;he!==null&&(he=he.updateQueue,M=he.lastBaseUpdate,M!==A&&(M===null?he.firstBaseUpdate=re:M.next=re,he.lastBaseUpdate=G))}if(S!==null){var be=w.baseState;A=0,he=re=G=null,M=S;do{var se=M.lane&-536870913,le=se!==M.lane;if(le?(st&se)===se:(p&se)===se){se!==0&&se===co&&(Dm=!0),he!==null&&(he=he.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ie=s,ze=M;se=c;var jt=f;switch(ze.tag){case 1:if(Ie=ze.payload,typeof Ie=="function"){be=Ie.call(jt,be,se);break e}be=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=ze.payload,se=typeof Ie=="function"?Ie.call(jt,be,se):Ie,se==null)break e;be=g({},be,se);break e;case 2:vi=!0}}se=M.callback,se!==null&&(s.flags|=64,le&&(s.flags|=8192),le=w.callbacks,le===null?w.callbacks=[se]:le.push(se))}else le={lane:se,tag:M.tag,payload:M.payload,callback:M.callback,next:null},he===null?(re=he=le,G=be):he=he.next=le,A|=se;if(M=M.next,M===null){if(M=w.shared.pending,M===null)break;le=M,M=le.next,le.next=null,w.lastBaseUpdate=le,w.shared.pending=null}}while(!0);he===null&&(G=be),w.baseState=G,w.firstBaseUpdate=re,w.lastBaseUpdate=he,S===null&&(w.shared.lanes=0),Ei|=A,s.lanes=A,s.memoizedState=be}}function Sw(s,c){if(typeof s!="function")throw Error(r(191,s));s.call(c)}function _w(s,c){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)Sw(f[s],c)}var mo=L(null),Du=L(0);function kw(s,c){s=Ga,Z(Du,s),Z(mo,c),Ga=s|c.baseLanes}function Om(){Z(Du,Ga),Z(mo,mo.current)}function Lm(){Ga=Du.current,O(mo),O(Du)}var vr=L(null),qr=null;function _i(s){var c=s.alternate;Z(an,an.current&1),Z(vr,s),qr===null&&(c===null||mo.current!==null||c.memoizedState!==null)&&(qr=s)}function Um(s){Z(an,an.current),Z(vr,s),qr===null&&(qr=s)}function Nw(s){s.tag===22?(Z(an,an.current),Z(vr,s),qr===null&&(qr=s)):ki()}function ki(){Z(an,an.current),Z(vr,vr.current)}function wr(s){O(vr),qr===s&&(qr=null),O(an)}var an=L(0);function Ou(s){for(var c=s;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Fp(f)||Hp(f)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Da=0,et=null,Tt=null,fn=null,Lu=!1,po=!1,us=!1,Uu=0,Hl=0,go=null,VD=0;function en(){throw Error(r(321))}function Bm(s,c){if(c===null)return!1;for(var f=0;f<c.length&&f<s.length;f++)if(!br(s[f],c[f]))return!1;return!0}function $m(s,c,f,p,w,S){return Da=S,et=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,q.H=s===null||s.memoizedState===null?lS:tp,us=!1,S=f(p,w),us=!1,po&&(S=Ew(c,f,p,w)),Cw(s),S}function Cw(s){q.H=Kl;var c=Tt!==null&&Tt.next!==null;if(Da=0,fn=Tt=et=null,Lu=!1,Hl=0,go=null,c)throw Error(r(300));s===null||hn||(s=s.dependencies,s!==null&&Tu(s)&&(hn=!0))}function Ew(s,c,f,p){et=s;var w=0;do{if(po&&(go=null),Hl=0,po=!1,25<=w)throw Error(r(301));if(w+=1,fn=Tt=null,s.updateQueue!=null){var S=s.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}q.H=cS,S=c(f,p)}while(po);return S}function WD(){var s=q.H,c=s.useState()[0];return c=typeof c.then=="function"?Vl(c):c,s=s.useState()[0],(Tt!==null?Tt.memoizedState:null)!==s&&(et.flags|=1024),c}function qm(){var s=Uu!==0;return Uu=0,s}function zm(s,c,f){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~f}function Gm(s){if(Lu){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}Lu=!1}Da=0,fn=Tt=et=null,po=!1,Hl=Uu=0,go=null}function ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?et.memoizedState=fn=s:fn=fn.next=s,fn}function sn(){if(Tt===null){var s=et.alternate;s=s!==null?s.memoizedState:null}else s=Tt.next;var c=fn===null?et.memoizedState:fn.next;if(c!==null)fn=c,Tt=s;else{if(s===null)throw et.alternate===null?Error(r(467)):Error(r(310));Tt=s,s={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},fn===null?et.memoizedState=fn=s:fn=fn.next=s}return fn}function Bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(s){var c=Hl;return Hl+=1,go===null&&(go=[]),s=yw(go,s,c),c=et,(fn===null?c.memoizedState:fn.next)===null&&(c=c.alternate,q.H=c===null||c.memoizedState===null?lS:tp),s}function $u(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Vl(s);if(s.$$typeof===E)return Bn(s)}throw Error(r(438,String(s)))}function Fm(s){var c=null,f=et.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var p=et.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Bu(),et.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(s),p=0;p<s;p++)f[p]=z;return c.index++,f}function Oa(s,c){return typeof c=="function"?c(s):c}function qu(s){var c=sn();return Hm(c,Tt,s)}function Hm(s,c,f){var p=s.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var w=s.baseQueue,S=p.pending;if(S!==null){if(w!==null){var A=w.next;w.next=S.next,S.next=A}c.baseQueue=w=S,p.pending=null}if(S=s.baseState,w===null)s.memoizedState=S;else{c=w.next;var M=A=null,G=null,re=c,he=!1;do{var be=re.lane&-536870913;if(be!==re.lane?(st&be)===be:(Da&be)===be){var se=re.revertLane;if(se===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),be===co&&(he=!0);else if((Da&se)===se){re=re.next,se===co&&(he=!0);continue}else be={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(M=G=be,A=S):G=G.next=be,et.lanes|=se,Ei|=se;be=re.action,us&&f(S,be),S=re.hasEagerState?re.eagerState:f(S,be)}else se={lane:be,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(M=G=se,A=S):G=G.next=se,et.lanes|=be,Ei|=be;re=re.next}while(re!==null&&re!==c);if(G===null?A=S:G.next=M,!br(S,s.memoizedState)&&(hn=!0,he&&(f=uo,f!==null)))throw f;s.memoizedState=S,s.baseState=A,s.baseQueue=G,p.lastRenderedState=S}return w===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function Vm(s){var c=sn(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var p=f.dispatch,w=f.pending,S=c.memoizedState;if(w!==null){f.pending=null;var A=w=w.next;do S=s(S,A.action),A=A.next;while(A!==w);br(S,c.memoizedState)||(hn=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),f.lastRenderedState=S}return[S,p]}function Tw(s,c,f){var p=et,w=sn(),S=ut;if(S){if(f===void 0)throw Error(r(407));f=f()}else f=c();var A=!br((Tt||w).memoizedState,f);if(A&&(w.memoizedState=f,hn=!0),w=w.queue,Ym(Pw.bind(null,p,w,s),[s]),w.getSnapshot!==c||A||fn!==null&&fn.memoizedState.tag&1){if(p.flags|=2048,yo(9,{destroy:void 0},jw.bind(null,p,w,f,c),null),Rt===null)throw Error(r(349));S||(Da&127)!==0||Aw(p,c,f)}return f}function Aw(s,c,f){s.flags|=16384,s={getSnapshot:c,value:f},c=et.updateQueue,c===null?(c=Bu(),et.updateQueue=c,c.stores=[s]):(f=c.stores,f===null?c.stores=[s]:f.push(s))}function jw(s,c,f,p){c.value=f,c.getSnapshot=p,Iw(c)&&Rw(s)}function Pw(s,c,f){return f(function(){Iw(c)&&Rw(s)})}function Iw(s){var c=s.getSnapshot;s=s.value;try{var f=c();return!br(s,f)}catch{return!0}}function Rw(s){var c=ts(s,2);c!==null&&mr(c,s,2)}function Wm(s){var c=ir();if(typeof s=="function"){var f=s;if(s=f(),us){de(!0);try{f()}finally{de(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:s},c}function Mw(s,c,f,p){return s.baseState=f,Hm(s,Tt,typeof p=="function"?p:Oa)}function KD(s,c,f,p,w){if(Fu(s))throw Error(r(485));if(s=c.action,s!==null){var S={payload:w,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){S.listeners.push(A)}};q.T!==null?f(!0):S.isTransition=!1,p(S),f=c.pending,f===null?(S.next=c.pending=S,Dw(c,S)):(S.next=f.next,c.pending=f.next=S)}}function Dw(s,c){var f=c.action,p=c.payload,w=s.state;if(c.isTransition){var S=q.T,A={};q.T=A;try{var M=f(w,p),G=q.S;G!==null&&G(A,M),Ow(s,c,M)}catch(re){Km(s,c,re)}finally{S!==null&&A.types!==null&&(S.types=A.types),q.T=S}}else try{S=f(w,p),Ow(s,c,S)}catch(re){Km(s,c,re)}}function Ow(s,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){Lw(s,c,p)},function(p){return Km(s,c,p)}):Lw(s,c,f)}function Lw(s,c,f){c.status="fulfilled",c.value=f,Uw(c),s.state=f,c=s.pending,c!==null&&(f=c.next,f===c?s.pending=null:(f=f.next,c.next=f,Dw(s,f)))}function Km(s,c,f){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=f,Uw(c),c=c.next;while(c!==p)}s.action=null}function Uw(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function Bw(s,c){return c}function $w(s,c){if(ut){var f=Rt.formState;if(f!==null){e:{var p=et;if(ut){if(qt){t:{for(var w=qt,S=$r;w.nodeType!==8;){if(!S){w=null;break t}if(w=zr(w.nextSibling),w===null){w=null;break t}}S=w.data,w=S==="F!"||S==="F"?w:null}if(w){qt=zr(w.nextSibling),p=w.data==="F!";break e}}bi(p)}p=!1}p&&(c=f[0])}}return f=ir(),f.memoizedState=f.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bw,lastRenderedState:c},f.queue=p,f=iS.bind(null,et,p),p.dispatch=f,p=Wm(!1),S=ep.bind(null,et,!1,p.queue),p=ir(),w={state:c,dispatch:null,action:s,pending:null},p.queue=w,f=KD.bind(null,et,w,S,f),w.dispatch=f,p.memoizedState=s,[c,f,!1]}function qw(s){var c=sn();return zw(c,Tt,s)}function zw(s,c,f){if(c=Hm(s,c,Bw)[0],s=qu(Oa)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=Vl(c)}catch(A){throw A===fo?Pu:A}else p=c;c=sn();var w=c.queue,S=w.dispatch;return f!==c.memoizedState&&(et.flags|=2048,yo(9,{destroy:void 0},YD.bind(null,w,f),null)),[p,S,s]}function YD(s,c){s.action=c}function Gw(s){var c=sn(),f=Tt;if(f!==null)return zw(c,f,s);sn(),c=c.memoizedState,f=sn();var p=f.queue.dispatch;return f.memoizedState=s,[c,p,!1]}function yo(s,c,f,p){return s={tag:s,create:f,deps:p,inst:c,next:null},c=et.updateQueue,c===null&&(c=Bu(),et.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=s.next=s:(p=f.next,f.next=s,s.next=p,c.lastEffect=s),s}function Fw(){return sn().memoizedState}function zu(s,c,f,p){var w=ir();et.flags|=s,w.memoizedState=yo(1|c,{destroy:void 0},f,p===void 0?null:p)}function Gu(s,c,f,p){var w=sn();p=p===void 0?null:p;var S=w.memoizedState.inst;Tt!==null&&p!==null&&Bm(p,Tt.memoizedState.deps)?w.memoizedState=yo(c,S,f,p):(et.flags|=s,w.memoizedState=yo(1|c,S,f,p))}function Hw(s,c){zu(8390656,8,s,c)}function Ym(s,c){Gu(2048,8,s,c)}function JD(s){et.flags|=4;var c=et.updateQueue;if(c===null)c=Bu(),et.updateQueue=c,c.events=[s];else{var f=c.events;f===null?c.events=[s]:f.push(s)}}function Vw(s){var c=sn().memoizedState;return JD({ref:c,nextImpl:s}),function(){if((xt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function Ww(s,c){return Gu(4,2,s,c)}function Kw(s,c){return Gu(4,4,s,c)}function Yw(s,c){if(typeof c=="function"){s=s();var f=c(s);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function Jw(s,c,f){f=f!=null?f.concat([s]):null,Gu(4,4,Yw.bind(null,c,s),f)}function Jm(){}function Xw(s,c){var f=sn();c=c===void 0?null:c;var p=f.memoizedState;return c!==null&&Bm(c,p[1])?p[0]:(f.memoizedState=[s,c],s)}function Qw(s,c){var f=sn();c=c===void 0?null:c;var p=f.memoizedState;if(c!==null&&Bm(c,p[1]))return p[0];if(p=s(),us){de(!0);try{s()}finally{de(!1)}}return f.memoizedState=[p,c],p}function Xm(s,c,f){return f===void 0||(Da&1073741824)!==0&&(st&261930)===0?s.memoizedState=c:(s.memoizedState=f,s=ZS(),et.lanes|=s,Ei|=s,f)}function Zw(s,c,f,p){return br(f,c)?f:mo.current!==null?(s=Xm(s,f,p),br(s,c)||(hn=!0),s):(Da&42)===0||(Da&1073741824)!==0&&(st&261930)===0?(hn=!0,s.memoizedState=f):(s=ZS(),et.lanes|=s,Ei|=s,c)}function eS(s,c,f,p,w){var S=B.p;B.p=S!==0&&8>S?S:8;var A=q.T,M={};q.T=M,ep(s,!1,c,f);try{var G=w(),re=q.S;if(re!==null&&re(M,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var he=HD(G,p);Wl(s,c,he,kr(s))}else Wl(s,c,p,kr(s))}catch(be){Wl(s,c,{then:function(){},status:"rejected",reason:be},kr())}finally{B.p=S,A!==null&&M.types!==null&&(A.types=M.types),q.T=A}}function XD(){}function Qm(s,c,f,p){if(s.tag!==5)throw Error(r(476));var w=tS(s).queue;eS(s,w,c,ae,f===null?XD:function(){return nS(s),f(p)})}function tS(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:ae},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:f},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function nS(s){var c=tS(s);c.next===null&&(c=s.alternate.memoizedState),Wl(s,c.next.queue,{},kr())}function Zm(){return Bn(uc)}function rS(){return sn().memoizedState}function aS(){return sn().memoizedState}function QD(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var f=kr();s=wi(f);var p=Si(c,s,f);p!==null&&(mr(p,c,f),zl(p,c,f)),c={cache:Tm()},s.payload=c;return}c=c.return}}function ZD(s,c,f){var p=kr();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Fu(s)?sS(c,f):(f=ym(s,c,f,p),f!==null&&(mr(f,s,p),oS(f,c,p)))}function iS(s,c,f){var p=kr();Wl(s,c,f,p)}function Wl(s,c,f,p){var w={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Fu(s))sS(c,w);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var A=c.lastRenderedState,M=S(A,f);if(w.hasEagerState=!0,w.eagerState=M,br(M,A))return ku(s,c,w,0),Rt===null&&_u(),!1}catch{}finally{}if(f=ym(s,c,w,p),f!==null)return mr(f,s,p),oS(f,c,p),!0}return!1}function ep(s,c,f,p){if(p={lane:2,revertLane:Ip(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Fu(s)){if(c)throw Error(r(479))}else c=ym(s,f,p,2),c!==null&&mr(c,s,2)}function Fu(s){var c=s.alternate;return s===et||c!==null&&c===et}function sS(s,c){po=Lu=!0;var f=s.pending;f===null?c.next=c:(c.next=f.next,f.next=c),s.pending=c}function oS(s,c,f){if((f&4194048)!==0){var p=c.lanes;p&=s.pendingLanes,f|=p,c.lanes=f,$t(s,f)}}var Kl={readContext:Bn,use:$u,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};Kl.useEffectEvent=en;var lS={readContext:Bn,use:$u,useCallback:function(s,c){return ir().memoizedState=[s,c===void 0?null:c],s},useContext:Bn,useEffect:Hw,useImperativeHandle:function(s,c,f){f=f!=null?f.concat([s]):null,zu(4194308,4,Yw.bind(null,c,s),f)},useLayoutEffect:function(s,c){return zu(4194308,4,s,c)},useInsertionEffect:function(s,c){zu(4,2,s,c)},useMemo:function(s,c){var f=ir();c=c===void 0?null:c;var p=s();if(us){de(!0);try{s()}finally{de(!1)}}return f.memoizedState=[p,c],p},useReducer:function(s,c,f){var p=ir();if(f!==void 0){var w=f(c);if(us){de(!0);try{f(c)}finally{de(!1)}}}else w=c;return p.memoizedState=p.baseState=w,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:w},p.queue=s,s=s.dispatch=ZD.bind(null,et,s),[p.memoizedState,s]},useRef:function(s){var c=ir();return s={current:s},c.memoizedState=s},useState:function(s){s=Wm(s);var c=s.queue,f=iS.bind(null,et,c);return c.dispatch=f,[s.memoizedState,f]},useDebugValue:Jm,useDeferredValue:function(s,c){var f=ir();return Xm(f,s,c)},useTransition:function(){var s=Wm(!1);return s=eS.bind(null,et,s.queue,!0,!1),ir().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,f){var p=et,w=ir();if(ut){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),Rt===null)throw Error(r(349));(st&127)!==0||Aw(p,c,f)}w.memoizedState=f;var S={value:f,getSnapshot:c};return w.queue=S,Hw(Pw.bind(null,p,S,s),[s]),p.flags|=2048,yo(9,{destroy:void 0},jw.bind(null,p,S,f,c),null),f},useId:function(){var s=ir(),c=Rt.identifierPrefix;if(ut){var f=ya,p=ga;f=(p&~(1<<32-ke(p)-1)).toString(32)+f,c="_"+c+"R_"+f,f=Uu++,0<f&&(c+="H"+f.toString(32)),c+="_"}else f=VD++,c="_"+c+"r_"+f.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:Zm,useFormState:$w,useActionState:$w,useOptimistic:function(s){var c=ir();c.memoizedState=c.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=ep.bind(null,et,!0,f),f.dispatch=c,[s,c]},useMemoCache:Fm,useCacheRefresh:function(){return ir().memoizedState=QD.bind(null,et)},useEffectEvent:function(s){var c=ir(),f={impl:s};return c.memoizedState=f,function(){if((xt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},tp={readContext:Bn,use:$u,useCallback:Xw,useContext:Bn,useEffect:Ym,useImperativeHandle:Jw,useInsertionEffect:Ww,useLayoutEffect:Kw,useMemo:Qw,useReducer:qu,useRef:Fw,useState:function(){return qu(Oa)},useDebugValue:Jm,useDeferredValue:function(s,c){var f=sn();return Zw(f,Tt.memoizedState,s,c)},useTransition:function(){var s=qu(Oa)[0],c=sn().memoizedState;return[typeof s=="boolean"?s:Vl(s),c]},useSyncExternalStore:Tw,useId:rS,useHostTransitionStatus:Zm,useFormState:qw,useActionState:qw,useOptimistic:function(s,c){var f=sn();return Mw(f,Tt,s,c)},useMemoCache:Fm,useCacheRefresh:aS};tp.useEffectEvent=Vw;var cS={readContext:Bn,use:$u,useCallback:Xw,useContext:Bn,useEffect:Ym,useImperativeHandle:Jw,useInsertionEffect:Ww,useLayoutEffect:Kw,useMemo:Qw,useReducer:Vm,useRef:Fw,useState:function(){return Vm(Oa)},useDebugValue:Jm,useDeferredValue:function(s,c){var f=sn();return Tt===null?Xm(f,s,c):Zw(f,Tt.memoizedState,s,c)},useTransition:function(){var s=Vm(Oa)[0],c=sn().memoizedState;return[typeof s=="boolean"?s:Vl(s),c]},useSyncExternalStore:Tw,useId:rS,useHostTransitionStatus:Zm,useFormState:Gw,useActionState:Gw,useOptimistic:function(s,c){var f=sn();return Tt!==null?Mw(f,Tt,s,c):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:Fm,useCacheRefresh:aS};cS.useEffectEvent=Vw;function np(s,c,f,p){c=s.memoizedState,f=f(p,c),f=f==null?c:g({},c,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var rp={enqueueSetState:function(s,c,f){s=s._reactInternals;var p=kr(),w=wi(p);w.payload=c,f!=null&&(w.callback=f),c=Si(s,w,p),c!==null&&(mr(c,s,p),zl(c,s,p))},enqueueReplaceState:function(s,c,f){s=s._reactInternals;var p=kr(),w=wi(p);w.tag=1,w.payload=c,f!=null&&(w.callback=f),c=Si(s,w,p),c!==null&&(mr(c,s,p),zl(c,s,p))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var f=kr(),p=wi(f);p.tag=2,c!=null&&(p.callback=c),c=Si(s,p,f),c!==null&&(mr(c,s,f),zl(c,s,f))}};function uS(s,c,f,p,w,S,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,S,A):c.prototype&&c.prototype.isPureReactComponent?!Ml(f,p)||!Ml(w,S):!0}function dS(s,c,f,p){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,p),c.state!==s&&rp.enqueueReplaceState(c,c.state,null)}function ds(s,c){var f=c;if("ref"in c){f={};for(var p in c)p!=="ref"&&(f[p]=c[p])}if(s=s.defaultProps){f===c&&(f=g({},f));for(var w in s)f[w]===void 0&&(f[w]=s[w])}return f}function fS(s){Su(s)}function hS(s){console.error(s)}function mS(s){Su(s)}function Hu(s,c){try{var f=s.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function pS(s,c,f){try{var p=s.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function ap(s,c,f){return f=wi(f),f.tag=3,f.payload={element:null},f.callback=function(){Hu(s,c)},f}function gS(s){return s=wi(s),s.tag=3,s}function yS(s,c,f,p){var w=f.type.getDerivedStateFromError;if(typeof w=="function"){var S=p.value;s.payload=function(){return w(S)},s.callback=function(){pS(c,f,p)}}var A=f.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){pS(c,f,p),typeof w!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var M=p.stack;this.componentDidCatch(p.value,{componentStack:M!==null?M:""})})}function eO(s,c,f,p,w){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=f.alternate,c!==null&&lo(c,f,w,!0),f=vr.current,f!==null){switch(f.tag){case 31:case 13:return qr===null?rd():f.alternate===null&&tn===0&&(tn=3),f.flags&=-257,f.flags|=65536,f.lanes=w,p===Iu?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([p]):c.add(p),Ap(s,p,w)),!1;case 22:return f.flags|=65536,p===Iu?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([p]):f.add(p)),Ap(s,p,w)),!1}throw Error(r(435,f.tag))}return Ap(s,p,w),rd(),!1}if(ut)return c=vr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,p!==_m&&(s=Error(r(422),{cause:p}),Ll(Lr(s,f)))):(p!==_m&&(c=Error(r(423),{cause:p}),Ll(Lr(c,f))),s=s.current.alternate,s.flags|=65536,w&=-w,s.lanes|=w,p=Lr(p,f),w=ap(s.stateNode,p,w),Mm(s,w),tn!==4&&(tn=2)),!1;var S=Error(r(520),{cause:p});if(S=Lr(S,f),nc===null?nc=[S]:nc.push(S),tn!==4&&(tn=2),c===null)return!0;p=Lr(p,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,s=w&-w,f.lanes|=s,s=ap(f.stateNode,p,s),Mm(f,s),!1;case 1:if(c=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ti===null||!Ti.has(S))))return f.flags|=65536,w&=-w,f.lanes|=w,w=gS(w),yS(w,s,f,p),Mm(f,w),!1}f=f.return}while(f!==null);return!1}var ip=Error(r(461)),hn=!1;function $n(s,c,f,p){c.child=s===null?ww(c,null,f,p):cs(c,s.child,f,p)}function bS(s,c,f,p,w){f=f.render;var S=c.ref;if("ref"in p){var A={};for(var M in p)M!=="ref"&&(A[M]=p[M])}else A=p;return is(c),p=$m(s,c,f,A,S,w),M=qm(),s!==null&&!hn?(zm(s,c,w),La(s,c,w)):(ut&&M&&wm(c),c.flags|=1,$n(s,c,p,w),c.child)}function xS(s,c,f,p,w){if(s===null){var S=f.type;return typeof S=="function"&&!bm(S)&&S.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=S,vS(s,c,S,p,w)):(s=Cu(f.type,null,p,c,c.mode,w),s.ref=c.ref,s.return=c,c.child=s)}if(S=s.child,!hp(s,w)){var A=S.memoizedProps;if(f=f.compare,f=f!==null?f:Ml,f(A,p)&&s.ref===c.ref)return La(s,c,w)}return c.flags|=1,s=Pa(S,p),s.ref=c.ref,s.return=c,c.child=s}function vS(s,c,f,p,w){if(s!==null){var S=s.memoizedProps;if(Ml(S,p)&&s.ref===c.ref)if(hn=!1,c.pendingProps=p=S,hp(s,w))(s.flags&131072)!==0&&(hn=!0);else return c.lanes=s.lanes,La(s,c,w)}return sp(s,c,f,p,w)}function wS(s,c,f,p){var w=p.children,S=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((c.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,s!==null){for(p=c.child=s.child,w=0;p!==null;)w=w|p.lanes|p.childLanes,p=p.sibling;p=w&~S}else p=0,c.child=null;return SS(s,c,S,f,p)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&ju(c,S!==null?S.cachePool:null),S!==null?kw(c,S):Om(),Nw(c);else return p=c.lanes=536870912,SS(s,c,S!==null?S.baseLanes|f:f,f,p)}else S!==null?(ju(c,S.cachePool),kw(c,S),ki(),c.memoizedState=null):(s!==null&&ju(c,null),Om(),ki());return $n(s,c,w,f),c.child}function Yl(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function SS(s,c,f,p,w){var S=jm();return S=S===null?null:{parent:dn._currentValue,pool:S},c.memoizedState={baseLanes:f,cachePool:S},s!==null&&ju(c,null),Om(),Nw(c),s!==null&&lo(s,c,p,!0),c.childLanes=w,null}function Vu(s,c){return c=Ku({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function _S(s,c,f){return cs(c,s.child,null,f),s=Vu(c,c.pendingProps),s.flags|=2,wr(c),c.memoizedState=null,s}function tO(s,c,f){var p=c.pendingProps,w=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(ut){if(p.mode==="hidden")return s=Vu(c,p),c.lanes=536870912,Yl(null,s);if(Um(c),(s=qt)?(s=D_(s,$r),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:gi!==null?{id:ga,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},f=sw(s),f.return=c,c.child=f,Un=c,qt=null)):s=null,s===null)throw bi(c);return c.lanes=536870912,null}return Vu(c,p)}var S=s.memoizedState;if(S!==null){var A=S.dehydrated;if(Um(c),w)if(c.flags&256)c.flags&=-257,c=_S(s,c,f);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(r(558));else if(hn||lo(s,c,f,!1),w=(f&s.childLanes)!==0,hn||w){if(p=Rt,p!==null&&(A=Xe(p,f),A!==0&&A!==S.retryLane))throw S.retryLane=A,ts(s,A),mr(p,s,A),ip;rd(),c=_S(s,c,f)}else s=S.treeContext,qt=zr(A.nextSibling),Un=c,ut=!0,yi=null,$r=!1,s!==null&&cw(c,s),c=Vu(c,p),c.flags|=4096;return c}return s=Pa(s.child,{mode:p.mode,children:p.children}),s.ref=c.ref,c.child=s,s.return=c,s}function Wu(s,c){var f=c.ref;if(f===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(c.flags|=4194816)}}function sp(s,c,f,p,w){return is(c),f=$m(s,c,f,p,void 0,w),p=qm(),s!==null&&!hn?(zm(s,c,w),La(s,c,w)):(ut&&p&&wm(c),c.flags|=1,$n(s,c,f,w),c.child)}function kS(s,c,f,p,w,S){return is(c),c.updateQueue=null,f=Ew(c,p,f,w),Cw(s),p=qm(),s!==null&&!hn?(zm(s,c,S),La(s,c,S)):(ut&&p&&wm(c),c.flags|=1,$n(s,c,f,S),c.child)}function NS(s,c,f,p,w){if(is(c),c.stateNode===null){var S=ao,A=f.contextType;typeof A=="object"&&A!==null&&(S=Bn(A)),S=new f(p,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=rp,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=p,S.state=c.memoizedState,S.refs={},Im(c),A=f.contextType,S.context=typeof A=="object"&&A!==null?Bn(A):ao,S.state=c.memoizedState,A=f.getDerivedStateFromProps,typeof A=="function"&&(np(c,f,A,p),S.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(A=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),A!==S.state&&rp.enqueueReplaceState(S,S.state,null),Fl(c,p,S,w),Gl(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(s===null){S=c.stateNode;var M=c.memoizedProps,G=ds(f,M);S.props=G;var re=S.context,he=f.contextType;A=ao,typeof he=="object"&&he!==null&&(A=Bn(he));var be=f.getDerivedStateFromProps;he=typeof be=="function"||typeof S.getSnapshotBeforeUpdate=="function",M=c.pendingProps!==M,he||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M||re!==A)&&dS(c,S,p,A),vi=!1;var se=c.memoizedState;S.state=se,Fl(c,p,S,w),Gl(),re=c.memoizedState,M||se!==re||vi?(typeof be=="function"&&(np(c,f,be,p),re=c.memoizedState),(G=vi||uS(c,f,G,p,se,re,A))?(he||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=re),S.props=p,S.state=re,S.context=A,p=G):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{S=c.stateNode,Rm(s,c),A=c.memoizedProps,he=ds(f,A),S.props=he,be=c.pendingProps,se=S.context,re=f.contextType,G=ao,typeof re=="object"&&re!==null&&(G=Bn(re)),M=f.getDerivedStateFromProps,(re=typeof M=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==be||se!==G)&&dS(c,S,p,G),vi=!1,se=c.memoizedState,S.state=se,Fl(c,p,S,w),Gl();var le=c.memoizedState;A!==be||se!==le||vi||s!==null&&s.dependencies!==null&&Tu(s.dependencies)?(typeof M=="function"&&(np(c,f,M,p),le=c.memoizedState),(he=vi||uS(c,f,he,p,se,le,G)||s!==null&&s.dependencies!==null&&Tu(s.dependencies))?(re||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,le,G),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,le,G)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===s.memoizedProps&&se===s.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&se===s.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=le),S.props=p,S.state=le,S.context=G,p=he):(typeof S.componentDidUpdate!="function"||A===s.memoizedProps&&se===s.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&se===s.memoizedState||(c.flags|=1024),p=!1)}return S=p,Wu(s,c),p=(c.flags&128)!==0,S||p?(S=c.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,s!==null&&p?(c.child=cs(c,s.child,null,w),c.child=cs(c,null,f,w)):$n(s,c,f,w),c.memoizedState=S.state,s=c.child):s=La(s,c,w),s}function CS(s,c,f,p){return rs(),c.flags|=256,$n(s,c,f,p),c.child}var op={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lp(s){return{baseLanes:s,cachePool:pw()}}function cp(s,c,f){return s=s!==null?s.childLanes&~f:0,c&&(s|=_r),s}function ES(s,c,f){var p=c.pendingProps,w=!1,S=(c.flags&128)!==0,A;if((A=S)||(A=s!==null&&s.memoizedState===null?!1:(an.current&2)!==0),A&&(w=!0,c.flags&=-129),A=(c.flags&32)!==0,c.flags&=-33,s===null){if(ut){if(w?_i(c):ki(),(s=qt)?(s=D_(s,$r),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:gi!==null?{id:ga,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},f=sw(s),f.return=c,c.child=f,Un=c,qt=null)):s=null,s===null)throw bi(c);return Hp(s)?c.lanes=32:c.lanes=536870912,null}var M=p.children;return p=p.fallback,w?(ki(),w=c.mode,M=Ku({mode:"hidden",children:M},w),p=ns(p,w,f,null),M.return=c,p.return=c,M.sibling=p,c.child=M,p=c.child,p.memoizedState=lp(f),p.childLanes=cp(s,A,f),c.memoizedState=op,Yl(null,p)):(_i(c),up(c,M))}var G=s.memoizedState;if(G!==null&&(M=G.dehydrated,M!==null)){if(S)c.flags&256?(_i(c),c.flags&=-257,c=dp(s,c,f)):c.memoizedState!==null?(ki(),c.child=s.child,c.flags|=128,c=null):(ki(),M=p.fallback,w=c.mode,p=Ku({mode:"visible",children:p.children},w),M=ns(M,w,f,null),M.flags|=2,p.return=c,M.return=c,p.sibling=M,c.child=p,cs(c,s.child,null,f),p=c.child,p.memoizedState=lp(f),p.childLanes=cp(s,A,f),c.memoizedState=op,c=Yl(null,p));else if(_i(c),Hp(M)){if(A=M.nextSibling&&M.nextSibling.dataset,A)var re=A.dgst;A=re,p=Error(r(419)),p.stack="",p.digest=A,Ll({value:p,source:null,stack:null}),c=dp(s,c,f)}else if(hn||lo(s,c,f,!1),A=(f&s.childLanes)!==0,hn||A){if(A=Rt,A!==null&&(p=Xe(A,f),p!==0&&p!==G.retryLane))throw G.retryLane=p,ts(s,p),mr(A,s,p),ip;Fp(M)||rd(),c=dp(s,c,f)}else Fp(M)?(c.flags|=192,c.child=s.child,c=null):(s=G.treeContext,qt=zr(M.nextSibling),Un=c,ut=!0,yi=null,$r=!1,s!==null&&cw(c,s),c=up(c,p.children),c.flags|=4096);return c}return w?(ki(),M=p.fallback,w=c.mode,G=s.child,re=G.sibling,p=Pa(G,{mode:"hidden",children:p.children}),p.subtreeFlags=G.subtreeFlags&65011712,re!==null?M=Pa(re,M):(M=ns(M,w,f,null),M.flags|=2),M.return=c,p.return=c,p.sibling=M,c.child=p,Yl(null,p),p=c.child,M=s.child.memoizedState,M===null?M=lp(f):(w=M.cachePool,w!==null?(G=dn._currentValue,w=w.parent!==G?{parent:G,pool:G}:w):w=pw(),M={baseLanes:M.baseLanes|f,cachePool:w}),p.memoizedState=M,p.childLanes=cp(s,A,f),c.memoizedState=op,Yl(s.child,p)):(_i(c),f=s.child,s=f.sibling,f=Pa(f,{mode:"visible",children:p.children}),f.return=c,f.sibling=null,s!==null&&(A=c.deletions,A===null?(c.deletions=[s],c.flags|=16):A.push(s)),c.child=f,c.memoizedState=null,f)}function up(s,c){return c=Ku({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function Ku(s,c){return s=xr(22,s,null,c),s.lanes=0,s}function dp(s,c,f){return cs(c,s.child,null,f),s=up(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function TS(s,c,f){s.lanes|=c;var p=s.alternate;p!==null&&(p.lanes|=c),Cm(s.return,c,f)}function fp(s,c,f,p,w,S){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:w,treeForkCount:S}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=p,A.tail=f,A.tailMode=w,A.treeForkCount=S)}function AS(s,c,f){var p=c.pendingProps,w=p.revealOrder,S=p.tail;p=p.children;var A=an.current,M=(A&2)!==0;if(M?(A=A&1|2,c.flags|=128):A&=1,Z(an,A),$n(s,c,p,f),p=ut?Ol:0,!M&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&TS(s,f,c);else if(s.tag===19)TS(s,f,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(w){case"forwards":for(f=c.child,w=null;f!==null;)s=f.alternate,s!==null&&Ou(s)===null&&(w=f),f=f.sibling;f=w,f===null?(w=c.child,c.child=null):(w=f.sibling,f.sibling=null),fp(c,!1,w,f,S,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,w=c.child,c.child=null;w!==null;){if(s=w.alternate,s!==null&&Ou(s)===null){c.child=w;break}s=w.sibling,w.sibling=f,f=w,w=s}fp(c,!0,f,null,S,p);break;case"together":fp(c,!1,null,null,void 0,p);break;default:c.memoizedState=null}return c.child}function La(s,c,f){if(s!==null&&(c.dependencies=s.dependencies),Ei|=c.lanes,(f&c.childLanes)===0)if(s!==null){if(lo(s,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(r(153));if(c.child!==null){for(s=c.child,f=Pa(s,s.pendingProps),c.child=f,f.return=c;s.sibling!==null;)s=s.sibling,f=f.sibling=Pa(s,s.pendingProps),f.return=c;f.sibling=null}return c.child}function hp(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&Tu(s)))}function nO(s,c,f){switch(c.tag){case 3:xe(c,c.stateNode.containerInfo),xi(c,dn,s.memoizedState.cache),rs();break;case 27:case 5:we(c);break;case 4:xe(c,c.stateNode.containerInfo);break;case 10:xi(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Um(c),null;break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(_i(c),c.flags|=128,null):(f&c.child.childLanes)!==0?ES(s,c,f):(_i(c),s=La(s,c,f),s!==null?s.sibling:null);_i(c);break;case 19:var w=(s.flags&128)!==0;if(p=(f&c.childLanes)!==0,p||(lo(s,c,f,!1),p=(f&c.childLanes)!==0),w){if(p)return AS(s,c,f);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Z(an,an.current),p)break;return null;case 22:return c.lanes=0,wS(s,c,f,c.pendingProps);case 24:xi(c,dn,s.memoizedState.cache)}return La(s,c,f)}function jS(s,c,f){if(s!==null)if(s.memoizedProps!==c.pendingProps)hn=!0;else{if(!hp(s,f)&&(c.flags&128)===0)return hn=!1,nO(s,c,f);hn=(s.flags&131072)!==0}else hn=!1,ut&&(c.flags&1048576)!==0&&lw(c,Ol,c.index);switch(c.lanes=0,c.tag){case 16:e:{var p=c.pendingProps;if(s=os(c.elementType),c.type=s,typeof s=="function")bm(s)?(p=ds(s,p),c.tag=1,c=NS(null,c,s,p,f)):(c.tag=0,c=sp(null,c,s,p,f));else{if(s!=null){var w=s.$$typeof;if(w===P){c.tag=11,c=bS(null,c,s,p,f);break e}else if(w===D){c.tag=14,c=xS(null,c,s,p,f);break e}}throw c=pe(s)||s,Error(r(306,c,""))}}return c;case 0:return sp(s,c,c.type,c.pendingProps,f);case 1:return p=c.type,w=ds(p,c.pendingProps),NS(s,c,p,w,f);case 3:e:{if(xe(c,c.stateNode.containerInfo),s===null)throw Error(r(387));p=c.pendingProps;var S=c.memoizedState;w=S.element,Rm(s,c),Fl(c,p,null,f);var A=c.memoizedState;if(p=A.cache,xi(c,dn,p),p!==S.cache&&Em(c,[dn],f,!0),Gl(),p=A.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:A.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=CS(s,c,p,f);break e}else if(p!==w){w=Lr(Error(r(424)),c),Ll(w),c=CS(s,c,p,f);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(qt=zr(s.firstChild),Un=c,ut=!0,yi=null,$r=!0,f=ww(c,null,p,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(rs(),p===w){c=La(s,c,f);break e}$n(s,c,p,f)}c=c.child}return c;case 26:return Wu(s,c),s===null?(f=q_(c.type,null,c.pendingProps,null))?c.memoizedState=f:ut||(f=c.type,s=c.pendingProps,p=ud(oe.current).createElement(f),p[St]=c,p[un]=s,qn(p,f,s),In(p),c.stateNode=p):c.memoizedState=q_(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return we(c),s===null&&ut&&(p=c.stateNode=U_(c.type,c.pendingProps,oe.current),Un=c,$r=!0,w=qt,Ii(c.type)?(Vp=w,qt=zr(p.firstChild)):qt=w),$n(s,c,c.pendingProps.children,f),Wu(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&ut&&((w=p=qt)&&(p=IO(p,c.type,c.pendingProps,$r),p!==null?(c.stateNode=p,Un=c,qt=zr(p.firstChild),$r=!1,w=!0):w=!1),w||bi(c)),we(c),w=c.type,S=c.pendingProps,A=s!==null?s.memoizedProps:null,p=S.children,qp(w,S)?p=null:A!==null&&qp(w,A)&&(c.flags|=32),c.memoizedState!==null&&(w=$m(s,c,WD,null,null,f),uc._currentValue=w),Wu(s,c),$n(s,c,p,f),c.child;case 6:return s===null&&ut&&((s=f=qt)&&(f=RO(f,c.pendingProps,$r),f!==null?(c.stateNode=f,Un=c,qt=null,s=!0):s=!1),s||bi(c)),null;case 13:return ES(s,c,f);case 4:return xe(c,c.stateNode.containerInfo),p=c.pendingProps,s===null?c.child=cs(c,null,p,f):$n(s,c,p,f),c.child;case 11:return bS(s,c,c.type,c.pendingProps,f);case 7:return $n(s,c,c.pendingProps,f),c.child;case 8:return $n(s,c,c.pendingProps.children,f),c.child;case 12:return $n(s,c,c.pendingProps.children,f),c.child;case 10:return p=c.pendingProps,xi(c,c.type,p.value),$n(s,c,p.children,f),c.child;case 9:return w=c.type._context,p=c.pendingProps.children,is(c),w=Bn(w),p=p(w),c.flags|=1,$n(s,c,p,f),c.child;case 14:return xS(s,c,c.type,c.pendingProps,f);case 15:return vS(s,c,c.type,c.pendingProps,f);case 19:return AS(s,c,f);case 31:return tO(s,c,f);case 22:return wS(s,c,f,c.pendingProps);case 24:return is(c),p=Bn(dn),s===null?(w=jm(),w===null&&(w=Rt,S=Tm(),w.pooledCache=S,S.refCount++,S!==null&&(w.pooledCacheLanes|=f),w=S),c.memoizedState={parent:p,cache:w},Im(c),xi(c,dn,w)):((s.lanes&f)!==0&&(Rm(s,c),Fl(c,null,null,f),Gl()),w=s.memoizedState,S=c.memoizedState,w.parent!==p?(w={parent:p,cache:p},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),xi(c,dn,p)):(p=S.cache,xi(c,dn,p),p!==w.cache&&Em(c,[dn],f,!0))),$n(s,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Ua(s){s.flags|=4}function mp(s,c,f,p,w){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(w&335544128)===w)if(s.stateNode.complete)s.flags|=8192;else if(r_())s.flags|=8192;else throw ls=Iu,Pm}else s.flags&=-16777217}function PS(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!V_(c))if(r_())s.flags|=8192;else throw ls=Iu,Pm}function Yu(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?Ln():536870912,s.lanes|=c,wo|=c)}function Jl(s,c){if(!ut)switch(s.tailMode){case"hidden":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function zt(s){var c=s.alternate!==null&&s.alternate.child===s.child,f=0,p=0;if(c)for(var w=s.child;w!==null;)f|=w.lanes|w.childLanes,p|=w.subtreeFlags&65011712,p|=w.flags&65011712,w.return=s,w=w.sibling;else for(w=s.child;w!==null;)f|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=s,w=w.sibling;return s.subtreeFlags|=p,s.childLanes=f,c}function rO(s,c,f){var p=c.pendingProps;switch(Sm(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(c),null;case 1:return zt(c),null;case 3:return f=c.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Ma(dn),Q(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(oo(c)?Ua(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,km())),zt(c),null;case 26:var w=c.type,S=c.memoizedState;return s===null?(Ua(c),S!==null?(zt(c),PS(c,S)):(zt(c),mp(c,w,null,p,f))):S?S!==s.memoizedState?(Ua(c),zt(c),PS(c,S)):(zt(c),c.flags&=-16777217):(s=s.memoizedProps,s!==p&&Ua(c),zt(c),mp(c,w,s,p,f)),null;case 27:if(_e(c),f=oe.current,w=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==p&&Ua(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return zt(c),null}s=U.current,oo(c)?uw(c):(s=U_(w,p,f),c.stateNode=s,Ua(c))}return zt(c),null;case 5:if(_e(c),w=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==p&&Ua(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return zt(c),null}if(S=U.current,oo(c))uw(c);else{var A=ud(oe.current);switch(S){case 1:S=A.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:S=A.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":S=A.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":S=A.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":S=A.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof p.is=="string"?A.createElement("select",{is:p.is}):A.createElement("select"),p.multiple?S.multiple=!0:p.size&&(S.size=p.size);break;default:S=typeof p.is=="string"?A.createElement(w,{is:p.is}):A.createElement(w)}}S[St]=c,S[un]=p;e:for(A=c.child;A!==null;){if(A.tag===5||A.tag===6)S.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===c)break e;for(;A.sibling===null;){if(A.return===null||A.return===c)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}c.stateNode=S;e:switch(qn(S,w,p),w){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Ua(c)}}return zt(c),mp(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,f),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==p&&Ua(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(r(166));if(s=oe.current,oo(c)){if(s=c.stateNode,f=c.memoizedProps,p=null,w=Un,w!==null)switch(w.tag){case 27:case 5:p=w.memoizedProps}s[St]=c,s=!!(s.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||E_(s.nodeValue,f)),s||bi(c,!0)}else s=ud(s).createTextNode(p),s[St]=c,c.stateNode=s}return zt(c),null;case 31:if(f=c.memoizedState,s===null||s.memoizedState!==null){if(p=oo(c),f!==null){if(s===null){if(!p)throw Error(r(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[St]=c}else rs(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;zt(c),s=!1}else f=km(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return c.flags&256?(wr(c),c):(wr(c),null);if((c.flags&128)!==0)throw Error(r(558))}return zt(c),null;case 13:if(p=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(w=oo(c),p!==null&&p.dehydrated!==null){if(s===null){if(!w)throw Error(r(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[St]=c}else rs(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;zt(c),w=!1}else w=km(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(wr(c),c):(wr(c),null)}return wr(c),(c.flags&128)!==0?(c.lanes=f,c):(f=p!==null,s=s!==null&&s.memoizedState!==null,f&&(p=c.child,w=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(w=p.alternate.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==w&&(p.flags|=2048)),f!==s&&f&&(c.child.flags|=8192),Yu(c,c.updateQueue),zt(c),null);case 4:return Q(),s===null&&Op(c.stateNode.containerInfo),zt(c),null;case 10:return Ma(c.type),zt(c),null;case 19:if(O(an),p=c.memoizedState,p===null)return zt(c),null;if(w=(c.flags&128)!==0,S=p.rendering,S===null)if(w)Jl(p,!1);else{if(tn!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(S=Ou(s),S!==null){for(c.flags|=128,Jl(p,!1),s=S.updateQueue,c.updateQueue=s,Yu(c,s),c.subtreeFlags=0,s=f,f=c.child;f!==null;)iw(f,s),f=f.sibling;return Z(an,an.current&1|2),ut&&Ia(c,p.treeForkCount),c.child}s=s.sibling}p.tail!==null&&Ce()>ed&&(c.flags|=128,w=!0,Jl(p,!1),c.lanes=4194304)}else{if(!w)if(s=Ou(S),s!==null){if(c.flags|=128,w=!0,s=s.updateQueue,c.updateQueue=s,Yu(c,s),Jl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!S.alternate&&!ut)return zt(c),null}else 2*Ce()-p.renderingStartTime>ed&&f!==536870912&&(c.flags|=128,w=!0,Jl(p,!1),c.lanes=4194304);p.isBackwards?(S.sibling=c.child,c.child=S):(s=p.last,s!==null?s.sibling=S:c.child=S,p.last=S)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=Ce(),s.sibling=null,f=an.current,Z(an,w?f&1|2:f&1),ut&&Ia(c,p.treeForkCount),s):(zt(c),null);case 22:case 23:return wr(c),Lm(),p=c.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(f&536870912)!==0&&(c.flags&128)===0&&(zt(c),c.subtreeFlags&6&&(c.flags|=8192)):zt(c),f=c.updateQueue,f!==null&&Yu(c,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048),s!==null&&O(ss),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Ma(dn),zt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function aO(s,c){switch(Sm(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return Ma(dn),Q(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return _e(c),null;case 31:if(c.memoizedState!==null){if(wr(c),c.alternate===null)throw Error(r(340));rs()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(wr(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(r(340));rs()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return O(an),null;case 4:return Q(),null;case 10:return Ma(c.type),null;case 22:case 23:return wr(c),Lm(),s!==null&&O(ss),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return Ma(dn),null;case 25:return null;default:return null}}function IS(s,c){switch(Sm(c),c.tag){case 3:Ma(dn),Q();break;case 26:case 27:case 5:_e(c);break;case 4:Q();break;case 31:c.memoizedState!==null&&wr(c);break;case 13:wr(c);break;case 19:O(an);break;case 10:Ma(c.type);break;case 22:case 23:wr(c),Lm(),s!==null&&O(ss);break;case 24:Ma(dn)}}function Xl(s,c){try{var f=c.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var w=p.next;f=w;do{if((f.tag&s)===s){p=void 0;var S=f.create,A=f.inst;p=S(),A.destroy=p}f=f.next}while(f!==w)}}catch(M){kt(c,c.return,M)}}function Ni(s,c,f){try{var p=c.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var S=w.next;p=S;do{if((p.tag&s)===s){var A=p.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,w=c;var G=f,re=M;try{re()}catch(he){kt(w,G,he)}}}p=p.next}while(p!==S)}}catch(he){kt(c,c.return,he)}}function RS(s){var c=s.updateQueue;if(c!==null){var f=s.stateNode;try{_w(c,f)}catch(p){kt(s,s.return,p)}}}function MS(s,c,f){f.props=ds(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(p){kt(s,c,p)}}function Ql(s,c){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof f=="function"?s.refCleanup=f(p):f.current=p}}catch(w){kt(s,c,w)}}function ba(s,c){var f=s.ref,p=s.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(w){kt(s,c,w)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(w){kt(s,c,w)}else f.current=null}function DS(s){var c=s.type,f=s.memoizedProps,p=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(w){kt(s,s.return,w)}}function pp(s,c,f){try{var p=s.stateNode;CO(p,s.type,f,c),p[un]=c}catch(w){kt(s,s.return,w)}}function OS(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ii(s.type)||s.tag===4}function gp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||OS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ii(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function yp(s,c,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(s),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Aa));else if(p!==4&&(p===27&&Ii(s.type)&&(f=s.stateNode,c=null),s=s.child,s!==null))for(yp(s,c,f),s=s.sibling;s!==null;)yp(s,c,f),s=s.sibling}function Ju(s,c,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,c?f.insertBefore(s,c):f.appendChild(s);else if(p!==4&&(p===27&&Ii(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Ju(s,c,f),s=s.sibling;s!==null;)Ju(s,c,f),s=s.sibling}function LS(s){var c=s.stateNode,f=s.memoizedProps;try{for(var p=s.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);qn(c,p,f),c[St]=s,c[un]=f}catch(S){kt(s,s.return,S)}}var Ba=!1,mn=!1,bp=!1,US=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function iO(s,c){if(s=s.containerInfo,Bp=yd,s=Jv(s),dm(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var w=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var A=0,M=-1,G=-1,re=0,he=0,be=s,se=null;t:for(;;){for(var le;be!==f||w!==0&&be.nodeType!==3||(M=A+w),be!==S||p!==0&&be.nodeType!==3||(G=A+p),be.nodeType===3&&(A+=be.nodeValue.length),(le=be.firstChild)!==null;)se=be,be=le;for(;;){if(be===s)break t;if(se===f&&++re===w&&(M=A),se===S&&++he===p&&(G=A),(le=be.nextSibling)!==null)break;be=se,se=be.parentNode}be=le}f=M===-1||G===-1?null:{start:M,end:G}}else f=null}f=f||{start:0,end:0}}else f=null;for($p={focusedElem:s,selectionRange:f},yd=!1,Rn=c;Rn!==null;)if(c=Rn,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,Rn=s;else for(;Rn!==null;){switch(c=Rn,S=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)w=s[f],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&S!==null){s=void 0,f=c,w=S.memoizedProps,S=S.memoizedState,p=f.stateNode;try{var Ie=ds(f.type,w);s=p.getSnapshotBeforeUpdate(Ie,S),p.__reactInternalSnapshotBeforeUpdate=s}catch(ze){kt(f,f.return,ze)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,f=s.nodeType,f===9)Gp(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Gp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=c.sibling,s!==null){s.return=c.return,Rn=s;break}Rn=c.return}}function BS(s,c,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:qa(s,f),p&4&&Xl(5,f);break;case 1:if(qa(s,f),p&4)if(s=f.stateNode,c===null)try{s.componentDidMount()}catch(A){kt(f,f.return,A)}else{var w=ds(f.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(w,c,s.__reactInternalSnapshotBeforeUpdate)}catch(A){kt(f,f.return,A)}}p&64&&RS(f),p&512&&Ql(f,f.return);break;case 3:if(qa(s,f),p&64&&(s=f.updateQueue,s!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{_w(s,c)}catch(A){kt(f,f.return,A)}}break;case 27:c===null&&p&4&&LS(f);case 26:case 5:qa(s,f),c===null&&p&4&&DS(f),p&512&&Ql(f,f.return);break;case 12:qa(s,f);break;case 31:qa(s,f),p&4&&zS(s,f);break;case 13:qa(s,f),p&4&&GS(s,f),p&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=mO.bind(null,f),MO(s,f))));break;case 22:if(p=f.memoizedState!==null||Ba,!p){c=c!==null&&c.memoizedState!==null||mn,w=Ba;var S=mn;Ba=p,(mn=c)&&!S?za(s,f,(f.subtreeFlags&8772)!==0):qa(s,f),Ba=w,mn=S}break;case 30:break;default:qa(s,f)}}function $S(s){var c=s.alternate;c!==null&&(s.alternate=null,$S(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Kh(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Vt=null,ur=!1;function $a(s,c,f){for(f=f.child;f!==null;)qS(s,c,f),f=f.sibling}function qS(s,c,f){if(te&&typeof te.onCommitFiberUnmount=="function")try{te.onCommitFiberUnmount(Qt,f)}catch{}switch(f.tag){case 26:mn||ba(f,c),$a(s,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:mn||ba(f,c);var p=Vt,w=ur;Ii(f.type)&&(Vt=f.stateNode,ur=!1),$a(s,c,f),oc(f.stateNode),Vt=p,ur=w;break;case 5:mn||ba(f,c);case 6:if(p=Vt,w=ur,Vt=null,$a(s,c,f),Vt=p,ur=w,Vt!==null)if(ur)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(f.stateNode)}catch(S){kt(f,c,S)}else try{Vt.removeChild(f.stateNode)}catch(S){kt(f,c,S)}break;case 18:Vt!==null&&(ur?(s=Vt,R_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Ao(s)):R_(Vt,f.stateNode));break;case 4:p=Vt,w=ur,Vt=f.stateNode.containerInfo,ur=!0,$a(s,c,f),Vt=p,ur=w;break;case 0:case 11:case 14:case 15:Ni(2,f,c),mn||Ni(4,f,c),$a(s,c,f);break;case 1:mn||(ba(f,c),p=f.stateNode,typeof p.componentWillUnmount=="function"&&MS(f,c,p)),$a(s,c,f);break;case 21:$a(s,c,f);break;case 22:mn=(p=mn)||f.memoizedState!==null,$a(s,c,f),mn=p;break;default:$a(s,c,f)}}function zS(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ao(s)}catch(f){kt(c,c.return,f)}}}function GS(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ao(s)}catch(f){kt(c,c.return,f)}}function sO(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new US),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new US),c;default:throw Error(r(435,s.tag))}}function Xu(s,c){var f=sO(s);c.forEach(function(p){if(!f.has(p)){f.add(p);var w=pO.bind(null,s,p);p.then(w,w)}})}function dr(s,c){var f=c.deletions;if(f!==null)for(var p=0;p<f.length;p++){var w=f[p],S=s,A=c,M=A;e:for(;M!==null;){switch(M.tag){case 27:if(Ii(M.type)){Vt=M.stateNode,ur=!1;break e}break;case 5:Vt=M.stateNode,ur=!1;break e;case 3:case 4:Vt=M.stateNode.containerInfo,ur=!0;break e}M=M.return}if(Vt===null)throw Error(r(160));qS(S,A,w),Vt=null,ur=!1,S=w.alternate,S!==null&&(S.return=null),w.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)FS(c,s),c=c.sibling}var ia=null;function FS(s,c){var f=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:dr(c,s),fr(s),p&4&&(Ni(3,s,s.return),Xl(3,s),Ni(5,s,s.return));break;case 1:dr(c,s),fr(s),p&512&&(mn||f===null||ba(f,f.return)),p&64&&Ba&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var w=ia;if(dr(c,s),fr(s),p&512&&(mn||f===null||ba(f,f.return)),p&4){var S=f!==null?f.memoizedState:null;if(p=s.memoizedState,f===null)if(p===null)if(s.stateNode===null){e:{p=s.type,f=s.memoizedProps,w=w.ownerDocument||w;t:switch(p){case"title":S=w.getElementsByTagName("title")[0],(!S||S[Nl]||S[St]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=w.createElement(p),w.head.insertBefore(S,w.querySelector("head > title"))),qn(S,p,f),S[St]=s,In(S),p=S;break e;case"link":var A=F_("link","href",w).get(p+(f.href||""));if(A){for(var M=0;M<A.length;M++)if(S=A[M],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){A.splice(M,1);break t}}S=w.createElement(p),qn(S,p,f),w.head.appendChild(S);break;case"meta":if(A=F_("meta","content",w).get(p+(f.content||""))){for(M=0;M<A.length;M++)if(S=A[M],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){A.splice(M,1);break t}}S=w.createElement(p),qn(S,p,f),w.head.appendChild(S);break;default:throw Error(r(468,p))}S[St]=s,In(S),p=S}s.stateNode=p}else H_(w,s.type,s.stateNode);else s.stateNode=G_(w,p,s.memoizedProps);else S!==p?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,p===null?H_(w,s.type,s.stateNode):G_(w,p,s.memoizedProps)):p===null&&s.stateNode!==null&&pp(s,s.memoizedProps,f.memoizedProps)}break;case 27:dr(c,s),fr(s),p&512&&(mn||f===null||ba(f,f.return)),f!==null&&p&4&&pp(s,s.memoizedProps,f.memoizedProps);break;case 5:if(dr(c,s),fr(s),p&512&&(mn||f===null||ba(f,f.return)),s.flags&32){w=s.stateNode;try{Xs(w,"")}catch(Ie){kt(s,s.return,Ie)}}p&4&&s.stateNode!=null&&(w=s.memoizedProps,pp(s,w,f!==null?f.memoizedProps:w)),p&1024&&(bp=!0);break;case 6:if(dr(c,s),fr(s),p&4){if(s.stateNode===null)throw Error(r(162));p=s.memoizedProps,f=s.stateNode;try{f.nodeValue=p}catch(Ie){kt(s,s.return,Ie)}}break;case 3:if(hd=null,w=ia,ia=dd(c.containerInfo),dr(c,s),ia=w,fr(s),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Ao(c.containerInfo)}catch(Ie){kt(s,s.return,Ie)}bp&&(bp=!1,HS(s));break;case 4:p=ia,ia=dd(s.stateNode.containerInfo),dr(c,s),fr(s),ia=p;break;case 12:dr(c,s),fr(s);break;case 31:dr(c,s),fr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Xu(s,p)));break;case 13:dr(c,s),fr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Zu=Ce()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Xu(s,p)));break;case 22:w=s.memoizedState!==null;var G=f!==null&&f.memoizedState!==null,re=Ba,he=mn;if(Ba=re||w,mn=he||G,dr(c,s),mn=he,Ba=re,fr(s),p&8192)e:for(c=s.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(f===null||G||Ba||mn||fs(s)),f=null,c=s;;){if(c.tag===5||c.tag===26){if(f===null){G=f=c;try{if(S=G.stateNode,w)A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=G.stateNode;var be=G.memoizedProps.style,se=be!=null&&be.hasOwnProperty("display")?be.display:null;M.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Ie){kt(G,G.return,Ie)}}}else if(c.tag===6){if(f===null){G=c;try{G.stateNode.nodeValue=w?"":G.memoizedProps}catch(Ie){kt(G,G.return,Ie)}}}else if(c.tag===18){if(f===null){G=c;try{var le=G.stateNode;w?M_(le,!0):M_(G.stateNode,!1)}catch(Ie){kt(G,G.return,Ie)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=s.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Xu(s,f))));break;case 19:dr(c,s),fr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Xu(s,p)));break;case 30:break;case 21:break;default:dr(c,s),fr(s)}}function fr(s){var c=s.flags;if(c&2){try{for(var f,p=s.return;p!==null;){if(OS(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var w=f.stateNode,S=gp(s);Ju(s,S,w);break;case 5:var A=f.stateNode;f.flags&32&&(Xs(A,""),f.flags&=-33);var M=gp(s);Ju(s,M,A);break;case 3:case 4:var G=f.stateNode.containerInfo,re=gp(s);yp(s,re,G);break;default:throw Error(r(161))}}catch(he){kt(s,s.return,he)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function HS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;HS(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function qa(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)BS(s,c.alternate,c),c=c.sibling}function fs(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:Ni(4,c,c.return),fs(c);break;case 1:ba(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&MS(c,c.return,f),fs(c);break;case 27:oc(c.stateNode);case 26:case 5:ba(c,c.return),fs(c);break;case 22:c.memoizedState===null&&fs(c);break;case 30:fs(c);break;default:fs(c)}s=s.sibling}}function za(s,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,w=s,S=c,A=S.flags;switch(S.tag){case 0:case 11:case 15:za(w,S,f),Xl(4,S);break;case 1:if(za(w,S,f),p=S,w=p.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(re){kt(p,p.return,re)}if(p=S,w=p.updateQueue,w!==null){var M=p.stateNode;try{var G=w.shared.hiddenCallbacks;if(G!==null)for(w.shared.hiddenCallbacks=null,w=0;w<G.length;w++)Sw(G[w],M)}catch(re){kt(p,p.return,re)}}f&&A&64&&RS(S),Ql(S,S.return);break;case 27:LS(S);case 26:case 5:za(w,S,f),f&&p===null&&A&4&&DS(S),Ql(S,S.return);break;case 12:za(w,S,f);break;case 31:za(w,S,f),f&&A&4&&zS(w,S);break;case 13:za(w,S,f),f&&A&4&&GS(w,S);break;case 22:S.memoizedState===null&&za(w,S,f),Ql(S,S.return);break;case 30:break;default:za(w,S,f)}c=c.sibling}}function xp(s,c){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&Ul(f))}function vp(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Ul(s))}function sa(s,c,f,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)VS(s,c,f,p),c=c.sibling}function VS(s,c,f,p){var w=c.flags;switch(c.tag){case 0:case 11:case 15:sa(s,c,f,p),w&2048&&Xl(9,c);break;case 1:sa(s,c,f,p);break;case 3:sa(s,c,f,p),w&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Ul(s)));break;case 12:if(w&2048){sa(s,c,f,p),s=c.stateNode;try{var S=c.memoizedProps,A=S.id,M=S.onPostCommit;typeof M=="function"&&M(A,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){kt(c,c.return,G)}}else sa(s,c,f,p);break;case 31:sa(s,c,f,p);break;case 13:sa(s,c,f,p);break;case 23:break;case 22:S=c.stateNode,A=c.alternate,c.memoizedState!==null?S._visibility&2?sa(s,c,f,p):Zl(s,c):S._visibility&2?sa(s,c,f,p):(S._visibility|=2,bo(s,c,f,p,(c.subtreeFlags&10256)!==0||!1)),w&2048&&xp(A,c);break;case 24:sa(s,c,f,p),w&2048&&vp(c.alternate,c);break;default:sa(s,c,f,p)}}function bo(s,c,f,p,w){for(w=w&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var S=s,A=c,M=f,G=p,re=A.flags;switch(A.tag){case 0:case 11:case 15:bo(S,A,M,G,w),Xl(8,A);break;case 23:break;case 22:var he=A.stateNode;A.memoizedState!==null?he._visibility&2?bo(S,A,M,G,w):Zl(S,A):(he._visibility|=2,bo(S,A,M,G,w)),w&&re&2048&&xp(A.alternate,A);break;case 24:bo(S,A,M,G,w),w&&re&2048&&vp(A.alternate,A);break;default:bo(S,A,M,G,w)}c=c.sibling}}function Zl(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=s,p=c,w=p.flags;switch(p.tag){case 22:Zl(f,p),w&2048&&xp(p.alternate,p);break;case 24:Zl(f,p),w&2048&&vp(p.alternate,p);break;default:Zl(f,p)}c=c.sibling}}var ec=8192;function xo(s,c,f){if(s.subtreeFlags&ec)for(s=s.child;s!==null;)WS(s,c,f),s=s.sibling}function WS(s,c,f){switch(s.tag){case 26:xo(s,c,f),s.flags&ec&&s.memoizedState!==null&&VO(f,ia,s.memoizedState,s.memoizedProps);break;case 5:xo(s,c,f);break;case 3:case 4:var p=ia;ia=dd(s.stateNode.containerInfo),xo(s,c,f),ia=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=ec,ec=16777216,xo(s,c,f),ec=p):xo(s,c,f));break;default:xo(s,c,f)}}function KS(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function tc(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var p=c[f];Rn=p,JS(p,s)}KS(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)YS(s),s=s.sibling}function YS(s){switch(s.tag){case 0:case 11:case 15:tc(s),s.flags&2048&&Ni(9,s,s.return);break;case 3:tc(s);break;case 12:tc(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,Qu(s)):tc(s);break;default:tc(s)}}function Qu(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var p=c[f];Rn=p,JS(p,s)}KS(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:Ni(8,c,c.return),Qu(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,Qu(c));break;default:Qu(c)}s=s.sibling}}function JS(s,c){for(;Rn!==null;){var f=Rn;switch(f.tag){case 0:case 11:case 15:Ni(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Ul(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,Rn=p;else e:for(f=s;Rn!==null;){p=Rn;var w=p.sibling,S=p.return;if($S(p),p===f){Rn=null;break e}if(w!==null){w.return=S,Rn=w;break e}Rn=S}}}var oO={getCacheForType:function(s){var c=Bn(dn),f=c.data.get(s);return f===void 0&&(f=s(),c.data.set(s,f)),f},cacheSignal:function(){return Bn(dn).controller.signal}},lO=typeof WeakMap=="function"?WeakMap:Map,xt=0,Rt=null,rt=null,st=0,_t=0,Sr=null,Ci=!1,vo=!1,wp=!1,Ga=0,tn=0,Ei=0,hs=0,Sp=0,_r=0,wo=0,nc=null,hr=null,_p=!1,Zu=0,XS=0,ed=1/0,td=null,Ti=null,_n=0,Ai=null,So=null,Fa=0,kp=0,Np=null,QS=null,rc=0,Cp=null;function kr(){return(xt&2)!==0&&st!==0?st&-st:q.T!==null?Ip():Sn()}function ZS(){if(_r===0)if((st&536870912)===0||ut){var s=Bt;Bt<<=1,(Bt&3932160)===0&&(Bt=262144),_r=s}else _r=536870912;return s=vr.current,s!==null&&(s.flags|=32),_r}function mr(s,c,f){(s===Rt&&(_t===2||_t===9)||s.cancelPendingCommit!==null)&&(_o(s,0),ji(s,st,_r,!1)),Ze(s,f),((xt&2)===0||s!==Rt)&&(s===Rt&&((xt&2)===0&&(hs|=f),tn===4&&ji(s,st,_r,!1)),xa(s))}function e_(s,c,f){if((xt&6)!==0)throw Error(r(327));var p=!f&&(c&127)===0&&(c&s.expiredLanes)===0||dt(s,c),w=p?dO(s,c):Tp(s,c,!0),S=p;do{if(w===0){vo&&!p&&ji(s,c,0,!1);break}else{if(f=s.current.alternate,S&&!cO(f)){w=Tp(s,c,!1),S=!1;continue}if(w===2){if(S=c,s.errorRecoveryDisabledLanes&S)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){c=A;e:{var M=s;w=nc;var G=M.current.memoizedState.isDehydrated;if(G&&(_o(M,A).flags|=256),A=Tp(M,A,!1),A!==2){if(wp&&!G){M.errorRecoveryDisabledLanes|=S,hs|=S,w=4;break e}S=hr,hr=w,S!==null&&(hr===null?hr=S:hr.push.apply(hr,S))}w=A}if(S=!1,w!==2)continue}}if(w===1){_o(s,0),ji(s,c,0,!0);break}e:{switch(p=s,S=w,S){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:ji(p,c,_r,!Ci);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(w=Zu+300-Ce(),10<w)){if(ji(p,c,_r,!Ci),Et(p,0,!0)!==0)break e;Fa=c,p.timeoutHandle=P_(t_.bind(null,p,f,hr,td,_p,c,_r,hs,wo,Ci,S,"Throttled",-0,0),w);break e}t_(p,f,hr,td,_p,c,_r,hs,wo,Ci,S,null,-0,0)}}break}while(!0);xa(s)}function t_(s,c,f,p,w,S,A,M,G,re,he,be,se,le){if(s.timeoutHandle=-1,be=c.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Aa},WS(c,S,be);var Ie=(S&62914560)===S?Zu-Ce():(S&4194048)===S?XS-Ce():0;if(Ie=WO(be,Ie),Ie!==null){Fa=S,s.cancelPendingCommit=Ie(c_.bind(null,s,c,S,f,p,w,A,M,G,he,be,null,se,le)),ji(s,S,A,!re);return}}c_(s,c,S,f,p,w,A,M,G)}function cO(s){for(var c=s;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var w=f[p],S=w.getSnapshot;w=w.value;try{if(!br(S(),w))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ji(s,c,f,p){c&=~Sp,c&=~hs,s.suspendedLanes|=c,s.pingedLanes&=~c,p&&(s.warmLanes|=c),p=s.expirationTimes;for(var w=c;0<w;){var S=31-ke(w),A=1<<S;p[S]=-1,w&=~A}f!==0&&wt(s,f,c)}function nd(){return(xt&6)===0?(ac(0),!1):!0}function Ep(){if(rt!==null){if(_t===0)var s=rt.return;else s=rt,Ra=as=null,Gm(s),ho=null,$l=0,s=rt;for(;s!==null;)IS(s.alternate,s),s=s.return;rt=null}}function _o(s,c){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,AO(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Fa=0,Ep(),Rt=s,rt=f=Pa(s.current,null),st=c,_t=0,Sr=null,Ci=!1,vo=dt(s,c),wp=!1,wo=_r=Sp=hs=Ei=tn=0,hr=nc=null,_p=!1,(c&8)!==0&&(c|=c&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=c;0<p;){var w=31-ke(p),S=1<<w;c|=s[w],p&=~S}return Ga=c,_u(),f}function n_(s,c){et=null,q.H=Kl,c===fo||c===Pu?(c=bw(),_t=3):c===Pm?(c=bw(),_t=4):_t=c===ip?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Sr=c,rt===null&&(tn=1,Hu(s,Lr(c,s.current)))}function r_(){var s=vr.current;return s===null?!0:(st&4194048)===st?qr===null:(st&62914560)===st||(st&536870912)!==0?s===qr:!1}function a_(){var s=q.H;return q.H=Kl,s===null?Kl:s}function i_(){var s=q.A;return q.A=oO,s}function rd(){tn=4,Ci||(st&4194048)!==st&&vr.current!==null||(vo=!0),(Ei&134217727)===0&&(hs&134217727)===0||Rt===null||ji(Rt,st,_r,!1)}function Tp(s,c,f){var p=xt;xt|=2;var w=a_(),S=i_();(Rt!==s||st!==c)&&(td=null,_o(s,c)),c=!1;var A=tn;e:do try{if(_t!==0&&rt!==null){var M=rt,G=Sr;switch(_t){case 8:Ep(),A=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(c=!0);var re=_t;if(_t=0,Sr=null,ko(s,M,G,re),f&&vo){A=0;break e}break;default:re=_t,_t=0,Sr=null,ko(s,M,G,re)}}uO(),A=tn;break}catch(he){n_(s,he)}while(!0);return c&&s.shellSuspendCounter++,Ra=as=null,xt=p,q.H=w,q.A=S,rt===null&&(Rt=null,st=0,_u()),A}function uO(){for(;rt!==null;)s_(rt)}function dO(s,c){var f=xt;xt|=2;var p=a_(),w=i_();Rt!==s||st!==c?(td=null,ed=Ce()+500,_o(s,c)):vo=dt(s,c);e:do try{if(_t!==0&&rt!==null){c=rt;var S=Sr;t:switch(_t){case 1:_t=0,Sr=null,ko(s,c,S,1);break;case 2:case 9:if(gw(S)){_t=0,Sr=null,o_(c);break}c=function(){_t!==2&&_t!==9||Rt!==s||(_t=7),xa(s)},S.then(c,c);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:gw(S)?(_t=0,Sr=null,o_(c)):(_t=0,Sr=null,ko(s,c,S,7));break;case 5:var A=null;switch(rt.tag){case 26:A=rt.memoizedState;case 5:case 27:var M=rt;if(A?V_(A):M.stateNode.complete){_t=0,Sr=null;var G=M.sibling;if(G!==null)rt=G;else{var re=M.return;re!==null?(rt=re,ad(re)):rt=null}break t}}_t=0,Sr=null,ko(s,c,S,5);break;case 6:_t=0,Sr=null,ko(s,c,S,6);break;case 8:Ep(),tn=6;break e;default:throw Error(r(462))}}fO();break}catch(he){n_(s,he)}while(!0);return Ra=as=null,q.H=p,q.A=w,xt=f,rt!==null?0:(Rt=null,st=0,_u(),tn)}function fO(){for(;rt!==null&&!ye();)s_(rt)}function s_(s){var c=jS(s.alternate,s,Ga);s.memoizedProps=s.pendingProps,c===null?ad(s):rt=c}function o_(s){var c=s,f=c.alternate;switch(c.tag){case 15:case 0:c=kS(f,c,c.pendingProps,c.type,void 0,st);break;case 11:c=kS(f,c,c.pendingProps,c.type.render,c.ref,st);break;case 5:Gm(c);default:IS(f,c),c=rt=iw(c,Ga),c=jS(f,c,Ga)}s.memoizedProps=s.pendingProps,c===null?ad(s):rt=c}function ko(s,c,f,p){Ra=as=null,Gm(c),ho=null,$l=0;var w=c.return;try{if(eO(s,w,c,f,st)){tn=1,Hu(s,Lr(f,s.current)),rt=null;return}}catch(S){if(w!==null)throw rt=w,S;tn=1,Hu(s,Lr(f,s.current)),rt=null;return}c.flags&32768?(ut||p===1?s=!0:vo||(st&536870912)!==0?s=!1:(Ci=s=!0,(p===2||p===9||p===3||p===6)&&(p=vr.current,p!==null&&p.tag===13&&(p.flags|=16384))),l_(c,s)):ad(c)}function ad(s){var c=s;do{if((c.flags&32768)!==0){l_(c,Ci);return}s=c.return;var f=rO(c.alternate,c,Ga);if(f!==null){rt=f;return}if(c=c.sibling,c!==null){rt=c;return}rt=c=s}while(c!==null);tn===0&&(tn=5)}function l_(s,c){do{var f=aO(s.alternate,s);if(f!==null){f.flags&=32767,rt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(s=s.sibling,s!==null)){rt=s;return}rt=s=f}while(s!==null);tn=6,rt=null}function c_(s,c,f,p,w,S,A,M,G){s.cancelPendingCommit=null;do id();while(_n!==0);if((xt&6)!==0)throw Error(r(327));if(c!==null){if(c===s.current)throw Error(r(177));if(S=c.lanes|c.childLanes,S|=gm,rn(s,f,S,A,M,G),s===Rt&&(rt=Rt=null,st=0),So=c,Ai=s,Fa=f,kp=S,Np=w,QS=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,gO(Dt,function(){return m_(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=q.T,q.T=null,w=B.p,B.p=2,A=xt,xt|=4;try{iO(s,c,f)}finally{xt=A,B.p=w,q.T=p}}_n=1,u_(),d_(),f_()}}function u_(){if(_n===1){_n=0;var s=Ai,c=So,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=q.T,q.T=null;var p=B.p;B.p=2;var w=xt;xt|=4;try{FS(c,s);var S=$p,A=Jv(s.containerInfo),M=S.focusedElem,G=S.selectionRange;if(A!==M&&M&&M.ownerDocument&&Yv(M.ownerDocument.documentElement,M)){if(G!==null&&dm(M)){var re=G.start,he=G.end;if(he===void 0&&(he=re),"selectionStart"in M)M.selectionStart=re,M.selectionEnd=Math.min(he,M.value.length);else{var be=M.ownerDocument||document,se=be&&be.defaultView||window;if(se.getSelection){var le=se.getSelection(),Ie=M.textContent.length,ze=Math.min(G.start,Ie),jt=G.end===void 0?ze:Math.min(G.end,Ie);!le.extend&&ze>jt&&(A=jt,jt=ze,ze=A);var ee=Kv(M,ze),W=Kv(M,jt);if(ee&&W&&(le.rangeCount!==1||le.anchorNode!==ee.node||le.anchorOffset!==ee.offset||le.focusNode!==W.node||le.focusOffset!==W.offset)){var ne=be.createRange();ne.setStart(ee.node,ee.offset),le.removeAllRanges(),ze>jt?(le.addRange(ne),le.extend(W.node,W.offset)):(ne.setEnd(W.node,W.offset),le.addRange(ne))}}}}for(be=[],le=M;le=le.parentNode;)le.nodeType===1&&be.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<be.length;M++){var ge=be[M];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}yd=!!Bp,$p=Bp=null}finally{xt=w,B.p=p,q.T=f}}s.current=c,_n=2}}function d_(){if(_n===2){_n=0;var s=Ai,c=So,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=q.T,q.T=null;var p=B.p;B.p=2;var w=xt;xt|=4;try{BS(s,c.alternate,c)}finally{xt=w,B.p=p,q.T=f}}_n=3}}function f_(){if(_n===4||_n===3){_n=0,Re();var s=Ai,c=So,f=Fa,p=QS;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?_n=5:(_n=0,So=Ai=null,h_(s,s.pendingLanes));var w=s.pendingLanes;if(w===0&&(Ti=null),bt(f),c=c.stateNode,te&&typeof te.onCommitFiberRoot=="function")try{te.onCommitFiberRoot(Qt,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=q.T,w=B.p,B.p=2,q.T=null;try{for(var S=s.onRecoverableError,A=0;A<p.length;A++){var M=p[A];S(M.value,{componentStack:M.stack})}}finally{q.T=c,B.p=w}}(Fa&3)!==0&&id(),xa(s),w=s.pendingLanes,(f&261930)!==0&&(w&42)!==0?s===Cp?rc++:(rc=0,Cp=s):rc=0,ac(0)}}function h_(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,Ul(c)))}function id(){return u_(),d_(),f_(),m_()}function m_(){if(_n!==5)return!1;var s=Ai,c=kp;kp=0;var f=bt(Fa),p=q.T,w=B.p;try{B.p=32>f?32:f,q.T=null,f=Np,Np=null;var S=Ai,A=Fa;if(_n=0,So=Ai=null,Fa=0,(xt&6)!==0)throw Error(r(331));var M=xt;if(xt|=4,YS(S.current),VS(S,S.current,A,f),xt=M,ac(0,!1),te&&typeof te.onPostCommitFiberRoot=="function")try{te.onPostCommitFiberRoot(Qt,S)}catch{}return!0}finally{B.p=w,q.T=p,h_(s,c)}}function p_(s,c,f){c=Lr(f,c),c=ap(s.stateNode,c,2),s=Si(s,c,2),s!==null&&(Ze(s,2),xa(s))}function kt(s,c,f){if(s.tag===3)p_(s,s,f);else for(;c!==null;){if(c.tag===3){p_(c,s,f);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ti===null||!Ti.has(p))){s=Lr(f,s),f=gS(2),p=Si(c,f,2),p!==null&&(yS(f,p,c,s),Ze(p,2),xa(p));break}}c=c.return}}function Ap(s,c,f){var p=s.pingCache;if(p===null){p=s.pingCache=new lO;var w=new Set;p.set(c,w)}else w=p.get(c),w===void 0&&(w=new Set,p.set(c,w));w.has(f)||(wp=!0,w.add(f),s=hO.bind(null,s,c,f),c.then(s,s))}function hO(s,c,f){var p=s.pingCache;p!==null&&p.delete(c),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Rt===s&&(st&f)===f&&(tn===4||tn===3&&(st&62914560)===st&&300>Ce()-Zu?(xt&2)===0&&_o(s,0):Sp|=f,wo===st&&(wo=0)),xa(s)}function g_(s,c){c===0&&(c=Ln()),s=ts(s,c),s!==null&&(Ze(s,c),xa(s))}function mO(s){var c=s.memoizedState,f=0;c!==null&&(f=c.retryLane),g_(s,f)}function pO(s,c){var f=0;switch(s.tag){case 31:case 13:var p=s.stateNode,w=s.memoizedState;w!==null&&(f=w.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(c),g_(s,f)}function gO(s,c){return fe(s,c)}var sd=null,No=null,jp=!1,od=!1,Pp=!1,Pi=0;function xa(s){s!==No&&s.next===null&&(No===null?sd=No=s:No=No.next=s),od=!0,jp||(jp=!0,bO())}function ac(s,c){if(!Pp&&od){Pp=!0;do for(var f=!1,p=sd;p!==null;){if(s!==0){var w=p.pendingLanes;if(w===0)var S=0;else{var A=p.suspendedLanes,M=p.pingedLanes;S=(1<<31-ke(42|s)+1)-1,S&=w&~(A&~M),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,v_(p,S))}else S=st,S=Et(p,p===Rt?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(S&3)===0||dt(p,S)||(f=!0,v_(p,S));p=p.next}while(f);Pp=!1}}function yO(){y_()}function y_(){od=jp=!1;var s=0;Pi!==0&&TO()&&(s=Pi);for(var c=Ce(),f=null,p=sd;p!==null;){var w=p.next,S=b_(p,c);S===0?(p.next=null,f===null?sd=w:f.next=w,w===null&&(No=f)):(f=p,(s!==0||(S&3)!==0)&&(od=!0)),p=w}_n!==0&&_n!==5||ac(s),Pi!==0&&(Pi=0)}function b_(s,c){for(var f=s.suspendedLanes,p=s.pingedLanes,w=s.expirationTimes,S=s.pendingLanes&-62914561;0<S;){var A=31-ke(S),M=1<<A,G=w[A];G===-1?((M&f)===0||(M&p)!==0)&&(w[A]=ht(M,c)):G<=c&&(s.expiredLanes|=M),S&=~M}if(c=Rt,f=st,f=Et(s,s===c?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,f===0||s===c&&(_t===2||_t===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&Ne(p),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||dt(s,f)){if(c=f&-f,c===s.callbackPriority)return c;switch(p!==null&&Ne(p),bt(f)){case 2:case 8:f=We;break;case 32:f=Dt;break;case 268435456:f=Ut;break;default:f=Dt}return p=x_.bind(null,s),f=fe(f,p),s.callbackPriority=c,s.callbackNode=f,c}return p!==null&&p!==null&&Ne(p),s.callbackPriority=2,s.callbackNode=null,2}function x_(s,c){if(_n!==0&&_n!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(id()&&s.callbackNode!==f)return null;var p=st;return p=Et(s,s===Rt?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(e_(s,p,c),b_(s,Ce()),s.callbackNode!=null&&s.callbackNode===f?x_.bind(null,s):null)}function v_(s,c){if(id())return null;e_(s,c,!0)}function bO(){jO(function(){(xt&6)!==0?fe(nt,yO):y_()})}function Ip(){if(Pi===0){var s=co;s===0&&(s=it,it<<=1,(it&261888)===0&&(it=256)),Pi=s}return Pi}function w_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:pu(""+s)}function S_(s,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,s.id&&f.setAttribute("form",s.id),c.parentNode.insertBefore(f,c),s=new FormData(s),f.parentNode.removeChild(f),s}function xO(s,c,f,p,w){if(c==="submit"&&f&&f.stateNode===w){var S=w_((w[un]||null).action),A=p.submitter;A&&(c=(c=A[un]||null)?w_(c.formAction):A.getAttribute("formAction"),c!==null&&(S=c,A=null));var M=new xu("action","action",null,p,w);s.push({event:M,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Pi!==0){var G=A?S_(w,A):new FormData(w);Qm(f,{pending:!0,data:G,method:w.method,action:S},null,G)}}else typeof S=="function"&&(M.preventDefault(),G=A?S_(w,A):new FormData(w),Qm(f,{pending:!0,data:G,method:w.method,action:S},S,G))},currentTarget:w}]})}}for(var Rp=0;Rp<pm.length;Rp++){var Mp=pm[Rp],vO=Mp.toLowerCase(),wO=Mp[0].toUpperCase()+Mp.slice(1);aa(vO,"on"+wO)}aa(Zv,"onAnimationEnd"),aa(ew,"onAnimationIteration"),aa(tw,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(LD,"onTransitionRun"),aa(UD,"onTransitionStart"),aa(BD,"onTransitionCancel"),aa(nw,"onTransitionEnd"),Ys("onMouseEnter",["mouseout","mouseover"]),Ys("onMouseLeave",["mouseout","mouseover"]),Ys("onPointerEnter",["pointerout","pointerover"]),Ys("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ic));function __(s,c){c=(c&4)!==0;for(var f=0;f<s.length;f++){var p=s[f],w=p.event;p=p.listeners;e:{var S=void 0;if(c)for(var A=p.length-1;0<=A;A--){var M=p[A],G=M.instance,re=M.currentTarget;if(M=M.listener,G!==S&&w.isPropagationStopped())break e;S=M,w.currentTarget=re;try{S(w)}catch(he){Su(he)}w.currentTarget=null,S=G}else for(A=0;A<p.length;A++){if(M=p[A],G=M.instance,re=M.currentTarget,M=M.listener,G!==S&&w.isPropagationStopped())break e;S=M,w.currentTarget=re;try{S(w)}catch(he){Su(he)}w.currentTarget=null,S=G}}}}function at(s,c){var f=c[Hs];f===void 0&&(f=c[Hs]=new Set);var p=s+"__bubble";f.has(p)||(k_(c,s,2,!1),f.add(p))}function Dp(s,c,f){var p=0;c&&(p|=4),k_(f,s,p,c)}var ld="_reactListening"+Math.random().toString(36).slice(2);function Op(s){if(!s[ld]){s[ld]=!0,yv.forEach(function(f){f!=="selectionchange"&&(SO.has(f)||Dp(f,!1,s),Dp(f,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[ld]||(c[ld]=!0,Dp("selectionchange",!1,c))}}function k_(s,c,f,p){switch(Z_(c)){case 2:var w=JO;break;case 8:w=XO;break;default:w=Xp}f=w.bind(null,c,f,s),w=void 0,!nm||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),p?w!==void 0?s.addEventListener(c,f,{capture:!0,passive:w}):s.addEventListener(c,f,!0):w!==void 0?s.addEventListener(c,f,{passive:w}):s.addEventListener(c,f,!1)}function Lp(s,c,f,p,w){var S=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var M=p.stateNode.containerInfo;if(M===w)break;if(A===4)for(A=p.return;A!==null;){var G=A.tag;if((G===3||G===4)&&A.stateNode.containerInfo===w)return;A=A.return}for(;M!==null;){if(A=Vs(M),A===null)return;if(G=A.tag,G===5||G===6||G===26||G===27){p=S=A;continue e}M=M.parentNode}}p=p.return}Av(function(){var re=S,he=em(f),be=[];e:{var se=rw.get(s);if(se!==void 0){var le=xu,Ie=s;switch(s){case"keypress":if(yu(f)===0)break e;case"keydown":case"keyup":le=pD;break;case"focusin":Ie="focus",le=sm;break;case"focusout":Ie="blur",le=sm;break;case"beforeblur":case"afterblur":le=sm;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=rD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=bD;break;case Zv:case ew:case tw:le=sD;break;case nw:le=vD;break;case"scroll":case"scrollend":le=tD;break;case"wheel":le=SD;break;case"copy":case"cut":case"paste":le=lD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Mv;break;case"toggle":case"beforetoggle":le=kD}var ze=(c&4)!==0,jt=!ze&&(s==="scroll"||s==="scrollend"),ee=ze?se!==null?se+"Capture":null:se;ze=[];for(var W=re,ne;W!==null;){var ge=W;if(ne=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ne===null||ee===null||(ge=El(W,ee),ge!=null&&ze.push(sc(W,ge,ne))),jt)break;W=W.return}0<ze.length&&(se=new le(se,Ie,null,f,he),be.push({event:se,listeners:ze}))}}if((c&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",se&&f!==Zh&&(Ie=f.relatedTarget||f.fromElement)&&(Vs(Ie)||Ie[pa]))break e;if((le||se)&&(se=he.window===he?he:(se=he.ownerDocument)?se.defaultView||se.parentWindow:window,le?(Ie=f.relatedTarget||f.toElement,le=re,Ie=Ie?Vs(Ie):null,Ie!==null&&(jt=i(Ie),ze=Ie.tag,Ie!==jt||ze!==5&&ze!==27&&ze!==6)&&(Ie=null)):(le=null,Ie=re),le!==Ie)){if(ze=Iv,ge="onMouseLeave",ee="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(ze=Mv,ge="onPointerLeave",ee="onPointerEnter",W="pointer"),jt=le==null?se:Cl(le),ne=Ie==null?se:Cl(Ie),se=new ze(ge,W+"leave",le,f,he),se.target=jt,se.relatedTarget=ne,ge=null,Vs(he)===re&&(ze=new ze(ee,W+"enter",Ie,f,he),ze.target=ne,ze.relatedTarget=jt,ge=ze),jt=ge,le&&Ie)t:{for(ze=_O,ee=le,W=Ie,ne=0,ge=ee;ge;ge=ze(ge))ne++;ge=0;for(var qe=W;qe;qe=ze(qe))ge++;for(;0<ne-ge;)ee=ze(ee),ne--;for(;0<ge-ne;)W=ze(W),ge--;for(;ne--;){if(ee===W||W!==null&&ee===W.alternate){ze=ee;break t}ee=ze(ee),W=ze(W)}ze=null}else ze=null;le!==null&&N_(be,se,le,ze,!1),Ie!==null&&jt!==null&&N_(be,jt,Ie,ze,!0)}}e:{if(se=re?Cl(re):window,le=se.nodeName&&se.nodeName.toLowerCase(),le==="select"||le==="input"&&se.type==="file")var mt=zv;else if($v(se))if(Gv)mt=MD;else{mt=ID;var Me=PD}else le=se.nodeName,!le||le.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?re&&Qh(re.elementType)&&(mt=zv):mt=RD;if(mt&&(mt=mt(s,re))){qv(be,mt,f,he);break e}Me&&Me(s,se,re),s==="focusout"&&re&&se.type==="number"&&re.memoizedProps.value!=null&&Xh(se,"number",se.value)}switch(Me=re?Cl(re):window,s){case"focusin":($v(Me)||Me.contentEditable==="true")&&(to=Me,fm=re,Dl=null);break;case"focusout":Dl=fm=to=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,Xv(be,f,he);break;case"selectionchange":if(OD)break;case"keydown":case"keyup":Xv(be,f,he)}var tt;if(lm)e:{switch(s){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else eo?Uv(s,f)&&(ot="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(ot="onCompositionStart");ot&&(Dv&&f.locale!=="ko"&&(eo||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&eo&&(tt=jv()):(pi=he,rm="value"in pi?pi.value:pi.textContent,eo=!0)),Me=cd(re,ot),0<Me.length&&(ot=new Rv(ot,s,null,f,he),be.push({event:ot,listeners:Me}),tt?ot.data=tt:(tt=Bv(f),tt!==null&&(ot.data=tt)))),(tt=CD?ED(s,f):TD(s,f))&&(ot=cd(re,"onBeforeInput"),0<ot.length&&(Me=new Rv("onBeforeInput","beforeinput",null,f,he),be.push({event:Me,listeners:ot}),Me.data=tt)),xO(be,s,re,f,he)}__(be,c)})}function sc(s,c,f){return{instance:s,listener:c,currentTarget:f}}function cd(s,c){for(var f=c+"Capture",p=[];s!==null;){var w=s,S=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||S===null||(w=El(s,f),w!=null&&p.unshift(sc(s,w,S)),w=El(s,c),w!=null&&p.push(sc(s,w,S))),s.tag===3)return p;s=s.return}return[]}function _O(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function N_(s,c,f,p,w){for(var S=c._reactName,A=[];f!==null&&f!==p;){var M=f,G=M.alternate,re=M.stateNode;if(M=M.tag,G!==null&&G===p)break;M!==5&&M!==26&&M!==27||re===null||(G=re,w?(re=El(f,S),re!=null&&A.unshift(sc(f,re,G))):w||(re=El(f,S),re!=null&&A.push(sc(f,re,G)))),f=f.return}A.length!==0&&s.push({event:c,listeners:A})}var kO=/\r\n?/g,NO=/\u0000|\uFFFD/g;function C_(s){return(typeof s=="string"?s:""+s).replace(kO,`
`).replace(NO,"")}function E_(s,c){return c=C_(c),C_(s)===c}function At(s,c,f,p,w,S){switch(f){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||Xs(s,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&Xs(s,""+p);break;case"className":hu(s,"class",p);break;case"tabIndex":hu(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":hu(s,f,p);break;case"style":Ev(s,p,S);break;case"data":if(c!=="object"){hu(s,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||f!=="href")){s.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=pu(""+p),s.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(c!=="input"&&At(s,c,"name",w.name,w,null),At(s,c,"formEncType",w.formEncType,w,null),At(s,c,"formMethod",w.formMethod,w,null),At(s,c,"formTarget",w.formTarget,w,null)):(At(s,c,"encType",w.encType,w,null),At(s,c,"method",w.method,w,null),At(s,c,"target",w.target,w,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=pu(""+p),s.setAttribute(f,p);break;case"onClick":p!=null&&(s.onclick=Aa);break;case"onScroll":p!=null&&at("scroll",s);break;case"onScrollEnd":p!=null&&at("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(w.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}f=pu(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""+p):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":p===!0?s.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,p):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(f,p):s.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(f):s.setAttribute(f,p);break;case"popover":at("beforetoggle",s),at("toggle",s),fu(s,"popover",p);break;case"xlinkActuate":Ta(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ta(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ta(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ta(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ta(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ta(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ta(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ta(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ta(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":fu(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ZM.get(f)||f,fu(s,f,p))}}function Up(s,c,f,p,w,S){switch(f){case"style":Ev(s,p,S);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(w.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof p=="string"?Xs(s,p):(typeof p=="number"||typeof p=="bigint")&&Xs(s,""+p);break;case"onScroll":p!=null&&at("scroll",s);break;case"onScrollEnd":p!=null&&at("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bv.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(w=f.endsWith("Capture"),c=f.slice(2,w?f.length-7:void 0),S=s[un]||null,S=S!=null?S[f]:null,typeof S=="function"&&s.removeEventListener(c,S,w),typeof p=="function")){typeof S!="function"&&S!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(c,p,w);break e}f in s?s[f]=p:p===!0?s.setAttribute(f,""):fu(s,f,p)}}}function qn(s,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",s),at("load",s);var p=!1,w=!1,S;for(S in f)if(f.hasOwnProperty(S)){var A=f[S];if(A!=null)switch(S){case"src":p=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:At(s,c,S,A,f,null)}}w&&At(s,c,"srcSet",f.srcSet,f,null),p&&At(s,c,"src",f.src,f,null);return;case"input":at("invalid",s);var M=S=A=w=null,G=null,re=null;for(p in f)if(f.hasOwnProperty(p)){var he=f[p];if(he!=null)switch(p){case"name":w=he;break;case"type":A=he;break;case"checked":G=he;break;case"defaultChecked":re=he;break;case"value":S=he;break;case"defaultValue":M=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,c));break;default:At(s,c,p,he,f,null)}}_v(s,S,M,G,re,A,w,!1);return;case"select":at("invalid",s),p=A=S=null;for(w in f)if(f.hasOwnProperty(w)&&(M=f[w],M!=null))switch(w){case"value":S=M;break;case"defaultValue":A=M;break;case"multiple":p=M;default:At(s,c,w,M,f,null)}c=S,f=A,s.multiple=!!p,c!=null?Js(s,!!p,c,!1):f!=null&&Js(s,!!p,f,!0);return;case"textarea":at("invalid",s),S=w=p=null;for(A in f)if(f.hasOwnProperty(A)&&(M=f[A],M!=null))switch(A){case"value":p=M;break;case"defaultValue":w=M;break;case"children":S=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:At(s,c,A,M,f,null)}Nv(s,p,w,S);return;case"option":for(G in f)if(f.hasOwnProperty(G)&&(p=f[G],p!=null))switch(G){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:At(s,c,G,p,f,null)}return;case"dialog":at("beforetoggle",s),at("toggle",s),at("cancel",s),at("close",s);break;case"iframe":case"object":at("load",s);break;case"video":case"audio":for(p=0;p<ic.length;p++)at(ic[p],s);break;case"image":at("error",s),at("load",s);break;case"details":at("toggle",s);break;case"embed":case"source":case"link":at("error",s),at("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in f)if(f.hasOwnProperty(re)&&(p=f[re],p!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:At(s,c,re,p,f,null)}return;default:if(Qh(c)){for(he in f)f.hasOwnProperty(he)&&(p=f[he],p!==void 0&&Up(s,c,he,p,f,void 0));return}}for(M in f)f.hasOwnProperty(M)&&(p=f[M],p!=null&&At(s,c,M,p,f,null))}function CO(s,c,f,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,S=null,A=null,M=null,G=null,re=null,he=null;for(le in f){var be=f[le];if(f.hasOwnProperty(le)&&be!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":G=be;default:p.hasOwnProperty(le)||At(s,c,le,null,p,be)}}for(var se in p){var le=p[se];if(be=f[se],p.hasOwnProperty(se)&&(le!=null||be!=null))switch(se){case"type":S=le;break;case"name":w=le;break;case"checked":re=le;break;case"defaultChecked":he=le;break;case"value":A=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,c));break;default:le!==be&&At(s,c,se,le,p,be)}}Jh(s,A,M,G,re,he,S,w);return;case"select":le=A=M=se=null;for(S in f)if(G=f[S],f.hasOwnProperty(S)&&G!=null)switch(S){case"value":break;case"multiple":le=G;default:p.hasOwnProperty(S)||At(s,c,S,null,p,G)}for(w in p)if(S=p[w],G=f[w],p.hasOwnProperty(w)&&(S!=null||G!=null))switch(w){case"value":se=S;break;case"defaultValue":M=S;break;case"multiple":A=S;default:S!==G&&At(s,c,w,S,p,G)}c=M,f=A,p=le,se!=null?Js(s,!!f,se,!1):!!p!=!!f&&(c!=null?Js(s,!!f,c,!0):Js(s,!!f,f?[]:"",!1));return;case"textarea":le=se=null;for(M in f)if(w=f[M],f.hasOwnProperty(M)&&w!=null&&!p.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:At(s,c,M,null,p,w)}for(A in p)if(w=p[A],S=f[A],p.hasOwnProperty(A)&&(w!=null||S!=null))switch(A){case"value":se=w;break;case"defaultValue":le=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==S&&At(s,c,A,w,p,S)}kv(s,se,le);return;case"option":for(var Ie in f)if(se=f[Ie],f.hasOwnProperty(Ie)&&se!=null&&!p.hasOwnProperty(Ie))switch(Ie){case"selected":s.selected=!1;break;default:At(s,c,Ie,null,p,se)}for(G in p)if(se=p[G],le=f[G],p.hasOwnProperty(G)&&se!==le&&(se!=null||le!=null))switch(G){case"selected":s.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:At(s,c,G,se,p,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in f)se=f[ze],f.hasOwnProperty(ze)&&se!=null&&!p.hasOwnProperty(ze)&&At(s,c,ze,null,p,se);for(re in p)if(se=p[re],le=f[re],p.hasOwnProperty(re)&&se!==le&&(se!=null||le!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,c));break;default:At(s,c,re,se,p,le)}return;default:if(Qh(c)){for(var jt in f)se=f[jt],f.hasOwnProperty(jt)&&se!==void 0&&!p.hasOwnProperty(jt)&&Up(s,c,jt,void 0,p,se);for(he in p)se=p[he],le=f[he],!p.hasOwnProperty(he)||se===le||se===void 0&&le===void 0||Up(s,c,he,se,p,le);return}}for(var ee in f)se=f[ee],f.hasOwnProperty(ee)&&se!=null&&!p.hasOwnProperty(ee)&&At(s,c,ee,null,p,se);for(be in p)se=p[be],le=f[be],!p.hasOwnProperty(be)||se===le||se==null&&le==null||At(s,c,be,se,p,le)}function T_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EO(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var w=f[p],S=w.transferSize,A=w.initiatorType,M=w.duration;if(S&&M&&T_(A)){for(A=0,M=w.responseEnd,p+=1;p<f.length;p++){var G=f[p],re=G.startTime;if(re>M)break;var he=G.transferSize,be=G.initiatorType;he&&T_(be)&&(G=G.responseEnd,A+=he*(G<M?1:(M-re)/(G-re)))}if(--p,c+=8*(S+A)/(w.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Bp=null,$p=null;function ud(s){return s.nodeType===9?s:s.ownerDocument}function A_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j_(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function qp(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var zp=null;function TO(){var s=window.event;return s&&s.type==="popstate"?s===zp?!1:(zp=s,!0):(zp=null,!1)}var P_=typeof setTimeout=="function"?setTimeout:void 0,AO=typeof clearTimeout=="function"?clearTimeout:void 0,I_=typeof Promise=="function"?Promise:void 0,jO=typeof queueMicrotask=="function"?queueMicrotask:typeof I_<"u"?function(s){return I_.resolve(null).then(s).catch(PO)}:P_;function PO(s){setTimeout(function(){throw s})}function Ii(s){return s==="head"}function R_(s,c){var f=c,p=0;do{var w=f.nextSibling;if(s.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"||f==="/&"){if(p===0){s.removeChild(w),Ao(c);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")oc(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,oc(f);for(var S=f.firstChild;S;){var A=S.nextSibling,M=S.nodeName;S[Nl]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=A}}else f==="body"&&oc(s.ownerDocument.body);f=w}while(f);Ao(c)}function M_(s,c){var f=s;s=0;do{var p=f.nextSibling;if(f.nodeType===1?c?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(c?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=p}while(f)}function Gp(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Gp(f),Kh(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function IO(s,c,f,p){for(;s.nodeType===1;){var w=f;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[Nl])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(S=s.getAttribute("rel"),S==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(S!==w.rel||s.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||s.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||s.getAttribute("title")!==(w.title==null?null:w.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(S=s.getAttribute("src"),(S!==(w.src==null?null:w.src)||s.getAttribute("type")!==(w.type==null?null:w.type)||s.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&S&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var S=w.name==null?null:""+w.name;if(w.type==="hidden"&&s.getAttribute("name")===S)return s}else return s;if(s=zr(s.nextSibling),s===null)break}return null}function RO(s,c,f){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=zr(s.nextSibling),s===null))return null;return s}function D_(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=zr(s.nextSibling),s===null))return null;return s}function Fp(s){return s.data==="$?"||s.data==="$~"}function Hp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function MO(s,c){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||f.readyState!=="loading")c();else{var p=function(){c(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function zr(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var Vp=null;function O_(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(c===0)return zr(s.nextSibling);c--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||c++}s=s.nextSibling}return null}function L_(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(c===0)return s;c--}else f!=="/$"&&f!=="/&"||c++}s=s.previousSibling}return null}function U_(s,c,f){switch(c=ud(f),s){case"html":if(s=c.documentElement,!s)throw Error(r(452));return s;case"head":if(s=c.head,!s)throw Error(r(453));return s;case"body":if(s=c.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function oc(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Kh(s)}var Gr=new Map,B_=new Set;function dd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ha=B.d;B.d={f:DO,r:OO,D:LO,C:UO,L:BO,m:$O,X:zO,S:qO,M:GO};function DO(){var s=Ha.f(),c=nd();return s||c}function OO(s){var c=Ws(s);c!==null&&c.tag===5&&c.type==="form"?nS(c):Ha.r(s)}var Co=typeof document>"u"?null:document;function $_(s,c,f){var p=Co;if(p&&typeof c=="string"&&c){var w=Dr(c);w='link[rel="'+s+'"][href="'+w+'"]',typeof f=="string"&&(w+='[crossorigin="'+f+'"]'),B_.has(w)||(B_.add(w),s={rel:s,crossOrigin:f,href:c},p.querySelector(w)===null&&(c=p.createElement("link"),qn(c,"link",s),In(c),p.head.appendChild(c)))}}function LO(s){Ha.D(s),$_("dns-prefetch",s,null)}function UO(s,c){Ha.C(s,c),$_("preconnect",s,c)}function BO(s,c,f){Ha.L(s,c,f);var p=Co;if(p&&s&&c){var w='link[rel="preload"][as="'+Dr(c)+'"]';c==="image"&&f&&f.imageSrcSet?(w+='[imagesrcset="'+Dr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(w+='[imagesizes="'+Dr(f.imageSizes)+'"]')):w+='[href="'+Dr(s)+'"]';var S=w;switch(c){case"style":S=Eo(s);break;case"script":S=To(s)}Gr.has(S)||(s=g({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:s,as:c},f),Gr.set(S,s),p.querySelector(w)!==null||c==="style"&&p.querySelector(lc(S))||c==="script"&&p.querySelector(cc(S))||(c=p.createElement("link"),qn(c,"link",s),In(c),p.head.appendChild(c)))}}function $O(s,c){Ha.m(s,c);var f=Co;if(f&&s){var p=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+Dr(p)+'"][href="'+Dr(s)+'"]',S=w;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=To(s)}if(!Gr.has(S)&&(s=g({rel:"modulepreload",href:s},c),Gr.set(S,s),f.querySelector(w)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(cc(S)))return}p=f.createElement("link"),qn(p,"link",s),In(p),f.head.appendChild(p)}}}function qO(s,c,f){Ha.S(s,c,f);var p=Co;if(p&&s){var w=Ks(p).hoistableStyles,S=Eo(s);c=c||"default";var A=w.get(S);if(!A){var M={loading:0,preload:null};if(A=p.querySelector(lc(S)))M.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":c},f),(f=Gr.get(S))&&Wp(s,f);var G=A=p.createElement("link");In(G),qn(G,"link",s),G._p=new Promise(function(re,he){G.onload=re,G.onerror=he}),G.addEventListener("load",function(){M.loading|=1}),G.addEventListener("error",function(){M.loading|=2}),M.loading|=4,fd(A,c,p)}A={type:"stylesheet",instance:A,count:1,state:M},w.set(S,A)}}}function zO(s,c){Ha.X(s,c);var f=Co;if(f&&s){var p=Ks(f).hoistableScripts,w=To(s),S=p.get(w);S||(S=f.querySelector(cc(w)),S||(s=g({src:s,async:!0},c),(c=Gr.get(w))&&Kp(s,c),S=f.createElement("script"),In(S),qn(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(w,S))}}function GO(s,c){Ha.M(s,c);var f=Co;if(f&&s){var p=Ks(f).hoistableScripts,w=To(s),S=p.get(w);S||(S=f.querySelector(cc(w)),S||(s=g({src:s,async:!0,type:"module"},c),(c=Gr.get(w))&&Kp(s,c),S=f.createElement("script"),In(S),qn(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(w,S))}}function q_(s,c,f,p){var w=(w=oe.current)?dd(w):null;if(!w)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Eo(f.href),f=Ks(w).hoistableStyles,p=f.get(c),p||(p={type:"style",instance:null,count:0,state:null},f.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Eo(f.href);var S=Ks(w).hoistableStyles,A=S.get(s);if(A||(w=w.ownerDocument||w,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(s,A),(S=w.querySelector(lc(s)))&&!S._p&&(A.instance=S,A.state.loading=5),Gr.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Gr.set(s,f),S||FO(w,s,f,A.state))),c&&p===null)throw Error(r(528,""));return A}if(c&&p!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=To(f),f=Ks(w).hoistableScripts,p=f.get(c),p||(p={type:"script",instance:null,count:0,state:null},f.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Eo(s){return'href="'+Dr(s)+'"'}function lc(s){return'link[rel="stylesheet"]['+s+"]"}function z_(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function FO(s,c,f,p){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=s.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),qn(c,"link",f),In(c),s.head.appendChild(c))}function To(s){return'[src="'+Dr(s)+'"]'}function cc(s){return"script[async]"+s}function G_(s,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var p=s.querySelector('style[data-href~="'+Dr(f.href)+'"]');if(p)return c.instance=p,In(p),p;var w=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),In(p),qn(p,"style",w),fd(p,f.precedence,s),c.instance=p;case"stylesheet":w=Eo(f.href);var S=s.querySelector(lc(w));if(S)return c.state.loading|=4,c.instance=S,In(S),S;p=z_(f),(w=Gr.get(w))&&Wp(p,w),S=(s.ownerDocument||s).createElement("link"),In(S);var A=S;return A._p=new Promise(function(M,G){A.onload=M,A.onerror=G}),qn(S,"link",p),c.state.loading|=4,fd(S,f.precedence,s),c.instance=S;case"script":return S=To(f.src),(w=s.querySelector(cc(S)))?(c.instance=w,In(w),w):(p=f,(w=Gr.get(S))&&(p=g({},f),Kp(p,w)),s=s.ownerDocument||s,w=s.createElement("script"),In(w),qn(w,"link",p),s.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,fd(p,f.precedence,s));return c.instance}function fd(s,c,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=p.length?p[p.length-1]:null,S=w,A=0;A<p.length;A++){var M=p[A];if(M.dataset.precedence===c)S=M;else if(S!==w)break}S?S.parentNode.insertBefore(s,S.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(s,c.firstChild))}function Wp(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function Kp(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var hd=null;function F_(s,c,f){if(hd===null){var p=new Map,w=hd=new Map;w.set(f,p)}else w=hd,p=w.get(f),p||(p=new Map,w.set(f,p));if(p.has(s))return p;for(p.set(s,null),f=f.getElementsByTagName(s),w=0;w<f.length;w++){var S=f[w];if(!(S[Nl]||S[St]||s==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var A=S.getAttribute(c)||"";A=s+A;var M=p.get(A);M?M.push(S):p.set(A,[S])}}return p}function H_(s,c,f){s=s.ownerDocument||s,s.head.insertBefore(f,c==="title"?s.querySelector("head > title"):null)}function HO(s,c,f){if(f===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function V_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function VO(s,c,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var w=Eo(p.href),S=c.querySelector(lc(w));if(S){c=S._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=md.bind(s),c.then(s,s)),f.state.loading|=4,f.instance=S,In(S);return}S=c.ownerDocument||c,p=z_(p),(w=Gr.get(w))&&Wp(p,w),S=S.createElement("link"),In(S);var A=S;A._p=new Promise(function(M,G){A.onload=M,A.onerror=G}),qn(S,"link",p),f.instance=S}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=md.bind(s),c.addEventListener("load",f),c.addEventListener("error",f))}}var Yp=0;function WO(s,c){return s.stylesheets&&s.count===0&&gd(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var p=setTimeout(function(){if(s.stylesheets&&gd(s,s.stylesheets),s.unsuspend){var S=s.unsuspend;s.unsuspend=null,S()}},6e4+c);0<s.imgBytes&&Yp===0&&(Yp=62500*EO());var w=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&gd(s,s.stylesheets),s.unsuspend)){var S=s.unsuspend;s.unsuspend=null,S()}},(s.imgBytes>Yp?50:800)+c);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(w)}}:null}function md(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var pd=null;function gd(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,pd=new Map,c.forEach(KO,s),pd=null,md.call(s))}function KO(s,c){if(!(c.state.loading&4)){var f=pd.get(s);if(f)var p=f.get(null);else{f=new Map,pd.set(s,f);for(var w=s.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<w.length;S++){var A=w[S];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(f.set(A.dataset.precedence,A),p=A)}p&&f.set(null,p)}w=c.instance,A=w.getAttribute("data-precedence"),S=f.get(A)||p,S===p&&f.set(null,w),f.set(A,w),this.count++,p=md.bind(this),w.addEventListener("load",p),w.addEventListener("error",p),S?S.parentNode.insertBefore(w,S.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(w,s.firstChild)),c.state.loading|=4}}var uc={$$typeof:E,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function YO(s,c,f,p,w,S,A,M,G){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.hiddenUpdates=Ke(null),this.identifierPrefix=p,this.onUncaughtError=w,this.onCaughtError=S,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function W_(s,c,f,p,w,S,A,M,G,re,he,be){return s=new YO(s,c,f,A,G,re,he,be,M),c=1,S===!0&&(c|=24),S=xr(3,null,null,c),s.current=S,S.stateNode=s,c=Tm(),c.refCount++,s.pooledCache=c,c.refCount++,S.memoizedState={element:p,isDehydrated:f,cache:c},Im(S),s}function K_(s){return s?(s=ao,s):ao}function Y_(s,c,f,p,w,S){w=K_(w),p.context===null?p.context=w:p.pendingContext=w,p=wi(c),p.payload={element:f},S=S===void 0?null:S,S!==null&&(p.callback=S),f=Si(s,p,c),f!==null&&(mr(f,s,c),zl(f,s,c))}function J_(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<c?f:c}}function Jp(s,c){J_(s,c),(s=s.alternate)&&J_(s,c)}function X_(s){if(s.tag===13||s.tag===31){var c=ts(s,67108864);c!==null&&mr(c,s,67108864),Jp(s,67108864)}}function Q_(s){if(s.tag===13||s.tag===31){var c=kr();c=Ht(c);var f=ts(s,c);f!==null&&mr(f,s,c),Jp(s,c)}}var yd=!0;function JO(s,c,f,p){var w=q.T;q.T=null;var S=B.p;try{B.p=2,Xp(s,c,f,p)}finally{B.p=S,q.T=w}}function XO(s,c,f,p){var w=q.T;q.T=null;var S=B.p;try{B.p=8,Xp(s,c,f,p)}finally{B.p=S,q.T=w}}function Xp(s,c,f,p){if(yd){var w=Qp(p);if(w===null)Lp(s,c,p,bd,f),ek(s,p);else if(ZO(w,s,c,f,p))p.stopPropagation();else if(ek(s,p),c&4&&-1<QO.indexOf(s)){for(;w!==null;){var S=Ws(w);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var A=Ae(S.pendingLanes);if(A!==0){var M=S;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var G=1<<31-ke(A);M.entanglements[1]|=G,A&=~G}xa(S),(xt&6)===0&&(ed=Ce()+500,ac(0))}}break;case 31:case 13:M=ts(S,2),M!==null&&mr(M,S,2),nd(),Jp(S,2)}if(S=Qp(p),S===null&&Lp(s,c,p,bd,f),S===w)break;w=S}w!==null&&p.stopPropagation()}else Lp(s,c,p,null,f)}}function Qp(s){return s=em(s),Zp(s)}var bd=null;function Zp(s){if(bd=null,s=Vs(s),s!==null){var c=i(s);if(c===null)s=null;else{var f=c.tag;if(f===13){if(s=l(c),s!==null)return s;s=null}else if(f===31){if(s=u(c),s!==null)return s;s=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return bd=s,null}function Z_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case nt:return 2;case We:return 8;case Dt:case Yt:return 32;case Ut:return 268435456;default:return 32}default:return 32}}var eg=!1,Ri=null,Mi=null,Di=null,dc=new Map,fc=new Map,Oi=[],QO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ek(s,c){switch(s){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":dc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(c.pointerId)}}function hc(s,c,f,p,w,S){return s===null||s.nativeEvent!==S?(s={blockedOn:c,domEventName:f,eventSystemFlags:p,nativeEvent:S,targetContainers:[w]},c!==null&&(c=Ws(c),c!==null&&X_(c)),s):(s.eventSystemFlags|=p,c=s.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),s)}function ZO(s,c,f,p,w){switch(c){case"focusin":return Ri=hc(Ri,s,c,f,p,w),!0;case"dragenter":return Mi=hc(Mi,s,c,f,p,w),!0;case"mouseover":return Di=hc(Di,s,c,f,p,w),!0;case"pointerover":var S=w.pointerId;return dc.set(S,hc(dc.get(S)||null,s,c,f,p,w)),!0;case"gotpointercapture":return S=w.pointerId,fc.set(S,hc(fc.get(S)||null,s,c,f,p,w)),!0}return!1}function tk(s){var c=Vs(s.target);if(c!==null){var f=i(c);if(f!==null){if(c=f.tag,c===13){if(c=l(f),c!==null){s.blockedOn=c,Zt(s.priority,function(){Q_(f)});return}}else if(c===31){if(c=u(f),c!==null){s.blockedOn=c,Zt(s.priority,function(){Q_(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xd(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var f=Qp(s.nativeEvent);if(f===null){f=s.nativeEvent;var p=new f.constructor(f.type,f);Zh=p,f.target.dispatchEvent(p),Zh=null}else return c=Ws(f),c!==null&&X_(c),s.blockedOn=f,!1;c.shift()}return!0}function nk(s,c,f){xd(s)&&f.delete(c)}function e4(){eg=!1,Ri!==null&&xd(Ri)&&(Ri=null),Mi!==null&&xd(Mi)&&(Mi=null),Di!==null&&xd(Di)&&(Di=null),dc.forEach(nk),fc.forEach(nk)}function vd(s,c){s.blockedOn===c&&(s.blockedOn=null,eg||(eg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,e4)))}var wd=null;function rk(s){wd!==s&&(wd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wd===s&&(wd=null);for(var c=0;c<s.length;c+=3){var f=s[c],p=s[c+1],w=s[c+2];if(typeof p!="function"){if(Zp(p||f)===null)continue;break}var S=Ws(f);S!==null&&(s.splice(c,3),c-=3,Qm(S,{pending:!0,data:w,method:f.method,action:p},p,w))}}))}function Ao(s){function c(G){return vd(G,s)}Ri!==null&&vd(Ri,s),Mi!==null&&vd(Mi,s),Di!==null&&vd(Di,s),dc.forEach(c),fc.forEach(c);for(var f=0;f<Oi.length;f++){var p=Oi[f];p.blockedOn===s&&(p.blockedOn=null)}for(;0<Oi.length&&(f=Oi[0],f.blockedOn===null);)tk(f),f.blockedOn===null&&Oi.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var w=f[p],S=f[p+1],A=w[un]||null;if(typeof S=="function")A||rk(f);else if(A){var M=null;if(S&&S.hasAttribute("formAction")){if(w=S,A=S[un]||null)M=A.formAction;else if(Zp(w)!==null)continue}else M=A.action;typeof M=="function"?f[p+1]=M:(f.splice(p,3),p-=3),rk(f)}}}function ak(){function s(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(A){return w=A})},focusReset:"manual",scroll:"manual"})}function c(){w!==null&&(w(),w=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,w=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),w!==null&&(w(),w=null)}}}function tg(s){this._internalRoot=s}Sd.prototype.render=tg.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,p=kr();Y_(f,p,s,c,null,null)},Sd.prototype.unmount=tg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;Y_(s.current,2,null,s,null,null),nd(),c[pa]=null}};function Sd(s){this._internalRoot=s}Sd.prototype.unstable_scheduleHydration=function(s){if(s){var c=Sn();s={blockedOn:null,target:s,priority:c};for(var f=0;f<Oi.length&&c!==0&&c<Oi[f].priority;f++);Oi.splice(f,0,s),f===0&&tk(s)}};var ik=e.version;if(ik!=="19.2.0")throw Error(r(527,ik,"19.2.0"));B.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(c),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var t4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{Qt=_d.inject(t4),te=_d}catch{}}return mc.createRoot=function(s,c){if(!a(s))throw Error(r(299));var f=!1,p="",w=fS,S=hS,A=mS;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError)),c=W_(s,1,!1,null,null,f,p,null,w,S,A,ak),s[pa]=c.current,Op(s),new tg(c)},mc.hydrateRoot=function(s,c,f){if(!a(s))throw Error(r(299));var p=!1,w="",S=fS,A=hS,M=mS,G=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(A=f.onCaughtError),f.onRecoverableError!==void 0&&(M=f.onRecoverableError),f.formState!==void 0&&(G=f.formState)),c=W_(s,1,!0,c,f??null,p,w,G,S,A,M,ak),c.context=K_(null),f=c.current,p=kr(),p=Ht(p),w=wi(p),w.callback=null,Si(f,w,p),f=p,c.current.lanes=f,Ze(c,f),xa(c),s[pa]=c.current,Op(s),new Sd(c)},mc.version="19.2.0",mc}var hk;function f4(){if(hk)return ag.exports;hk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ag.exports=d4(),ag.exports}var h4=f4();const m4=fa(h4);var lg={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mk;function p4(){if(mk)return pc;mk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,i){var l=null;if(i!==void 0&&(l=""+i),a.key!==void 0&&(l=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:t,type:r,key:l,ref:a!==void 0?a:null,props:i}}return pc.Fragment=e,pc.jsx=n,pc.jsxs=n,pc}var pk;function g4(){return pk||(pk=1,lg.exports=p4()),lg.exports}var o=g4(),t0=function(t,e){return t0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},t0(t,e)};function SA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Zd=function(){return Zd=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zd.apply(this,arguments)};function cl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function _A(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(i=(a<3?l(i):a>3?l(e,n,i):l(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function kA(t,e){return function(n,r){e(n,r,t)}}function NA(t,e,n,r,a,i){function l(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var u=r.kind,d=u==="getter"?"get":u==="setter"?"set":"value",h=!e&&t?r.static?t:t.prototype:null,m=e||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),g,b=!1,v=n.length-1;v>=0;v--){var k={};for(var C in r)k[C]=C==="access"?{}:r[C];for(var C in r.access)k.access[C]=r.access[C];k.addInitializer=function(T){if(b)throw new TypeError("Cannot add initializers after decoration has completed");i.push(l(T||null))};var N=(0,n[v])(u==="accessor"?{get:m.get,set:m.set}:m[d],k);if(u==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(g=l(N.get))&&(m.get=g),(g=l(N.set))&&(m.set=g),(g=l(N.init))&&a.unshift(g)}else(g=l(N))&&(u==="field"?a.unshift(g):m[d]=g)}h&&Object.defineProperty(h,r.name,m),b=!0}function CA(t,e,n){for(var r=arguments.length>2,a=0;a<e.length;a++)n=r?e[a].call(t,n):e[a].call(t);return r?n:void 0}function EA(t){return typeof t=="symbol"?t:"".concat(t)}function TA(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function AA(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Oe(t,e,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function u(m){try{h(r.next(m))}catch(g){l(g)}}function d(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?i(m.value):a(m.value).then(u,d)}h((r=r.apply(t,e||[])).next())})}function jA(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(m){return d([h,m])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(n=0)),n;)try{if(r=1,a&&(i=h[0]&2?a.return:h[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,h[1])).done)return i;switch(a=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,a=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],a=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var Qf=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function PA(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Qf(e,t,n)}function ef(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yb(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,i=[],l;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(u){l={error:u}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return i}function IA(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(yb(arguments[e]));return t}function RA(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],l=0,u=i.length;l<u;l++,a++)r[a]=i[l];return r}function MA(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Zo(t){return this instanceof Zo?(this.v=t,this):new Zo(t)}function DA(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(v){return function(k){return Promise.resolve(k).then(v,g)}}function u(v,k){r[v]&&(a[v]=function(C){return new Promise(function(N,T){i.push([v,C,N,T])>1||d(v,C)})},k&&(a[v]=k(a[v])))}function d(v,k){try{h(r[v](k))}catch(C){b(i[0][3],C)}}function h(v){v.value instanceof Zo?Promise.resolve(v.value.v).then(m,g):b(i[0][2],v)}function m(v){d("next",v)}function g(v){d("throw",v)}function b(v,k){v(k),i.shift(),i.length&&d(i[0][0],i[0][1])}}function OA(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,i){e[a]=t[a]?function(l){return(n=!n)?{value:Zo(t[a](l)),done:!1}:i?i(l):l}:i}}function LA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ef=="function"?ef(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(l){return new Promise(function(u,d){l=t[i](l),a(u,d,l.done,l.value)})}}function a(i,l,u,d){Promise.resolve(d).then(function(h){i({value:h,done:u})},l)}}function UA(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var y4=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},n0=function(t){return n0=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},n0(t)};function BA(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=n0(t),r=0;r<n.length;r++)n[r]!=="default"&&Qf(e,t,n[r]);return y4(e,t),e}function $A(t){return t&&t.__esModule?t:{default:t}}function qA(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function zA(t,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function GA(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function FA(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var b4=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function HA(t){function e(i){t.error=t.hasError?new b4(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var n,r=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(a,function(l){return e(l),a()})}else r|=1}catch(l){e(l)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function VA(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,a,i,l){return r?e?".jsx":".js":a&&(!i||!l)?n:a+i+"."+l.toLowerCase()+"js"}):t}const x4={__extends:SA,__assign:Zd,__rest:cl,__decorate:_A,__param:kA,__esDecorate:NA,__runInitializers:CA,__propKey:EA,__setFunctionName:TA,__metadata:AA,__awaiter:Oe,__generator:jA,__createBinding:Qf,__exportStar:PA,__values:ef,__read:yb,__spread:IA,__spreadArrays:RA,__spreadArray:MA,__await:Zo,__asyncGenerator:DA,__asyncDelegator:OA,__asyncValues:LA,__makeTemplateObject:UA,__importStar:BA,__importDefault:$A,__classPrivateFieldGet:qA,__classPrivateFieldSet:zA,__classPrivateFieldIn:GA,__addDisposableResource:FA,__disposeResources:HA,__rewriteRelativeImportExtension:VA},v4=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:FA,get __assign(){return Zd},__asyncDelegator:OA,__asyncGenerator:DA,__asyncValues:LA,__await:Zo,__awaiter:Oe,__classPrivateFieldGet:qA,__classPrivateFieldIn:GA,__classPrivateFieldSet:zA,__createBinding:Qf,__decorate:_A,__disposeResources:HA,__esDecorate:NA,__exportStar:PA,__extends:SA,__generator:jA,__importDefault:$A,__importStar:BA,__makeTemplateObject:UA,__metadata:AA,__param:kA,__propKey:EA,__read:yb,__rest:cl,__rewriteRelativeImportExtension:VA,__runInitializers:CA,__setFunctionName:TA,__spread:IA,__spreadArray:MA,__spreadArrays:RA,__values:ef,default:x4},Symbol.toStringTag,{value:"Module"})),w4=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class bb extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class S4 extends bb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gk extends bb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yk extends bb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var r0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(r0||(r0={}));class _4{constructor(e,{headers:n={},customFetch:r,region:a=r0.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=w4(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Oe(this,arguments,void 0,function*(n,r={}){var a;let i,l;try{const{headers:u,method:d,body:h,signal:m,timeout:g}=r;let b={},{region:v}=r;v||(v=this.region);const k=new URL(`${this.url}/${n}`);v&&v!=="any"&&(b["x-region"]=v,k.searchParams.set("forceFunctionRegion",v));let C;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",C=h):typeof h=="string"?(b["Content-Type"]="text/plain",C=h):typeof FormData<"u"&&h instanceof FormData?C=h:(b["Content-Type"]="application/json",C=JSON.stringify(h)):C=h;let N=m;g&&(l=new AbortController,i=setTimeout(()=>l.abort(),g),m?(N=l.signal,m.addEventListener("abort",()=>l.abort())):N=l.signal);const T=yield this.fetch(k.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),u),body:C,signal:N}).catch(j=>{throw new S4(j)}),R=T.headers.get("x-relay-error");if(R&&R==="true")throw new gk(T);if(!T.ok)throw new yk(T);let E=((a=T.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),P;return E==="application/json"?P=yield T.json():E==="application/octet-stream"||E==="application/pdf"?P=yield T.blob():E==="text/event-stream"?P=T:E==="multipart/form-data"?P=yield T.formData():P=yield T.text(),{data:P,error:null,response:T}}catch(u){return{data:null,error:u,response:u instanceof yk||u instanceof gk?u.context:void 0}}finally{i&&clearTimeout(i)}})}}var Jn={};const ul=i4(v4);var kd={},Nd={},Cd={},Ed={},Td={},Ad={},bk;function WA(){if(bk)return Ad;bk=1,Object.defineProperty(Ad,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ad.default=t,Ad}var xk;function KA(){if(xk)return Td;xk=1,Object.defineProperty(Td,"__esModule",{value:!0});const e=ul.__importDefault(WA());class n{constructor(a){var i,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,m,g,b;let v=null,k=null,C=null,N=d.status,T=d.statusText;if(d.ok){if(this.method!=="HEAD"){const j=await d.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?k=j:k=JSON.parse(j))}const E=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),P=(g=d.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");E&&P&&P.length>1&&(C=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(v={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,C=null,N=406,T="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const E=await d.text();try{v=JSON.parse(E),Array.isArray(v)&&d.status===404&&(k=[],v=null,N=200,T="OK")}catch{d.status===404&&E===""?(N=204,T="No Content"):v={message:E}}if(v&&this.isMaybeSingle&&(!((b=v==null?void 0:v.details)===null||b===void 0)&&b.includes("0 rows"))&&(v=null,N=200,T="OK"),v&&this.shouldThrowOnError)throw new e.default(v)}return{error:v,data:k,count:C,status:N,statusText:T}});return this.shouldThrowOnError||(u=u.catch(d=>{var h,m,g,b,v,k;let C="";const N=d==null?void 0:d.cause;if(N){const T=(h=N==null?void 0:N.message)!==null&&h!==void 0?h:"",R=(m=N==null?void 0:N.code)!==null&&m!==void 0?m:"";C=`${(g=d==null?void 0:d.name)!==null&&g!==void 0?g:"FetchError"}: ${d==null?void 0:d.message}`,C+=`

Caused by: ${(b=N==null?void 0:N.name)!==null&&b!==void 0?b:"Error"}: ${T}`,R&&(C+=` (${R})`),N!=null&&N.stack&&(C+=`
${N.stack}`)}else C=(v=d==null?void 0:d.stack)!==null&&v!==void 0?v:"";return{error:{message:`${(k=d==null?void 0:d.name)!==null&&k!==void 0?k:"FetchError"}: ${d==null?void 0:d.message}`,details:C,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(a,i)}returns(){return this}overrideTypes(){return this}}return Td.default=n,Td}var vk;function YA(){if(vk)return Ed;vk=1,Object.defineProperty(Ed,"__esModule",{value:!0});const e=ul.__importDefault(KA());class n extends e.default{select(a){let i=!1;const l=(a??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const h=d?`${d}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${a}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(h,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:h="text"}={}){var m;const g=[a?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),b=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${b}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Ed.default=n,Ed}var wk;function xb(){if(wk)return Cd;wk=1,Object.defineProperty(Cd,"__esModule",{value:!0});const e=ul.__importDefault(YA()),n=new RegExp("[,()]");class r extends e.default{eq(i,l){return this.url.searchParams.append(i,`eq.${l}`),this}neq(i,l){return this.url.searchParams.append(i,`neq.${l}`),this}gt(i,l){return this.url.searchParams.append(i,`gt.${l}`),this}gte(i,l){return this.url.searchParams.append(i,`gte.${l}`),this}lt(i,l){return this.url.searchParams.append(i,`lt.${l}`),this}lte(i,l){return this.url.searchParams.append(i,`lte.${l}`),this}like(i,l){return this.url.searchParams.append(i,`like.${l}`),this}likeAllOf(i,l){return this.url.searchParams.append(i,`like(all).{${l.join(",")}}`),this}likeAnyOf(i,l){return this.url.searchParams.append(i,`like(any).{${l.join(",")}}`),this}ilike(i,l){return this.url.searchParams.append(i,`ilike.${l}`),this}ilikeAllOf(i,l){return this.url.searchParams.append(i,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(i,l){return this.url.searchParams.append(i,`ilike(any).{${l.join(",")}}`),this}is(i,l){return this.url.searchParams.append(i,`is.${l}`),this}in(i,l){const u=Array.from(new Set(l)).map(d=>typeof d=="string"&&n.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(i,`in.(${u})`),this}contains(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cs.{${l.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(l)}`),this}containedBy(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cd.{${l.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(l)}`),this}rangeGt(i,l){return this.url.searchParams.append(i,`sr.${l}`),this}rangeGte(i,l){return this.url.searchParams.append(i,`nxl.${l}`),this}rangeLt(i,l){return this.url.searchParams.append(i,`sl.${l}`),this}rangeLte(i,l){return this.url.searchParams.append(i,`nxr.${l}`),this}rangeAdjacent(i,l){return this.url.searchParams.append(i,`adj.${l}`),this}overlaps(i,l){return typeof l=="string"?this.url.searchParams.append(i,`ov.${l}`):this.url.searchParams.append(i,`ov.{${l.join(",")}}`),this}textSearch(i,l,{config:u,type:d}={}){let h="";d==="plain"?h="pl":d==="phrase"?h="ph":d==="websearch"&&(h="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(i,`${h}fts${m}.${l}`),this}match(i){return Object.entries(i).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(i,l,u){return this.url.searchParams.append(i,`not.${l}.${u}`),this}or(i,{foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${i})`),this}filter(i,l,u){return this.url.searchParams.append(i,`${l}.${u}`),this}}return Cd.default=r,Cd}var Sk;function JA(){if(Sk)return Nd;Sk=1,Object.defineProperty(Nd,"__esModule",{value:!0});const e=ul.__importDefault(xb());class n{constructor(a,{headers:i={},schema:l,fetch:u}){this.url=a,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(a,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let h=!1;const m=(a??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",m),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const h=a.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(h.length>0){const m=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var h;const m="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((b,v)=>b.concat(Object.keys(v)),[]);if(g.length>0){const b=[...new Set(g)].map(v=>`"${v}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(a,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:a}={}){var i;const l="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Nd.default=n,Nd}var _k;function k4(){if(_k)return kd;_k=1,Object.defineProperty(kd,"__esModule",{value:!0});const t=ul,e=t.__importDefault(JA()),n=t.__importDefault(xb());class r{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:h}={}){var m;let g;const b=new URL(`${this.url}/rpc/${i}`);let v;u||d?(g=u?"HEAD":"GET",Object.entries(l).filter(([C,N])=>N!==void 0).map(([C,N])=>[C,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([C,N])=>{b.searchParams.append(C,N)})):(g="POST",v=l);const k=new Headers(this.headers);return h&&k.set("Prefer",`count=${h}`),new n.default({method:g,url:b,headers:k,schema:this.schemaName,body:v,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return kd.default=r,kd}var kk;function N4(){if(kk)return Jn;kk=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.PostgrestError=Jn.PostgrestBuilder=Jn.PostgrestTransformBuilder=Jn.PostgrestFilterBuilder=Jn.PostgrestQueryBuilder=Jn.PostgrestClient=void 0;const t=ul,e=t.__importDefault(k4());Jn.PostgrestClient=e.default;const n=t.__importDefault(JA());Jn.PostgrestQueryBuilder=n.default;const r=t.__importDefault(xb());Jn.PostgrestFilterBuilder=r.default;const a=t.__importDefault(YA());Jn.PostgrestTransformBuilder=a.default;const i=t.__importDefault(KA());Jn.PostgrestBuilder=i.default;const l=t.__importDefault(WA());return Jn.PostgrestError=l.default,Jn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:l.default},Jn}var XA=N4();const QA=fa(XA),C4=vA({__proto__:null,default:QA},[XA]),{PostgrestClient:E4,PostgrestQueryBuilder:nie,PostgrestFilterBuilder:rie,PostgrestTransformBuilder:aie,PostgrestBuilder:iie,PostgrestError:sie}=QA||C4;class T4{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const A4="2.83.0",j4=`realtime-js/${A4}`,ZA="1.0.0",P4="2.0.0",Nk=ZA,a0=1e4,I4=1e3,R4=100;var vs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(vs||(vs={}));var kn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(kn||(kn={}));var Yr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yr||(Yr={}));var i0;(function(t){t.websocket="websocket"})(i0||(i0={}));var ws;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ws||(ws={}));class M4{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,n){if(this._isArrayBuffer(e.payload))return n(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodePush(e){var n,r;const{event:a,topic:i,payload:l}=e,u=(n=e.ref)!==null&&n!==void 0?n:"",d=(r=e.join_ref)!==null&&r!==void 0?r:"",h=this.META_LENGTH+d.length+u.length+i.length+a.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let g=new DataView(m),b=0;g.setUint8(b++,this.KINDS.push),g.setUint8(b++,d.length),g.setUint8(b++,u.length),g.setUint8(b++,i.length),g.setUint8(b++,a.length),Array.from(d,k=>g.setUint8(b++,k.charCodeAt(0))),Array.from(u,k=>g.setUint8(b++,k.charCodeAt(0))),Array.from(i,k=>g.setUint8(b++,k.charCodeAt(0))),Array.from(a,k=>g.setUint8(b++,k.charCodeAt(0)));var v=new Uint8Array(m.byteLength+l.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(l),m.byteLength),v.buffer}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r,a,i;const l=e.topic,u=(n=e.ref)!==null&&n!==void 0?n:"",d=(r=e.join_ref)!==null&&r!==void 0?r:"",h=e.payload.event,m=(i=(a=e.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),g=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+h.length,b=new ArrayBuffer(this.HEADER_LENGTH+g);let v=new DataView(b),k=0;v.setUint8(k++,this.KINDS.userBroadcastPush),v.setUint8(k++,d.length),v.setUint8(k++,u.length),v.setUint8(k++,l.length),v.setUint8(k++,h.length),v.setUint8(k++,this.BINARY_ENCODING),Array.from(d,N=>v.setUint8(k++,N.charCodeAt(0))),Array.from(u,N=>v.setUint8(k++,N.charCodeAt(0))),Array.from(l,N=>v.setUint8(k++,N.charCodeAt(0))),Array.from(h,N=>v.setUint8(k++,N.charCodeAt(0)));var C=new Uint8Array(b.byteLength+m.byteLength);return C.set(new Uint8Array(b),0),C.set(new Uint8Array(m),b.byteLength),C.buffer}_encodeJsonUserBroadcastPush(e){var n,r,a,i;const l=e.topic,u=(n=e.ref)!==null&&n!==void 0?n:"",d=(r=e.join_ref)!==null&&r!==void 0?r:"",h=e.payload.event,m=(i=(a=e.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},b=new TextEncoder().encode(JSON.stringify(m)).buffer,v=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+h.length,k=new ArrayBuffer(this.HEADER_LENGTH+v);let C=new DataView(k),N=0;C.setUint8(N++,this.KINDS.userBroadcastPush),C.setUint8(N++,d.length),C.setUint8(N++,u.length),C.setUint8(N++,l.length),C.setUint8(N++,h.length),C.setUint8(N++,this.JSON_ENCODING),Array.from(d,R=>C.setUint8(N++,R.charCodeAt(0))),Array.from(u,R=>C.setUint8(N++,R.charCodeAt(0))),Array.from(l,R=>C.setUint8(N++,R.charCodeAt(0))),Array.from(h,R=>C.setUint8(N++,R.charCodeAt(0)));var T=new Uint8Array(k.byteLength+b.byteLength);return T.set(new Uint8Array(k),0),T.set(new Uint8Array(b),k.byteLength),T.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,i,l,u,d]=r;return n({join_ref:a,ref:i,topic:l,event:u,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,n,a);case this.KINDS.reply:return this._decodeReply(e,n,a);case this.KINDS.broadcast:return this._decodeBroadcast(e,n,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,a)}}_decodePush(e,n,r){const a=n.getUint8(1),i=n.getUint8(2),l=n.getUint8(3);let u=this.HEADER_LENGTH+this.META_LENGTH-1;const d=r.decode(e.slice(u,u+a));u=u+a;const h=r.decode(e.slice(u,u+i));u=u+i;const m=r.decode(e.slice(u,u+l));u=u+l;const g=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{join_ref:d,ref:null,topic:h,event:m,payload:g}}_decodeReply(e,n,r){const a=n.getUint8(1),i=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+this.META_LENGTH;const h=r.decode(e.slice(d,d+a));d=d+a;const m=r.decode(e.slice(d,d+i));d=d+i;const g=r.decode(e.slice(d,d+l));d=d+l;const b=r.decode(e.slice(d,d+u));d=d+u;const v=JSON.parse(r.decode(e.slice(d,e.byteLength))),k={status:b,response:v};return{join_ref:h,ref:m,topic:g,event:Yr.reply,payload:k}}_decodeBroadcast(e,n,r){const a=n.getUint8(1),i=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+a));l=l+a;const d=r.decode(e.slice(l,l+i));l=l+i;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{join_ref:null,ref:null,topic:u,event:d,payload:h}}_decodeUserBroadcast(e,n,r){const a=n.getUint8(1),i=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const h=r.decode(e.slice(d,d+a));d=d+a;const m=r.decode(e.slice(d,d+i));d=d+i;const g=r.decode(e.slice(d,d+l));d=d+l;const b=e.slice(d,e.byteLength),v=u===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,k={type:this.BROADCAST,event:m,payload:v};return l>0&&(k.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST,payload:k}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class ej{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ot||(Ot={}));const Ck=(t,e,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,l)=>(i[l]=D4(l,t,e,a),i),{}):{}},D4=(t,e,n,r)=>{const a=e.find(u=>u.name===t),i=a==null?void 0:a.type,l=n[t];return i&&!r.includes(i)?tj(i,l):s0(l)},tj=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return B4(e,n)}switch(t){case Ot.bool:return O4(e);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return L4(e);case Ot.json:case Ot.jsonb:return U4(e);case Ot.timestamp:return $4(e);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return s0(e);default:return s0(e)}},s0=t=>t,O4=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},L4=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},U4=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},B4=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const l=t.slice(1,n);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>tj(e,u))}return t},$4=t=>typeof t=="string"?t.replace(" ","T"):t,nj=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class cg{constructor(e,n,r={},a=a0){this.channel=e,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ek;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ek||(Ek={}));class Tc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tc.syncState(this.state,a,i,l),this.pendingDiffs.forEach(d=>{this.state=Tc.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Tc.syncDiff(this.state,a,i,l),u())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,a){const i=this.cloneDeep(e),l=this.transformState(n),u={},d={};return this.map(i,(h,m)=>{l[h]||(d[h]=m)}),this.map(l,(h,m)=>{const g=i[h];if(g){const b=m.map(N=>N.presence_ref),v=g.map(N=>N.presence_ref),k=m.filter(N=>v.indexOf(N.presence_ref)<0),C=g.filter(N=>b.indexOf(N.presence_ref)<0);k.length>0&&(u[h]=k),C.length>0&&(d[h]=C)}else u[h]=m}),this.syncDiff(i,{joins:u,leaves:d},r,a)}static syncDiff(e,n,r,a){const{joins:i,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(u,d)=>{var h;const m=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(d),m.length>0){const g=e[u].map(v=>v.presence_ref),b=m.filter(v=>g.indexOf(v.presence_ref)<0);e[u].unshift(...b)}r(u,m,d)}),this.map(l,(u,d)=>{let h=e[u];if(!h)return;const m=d.map(g=>g.presence_ref);h=h.filter(g=>m.indexOf(g.presence_ref)<0),e[u]=h,a(u,h,d),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const a=e[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tk;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Tk||(Tk={}));var Ac;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ac||(Ac={}));var Va;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Va||(Va={}));class vb{constructor(e,n={config:{}},r){var a,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new cg(this,Yr.join,this.params,this.timeout),this.rejoinTimer=new ej(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Tc(this),this.broadcastEndpointURL=nj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==kn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,h=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&a!==void 0?a:[],m=!!this.bindings[Ac.PRESENCE]&&this.bindings[Ac.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,g={},b={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(Va.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Va.CLOSED)),this.updateJoinPayload(Object.assign({config:b},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var k;if(this.socket.setAuth(),v===void 0){e==null||e(Va.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,N=(k=C==null?void 0:C.length)!==null&&k!==void 0?k:0,T=[];for(let R=0;R<N;R++){const E=C[R],{filter:{event:P,schema:j,table:I,filter:D}}=E,$=v&&v[R];if($&&$.event===P&&$.schema===j&&$.table===I&&$.filter===D)T.push(Object.assign(Object.assign({},E),{id:$.id}));else{this.unsubscribe(),this.state=kn.errored,e==null||e(Va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Va.SUBSCRIBED);return}}).receive("error",v=>{this.state=kn.errored,e==null||e(Va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===kn.joined&&e===Ac.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const h=await u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new cg(this,Yr.leave,{},e),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new cg(this,e,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>R4){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var a,i;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:h,join:m}=Yr;if(r&&[u,d,h,m].indexOf(l)>=0&&r!==this._joinRef())return;let b=this._onMessage(l,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var k,C,N;return((k=v.filter)===null||k===void 0?void 0:k.event)==="*"||((N=(C=v.filter)===null||C===void 0?void 0:C.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===l}).map(v=>v.callback(b,r)):(i=this.bindings[l])===null||i===void 0||i.filter(v=>{var k,C,N,T,R,E;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const P=v.id,j=(k=v.filter)===null||k===void 0?void 0:k.event;return P&&((C=n.ids)===null||C===void 0?void 0:C.includes(P))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const P=(R=(T=v==null?void 0:v.filter)===null||T===void 0?void 0:T.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return P==="*"||P===((E=n==null?void 0:n.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof b=="object"&&"ids"in b){const k=b.data,{schema:C,table:N,commit_timestamp:T,type:R,errors:E}=k;b=Object.assign(Object.assign({},{schema:C,table:N,commit_timestamp:T,eventType:R,new:{},old:{},errors:E}),this._getPayloadRecords(k))}v.callback(b,r)})}_isClosed(){return this.state===kn.closed}_isJoined(){return this.state===kn.joined}_isJoining(){return this.state===kn.joining}_isLeaving(){return this.state===kn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const a=e.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&vb.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yr.close,{},e)}_onError(e){this._on(Yr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ck(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ck(e.columns,e.old_record)),n}}const ug=()=>{},jd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},q4=[1e3,2e3,5e3,1e4],z4=1e4,G4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class F4{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=a0,this.transport=null,this.heartbeatIntervalMs=jd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ug,this.ref=0,this.reconnectTimer=null,this.vsn=Nk,this.logger=ug,this.conn=null,this.sendBuffer=[],this.serializer=new M4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${i0.websocket}`,this.httpEndpoint=nj(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=T4.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case vs.connecting:return ws.Connecting;case vs.open:return ws.Open;case vs.closing:return ws.Closing;default:return ws.Closed}}isConnected(){return this.connectionState()===ws.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new vb(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:a,ref:i}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(I4,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},jd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:l}=n,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${r} ${a} ${u}`.trim(),i),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(a,i,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===vs.open||this.conn.readyState===vs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${r}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([G4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:j4};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Yr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ej(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},jd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,a,i,l,u,d,h,m,g,b,v;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:a0,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:jd.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:ug,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:Nk,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(k=>q4[k-1]||z4),this.vsn){case ZA:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:((k,C)=>C(JSON.stringify(k))),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:((k,C)=>C(JSON.parse(k)));break;case P4:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class wb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Jt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class H4 extends wb{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class o0 extends wb{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Sb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),V4=()=>Response,l0=t=>{if(Array.isArray(t))return t.map(n=>l0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=l0(r)}),e},W4=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},dg=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},K4=(t,e,n)=>Oe(void 0,void 0,void 0,function*(){const r=yield V4();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(a=>{const i=t.status||500,l=(a==null?void 0:a.statusCode)||i+"";e(new H4(dg(a),i,l))}).catch(a=>{e(new o0(dg(a),a))}):e(new o0(dg(t),t))}),Y4=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?a:(W4(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function Jc(t,e,n,r,a,i){return Oe(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,Y4(e,r,a,i)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>K4(d,u,r))})})}function Rc(t,e,n,r){return Oe(this,void 0,void 0,function*(){return Jc(t,"GET",e,n,r)})}function la(t,e,n,r,a){return Oe(this,void 0,void 0,function*(){return Jc(t,"POST",e,r,a,n)})}function c0(t,e,n,r,a){return Oe(this,void 0,void 0,function*(){return Jc(t,"PUT",e,r,a,n)})}function J4(t,e,n,r){return Oe(this,void 0,void 0,function*(){return Jc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function _b(t,e,n,r,a){return Oe(this,void 0,void 0,function*(){return Jc(t,"DELETE",e,r,a,n)})}class X4{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Oe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Jt(e))return{data:null,error:e};throw e}})}}var rj;class Q4{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[rj]="BlobDownloadBuilder",this.promise=null}asStream(){return new X4(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Oe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Jt(e))return{data:null,error:e};throw e}})}}rj=Symbol.toStringTag;const Z4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ak={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class e3{constructor(e,n={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Sb(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,a){return Oe(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Ak),a);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),d&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(d))):(i=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),a!=null&&a.headers&&(u=Object.assign(Object.assign({},u),a.headers));const h=this._removeEmptyFolders(n),m=this._getFinalPath(h),g=yield(e=="PUT"?c0:la)(this.fetch,`${this.url}/object/${m}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,a){return Oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let d;const h=Object.assign({upsert:Ak.upsert},a),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType);const g=yield c0(this.fetch,u.toString(),d,{headers:m});return{data:{path:i,fullPath:g.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Jt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return Oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield la(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new wb("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}})}copy(e,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:{path:(yield la(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,r){return Oe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield la(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,r){return Oe(this,void 0,void 0,function*(){try{const a=yield la(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}})}download(e,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(e),d=()=>Rc(this.fetch,`${this.url}/${a}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new Q4(d,this.shouldThrowOnError)}info(e){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Rc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:l0(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}exists(e){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield J4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r)&&r instanceof o0){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&a.push(d);let h=a.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield _b(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Oe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Z4),n),{prefix:e||""});return{data:yield la(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}})}listV2(e,n){return Oe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield la(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const aj="2.83.0",ij={"X-Client-Info":`storage-js/${aj}`};class t3{constructor(e,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ij),n),this.fetch=Sb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Oe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Rc(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}getBucket(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield Rc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}createBucket(e){return Oe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield la(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}})}updateBucket(e,n){return Oe(this,void 0,void 0,function*(){try{return{data:yield c0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield _b(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class n3{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ij),n),this.fetch=Sb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}listBuckets(e){return Oe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Rc(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield _b(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}}const kb={"X-Client-Info":`storage-js/${aj}`,"Content-Type":"application/json"};class sj extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ar(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class fg extends sj{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class r3 extends sj{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var jk;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(jk||(jk={}));const Nb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),a3=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Pk=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),i3=(t,e,n)=>Oe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const a=t.status||500,i=t;if(typeof i.json=="function")i.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||a+"";e(new fg(Pk(l),a,u))}).catch(()=>{const l=a+"",u=i.statusText||`HTTP ${a} error`;e(new fg(u,a,l))});else{const l=a+"",u=i.statusText||`HTTP ${a} error`;e(new fg(u,a,l))}}else e(new r3(Pk(t),t))}),s3=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(a3(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),n)):a};function o3(t,e,n,r,a,i){return Oe(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,s3(e,r,a,i)).then(d=>{if(!d.ok)throw d;if(r!=null&&r.noResolveJson)return d;const h=d.headers.get("content-type");return!h||!h.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>i3(d,u,r))})})}function jr(t,e,n,r,a){return Oe(this,void 0,void 0,function*(){return o3(t,"POST",e,r,a,n)})}class l3{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kb),n),this.fetch=Nb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Oe(this,void 0,void 0,function*(){try{return{data:(yield jr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Oe(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}listIndexes(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Oe(this,void 0,void 0,function*(){try{return{data:(yield jr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}}class c3{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kb),n),this.fetch=Nb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Oe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield jr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}getVectors(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}listVectors(e){return Oe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield jr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}queryVectors(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Oe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield jr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}}class u3{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kb),n),this.fetch=Nb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Oe(this,void 0,void 0,function*(){try{return{data:(yield jr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}getBucket(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield jr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}listBuckets(){return Oe(this,arguments,void 0,function*(e={}){try{return{data:yield jr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Oe(this,void 0,void 0,function*(){try{return{data:(yield jr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ar(n))return{data:null,error:n};throw n}})}}class d3 extends u3{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new f3(this.url,this.headers,e,this.fetch)}}class f3 extends l3{constructor(e,n,r,a){super(e,n,a),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Oe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Oe(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Oe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Oe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new h3(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class h3 extends c3{constructor(e,n,r,a,i){super(e,n,i),this.vectorBucketName=r,this.indexName=a}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Oe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Oe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Oe(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Oe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Oe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class m3 extends t3{constructor(e,n={},r,a){super(e,n,r,a)}from(e){return new e3(this.url,this.headers,e,this.fetch)}get vectors(){return new d3(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new n3(this.url+"/iceberg",this.headers,this.fetch)}}const p3="2.83.0";let Nc="";typeof Deno<"u"?Nc="deno":typeof document<"u"?Nc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nc="react-native":Nc="node";const g3={"X-Client-Info":`supabase-js-${Nc}/${p3}`},y3={headers:g3},b3={schema:"public"},x3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},v3={},w3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),S3=()=>Headers,_3=(t,e,n)=>{const r=w3(n),a=S3();return async(i,l)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let h=new a(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(i,Object.assign(Object.assign({},l),{headers:h}))}};function k3(t){return t.endsWith("/")?t:t+"/"}function N3(t,e){var n,r;const{db:a,auth:i,realtime:l,global:u}=t,{db:d,auth:h,realtime:m,global:g}=e,b={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},m),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}function C3(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(k3(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const oj="2.83.0",Bo=30*1e3,u0=3,hg=u0*Bo,E3="http://localhost:9999",T3="supabase.auth.token",A3={"X-Client-Info":`gotrue-js/${oj}`},d0="X-Supabase-Api-Version",lj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},j3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P3=600*1e3;class Mc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class I3 extends Mc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function R3(t){return Ue(t)&&t.name==="AuthApiError"}class Ss extends Mc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Hi extends Mc{constructor(e,n,r,a){super(e,r,a),this.name=n,this.status=r}}class Nr extends Hi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function M3(t){return Ue(t)&&t.name==="AuthSessionMissingError"}class jo extends Hi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pd extends Hi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Id extends Hi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function D3(t){return Ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ik extends Hi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class f0 extends Hi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function mg(t){return Ue(t)&&t.name==="AuthRetryableFetchError"}class Rk extends Hi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class h0 extends Hi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const tf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mk=` 	
\r=`.split(""),O3=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Mk.length;e+=1)t[Mk[e].charCodeAt(0)]=-2;for(let e=0;e<tf.length;e+=1)t[tf[e].charCodeAt(0)]=e;return t})();function Dk(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(tf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(tf[r]),e.queuedBits-=6}}function cj(t,e,n){const r=O3[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ok(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{B3(l,r,n)};for(let l=0;l<t.length;l+=1)cj(t.charCodeAt(l),a,i);return e.join("")}function L3(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function U3(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}L3(r,e)}}function B3(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Wo(t){const e=[],n={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)cj(t.charCodeAt(a),n,r);return new Uint8Array(e)}function $3(t){const e=[];return U3(t,n=>e.push(n)),new Uint8Array(e)}function _s(t){const e=[],n={queue:0,queuedBits:0},r=a=>{e.push(a)};return t.forEach(a=>Dk(a,n,r)),Dk(null,n,r),e.join("")}function q3(t){return Math.round(Date.now()/1e3)+t}function z3(){return Symbol("auth-callback")}const zn=()=>typeof window<"u"&&typeof document<"u",ms={tested:!1,writable:!1},uj=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ms.tested)return ms.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ms.tested=!0,ms.writable=!0}catch{ms.tested=!0,ms.writable=!1}return ms.writable};function G3(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{e[a]=r}),e}const dj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),F3=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",$o=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ps=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ui=async(t,e)=>{await t.removeItem(e)};class Zf{constructor(){this.promise=new Zf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Zf.promiseConstructor=Promise;function pg(t){const e=t.split(".");if(e.length!==3)throw new h0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!j3.test(e[r]))throw new h0("JWT not in base64url format");return{header:JSON.parse(Ok(e[0])),payload:JSON.parse(Ok(e[1])),signature:Wo(e[2]),raw:{header:e[0],payload:e[1]}}}async function H3(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function V3(t,e){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){r(l);return}}catch(l){if(!e(i,l)){a(l);return}}})()})}function W3(t){return("0"+t.toString(16)).substr(-2)}function K3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,W3).join("")}async function Y3(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function J3(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Y3(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Po(t,e,n=!1){const r=K3();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await $o(t,`${e}-code-verifier`,a);const i=await J3(r);return[i,r===i?"plain":"s256"]}const X3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Q3(t){const e=t.headers.get(d0);if(!e||!e.match(X3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Z3(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function eL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Io(t){if(!tL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nL(t,e){return new Proxy(t,{get:(n,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,a)}})}function Lk(t){return JSON.parse(JSON.stringify(t))}const gs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),rL=[502,503,504];async function Uk(t){var e;if(!F3(t))throw new f0(gs(t),0);if(rL.includes(t.status))throw new f0(gs(t),t.status);let n;try{n=await t.json()}catch(i){throw new Ss(gs(i),i)}let r;const a=Q3(t);if(a&&a.getTime()>=lj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Rk(gs(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Nr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Rk(gs(n),t.status,n.weak_password.reasons);throw new I3(gs(n),t.status||500,r)}const aL=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Ge(t,e,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[d0]||(i[d0]=lj["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const l=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await iL(t,e,n+u,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function iL(t,e,n,r,a,i){const l=aL(e,r,a,i);let u;try{u=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new f0(gs(d),0)}if(u.ok||await Uk(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await Uk(d)}}function oa(t){var e;let n=null;lL(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=q3(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Bk(t){const e=oa(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function qi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function sL(t){return{data:t,error:null}}function oL(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=t,l=cl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function $k(t){return t}function lL(t){return t.access_token&&t.refresh_token&&t.expires_in}const yg=["global","local","others"];class cL{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=dj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=yg[0]){if(yg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yg.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qi})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=cl(e,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:oL,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qi})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,a,i,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},m=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:$k});if(m.error)throw m.error;const g=await m.json(),b=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(k=>{const C=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(k.split(";")[1].split("=")[1]);h[`${N}Page`]=C}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Ue(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Io(e);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qi})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Io(e);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:qi})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Io(e);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:qi})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Io(e.userId);try{const{data:n,error:r}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Io(e.userId),Io(e.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,a,i,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},m=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:$k});if(m.error)throw m.error;const g=await m.json(),b=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(k=>{const C=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(k.split(";")[1].split("=")[1]);h[`${N}Page`]=C}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Ue(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}}function qk(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ro={debug:!!(globalThis&&uj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class uL extends fj{}async function dL(t,e,n){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new uL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ro.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function fL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hj(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function hL(t){return parseInt(t,16)}function mL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function pL(t){var e;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:h,scheme:m,uri:g,version:b}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=hj(t.address),k=m?`${m}://${r}`:r,C=t.statement?`${t.statement}
`:"",N=`${k} wants you to sign in with your Ethereum account:
${v}

${C}`;let T=`URI: ${g}
Version: ${b}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(a&&(T+=`
Expiration Time: ${a.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),d&&(T+=`
Request ID: ${d}`),h){let R=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);R+=`
- ${E}`}T+=R}return`${N}
${T}`}class gn extends Error{constructor({message:e,code:n,cause:r,name:a}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=a??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class nf extends gn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function gL({error:t,options:e}){var n,r,a;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new gn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new gn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new gn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new gn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new gn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new gn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new gn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new gn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(mj(l)){if(i.rp.id!==l)return new gn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new gn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new gn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function yL({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new gn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new gn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(mj(r)){if(n.rpId!==r)return new gn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new gn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class bL{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const xL=new bL;function vL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,a=cl(t,["challenge","user","excludeCredentials"]),i=Wo(e).buffer,l=Object.assign(Object.assign({},n),{id:Wo(n.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:i,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const h=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:Wo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function wL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=cl(t,["challenge","allowCredentials"]),a=Wo(e).buffer,i=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Wo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function SL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:_s(new Uint8Array(t.response.attestationObject)),clientDataJSON:_s(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function _L(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:_s(new Uint8Array(a.authenticatorData)),clientDataJSON:_s(new Uint8Array(a.clientDataJSON)),signature:_s(new Uint8Array(a.signature)),userHandle:a.userHandle?_s(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mj(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function zk(){var t,e;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function kL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nf("Browser returned unexpected credential type",e)}:{data:null,error:new nf("Empty credential response",e)}}catch(e){return{data:null,error:gL({error:e,options:t})}}}async function NL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nf("Browser returned unexpected credential type",e)}:{data:null,error:new nf("Empty credential response",e)}}catch(e){return{data:null,error:yL({error:e,options:t})}}}const CL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},EL={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function rf(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of t)if(a)for(const i in a){const l=a[i];if(l!==void 0)if(Array.isArray(l))r[i]=l;else if(n(l))r[i]=l;else if(e(l)){const u=r[i];e(u)?r[i]=rf(u,l):r[i]=rf(l)}else r[i]=l}return r}function TL(t,e){return rf(CL,t,e||{})}function AL(t,e){return rf(EL,t,e||{})}class jL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:a},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:u};const d=a??xL.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=TL(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:m,error:g}=await kL({publicKey:h,signal:d});return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const h=AL(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:m,error:g}=await NL(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:d}));return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(l){return Ue(l)?{data:null,error:l}:{data:null,error:new Ss("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!n)return{data:null,error:new Mc("rpId is required for WebAuthn authentication")};try{if(!zk())return{data:null,error:new Ss("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:a},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return Ue(l)?{data:null,error:l}:{data:null,error:new Ss("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!n)return{data:null,error:new Mc("rpId is required for WebAuthn registration")};try{if(!zk())return{data:null,error:new Ss("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:u};const{data:d,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:a},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Ue(l)?{data:null,error:l}:{data:null,error:new Ss("Unexpected error in register",l)}}}}fL();const PL={url:E3,storageKey:T3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Gk(t,e,n){return await n()}const Mo={};class Dc{get jwks(){var e,n;return(n=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},PL),e);if(this.storageKey=i.storageKey,this.instanceID=(n=Dc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Dc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&zn()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cL({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=dj(i.fetch),this.lock=i.lock||Gk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:zn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=dL:this.lock=Gk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:uj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=qk(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${oj}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(zn()&&(n=G3(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),zn()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),D3(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ue(n)?this._returnResult({error:n}):this._returnResult({error:new Ss("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,a;try{const i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:oa}),{data:l,error:u}=i;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(i){if(Ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,a;try{let i;if("email"in e){const{email:m,password:g,options:b}=e;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await Po(this.storage,this.storageKey)),i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:m,password:g,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:v,code_challenge_method:k},xform:oa})}else if("phone"in e){const{phone:m,password:g,options:b}=e;i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},channel:(a=b==null?void 0:b.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:oa})}else throw new Pd("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(i){if(Ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:l,options:u}=e;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Bk})}else if("phone"in e){const{phone:i,password:l,options:u}=e;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Bk})}else throw new Pd("You must provide either an email or phone number and a password");const{data:r,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const i=new jo;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,a,i,l,u,d,h,m,g,b;let v,k;if("message"in e)v=e.message,k=e.signature;else{const{chain:C,wallet:N,statement:T,options:R}=e;let E;if(zn())if(typeof N=="object")E=N;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")E=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=N}const P=new URL((n=R==null?void 0:R.url)!==null&&n!==void 0?n:window.location.href),j=await E.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=hj(j[0]);let D=(r=R==null?void 0:R.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!D){const H=await E.request({method:"eth_chainId"});D=hL(H)}const $={domain:P.host,address:I,statement:T,uri:P.href,version:"1",chainId:D,nonce:(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(i=R==null?void 0:R.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=R==null?void 0:R.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=R==null?void 0:R.signInWithEthereum)===null||m===void 0?void 0:m.resources};v=pL($),k=await E.request({method:"personal_sign",params:[mL(v),I]})}try{const{data:C,error:N}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:k},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:oa});if(N)throw N;if(!C||!C.session||!C.user){const T=new jo;return this._returnResult({data:{user:null,session:null},error:T})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:N})}catch(C){if(Ue(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var n,r,a,i,l,u,d,h,m,g,b,v;let k,C;if("message"in e)k=e.message,C=e.signature;else{const{chain:N,wallet:T,statement:R,options:E}=e;let P;if(zn())if(typeof T=="object")P=T;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))P=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=T}const j=new URL((n=E==null?void 0:E.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const I=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),R?{statement:R}:null));let D;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")D=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)D=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)k=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),C=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${j.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(r=E==null?void 0:E.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=E==null?void 0:E.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((u=E==null?void 0:E.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((d=E==null?void 0:E.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E==null?void 0:E.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(m=E==null?void 0:E.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const I=await P.signMessage(new TextEncoder().encode(k),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=I}}try{const{data:N,error:T}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:_s(C)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:oa});if(T)throw T;if(!N||!N.session||!N.user){const R=new jo;return this._returnResult({data:{user:null,session:null},error:R})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:T})}catch(N){if(Ue(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const n=await ps(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:l}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:oa});if(await Ui(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const u=new jo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(Ue(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:a,access_token:i,nonce:l}=e,u=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:oa}),{data:d,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d||!d.session||!d.user){const m=new jo;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:h})}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,a,i,l;try{if("email"in e){const{email:u,options:d}=e;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Po(this.storage,this.storageKey));const{error:g}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:u,options:d}=e,{data:h,error:m}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m})}throw new Pd("You must provide either an email or phone number.")}catch(u){if(Ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let a,i;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:oa});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(Ue(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,r,a,i,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Po(this.storage,this.storageKey));const h=await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:sL});return!((i=h.data)===null||i===void 0)&&i.url&&zn()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(Ue(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Nr;const{error:a}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Ue(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:i}=e,{error:l}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:a,options:i}=e,{data:l,error:u}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new Pd("You must provide either an email or phone number and a type")}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ps(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<hg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await ps(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=gg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=nL(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qi}):await this._useSession(async n=>{var r,a,i;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nr}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:qi})})}catch(n){if(Ue(n))return M3(n)&&(await this._removeSession(),await Ui(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Nr;const l=a.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Po(this.storage,this.storageKey));const{data:h,error:m}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:qi});if(m)throw m;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(Ue(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nr;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:l}=pg(e.access_token);if(l.exp&&(r=l.exp,a=r<=n),a){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Ue(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Nr;const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!zn())throw new Id("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Id(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ik("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Id("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ik("No code detected.");const{data:R,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:h}=e;if(!i||!u||!l||!h)throw new Id("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(u);let b=m+g;d&&(b=parseInt(d));const v=b-m;v*1e3<=Bo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${g}s`);const k=b-g;m-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,b,m):m-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,b,m);const{data:C,error:N}=await this._getUser(i);if(N)throw N;const T={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:g,expires_at:b,refresh_token:l,token_type:h,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(Ue(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ps(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return this._returnResult({error:i});const l=(r=a.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(R3(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Ui(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=z3(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Po(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ue(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var l,u,d,h,m;const{data:g,error:b}=i;if(b)throw b;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",v,{headers:this.headers,jwt:(m=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return zn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ue(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:a,data:{session:i}}=n;if(a)throw a;const{options:l,provider:u,token:d,access_token:h,nonce:m}=e,g=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:oa}),{data:b,error:v}=g;return v?this._returnResult({data:{user:null,session:null},error:v}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new jo}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:v}))}catch(a){if(Ue(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,a;const{data:i,error:l}=n;if(l)throw l;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await V3(async a=>(a>0&&await H3(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:oa})),(a,i)=>{const l=200*Math.pow(2,a);return i&&mg(i)&&Date.now()+l-r<Bo})}catch(r){if(this._debug(n,"error",r),Ue(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),zn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await ps(this.storage,this.storageKey);if(a&&this.userStorage){let l=await ps(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await $o(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:gg()}else if(a&&!a.user&&!a.user){const l=await ps(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Ui(this.storage,this.storageKey+"-user"),await $o(this.storage,this.storageKey,a)):a.user=gg()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<hg;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${hg}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),mg(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Zf;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new Nr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(a,"error",i),Ue(i)){const l={data:null,error:i};return mg(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await $o(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=Lk(a);await $o(this.storage,this.storageKey,i)}else{const a=Lk(n);await $o(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ui(this.storage,this.storageKey),await Ui(this.storage,this.storageKey+"-code-verifier"),await Ui(this.storage,this.storageKey+"-user"),this.userStorage&&await Ui(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Bo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Bo}ms, refresh threshold is ${u0} ticks`),a<=u0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,l]=await Po(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?this._returnResult({data:null,error:i}):await Ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,a;const{data:i,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:h}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&d.type==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?SL(e.webauthn.credential_response):_L(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:vL(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:wL(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=pg(r.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const h=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?await Ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Nr})})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Nr});const l=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&zn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Nr});const l=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&zn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Nr})})}catch(e){if(Ue(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?await Ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Nr})})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+P3>a)return r;const{data:i,error:l}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:k}=await this.getSession();if(k||!v.session)return this._returnResult({data:null,error:k});r=v.session.access_token}const{header:a,payload:i,signature:l,raw:{header:u,payload:d}}=pg(r);n!=null&&n.allowExpired||Z3(i.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:a,signature:l},error:null}}const m=eL(a.alg),g=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,$3(`${u}.${d}`)))throw new h0("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}}Dc.nextInstanceID={};const IL=Dc;class RL extends IL{constructor(e){super(e)}}class ML{constructor(e,n,r){var a,i,l;this.supabaseUrl=e,this.supabaseKey=n;const u=C3(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:b3,realtime:v3,auth:Object.assign(Object.assign({},x3),{storageKey:d}),global:y3},m=N3(r??{},h);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,m.global.fetch),this.fetch=_3(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new E4(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new m3(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new _4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:l,flowType:u,lock:d,debug:h,throwOnError:m},g,b){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RL({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),g),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:u,lock:d,debug:h,throwOnError:m,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new F4(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pj=(t,e,n)=>new ML(t,e,n);function DL(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}DL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const OL="https://ietshbhcugjtnwqnnptg.supabase.co",LL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlldHNoYmhjdWdqdG53cW5ucHRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MTg1MDQsImV4cCI6MjA3ODQ5NDUwNH0.d8BR1nphBd6-iUhZCKMX87g580i2Z-ZYwWyxn-I_hfE",Ee=pj(OL,LL),Fk="https://services.leadconnectorhq.com";class UL{constructor(e,n){this.apiKey=e,this.locationId=n}async makeRequest(e,n="GET",r){const a=`${Fk}${e}`,i={Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json",Version:"2021-07-28"},l={method:n,headers:i};r&&(n==="POST"||n==="PUT")&&(l.body=JSON.stringify(r));try{const u=await fetch(a,l);if(!u.ok){const d=await u.text();throw new Error(`GHL API Error (${u.status}): ${d}`)}return await u.json()}catch(u){throw console.error("GHL API Request Failed:",u),u}}async createContact(e){const n={...e,locationId:this.locationId||e.locationId};return this.makeRequest("/contacts/","POST",n)}async getContact(e){return this.makeRequest(`/contacts/${e}`)}async updateContact(e,n){return this.makeRequest(`/contacts/${e}`,"PUT",n)}async deleteContact(e){await this.makeRequest(`/contacts/${e}`,"DELETE")}async searchContacts(e){return this.makeRequest(`/contacts/?locationId=${this.locationId}&query=${encodeURIComponent(e)}`)}async getAllContacts(e=100,n){let r=`/contacts/?locationId=${this.locationId}&limit=${e}`;return n&&(r+=`&startAfterId=${n}`),this.makeRequest(r)}async importAllContacts(){const e=[];let n,r=!0;for(;r;){const a=await this.getAllContacts(100,n);e.push(...a.contacts),a.meta.nextStartAfterId?n=a.meta.nextStartAfterId:r=!1}return e}async addNote(e){return this.makeRequest(`/contacts/${e.contactId}/notes`,"POST",{body:e.body,userId:e.userId})}async getCalendars(){return this.makeRequest(`/calendars/?locationId=${this.locationId}`)}async createAppointment(e){const n={calendarId:e.calendarId,contactId:e.contactId,startTime:e.startTime,endTime:e.endTime,title:e.title,appointmentStatus:e.appointmentStatus||"confirmed"};return this.makeRequest(`/calendars/${e.calendarId}/events`,"POST",n)}async getAppointment(e){return this.makeRequest(`/calendars/events/${e}`)}async updateAppointment(e,n){return this.makeRequest(`/calendars/events/${e}`,"PUT",n)}async createOpportunity(e){return this.makeRequest("/opportunities/","POST",e)}async updateOpportunity(e,n){return this.makeRequest(`/opportunities/${e}`,"PUT",n)}async getOpportunity(e){return this.makeRequest(`/opportunities/${e}`)}async getContactOpportunities(e){return this.makeRequest(`/contacts/${e}/opportunities`)}async searchOpportunities(e,n){let r=`/opportunities/search?locationId=${this.locationId}`;return e&&(r+=`&pipelineId=${e}`),n&&(r+=`&status=${n}`),this.makeRequest(r)}async getContactInvoices(e){return this.makeRequest(`/invoices/?altId=${e}&altType=contact`)}async getInvoices(e=100,n=0,r){const a=new URLSearchParams({altId:this.locationId,altType:"location",limit:e.toString(),offset:n.toString()});return r&&a.append("status",r),this.makeRequest(`/invoices/?${a.toString()}`)}async getInvoice(e){if(!this.locationId)throw new Error("Location ID is required to fetch invoices");return this.makeRequest(`/locations/${this.locationId}/invoices/${e}`)}async getTransactions(e=100,n=0,r){const a=new URLSearchParams({altId:this.locationId,altType:"location",limit:e.toString(),offset:n.toString()});return r!=null&&r.paymentMode&&a.append("paymentMode",r.paymentMode),r!=null&&r.startAt&&a.append("startAt",r.startAt),r!=null&&r.endAt&&a.append("endAt",r.endAt),r!=null&&r.contactId&&a.append("contactId",r.contactId),r!=null&&r.search&&a.append("search",r.search),this.makeRequest(`/payments/transactions?${a.toString()}`)}async createWebhook(e,n){const r={url:e,events:n,locationId:this.locationId};return this.makeRequest("/webhooks/","POST",r)}async listWebhooks(){return this.makeRequest(`/webhooks/?locationId=${this.locationId}`)}async deleteWebhook(e){await this.makeRequest(`/webhooks/${e}`,"DELETE")}async uploadMedia(e,n,r){const a=new FormData;a.append("file",e,n),r&&a.append("folder",r);const i=`${Fk}/medias/upload-file`,l={Authorization:`Bearer ${this.apiKey}`,Version:"2021-07-28"};try{const u=await fetch(i,{method:"POST",headers:l,body:a});if(!u.ok){const h=await u.text();throw new Error(`GHL Media Upload Error (${u.status}): ${h}`)}const d=await u.json();return{fileId:d.fileId||d.id,url:d.url||d.fileUrl}}catch(u){throw console.error("GHL Media Upload Failed:",u),u}}async uploadMediaFromUrl(e,n,r){const i=await(await fetch(e)).blob();return this.uploadMedia(i,n,r)}async getMediaFiles(e){let n=`/medias/?locationId=${this.locationId}`;return e&&(n+=`&folder=${encodeURIComponent(e)}`),this.makeRequest(n)}async deleteMedia(e){await this.makeRequest(`/medias/${e}`,"DELETE")}}function Cb(t,e){return new UL(t,e)}async function BL(t){console.log(" Looking for GHL integration for company_id:",t);const{data:e,error:n}=await Ee.from("ghl_integrations").select("*").eq("company_id",t).eq("is_active",!0).single();if(console.log(" GHL integration query result:",{data:e,error:n}),n||!e)throw console.error(" GHL integration not found. Error:",n),new Error("GHL integration not found or inactive");return console.log(" Found GHL integration:",e),e}async function Hk(t){try{const{data:e,error:n}=await Ee.from("clients").select("*").eq("id",t).single();if(n||!e)throw new Error("Client not found");const r=await BL(e.company_id),a=Cb(r.ghl_api_key,r.ghl_location_id),i=e.name.split(" "),l={firstName:i[0],lastName:i.slice(1).join(" ")||i[0],email:e.email,phone:e.phone,tags:["mat-prospect"],locationId:r.ghl_location_id};let u;return e.ghl_contact_id?u=(await a.updateContact(e.ghl_contact_id,l)).contact.id:(u=(await a.createContact(l)).contact.id,await Ee.from("clients").update({ghl_contact_id:u,last_synced_to_ghl:new Date().toISOString(),sync_status:"synced"}).eq("id",t)),await Ee.from("ghl_integrations").update({last_sync_at:new Date().toISOString()}).eq("company_id",e.company_id),u}catch(e){throw console.error("Error syncing client to GHL:",e),await Ee.from("clients").update({sync_status:"error"}).eq("id",t),e}}const Wd=()=>({revenue:{today:"",week:"",month:"",ytd:"",mcv:"",acv:""},prospectingBlock:"",events:[],followUpBlock:"",winsToday:[],topTargets:Array.from({length:6},(t,e)=>({id:`top-${e+1}`,text:"",completed:!1})),massiveGoals:Array.from({length:6},(t,e)=>({id:`massive-${e+1}`,text:"",completed:!1})),speedOfImplementation:Array.from({length:3},(t,e)=>({id:`soi-${e+1}`,text:"",completed:!1,currentDay:0,totalDays:0,startDate:""})),aiChallenge:{quote:null,challenges:[],challengesAccepted:!1,completedChallenges:[]},prospectingContacts:Array.from({length:200},(t,e)=>({id:`contact-${e+1}`,name:"",date:"",phone:"",email:"",interestLevel:5,prospecting:{}})),milestones:{calls30Achieved:!1,newHotLeadsToday:0},talkTime:"",eodSubmitted:!1}),$L=t=>{const e=Wd();let n=t.speedOfImplementation||[];return n.length===0&&(n=e.speedOfImplementation),{...e,...t,speedOfImplementation:n}},bg={1:"Call",2:"Handwritten Letter",3:"Text Video",4:"Personal Visit",5:"Thought of You",10:"Event Offer",14:"Informational Links",21:"Video Email",30:"Special Offer"},qL=t=>{if(!t)return t;const e=t.replace(/[^\d]/g,""),n=e.length;return n<4?e:n<7?`(${e.slice(0,3)}) ${e.slice(3)}`:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6,10)}`},zL="https://ietshbhcugjtnwqnnptg.supabase.co",GL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlldHNoYmhjdWdqdG53cW5ucHRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MTg1MDQsImV4cCI6MjA3ODQ5NDUwNH0.d8BR1nphBd6-iUhZCKMX87g580i2Z-ZYwWyxn-I_hfE",Xt=pj(zL,GL);async function FL(t,e){try{const n=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:t,email:e})});if(!n.ok){const a=await n.text().catch(()=>"");throw console.error("Checkout error:",n.status,a),new Error("Unable to start checkout. Please try again.")}const r=await n.json();if(!(r!=null&&r.url))throw console.error("Checkout response missing URL:",r),new Error("Checkout session did not return a URL.");window.location.href=r.url}catch(n){throw console.error("Error starting Stripe checkout:",n),n}}const HL="price_1SVlc7AF9E77pmGU1ZadSw1A",VL="price_1SVIo3AF9E77pmGUWmOiZw0",WL="price_1SVIo3AF9E77pmGUVxM0u4z1",Xn={solo:{name:"Solo Closer",price:39,priceId:HL,description:"Perfect for the individual who wants to track their own massive action.",features:["1 User Account","All Core Tracking Features","EOD Report","Pipeline Builder"]},team:{name:"Team Engine",price:149,priceId:VL,description:"For small teams ready to scale their results and track team performance.",features:["Up to 5 User Accounts","Team Leaderboards","Manager Dashboard","All Solo Features"]},elite:{name:"Elite / Company",price:399,priceId:WL,description:"The ultimate solution for large organizations needing full visibility and control.",features:["Up to 10 User Accounts","Custom Reporting","Dedicated Support","All Team Features"]}};function KL(){const[t,e]=_.useState(!1),[n,r]=_.useState(!1),[a,i]=_.useState(null),[l,u]=_.useState({email:"",password:""}),[d,h]=_.useState({email:"",fullName:"",company:"",phone:"",password:""}),[m,g]=_.useState(!1),[b,v]=_.useState(""),[k,C]=_.useState(""),[N,T]=_.useState(!1),[R,E]=_.useState(!1),[P,j]=_.useState(""),[I,D]=_.useState(""),[$,H]=_.useState(!1),[z,F]=_.useState(!1),V=()=>e(!0),K=()=>{e(!1),v("")},pe=L=>{i(L),r(!0),C("")},Y=()=>{r(!1),i(null),C("")},q=L=>{u({...l,[L.target.name]:L.target.value})},B=L=>{h({...d,[L.target.name]:L.target.value})},ae=async L=>{L.preventDefault(),g(!0),v("");const{error:O}=await Xt.auth.signInWithPassword({email:l.email,password:l.password});O?v(O.message):K(),g(!1)},X=async L=>{L.preventDefault(),v(""),D(""),g(!0);const{error:O}=await Xt.auth.resetPasswordForEmail(P,{redirectTo:`${window.location.origin}/reset-password`});O?v(O.message):(D("Password reset email sent! Check your inbox."),setTimeout(()=>{E(!1),j(""),D("")},3e3)),g(!1)},ve=async L=>{if(L.preventDefault(),!!a){T(!0),C("");try{const O={email:d.email,password:d.password,fullName:d.fullName,company:d.company,phone:d.phone,planName:a.name,priceId:a.priceId,timestamp:Date.now()};localStorage.setItem("pendingUserData",JSON.stringify(O)),await FL(a.priceId,d.email,{fullName:d.fullName,company:d.company,phone:d.phone,password:d.password,planName:a.name})}catch(O){console.error("Purchase error:",O),C("Unable to start checkout. Please try again."),T(!1)}}};return o.jsxs("div",{className:"min-h-screen bg-white",children:[t&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-8",children:[o.jsx("h2",{className:"text-3xl font-black mb-6 text-gray-900",children:"Welcome Back"}),o.jsxs("form",{onSubmit:ae,children:[o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsx("input",{type:"email",name:"email",placeholder:"Email",value:l.email,onChange:q,required:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:$?"text":"password",name:"password",placeholder:"Password",value:l.password,onChange:q,required:!0,className:"w-full px-4 py-3 pr-12 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"}),o.jsx("button",{type:"button",onClick:()=>H(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:$?o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),b&&o.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200",children:o.jsx("p",{className:"text-sm text-red-700",children:b})}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:K,className:"flex-1 py-3 rounded-xl border-2 border-gray-300 font-bold text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:m,className:`flex-1 py-3 rounded-xl font-bold text-white text-lg bg-blue-600 hover:bg-blue-700 transition ${m?"opacity-60 cursor-not-allowed":""}`,children:m?"Logging in...":"Login"})]}),o.jsx("div",{className:"text-center mt-4",children:o.jsx("button",{type:"button",onClick:()=>E(!0),className:"text-blue-600 hover:text-blue-700 text-sm font-medium underline",children:"Forgot Password?"})})]})]})}),R&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-8",children:[o.jsx("h2",{className:"text-2xl font-black mb-4 text-gray-900",children:"Reset Password"}),o.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Enter your email address and we'll send you a link to reset your password."}),o.jsxs("form",{onSubmit:X,children:[o.jsx("div",{className:"space-y-4 mb-6",children:o.jsx("input",{type:"email",value:P,onChange:L=>j(L.target.value),required:!0,placeholder:"Your email address",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"})}),b&&o.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 mb-4",children:o.jsx("p",{className:"text-sm text-red-700",children:b})}),I&&o.jsx("div",{className:"p-3 rounded-lg bg-green-50 border border-green-200 mb-4",children:o.jsx("p",{className:"text-sm text-green-700",children:I})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>{E(!1),j(""),D(""),v("")},className:"flex-1 py-3 rounded-xl border-2 border-gray-300 font-bold text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:m,className:`flex-1 py-3 rounded-xl font-bold text-white text-lg bg-blue-600 hover:bg-blue-700 transition ${m?"opacity-60 cursor-not-allowed":""}`,children:m?"Sending...":"Send Reset Link"})]})]})]})}),n&&a&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-8",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-3xl font-black text-gray-900",children:a.name}),o.jsxs("p",{className:"text-xl text-gray-600",children:["$",a.price,"/month"]})]}),o.jsxs("form",{onSubmit:ve,children:[o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsx("input",{type:"email",name:"email",placeholder:"Email *",value:d.email,onChange:B,required:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"}),o.jsx("input",{type:"text",name:"fullName",placeholder:"Full Name *",value:d.fullName,onChange:B,required:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"}),o.jsx("input",{type:"text",name:"company",placeholder:"Company",value:d.company,onChange:B,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"}),o.jsx("input",{type:"tel",name:"phone",placeholder:"Phone",value:d.phone,onChange:B,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:z?"text":"password",name:"password",placeholder:"Password *",value:d.password,onChange:B,required:!0,minLength:6,className:"w-full px-4 py-3 pr-12 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"}),o.jsx("button",{type:"button",onClick:()=>F(!z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:z?o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),k&&o.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 mb-4",children:o.jsx("p",{className:"text-sm text-red-700",children:k})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:Y,className:"flex-1 py-3 rounded-xl border-2 border-gray-300 font-bold text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:N,className:`flex-1 py-3 rounded-xl font-bold text-white text-lg bg-blue-600 hover:bg-blue-700 transition ${N?"opacity-60 cursor-not-allowed":""}`,children:N?"Processing...":"Complete Payment"})]}),o.jsx("p",{className:"text-xs text-center text-gray-500 mt-3",children:"You'll be redirected to Stripe to securely complete your payment."})]})]})}),o.jsx("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-gray-200",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4 md:py-6 flex items-center justify-between",children:[o.jsxs("div",{className:"text-2xl md:text-3xl font-black tracking-tighter text-gray-900",children:["TRUE",o.jsx("span",{className:"text-red-600",children:"X"}),"PANSE"]}),o.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[o.jsx("a",{href:"/learning",className:"px-4 md:px-6 py-2 md:py-3 rounded-full bg-red-600 hover:bg-red-700 text-white font-bold text-sm md:text-base transition whitespace-nowrap",children:" MAT Wisdom"}),o.jsx("button",{onClick:V,className:"px-6 md:px-8 py-2 md:py-3 rounded-full border-2 border-gray-400 hover:border-gray-600 font-semibold text-sm md:text-base transition text-gray-900 whitespace-nowrap",children:"Login"})]})]})}),o.jsx("section",{className:"pt-20 md:pt-32 pb-24 md:pb-40 text-center px-4 md:px-6",children:o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-7xl font-black leading-tight mb-8 text-gray-900",children:["The daily system",o.jsx("br",{}),"that turns ",o.jsx("span",{className:"text-blue-600",children:"Massive Action"}),o.jsx("br",{}),"into real results."]}),o.jsxs("p",{className:"text-lg md:text-xl lg:text-2xl text-gray-600 max-w-4xl mx-auto mb-12",children:["10 years in the making. Built by closers who know: action is everything.",o.jsx("br",{}),"Massive Action Tracker helps you do the right things every day  so you win more."]}),o.jsx("button",{onClick:()=>pe(Xn.team),className:"px-8 md:px-16 py-4 md:py-6 rounded-full bg-blue-600 text-xl md:text-2xl font-black text-white shadow-xl hover:bg-blue-700 transition",children:"Get Started Today"})]})}),o.jsx("section",{className:"py-16 md:py-24 px-4 md:px-6 bg-white",children:o.jsxs("div",{className:"max-w-7xl mx-auto space-y-20 md:space-y-32",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-16 items-center",children:[o.jsx("img",{src:"https://files.manuscdn.com/user_upload_by_module/session_file/310519663033216620/uGojrZQFwEYwfaXX.jpg",alt:"End of Day Report",className:"rounded-3xl shadow-lg border border-gray-200 object-cover w-full h-full"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-4 text-gray-900",children:"Your Daily Win Report"}),o.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:"See everything you did today in one simple report. It tracks every call, text, and win. You will know exactly what works to make you win more. You can even look back at any day you want!"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-16 items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-4 text-gray-900",children:"Know Your Money Flow"}),o.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:"See your money grow in real-time! Find out which products sell the best and when. You can change the dates to see trends and know what to sell next. This helps you sell smarter, not just harder."})]}),o.jsx("img",{src:"https://files.manuscdn.com/user_upload_by_module/session_file/310519663033216620/HAJnAsRVWQxIpIei.jpg",alt:"Revenue Center",className:"rounded-3xl shadow-lg border border-gray-200 object-cover w-full h-full"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-16 items-center",children:[o.jsx("img",{src:"https://files.manuscdn.com/user_upload_by_module/session_file/310519663033216620/TKIMNfRJfmBDifrH.jpg",alt:"New Clients List",className:"rounded-3xl shadow-lg border border-gray-200 object-cover w-full h-full"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-4 text-gray-900",children:"Meet Your New Clients Page"}),o.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:"See all your new clients on one simple page. This is a list of every client your team has closed. You can see the exact day they became a paying client. Its the perfect way to celebrate and keep track of your wins!"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-16 items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-4 text-gray-900",children:"The Power Dashboard"}),o.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:'This special chart helps managers see how their team is doing. Pick any five numbers, like "money made" and "meetings set," to see how they work together. This shows you the clear path to making more money.'})]}),o.jsx("img",{src:"https://files.manuscdn.com/user_upload_by_module/session_file/310519663033216620/PRyIpAjeiuhiPTeR.jpg",alt:"Performance Dashboard",className:"rounded-3xl shadow-lg border border-gray-200 object-cover w-full h-full"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-16 items-center",children:[o.jsx("img",{src:"https://files.manuscdn.com/user_upload_by_module/session_file/310519663033216620/FkVOuvmuxkkghaMP.jpg",alt:"Prospecting List",className:"rounded-3xl shadow-lg border border-gray-200 object-cover w-full h-full"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-4 text-gray-900",children:"Build Your Money Pipeline"}),o.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:"This is where you build your future money. Every time you click a button here, it saves the data forever. This helps you build a strong list of future customers that will bring in steady money. It's simple: track your work, and the money will follow."})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-16 items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-4 text-gray-900",children:"Create Like a Pro  Instantly"}),o.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:"Quickly make great images for social media, emails, and flyers. This tool is in the Marketing section. It helps you make eye-catching posts fast, so you can spend more time selling and less time designing."})]}),o.jsx("img",{src:"https://files.manuscdn.com/user_upload_by_module/session_file/310519663033216620/ixKXRwlQLvplwOFZ.jpg",alt:"AI Image Generation",className:"rounded-3xl shadow-lg border border-gray-200 object-cover w-full h-full"})]})]})}),o.jsx("section",{className:"py-16 md:py-24 px-4 md:px-6 bg-gradient-to-br from-blue-600 via-blue-700 to-blue-800 text-white",children:o.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-black mb-6",children:"Level Up with Massive Action Coaching Strategies"}),o.jsx("p",{className:"text-xl md:text-2xl mb-4 text-blue-100",children:"Exclusive Training from TrueXpanse"}),o.jsx("p",{className:"text-lg md:text-xl mb-12 text-blue-200 max-w-3xl mx-auto",children:"Join our community to access advanced video tutorials, proven growth strategies, and elite-level coaching that will maximize your MAT results."}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[o.jsx("div",{className:"text-4xl mb-3",children:""}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Video Tutorials"}),o.jsx("p",{className:"text-blue-100",children:"Step-by-step training on mastering the MAT system"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[o.jsx("div",{className:"text-4xl mb-3",children:""}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Growth Strategies"}),o.jsx("p",{className:"text-blue-100",children:"Proven tactics to scale your sales results"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[o.jsx("div",{className:"text-4xl mb-3",children:""}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Advanced Coaching"}),o.jsx("p",{className:"text-blue-100",children:"Elite-level techniques from TrueXpanse"})]})]}),o.jsx("a",{href:"https://truexpanse.app.clientclub.net/communities/groups/massive-action-nation/home?invite=6942bb7b7b52699851bdbb0f",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-12 py-5 rounded-full bg-red-600 hover:bg-red-700 text-white font-black text-xl shadow-2xl transform hover:scale-105 transition-all duration-200",children:"Join the Community "}),o.jsx("p",{className:"text-sm text-blue-200 mt-4",children:"Connect with other high-performers and accelerate your success"})]})}),o.jsx("section",{className:"py-16 md:py-24 px-4 md:px-6 bg-gray-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-center mb-16 text-gray-900",children:"Choose Your Plan"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[o.jsxs("div",{className:"bg-white rounded-3xl p-8 md:p-10 border-2 border-gray-200 hover:border-blue-400 transition flex flex-col",children:[o.jsx("h3",{className:"text-2xl md:text-3xl font-black mb-3 text-gray-900",children:Xn.solo.name}),o.jsx("p",{className:"text-base md:text-lg text-gray-600 mb-6",children:Xn.solo.description}),o.jsxs("div",{className:"text-4xl md:text-5xl font-black mb-8 text-gray-900",children:["$",Xn.solo.price,o.jsx("span",{className:"text-xl font-medium text-gray-500",children:"/month"})]}),o.jsx("ul",{className:"space-y-3 mb-10 flex-grow",children:Xn.solo.features.map((L,O)=>o.jsxs("li",{className:"flex items-center text-gray-700",children:[o.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),L]},O))}),o.jsx("button",{onClick:()=>pe(Xn.solo),className:"mt-auto py-4 rounded-xl font-bold text-lg text-white bg-blue-600 hover:bg-blue-700 transition shadow-lg",children:"Get Started"})]}),o.jsxs("div",{className:"bg-white rounded-3xl p-8 md:p-10 border-4 border-blue-600 shadow-2xl flex flex-col",children:[o.jsx("h3",{className:"text-2xl md:text-3xl font-black mb-3 text-gray-900",children:Xn.team.name}),o.jsx("p",{className:"text-base md:text-lg text-gray-600 mb-6",children:Xn.team.description}),o.jsxs("div",{className:"text-4xl md:text-5xl font-black mb-8 text-gray-900",children:["$",Xn.team.price,o.jsx("span",{className:"text-xl font-medium text-gray-500",children:"/month"})]}),o.jsx("ul",{className:"space-y-3 mb-10 flex-grow",children:Xn.team.features.map((L,O)=>o.jsxs("li",{className:"flex items-center text-gray-700",children:[o.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),L]},O))}),o.jsx("button",{onClick:()=>pe(Xn.team),className:"mt-auto py-4 rounded-xl font-bold text-lg text-white bg-blue-600 hover:bg-blue-700 transition shadow-lg",children:"Get Started"})]}),o.jsxs("div",{className:"bg-white rounded-3xl p-8 md:p-10 border-2 border-gray-200 hover:border-blue-400 transition flex flex-col",children:[o.jsx("h3",{className:"text-2xl md:text-3xl font-black mb-3 text-gray-900",children:Xn.elite.name}),o.jsx("p",{className:"text-base md:text-lg text-gray-600 mb-6",children:Xn.elite.description}),o.jsxs("div",{className:"text-4xl md:text-5xl font-black mb-8 text-gray-900",children:["$",Xn.elite.price,o.jsx("span",{className:"text-xl font-medium text-gray-500",children:"/month"})]}),o.jsx("ul",{className:"space-y-3 mb-10 flex-grow",children:Xn.elite.features.map((L,O)=>o.jsxs("li",{className:"flex items-center text-gray-700",children:[o.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),L]},O))}),o.jsx("button",{onClick:()=>pe(Xn.elite),className:"mt-auto py-4 rounded-xl font-bold text-lg text-white bg-blue-600 hover:bg-blue-700 transition shadow-lg",children:"Get Started"})]})]})]})}),o.jsx("footer",{className:"py-12 md:py-16 bg-gray-800 text-white",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 text-center",children:o.jsxs("p",{className:"text-sm text-gray-400",children:[" ",new Date().getFullYear()," TRUEXPANS. All rights reserved."]})})})]})}function YL(){const[t,e]=_.useState(""),[n,r]=_.useState(""),[a,i]=_.useState(!1),[l,u]=_.useState(""),[d,h]=_.useState(!1);_.useEffect(()=>{Xt.auth.getSession().then(({data:{session:g}})=>{g||u("Invalid or expired reset link. Please request a new password reset.")})},[]);const m=async g=>{if(g.preventDefault(),u(""),i(!0),t!==n){u("Passwords do not match"),i(!1);return}if(t.length<6){u("Password must be at least 6 characters"),i(!1);return}try{const{error:b}=await Xt.auth.updateUser({password:t});b?u(b.message):(h(!0),setTimeout(()=>{window.location.href="/"},2e3))}catch(b){u(b.message)}finally{i(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Reset Password"}),o.jsx("p",{className:"text-gray-600",children:"Enter your new password below"})]}),d?o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[o.jsx("p",{className:"text-green-700 font-medium",children:" Password updated successfully!"}),o.jsx("p",{className:"text-sm text-green-600 mt-2",children:"Redirecting to login..."})]})}):o.jsxs("form",{onSubmit:m,children:[o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),o.jsx("input",{type:"password",value:t,onChange:g=>e(g.target.value),required:!0,minLength:6,placeholder:"Enter new password",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),o.jsx("input",{type:"password",value:n,onChange:g=>r(g.target.value),required:!0,minLength:6,placeholder:"Confirm new password",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition"})]})]}),l&&o.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200",children:o.jsx("p",{className:"text-sm text-red-700",children:l})}),o.jsx("button",{type:"submit",disabled:a,className:`w-full py-3 rounded-xl font-bold text-white text-lg bg-blue-600 hover:bg-blue-700 transition ${a?"opacity-60 cursor-not-allowed":""}`,children:a?"Updating...":"Update Password"}),o.jsx("div",{className:"text-center mt-4",children:o.jsx("button",{type:"button",onClick:()=>window.location.href="/",className:"text-blue-600 hover:text-blue-700 text-sm font-medium underline",children:"Back to Login"})})]})]})})}const JL=({theme:t,setTheme:e})=>{const n=()=>{e(t==="dark"?"light":"dark")};return o.jsx("button",{onClick:n,className:"ml-2 p-2 rounded-full text-gray-400 hover:bg-gray-200 dark:hover:bg-brand-gray/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-brand-light-card dark:focus:ring-offset-brand-navy focus:ring-brand-blue","aria-label":"Toggle theme",children:t==="dark"?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})},XL=()=>o.jsxs("div",{className:"flex items-center space-x-2 ml-4",title:"Application Status",children:[o.jsx("div",{className:"w-2.5 h-2.5 bg-brand-lime rounded-full animate-pulse"}),o.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:"Status: Live"})]}),Qn=({children:t,onClick:e,active:n})=>o.jsx("button",{onClick:e,className:`block w-full text-left px-4 py-2 text-sm ${n?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-brand-gray/50"}`,children:t}),gc=({title:t,children:e,isOpen:n,onToggle:r})=>o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:r,className:"py-2 px-3 text-xs font-bold rounded-md transition-colors text-gray-400 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-brand-gray/50",children:t}),n&&o.jsx("div",{className:"absolute mt-2 w-48 rounded-md shadow-lg bg-white dark:bg-brand-navy ring-1 ring-black ring-opacity-5 z-20",children:o.jsx("div",{className:"py-1",children:e})})]}),QL=({theme:t,setTheme:e,setView:n,currentView:r,userRole:a,onLogout:i,userName:l,isDemoMode:u})=>{const[d,h]=_.useState(null),[m,g]=_.useState(!1),b=k=>{h(d===k?null:k)},v=k=>{n(k),h(null)};return o.jsxs("header",{className:"bg-brand-light-card dark:bg-brand-navy border-b border-brand-light-border dark:border-brand-gray sticky top-0 z-40",children:[o.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsx("button",{onClick:()=>g(!m),className:"md:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-brand-gray/50 focus:outline-none",children:o.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),o.jsx("div",{className:"flex-shrink-0",children:o.jsxs("h1",{className:"text-2xl font-black tracking-tighter text-brand-light-text dark:text-white uppercase cursor-pointer",onClick:()=>v("day-view"),children:["TRUE",o.jsx("span",{className:"text-brand-red",children:"X"}),"PANSE"]})}),o.jsxs("div",{className:"flex items-center",children:[o.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[o.jsxs(gc,{title:"Activity",isOpen:d==="activity",onToggle:()=>b("activity"),children:[o.jsx(Qn,{onClick:()=>v("day-view"),active:r==="day-view",children:"Day View"}),o.jsx(Qn,{onClick:()=>v("month-view"),active:r==="month-view",children:"Month View"})]}),o.jsxs(gc,{title:"Pipeline",isOpen:d==="pipeline",onToggle:()=>b("pipeline"),children:[o.jsx(Qn,{onClick:()=>v("prospecting"),active:r==="prospecting",children:"Prospecting"}),o.jsx(Qn,{onClick:()=>v("hot-leads"),active:r==="hot-leads",children:"Hot Leads"}),o.jsx(Qn,{onClick:()=>v("new-clients"),active:r==="new-clients",children:"New Clients"}),o.jsx(Qn,{onClick:()=>v("revenue"),active:r==="revenue",children:"Revenue"})]}),o.jsxs(gc,{title:"Marketing",isOpen:d==="marketing",onToggle:()=>b("marketing"),children:[o.jsx(Qn,{onClick:()=>v("dream-avatars"),active:r==="dream-avatars",children:"Dream Client Studio"}),o.jsx(Qn,{onClick:()=>v("scorecard-dashboard"),active:r==="scorecard-dashboard",children:"Scorecard Dashboard"}),o.jsx(Qn,{onClick:()=>v("ai-images"),active:r==="ai-images",children:"AI Images"}),o.jsx(Qn,{onClick:()=>v("ai-content"),active:r==="ai-content",children:"AI Content"}),o.jsx(Qn,{onClick:()=>v("coaching"),active:r==="coaching",children:"Coaching"})]}),(a==="Admin"||a==="Manager")&&o.jsxs(gc,{title:"Leadership",isOpen:d==="leadership",onToggle:()=>b("leadership"),children:[o.jsx(Qn,{onClick:()=>v("team-control"),active:r==="team-control",children:"Team Control Panel"}),o.jsx(Qn,{onClick:()=>v("performance-dashboard"),active:r==="performance-dashboard",children:"Performance Dashboard"})]}),o.jsx("button",{onClick:()=>v("eod-report"),className:`py-2 px-3 text-xs font-bold rounded-md transition-colors ${r==="eod-report"?"bg-brand-red text-white":"text-gray-400 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-brand-gray/50"}`,children:"EOD Report"})]}),o.jsxs("div",{className:"flex items-center ml-4",children:[o.jsxs("span",{className:"hidden sm:inline text-sm text-gray-500 dark:text-gray-400 mr-3",children:["Welcome, ",(l==null?void 0:l.split(" ")[0])||""]}),o.jsxs(gc,{title:"Settings",isOpen:d==="settings",onToggle:()=>b("settings"),children:[o.jsx(Qn,{onClick:()=>v("account-settings"),active:r==="account-settings",children:"Account Settings"}),o.jsx(Qn,{onClick:()=>v("billing-plans"),active:r==="billing-plans",children:"Billing & Plans"}),(a==="Admin"||a==="Manager")&&o.jsx(Qn,{onClick:()=>v("ghl-integration"),active:r==="ghl-integration",children:"GHL Integration"})]}),o.jsx("button",{onClick:i,className:"py-2 px-3 text-xs font-bold rounded-md transition-colors text-gray-400 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-brand-gray/50",children:"Logout"}),o.jsx(XL,{}),o.jsx(JL,{theme:t,setTheme:e})]})]})]})}),u&&o.jsx("div",{className:"bg-yellow-400 text-black text-xs font-bold text-center py-1",children:"DEMO MODE"}),m&&o.jsx("div",{className:"md:hidden bg-white dark:bg-brand-navy border-b border-brand-light-border dark:border-brand-gray",children:o.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Activity"}),o.jsx("button",{onClick:()=>{v("day-view"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="day-view"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Day View"}),o.jsx("button",{onClick:()=>{v("month-view"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="month-view"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Month View"}),o.jsx("div",{className:"px-3 py-2 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mt-3",children:"Pipeline"}),o.jsx("button",{onClick:()=>{v("prospecting"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="prospecting"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Prospecting"}),o.jsx("button",{onClick:()=>{v("hot-leads"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="hot-leads"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Hot Leads"}),o.jsx("button",{onClick:()=>{v("new-clients"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="new-clients"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"New Clients"}),o.jsx("button",{onClick:()=>{v("revenue"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="revenue"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Revenue"}),o.jsx("div",{className:"px-3 py-2 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mt-3",children:"Marketing"}),o.jsx("button",{onClick:()=>{v("dream-avatars"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="dream-avatars"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Dream Client Studio"}),o.jsx("button",{onClick:()=>{v("scorecard-dashboard"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="scorecard-dashboard"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Scorecard Dashboard"}),o.jsx("button",{onClick:()=>{v("ai-images"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="ai-images"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"AI Images"}),o.jsx("button",{onClick:()=>{v("ai-content"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="ai-content"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"AI Content"}),o.jsx("button",{onClick:()=>{v("coaching"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="coaching"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Coaching"}),(a==="Admin"||a==="Manager")&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-3 py-2 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mt-3",children:"Leadership"}),o.jsx("button",{onClick:()=>{v("team-control"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="team-control"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Team Control Panel"}),o.jsx("button",{onClick:()=>{v("performance-dashboard"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md ${r==="performance-dashboard"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"Performance Dashboard"})]}),o.jsx("button",{onClick:()=>{v("eod-report"),g(!1)},className:`block w-full text-left px-4 py-2 text-sm rounded-md mt-3 ${r==="eod-report"?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:"EOD Report"}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-brand-gray mt-3 pt-3",children:[o.jsxs("div",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400",children:["Welcome, ",(l==null?void 0:l.split(" ")[0])||""]}),o.jsx("button",{onClick:()=>{v("account-settings"),g(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300",children:"Account Settings"}),(a==="Admin"||a==="Manager")&&o.jsx("button",{onClick:()=>{v("ghl-integration"),g(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300",children:"GHL Integration"}),o.jsx("button",{onClick:k=>{k.preventDefault(),k.stopPropagation(),i(),g(!1)},className:"block w-full text-left px-4 py-3 text-sm font-bold text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors active:bg-red-100 dark:active:bg-red-900/30",style:{WebkitTapHighlightColor:"transparent"},children:" Logout"})]})]})})]})},ZL=["Appointment","Meeting","Call","Follow-up","Personal","Task"],xg=["SW","NA","LM","ST","EP","SA"],vg={SW:"Spoke With",NA:"No Answer",LM:"Left Message",ST:"Sent Text",EP:"Emailed Proposal",SA:"Set Appointment"},sr=()=>({revenue:{today:"",week:"",month:"",ytd:"",mcv:"",acv:""},prospectingBlock:"",events:[],followUpBlock:"",winsToday:[],topTargets:Array.from({length:6},(t,e)=>({id:`top-${e}-${Date.now()}`,text:"",completed:!1})),massiveGoals:Array.from({length:6},(t,e)=>({id:`massive-${e}-${Date.now()}`,text:"",completed:!1})),aiChallenge:{quote:null,challenges:[],challengesAccepted:!1,completedChallenges:[]},prospectingContacts:Array.from({length:200},(t,e)=>({id:`contact-${e}-${Date.now()}`,name:"",date:"",phone:"",email:"",interestLevel:5,prospecting:{}})),milestones:{calls30Achieved:!1},talkTime:"",eodSubmitted:!1}),e6={1:"Call",2:"Handwritten Letter",3:"Text Video",4:"Personal Visit",5:"Thought of You",10:"Event Offer",14:"Informational Links",21:"Video Email",30:"Special Offer"},ks=t=>{if(!t)return t;const e=t.replace(/[^\d]/g,""),n=e.length;return n<4?e:n<7?`(${e.slice(0,3)}) ${e.slice(3)}`:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6,10)}`},gj=t=>{if(!t)return"";const[e,n]=t.split(":"),r=parseInt(e,10),a=r>=12?"PM":"AM";return`${r%12||12}:${n} ${a}`},ft=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let t6,n6;function r6(){return{geminiUrl:t6,vertexUrl:n6}}function a6(t,e,n,r){var a,i;if(!(t!=null&&t.baseUrl)){const l=r6();return e?(a=l.vertexUrl)!==null&&a!==void 0?a:n:(i=l.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class si{}function Te(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const i=e[a];return i!=null?String(i):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function x(t,e,n){for(let i=0;i<e.length-1;i++){const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let h=0;h<d.length;h++){const m=d[h];x(m,e.slice(i+1),n[h])}else for(const h of d)x(h,e.slice(i+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];x(d[0],e.slice(i+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const r=e[e.length-1],a=t[r];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function y(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const a=e[r];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const l=t[i];return Array.isArray(l)?l.map(u=>y(u,e.slice(r+1),n)):n}else return n}else t=t[a]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function i6(t,e){for(const[n,r]of Object.entries(e)){const a=n.split("."),i=r.split("."),l=new Set;let u=-1;for(let d=0;d<a.length;d++)if(a[d]==="*"){u=d;break}if(u!==-1&&i.length>u)for(let d=u;d<i.length;d++){const h=i[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}m0(t,a,i,0,l)}}function m0(t,e,n,r,a){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const l=i.slice(0,-2),u=t;if(l in u&&Array.isArray(u[l]))for(const d of u[l])m0(d,e,n,r+1,a)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,u=Object.keys(l).filter(h=>!h.startsWith("_")&&!a.has(h)),d={};for(const h of u)d[h]=l[h];for(const[h,m]of Object.entries(d)){const g=[];for(const b of n.slice(r))b==="*"?g.push(h):g.push(b);x(l,g,m)}for(const h of u)delete l[h]}}else{const l=t;i in l&&m0(l[i],e,n,r+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s6(t){const e={},n=y(t,["operationName"]);n!=null&&x(e,["operationName"],n);const r=y(t,["resourceName"]);return r!=null&&x(e,["_url","resourceName"],r),e}function o6(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["metadata"]);r!=null&&x(e,["metadata"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);i!=null&&x(e,["error"],i);const l=y(t,["response","generateVideoResponse"]);return l!=null&&x(e,["response"],c6(l)),e}function l6(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["metadata"]);r!=null&&x(e,["metadata"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);i!=null&&x(e,["error"],i);const l=y(t,["response"]);return l!=null&&x(e,["response"],u6(l)),e}function c6(t){const e={},n=y(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>d6(l))),x(e,["generatedVideos"],i)}const r=y(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const a=y(t,["raiMediaFilteredReasons"]);return a!=null&&x(e,["raiMediaFilteredReasons"],a),e}function u6(t){const e={},n=y(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>f6(l))),x(e,["generatedVideos"],i)}const r=y(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const a=y(t,["raiMediaFilteredReasons"]);return a!=null&&x(e,["raiMediaFilteredReasons"],a),e}function d6(t){const e={},n=y(t,["video"]);return n!=null&&x(e,["video"],b6(n)),e}function f6(t){const e={},n=y(t,["_self"]);return n!=null&&x(e,["video"],x6(n)),e}function h6(t){const e={},n=y(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function m6(t){const e={},n=y(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function p6(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["metadata"]);r!=null&&x(e,["metadata"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);i!=null&&x(e,["error"],i);const l=y(t,["response"]);return l!=null&&x(e,["response"],g6(l)),e}function g6(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["parent"]);r!=null&&x(e,["parent"],r);const a=y(t,["documentName"]);return a!=null&&x(e,["documentName"],a),e}function yj(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["metadata"]);r!=null&&x(e,["metadata"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);i!=null&&x(e,["error"],i);const l=y(t,["response"]);return l!=null&&x(e,["response"],y6(l)),e}function y6(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["parent"]);r!=null&&x(e,["parent"],r);const a=y(t,["documentName"]);return a!=null&&x(e,["documentName"],a),e}function b6(t){const e={},n=y(t,["uri"]);n!=null&&x(e,["uri"],n);const r=y(t,["encodedVideo"]);r!=null&&x(e,["videoBytes"],Eb(r));const a=y(t,["encoding"]);return a!=null&&x(e,["mimeType"],a),e}function x6(t){const e={},n=y(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const r=y(t,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],Eb(r));const a=y(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vk;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vk||(Vk={}));var Wk;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wk||(Wk={}));var Kk;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Kk||(Kk={}));var lt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(lt||(lt={}));var Yk;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Yk||(Yk={}));var Jk;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jk||(Jk={}));var Xk;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Xk||(Xk={}));var Qk;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Qk||(Qk={}));var Zk;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Zk||(Zk={}));var eN;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(eN||(eN={}));var tN;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tN||(tN={}));var nN;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(nN||(nN={}));var rN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(rN||(rN={}));var aN;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(aN||(aN={}));var iN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(iN||(iN={}));var sN;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sN||(sN={}));var oN;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(oN||(oN={}));var lN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(lN||(lN={}));var cN;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cN||(cN={}));var el;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(el||(el={}));var uN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uN||(uN={}));var dN;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(dN||(dN={}));var fN;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fN||(fN={}));var p0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(p0||(p0={}));var hN;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(hN||(hN={}));var mN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mN||(mN={}));var pN;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(pN||(pN={}));var gN;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(gN||(gN={}));var yN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yN||(yN={}));var bN;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(bN||(bN={}));var xN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(xN||(xN={}));var vN;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(vN||(vN={}));var wN;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(wN||(wN={}));var SN;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(SN||(SN={}));var _N;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_N||(_N={}));var kN;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kN||(kN={}));var NN;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(NN||(NN={}));var CN;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(CN||(CN={}));var EN;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(EN||(EN={}));var TN;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(TN||(TN={}));var AN;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(AN||(AN={}));var jN;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(jN||(jN={}));var PN;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(PN||(PN={}));var IN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(IN||(IN={}));var RN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(RN||(RN={}));var MN;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(MN||(MN={}));var DN;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(DN||(DN={}));var ON;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ON||(ON={}));var LN;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LN||(LN={}));var UN;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(UN||(UN={}));var BN;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(BN||(BN={}));var $N;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($N||($N={}));var qN;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(qN||(qN={}));var zN;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(zN||(zN={}));var Go;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Go||(Go={}));class g0{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class yc{get text(){var e,n,r,a,i,l,u,d;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",m=!1;const g=[];for(const b of(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[v,k]of Object.entries(b))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(k!==null||k!==void 0)&&g.push(v);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;m=!0,h+=b.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?h:void 0}get data(){var e,n,r,a,i,l,u,d;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const m=[];for(const g of(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[b,v]of Object.entries(g))b!=="inlineData"&&(v!==null||v!==void 0)&&m.push(b);g.inlineData&&typeof g.inlineData.data=="string"&&(h+=atob(g.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,r,a,i,l,u,d;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,r,a,i,l,u,d,h;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((m==null?void 0:m.length)!==0)return(h=m==null?void 0:m[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,r,a,i,l,u,d,h;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((m==null?void 0:m.length)!==0)return(h=m==null?void 0:m[0])===null||h===void 0?void 0:h.output}}class GN{}class FN{}class v6{}class w6{}class S6{}class _6{}class HN{}class VN{}class WN{}class k6{}class af{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new af;let a;const i=e;return n?a=l6(i):a=o6(i),Object.assign(r,a),r}}class KN{}class YN{}class JN{}class N6{}class C6{}class E6{}class Tb{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Tb,i=p6(e);return Object.assign(r,i),r}}class T6{}class A6{}class j6{}class XN{}class P6{get text(){var e,n,r;let a="",i=!1;const l=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[d,h]of Object.entries(u))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,a+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?a:void 0}get data(){var e,n,r;let a="";const i=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&i.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(a+=atob(l.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class I6{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ab{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Ab,i=yj(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function bj(t,e){const n=gt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function xj(t){return Array.isArray(t)?t.map(e=>sf(e)):[sf(t)]}function sf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function vj(t){const e=sf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wj(t){const e=sf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QN(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Sj(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>QN(e)):[QN(t)]}function y0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ZN(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function eC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tr(t){if(t==null)throw new Error("ContentUnion is required");return y0(t)?t:{role:"user",parts:Sj(t)}}function jb(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=tr(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=tr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>tr(n)):[tr(e)]}function Qr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ZN(t)||eC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tr(t)]}const e=[],n=[],r=y0(t[0]);for(const a of t){const i=y0(a);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(a);else{if(ZN(a)||eC(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return r||e.push({role:"user",parts:Sj(n)}),e}function R6(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(lt).includes(n[0].toUpperCase())?n[0].toUpperCase():lt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(lt).includes(r.toUpperCase())?r.toUpperCase():lt.TYPE_UNSPECIFIED})}}function Ko(t){const e={},n=["items"],r=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&R6(t.type,e);for(const[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(lt).includes(u.toUpperCase())?u.toUpperCase():lt.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Ko(u);else if(r.includes(l)){const d=[];for(const h of u){if(h.type=="null"){e.nullable=!0;continue}d.push(Ko(h))}e[l]=d}else if(a.includes(l)){const d={};for(const[h,m]of Object.entries(u))d[h]=Ko(m);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=u}return e}function Pb(t){return Ko(t)}function Ib(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Rb(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function dl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ko(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ko(e.response));return t}function fl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function M6(t,e,n,r=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function oi(t,e){if(typeof e!="string")throw new Error("name must be a string");return M6(t,e,"cachedContents")}function _j(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Vi(t){return Eb(t)}function D6(t){return t!=null&&typeof t=="object"&&"name"in t}function O6(t){return t!=null&&typeof t=="object"&&"video"in t}function L6(t){return t!=null&&typeof t=="object"&&"uri"in t}function kj(t){var e;let n;if(D6(t)&&(n=t.name),!(L6(t)&&(n=t.uri,n===void 0))&&!(O6(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Nj(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Cj(t){for(const e of["models","tunedModels","publisherModels"])if(U6(t,e))return t[e];return[]}function U6(t,e){return t!==null&&typeof t=="object"&&e in t}function B6(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function $6(t,e={}){const n=[],r=new Set;for(const a of t){const i=a.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const l=B6(a,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Ej(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function q6(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Tj(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let i=!1;for(const l of a){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function hl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Aj(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z6(t){const e={},n=y(t,["responsesFile"]);n!=null&&x(e,["fileName"],n);const r=y(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>SU(l))),x(e,["inlinedResponses"],i)}const a=y(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["inlinedEmbedContentResponses"],i)}return e}function G6(t){const e={},n=y(t,["predictionsFormat"]);n!=null&&x(e,["format"],n);const r=y(t,["gcsDestination","outputUriPrefix"]);r!=null&&x(e,["gcsUri"],r);const a=y(t,["bigqueryDestination","outputUri"]);return a!=null&&x(e,["bigqueryUri"],a),e}function F6(t){const e={},n=y(t,["format"]);n!=null&&x(e,["predictionsFormat"],n);const r=y(t,["gcsUri"]);r!=null&&x(e,["gcsDestination","outputUriPrefix"],r);const a=y(t,["bigqueryUri"]);if(a!=null&&x(e,["bigqueryDestination","outputUri"],a),y(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(y(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Kd(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["metadata","displayName"]);r!=null&&x(e,["displayName"],r);const a=y(t,["metadata","state"]);a!=null&&x(e,["state"],Aj(a));const i=y(t,["metadata","createTime"]);i!=null&&x(e,["createTime"],i);const l=y(t,["metadata","endTime"]);l!=null&&x(e,["endTime"],l);const u=y(t,["metadata","updateTime"]);u!=null&&x(e,["updateTime"],u);const d=y(t,["metadata","model"]);d!=null&&x(e,["model"],d);const h=y(t,["metadata","output"]);return h!=null&&x(e,["dest"],z6(Tj(h))),e}function b0(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["displayName"]);r!=null&&x(e,["displayName"],r);const a=y(t,["state"]);a!=null&&x(e,["state"],Aj(a));const i=y(t,["error"]);i!=null&&x(e,["error"],i);const l=y(t,["createTime"]);l!=null&&x(e,["createTime"],l);const u=y(t,["startTime"]);u!=null&&x(e,["startTime"],u);const d=y(t,["endTime"]);d!=null&&x(e,["endTime"],d);const h=y(t,["updateTime"]);h!=null&&x(e,["updateTime"],h);const m=y(t,["model"]);m!=null&&x(e,["model"],m);const g=y(t,["inputConfig"]);g!=null&&x(e,["src"],H6(g));const b=y(t,["outputConfig"]);b!=null&&x(e,["dest"],G6(Tj(b)));const v=y(t,["completionStats"]);return v!=null&&x(e,["completionStats"],v),e}function H6(t){const e={},n=y(t,["instancesFormat"]);n!=null&&x(e,["format"],n);const r=y(t,["gcsSource","uris"]);r!=null&&x(e,["gcsUri"],r);const a=y(t,["bigquerySource","inputUri"]);return a!=null&&x(e,["bigqueryUri"],a),e}function V6(t,e){const n={};if(y(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(y(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=y(e,["fileName"]);r!=null&&x(n,["fileName"],r);const a=y(e,["inlinedRequests"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>wU(t,l))),x(n,["requests","requests"],i)}return n}function W6(t){const e={},n=y(t,["format"]);n!=null&&x(e,["instancesFormat"],n);const r=y(t,["gcsUri"]);r!=null&&x(e,["gcsSource","uris"],r);const a=y(t,["bigqueryUri"]);if(a!=null&&x(e,["bigquerySource","inputUri"],a),y(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function K6(t){const e={},n=y(t,["data"]);if(n!=null&&x(e,["data"],n),y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Y6(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],hl(t,r)),n}function J6(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],hl(t,r)),n}function X6(t){const e={},n=y(t,["content"]);n!=null&&x(e,["content"],n);const r=y(t,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],Q6(r));const a=y(t,["tokenCount"]);a!=null&&x(e,["tokenCount"],a);const i=y(t,["finishReason"]);i!=null&&x(e,["finishReason"],i);const l=y(t,["avgLogprobs"]);l!=null&&x(e,["avgLogprobs"],l);const u=y(t,["groundingMetadata"]);u!=null&&x(e,["groundingMetadata"],u);const d=y(t,["index"]);d!=null&&x(e,["index"],d);const h=y(t,["logprobsResult"]);h!=null&&x(e,["logprobsResult"],h);const m=y(t,["safetyRatings"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(v=>v)),x(e,["safetyRatings"],b)}const g=y(t,["urlContextMetadata"]);return g!=null&&x(e,["urlContextMetadata"],g),e}function Q6(t){const e={},n=y(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>a)),x(e,["citations"],r)}return e}function jj(t){const e={},n=y(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>AU(i))),x(e,["parts"],a)}const r=y(t,["role"]);return r!=null&&x(e,["role"],r),e}function Z6(t,e){const n={},r=y(t,["displayName"]);if(e!==void 0&&r!=null&&x(e,["batch","displayName"],r),y(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function eU(t,e){const n={},r=y(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const a=y(t,["dest"]);return e!==void 0&&a!=null&&x(e,["outputConfig"],F6(q6(a))),n}function tC(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["src"]);a!=null&&x(n,["batch","inputConfig"],V6(t,Ej(t,a)));const i=y(e,["config"]);return i!=null&&Z6(i,n),n}function tU(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["model"],gt(t,r));const a=y(e,["src"]);a!=null&&x(n,["inputConfig"],W6(Ej(t,a)));const i=y(e,["config"]);return i!=null&&eU(i,n),n}function nU(t,e){const n={},r=y(t,["displayName"]);return e!==void 0&&r!=null&&x(e,["batch","displayName"],r),n}function rU(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["src"]);a!=null&&x(n,["batch","inputConfig"],uU(t,a));const i=y(e,["config"]);return i!=null&&nU(i,n),n}function aU(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],hl(t,r)),n}function iU(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],hl(t,r)),n}function sU(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["name"]);r!=null&&x(e,["name"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);return i!=null&&x(e,["error"],i),e}function oU(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["name"]);r!=null&&x(e,["name"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);return i!=null&&x(e,["error"],i),e}function lU(t,e){const n={},r=y(e,["contents"]);if(r!=null){let i=jb(t,r);Array.isArray(i)&&(i=i.map(l=>l)),x(n,["requests[]","request","content"],i)}const a=y(e,["config"]);return a!=null&&(x(n,["_self"],cU(a,n)),i6(n,{"requests[].*":"requests[].request.*"})),n}function cU(t,e){const n={},r=y(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const a=y(t,["title"]);e!==void 0&&a!=null&&x(e,["requests[]","title"],a);const i=y(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&x(e,["requests[]","outputDimensionality"],i),y(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uU(t,e){const n={},r=y(e,["fileName"]);r!=null&&x(n,["file_name"],r);const a=y(e,["inlinedRequests"]);return a!=null&&x(n,["requests"],lU(t,a)),n}function dU(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function fU(t){const e={},n=y(t,["id"]);n!=null&&x(e,["id"],n);const r=y(t,["args"]);r!=null&&x(e,["args"],r);const a=y(t,["name"]);if(a!=null&&x(e,["name"],a),y(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hU(t){const e={},n=y(t,["mode"]);n!=null&&x(e,["mode"],n);const r=y(t,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),y(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function mU(t,e,n){const r={},a=y(e,["systemInstruction"]);n!==void 0&&a!=null&&x(n,["systemInstruction"],jj(tr(a)));const i=y(e,["temperature"]);i!=null&&x(r,["temperature"],i);const l=y(e,["topP"]);l!=null&&x(r,["topP"],l);const u=y(e,["topK"]);u!=null&&x(r,["topK"],u);const d=y(e,["candidateCount"]);d!=null&&x(r,["candidateCount"],d);const h=y(e,["maxOutputTokens"]);h!=null&&x(r,["maxOutputTokens"],h);const m=y(e,["stopSequences"]);m!=null&&x(r,["stopSequences"],m);const g=y(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const b=y(e,["logprobs"]);b!=null&&x(r,["logprobs"],b);const v=y(e,["presencePenalty"]);v!=null&&x(r,["presencePenalty"],v);const k=y(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const C=y(e,["seed"]);C!=null&&x(r,["seed"],C);const N=y(e,["responseMimeType"]);N!=null&&x(r,["responseMimeType"],N);const T=y(e,["responseSchema"]);T!=null&&x(r,["responseSchema"],Pb(T));const R=y(e,["responseJsonSchema"]);if(R!=null&&x(r,["responseJsonSchema"],R),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=y(e,["safetySettings"]);if(n!==void 0&&E!=null){let V=E;Array.isArray(V)&&(V=V.map(K=>jU(K))),x(n,["safetySettings"],V)}const P=y(e,["tools"]);if(n!==void 0&&P!=null){let V=fl(P);Array.isArray(V)&&(V=V.map(K=>IU(dl(K)))),x(n,["tools"],V)}const j=y(e,["toolConfig"]);if(n!==void 0&&j!=null&&x(n,["toolConfig"],PU(j)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=y(e,["cachedContent"]);n!==void 0&&I!=null&&x(n,["cachedContent"],oi(t,I));const D=y(e,["responseModalities"]);D!=null&&x(r,["responseModalities"],D);const $=y(e,["mediaResolution"]);$!=null&&x(r,["mediaResolution"],$);const H=y(e,["speechConfig"]);if(H!=null&&x(r,["speechConfig"],Ib(H)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=y(e,["thinkingConfig"]);z!=null&&x(r,["thinkingConfig"],z);const F=y(e,["imageConfig"]);return F!=null&&x(r,["imageConfig"],vU(F)),r}function pU(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>X6(h))),x(e,["candidates"],d)}const a=y(t,["modelVersion"]);a!=null&&x(e,["modelVersion"],a);const i=y(t,["promptFeedback"]);i!=null&&x(e,["promptFeedback"],i);const l=y(t,["responseId"]);l!=null&&x(e,["responseId"],l);const u=y(t,["usageMetadata"]);return u!=null&&x(e,["usageMetadata"],u),e}function gU(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],hl(t,r)),n}function yU(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],hl(t,r)),n}function bU(t){const e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=y(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function xU(t){const e={};if(y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=y(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function vU(t){const e={},n=y(t,["aspectRatio"]);n!=null&&x(e,["aspectRatio"],n);const r=y(t,["imageSize"]);if(r!=null&&x(e,["imageSize"],r),y(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wU(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["request","model"],gt(t,r));const a=y(e,["contents"]);if(a!=null){let u=Qr(a);Array.isArray(u)&&(u=u.map(d=>jj(d))),x(n,["request","contents"],u)}const i=y(e,["metadata"]);i!=null&&x(n,["metadata"],i);const l=y(e,["config"]);return l!=null&&x(n,["request","generationConfig"],mU(t,l,y(n,["request"],{}))),n}function SU(t){const e={},n=y(t,["response"]);n!=null&&x(e,["response"],pU(n));const r=y(t,["error"]);return r!=null&&x(e,["error"],r),e}function _U(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const a=y(t,["pageToken"]);if(e!==void 0&&a!=null&&x(e,["_query","pageToken"],a),y(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function kU(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const a=y(t,["pageToken"]);e!==void 0&&a!=null&&x(e,["_query","pageToken"],a);const i=y(t,["filter"]);return e!==void 0&&i!=null&&x(e,["_query","filter"],i),n}function NU(t){const e={},n=y(t,["config"]);return n!=null&&_U(n,e),e}function CU(t){const e={},n=y(t,["config"]);return n!=null&&kU(n,e),e}function EU(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["operations"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>Kd(l))),x(e,["batchJobs"],i)}return e}function TU(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["batchPredictionJobs"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>b0(l))),x(e,["batchJobs"],i)}return e}function AU(t){const e={},n=y(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=y(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const a=y(t,["executableCode"]);a!=null&&x(e,["executableCode"],a);const i=y(t,["fileData"]);i!=null&&x(e,["fileData"],dU(i));const l=y(t,["functionCall"]);l!=null&&x(e,["functionCall"],fU(l));const u=y(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const d=y(t,["inlineData"]);d!=null&&x(e,["inlineData"],K6(d));const h=y(t,["text"]);h!=null&&x(e,["text"],h);const m=y(t,["thought"]);m!=null&&x(e,["thought"],m);const g=y(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const b=y(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function jU(t){const e={},n=y(t,["category"]);if(n!=null&&x(e,["category"],n),y(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=y(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function PU(t){const e={},n=y(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],hU(n));const r=y(t,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function IU(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>g)),x(e,["functionDeclarations"],m)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const a=y(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const i=y(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const l=y(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=y(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],bU(u));const d=y(t,["googleSearch"]);d!=null&&x(e,["googleSearch"],xU(d));const h=y(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Za;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Za||(Za={}));class qs{constructor(e,n,r,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,a)}init(e,n,r){var a,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(i=(a=l.config)===null||a===void 0?void 0:a.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RU extends si{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new qs(Za.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=tC(this.apiClient,e),r=n._url,a=Te("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,d=u.requests,h=[];for(const m of d){const g=Object.assign({},m);if(g.systemInstruction){const b=g.systemInstruction;delete g.systemInstruction;const v=g.request;v.systemInstruction=b,g.request=v}h.push(g)}return u.requests=h,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},a=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${a}`),r.dest===void 0){const i=this.getGcsUri(e),l=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${a}`;else if(l)r.dest=`${l}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=tU(this.apiClient,e);return u=Te("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>b0(m))}else{const h=tC(this.apiClient,e);return u=Te("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Kd(m))}}async createEmbeddingsInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rU(this.apiClient,e);return i=Te("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>Kd(d))}}async get(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=yU(this.apiClient,e);return u=Te("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>b0(m))}else{const h=gU(this.apiClient,e);return u=Te("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Kd(m))}}async cancel(e){var n,r,a,i;let l="",u={};if(this.apiClient.isVertexAI()){const d=J6(this.apiClient,e);l=Te("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const d=Y6(this.apiClient,e);l=Te("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=CU(e);return u=Te("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=TU(m),b=new XN;return Object.assign(b,g),b})}else{const h=NU(e);return u=Te("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=EU(m),b=new XN;return Object.assign(b,g),b})}}async delete(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=iU(this.apiClient,e);return u=Te("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>oU(m))}else{const h=aU(this.apiClient,e);return u=Te("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>sU(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MU(t){const e={},n=y(t,["data"]);if(n!=null&&x(e,["data"],n),y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function nC(t){const e={},n=y(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>r5(i))),x(e,["parts"],a)}const r=y(t,["role"]);return r!=null&&x(e,["role"],r),e}function DU(t,e){const n={},r=y(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const a=y(t,["expireTime"]);e!==void 0&&a!=null&&x(e,["expireTime"],a);const i=y(t,["displayName"]);e!==void 0&&i!=null&&x(e,["displayName"],i);const l=y(t,["contents"]);if(e!==void 0&&l!=null){let m=Qr(l);Array.isArray(m)&&(m=m.map(g=>nC(g))),x(e,["contents"],m)}const u=y(t,["systemInstruction"]);e!==void 0&&u!=null&&x(e,["systemInstruction"],nC(tr(u)));const d=y(t,["tools"]);if(e!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>i5(g))),x(e,["tools"],m)}const h=y(t,["toolConfig"]);if(e!==void 0&&h!=null&&x(e,["toolConfig"],a5(h)),y(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function OU(t,e){const n={},r=y(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const a=y(t,["expireTime"]);e!==void 0&&a!=null&&x(e,["expireTime"],a);const i=y(t,["displayName"]);e!==void 0&&i!=null&&x(e,["displayName"],i);const l=y(t,["contents"]);if(e!==void 0&&l!=null){let g=Qr(l);Array.isArray(g)&&(g=g.map(b=>b)),x(e,["contents"],g)}const u=y(t,["systemInstruction"]);e!==void 0&&u!=null&&x(e,["systemInstruction"],tr(u));const d=y(t,["tools"]);if(e!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>s5(b))),x(e,["tools"],g)}const h=y(t,["toolConfig"]);e!==void 0&&h!=null&&x(e,["toolConfig"],h);const m=y(t,["kmsKeyName"]);return e!==void 0&&m!=null&&x(e,["encryption_spec","kmsKeyName"],m),n}function LU(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["model"],bj(t,r));const a=y(e,["config"]);return a!=null&&DU(a,n),n}function UU(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["model"],bj(t,r));const a=y(e,["config"]);return a!=null&&OU(a,n),n}function BU(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],oi(t,r)),n}function $U(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],oi(t,r)),n}function qU(t){const e={},n=y(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function zU(t){const e={},n=y(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function GU(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function FU(t){const e={},n=y(t,["id"]);n!=null&&x(e,["id"],n);const r=y(t,["args"]);r!=null&&x(e,["args"],r);const a=y(t,["name"]);if(a!=null&&x(e,["name"],a),y(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HU(t){const e={},n=y(t,["mode"]);n!=null&&x(e,["mode"],n);const r=y(t,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),y(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function VU(t){const e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=y(t,["description"]);n!=null&&x(e,["description"],n);const r=y(t,["name"]);r!=null&&x(e,["name"],r);const a=y(t,["parameters"]);a!=null&&x(e,["parameters"],a);const i=y(t,["parametersJsonSchema"]);i!=null&&x(e,["parametersJsonSchema"],i);const l=y(t,["response"]);l!=null&&x(e,["response"],l);const u=y(t,["responseJsonSchema"]);return u!=null&&x(e,["responseJsonSchema"],u),e}function WU(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],oi(t,r)),n}function KU(t,e){const n={},r=y(e,["name"]);return r!=null&&x(n,["_url","name"],oi(t,r)),n}function YU(t){const e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=y(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function JU(t){const e={};if(y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=y(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function XU(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const a=y(t,["pageToken"]);return e!==void 0&&a!=null&&x(e,["_query","pageToken"],a),n}function QU(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const a=y(t,["pageToken"]);return e!==void 0&&a!=null&&x(e,["_query","pageToken"],a),n}function ZU(t){const e={},n=y(t,["config"]);return n!=null&&XU(n,e),e}function e5(t){const e={},n=y(t,["config"]);return n!=null&&QU(n,e),e}function t5(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["cachedContents"],i)}return e}function n5(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["cachedContents"],i)}return e}function r5(t){const e={},n=y(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=y(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const a=y(t,["executableCode"]);a!=null&&x(e,["executableCode"],a);const i=y(t,["fileData"]);i!=null&&x(e,["fileData"],GU(i));const l=y(t,["functionCall"]);l!=null&&x(e,["functionCall"],FU(l));const u=y(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const d=y(t,["inlineData"]);d!=null&&x(e,["inlineData"],MU(d));const h=y(t,["text"]);h!=null&&x(e,["text"],h);const m=y(t,["thought"]);m!=null&&x(e,["thought"],m);const g=y(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const b=y(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function a5(t){const e={},n=y(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],HU(n));const r=y(t,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function i5(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>g)),x(e,["functionDeclarations"],m)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const a=y(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const i=y(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const l=y(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=y(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],YU(u));const d=y(t,["googleSearch"]);d!=null&&x(e,["googleSearch"],JU(d));const h=y(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}function s5(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(b=>VU(b))),x(e,["functionDeclarations"],g)}const r=y(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const a=y(t,["googleSearchRetrieval"]);a!=null&&x(e,["googleSearchRetrieval"],a);const i=y(t,["computerUse"]);if(i!=null&&x(e,["computerUse"],i),y(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=y(t,["codeExecution"]);l!=null&&x(e,["codeExecution"],l);const u=y(t,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const d=y(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],d);const h=y(t,["googleSearch"]);h!=null&&x(e,["googleSearch"],h);const m=y(t,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function o5(t,e){const n={},r=y(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const a=y(t,["expireTime"]);return e!==void 0&&a!=null&&x(e,["expireTime"],a),n}function l5(t,e){const n={},r=y(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const a=y(t,["expireTime"]);return e!==void 0&&a!=null&&x(e,["expireTime"],a),n}function c5(t,e){const n={},r=y(e,["name"]);r!=null&&x(n,["_url","name"],oi(t,r));const a=y(e,["config"]);return a!=null&&o5(a,n),n}function u5(t,e){const n={},r=y(e,["name"]);r!=null&&x(n,["_url","name"],oi(t,r));const a=y(e,["config"]);return a!=null&&l5(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d5 extends si{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qs(Za.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=UU(this.apiClient,e);return u=Te("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const h=LU(this.apiClient,e);return u=Te("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async get(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=KU(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const h=WU(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async delete(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=$U(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=zU(m),b=new YN;return Object.assign(b,g),b})}else{const h=BU(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=qU(m),b=new YN;return Object.assign(b,g),b})}}async update(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=u5(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const h=c5(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async listInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=e5(e);return u=Te("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=n5(m),b=new JN;return Object.assign(b,g),b})}else{const h=ZU(e);return u=Te("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=t5(m),b=new JN;return Object.assign(b,g),b})}}}function rC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gt(t){return this instanceof Gt?(this.v=t,this):new Gt(t)}function Yo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(v){return function(k){return Promise.resolve(k).then(v,g)}}function u(v,k){r[v]&&(a[v]=function(C){return new Promise(function(N,T){i.push([v,C,N,T])>1||d(v,C)})},k&&(a[v]=k(a[v])))}function d(v,k){try{h(r[v](k))}catch(C){b(i[0][3],C)}}function h(v){v.value instanceof Gt?Promise.resolve(v.value.v).then(m,g):b(i[0][2],v)}function m(v){d("next",v)}function g(v){d("throw",v)}function b(v,k){v(k),i.shift(),i.length&&d(i[0][0],i[0][1])}}function jc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rC=="function"?rC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(l){return new Promise(function(u,d){l=t[i](l),a(u,d,l.done,l.value)})}}function a(i,l,u,d){Promise.resolve(d).then(function(h){i({value:h,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f5(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Pj(n)}function Pj(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function h5(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function aC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const a=[];let i=!0;for(;r<n&&t[r].role==="model";)a.push(t[r]),i&&!Pj(t[r])&&(i=!1),r++;i?e.push(...a):e.pop()}return e}class m5{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new p5(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class p5{constructor(e,n,r,a={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=a,this.history=i,this.sendPromise=Promise.resolve(),h5(i)}async sendMessage(e){var n;await this.sendPromise;const r=tr(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,l,u;const d=await a,h=(l=(i=d.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content,m=d.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let b=[];m!=null&&(b=(u=m.slice(g))!==null&&u!==void 0?u:[]);const v=h?[h]:[];this.recordHistory(r,v,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const r=tr(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const i=await a;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?aC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,a;return Yo(this,arguments,function*(){var l,u,d,h;const m=[];try{for(var g=!0,b=jc(e),v;v=yield Gt(b.next()),l=v.done,!l;g=!0){h=v.value,g=!1;const k=h;if(f5(k)){const C=(a=(r=k.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content;C!==void 0&&m.push(C)}yield yield Gt(k)}}catch(k){u={error:k}}finally{try{!g&&!l&&(d=b.return)&&(yield Gt(d.call(b)))}finally{if(u)throw u.error}}this.recordHistory(n,m)})}recordHistory(e,n,r){let a=[];n.length>0&&n.every(i=>i.role!==void 0)?a=n:a.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...aC(r)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,eh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g5(t){const e={},n=y(t,["file"]);return n!=null&&x(e,["file"],n),e}function y5(t){const e={},n=y(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function b5(t){const e={},n=y(t,["name"]);return n!=null&&x(e,["_url","file"],kj(n)),e}function x5(t){const e={},n=y(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function v5(t){const e={},n=y(t,["name"]);return n!=null&&x(e,["_url","file"],kj(n)),e}function w5(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const a=y(t,["pageToken"]);return e!==void 0&&a!=null&&x(e,["_query","pageToken"],a),n}function S5(t){const e={},n=y(t,["config"]);return n!=null&&w5(n,e),e}function _5(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["files"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k5 extends si{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qs(Za.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=S5(e);return i=Te("files",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const h=_5(d),m=new T6;return Object.assign(m,h),m})}}async createInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=g5(e);return i=Te("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const h=y5(d),m=new A6;return Object.assign(m,h),m})}}async get(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=v5(e);return i=Te("files/{file}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=b5(e);return i=Te("files/{file}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const h=x5(d),m=new j6;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yd(t){const e={},n=y(t,["data"]);if(n!=null&&x(e,["data"],n),y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function N5(t){const e={},n=y(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>q5(i))),x(e,["parts"],a)}const r=y(t,["role"]);return r!=null&&x(e,["role"],r),e}function C5(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function E5(t){const e={},n=y(t,["id"]);n!=null&&x(e,["id"],n);const r=y(t,["args"]);r!=null&&x(e,["args"],r);const a=y(t,["name"]);if(a!=null&&x(e,["name"],a),y(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function T5(t){const e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=y(t,["description"]);n!=null&&x(e,["description"],n);const r=y(t,["name"]);r!=null&&x(e,["name"],r);const a=y(t,["parameters"]);a!=null&&x(e,["parameters"],a);const i=y(t,["parametersJsonSchema"]);i!=null&&x(e,["parametersJsonSchema"],i);const l=y(t,["response"]);l!=null&&x(e,["response"],l);const u=y(t,["responseJsonSchema"]);return u!=null&&x(e,["responseJsonSchema"],u),e}function A5(t){const e={},n=y(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const r=y(t,["responseJsonSchema"]);r!=null&&x(e,["responseJsonSchema"],r);const a=y(t,["audioTimestamp"]);a!=null&&x(e,["audioTimestamp"],a);const i=y(t,["candidateCount"]);i!=null&&x(e,["candidateCount"],i);const l=y(t,["enableAffectiveDialog"]);l!=null&&x(e,["enableAffectiveDialog"],l);const u=y(t,["frequencyPenalty"]);u!=null&&x(e,["frequencyPenalty"],u);const d=y(t,["logprobs"]);d!=null&&x(e,["logprobs"],d);const h=y(t,["maxOutputTokens"]);h!=null&&x(e,["maxOutputTokens"],h);const m=y(t,["mediaResolution"]);m!=null&&x(e,["mediaResolution"],m);const g=y(t,["presencePenalty"]);g!=null&&x(e,["presencePenalty"],g);const b=y(t,["responseLogprobs"]);b!=null&&x(e,["responseLogprobs"],b);const v=y(t,["responseMimeType"]);v!=null&&x(e,["responseMimeType"],v);const k=y(t,["responseModalities"]);k!=null&&x(e,["responseModalities"],k);const C=y(t,["responseSchema"]);C!=null&&x(e,["responseSchema"],C);const N=y(t,["routingConfig"]);N!=null&&x(e,["routingConfig"],N);const T=y(t,["seed"]);T!=null&&x(e,["seed"],T);const R=y(t,["speechConfig"]);R!=null&&x(e,["speechConfig"],Ij(R));const E=y(t,["stopSequences"]);E!=null&&x(e,["stopSequences"],E);const P=y(t,["temperature"]);P!=null&&x(e,["temperature"],P);const j=y(t,["thinkingConfig"]);j!=null&&x(e,["thinkingConfig"],j);const I=y(t,["topK"]);I!=null&&x(e,["topK"],I);const D=y(t,["topP"]);if(D!=null&&x(e,["topP"],D),y(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function j5(t){const e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=y(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function P5(t){const e={};if(y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=y(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function I5(t,e){const n={},r=y(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const a=y(t,["responseModalities"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","responseModalities"],a);const i=y(t,["temperature"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","temperature"],i);const l=y(t,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const u=y(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const d=y(t,["maxOutputTokens"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","maxOutputTokens"],d);const h=y(t,["mediaResolution"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","mediaResolution"],h);const m=y(t,["seed"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","seed"],m);const g=y(t,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],Rb(g));const b=y(t,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const v=y(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],v);const k=y(t,["systemInstruction"]);e!==void 0&&k!=null&&x(e,["setup","systemInstruction"],N5(tr(k)));const C=y(t,["tools"]);if(e!==void 0&&C!=null){let I=fl(C);Array.isArray(I)&&(I=I.map(D=>G5(dl(D)))),x(e,["setup","tools"],I)}const N=y(t,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],z5(N));const T=y(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const R=y(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","outputAudioTranscription"],R);const E=y(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&x(e,["setup","realtimeInputConfig"],E);const P=y(t,["contextWindowCompression"]);e!==void 0&&P!=null&&x(e,["setup","contextWindowCompression"],P);const j=y(t,["proactivity"]);return e!==void 0&&j!=null&&x(e,["setup","proactivity"],j),n}function R5(t,e){const n={},r=y(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],A5(r));const a=y(t,["responseModalities"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","responseModalities"],a);const i=y(t,["temperature"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","temperature"],i);const l=y(t,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const u=y(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const d=y(t,["maxOutputTokens"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","maxOutputTokens"],d);const h=y(t,["mediaResolution"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","mediaResolution"],h);const m=y(t,["seed"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","seed"],m);const g=y(t,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],Ij(Rb(g)));const b=y(t,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const v=y(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],v);const k=y(t,["systemInstruction"]);e!==void 0&&k!=null&&x(e,["setup","systemInstruction"],tr(k));const C=y(t,["tools"]);if(e!==void 0&&C!=null){let I=fl(C);Array.isArray(I)&&(I=I.map(D=>F5(dl(D)))),x(e,["setup","tools"],I)}const N=y(t,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],N);const T=y(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const R=y(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","outputAudioTranscription"],R);const E=y(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&x(e,["setup","realtimeInputConfig"],E);const P=y(t,["contextWindowCompression"]);e!==void 0&&P!=null&&x(e,["setup","contextWindowCompression"],P);const j=y(t,["proactivity"]);return e!==void 0&&j!=null&&x(e,["setup","proactivity"],j),n}function M5(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["setup","model"],gt(t,r));const a=y(e,["config"]);return a!=null&&x(n,["config"],I5(a,n)),n}function D5(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["setup","model"],gt(t,r));const a=y(e,["config"]);return a!=null&&x(n,["config"],R5(a,n)),n}function O5(t){const e={},n=y(t,["musicGenerationConfig"]);return n!=null&&x(e,["musicGenerationConfig"],n),e}function L5(t){const e={},n=y(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>a)),x(e,["weightedPrompts"],r)}return e}function U5(t){const e={},n=y(t,["media"]);if(n!=null){let h=xj(n);Array.isArray(h)&&(h=h.map(m=>Yd(m))),x(e,["mediaChunks"],h)}const r=y(t,["audio"]);r!=null&&x(e,["audio"],Yd(wj(r)));const a=y(t,["audioStreamEnd"]);a!=null&&x(e,["audioStreamEnd"],a);const i=y(t,["video"]);i!=null&&x(e,["video"],Yd(vj(i)));const l=y(t,["text"]);l!=null&&x(e,["text"],l);const u=y(t,["activityStart"]);u!=null&&x(e,["activityStart"],u);const d=y(t,["activityEnd"]);return d!=null&&x(e,["activityEnd"],d),e}function B5(t){const e={},n=y(t,["media"]);if(n!=null){let h=xj(n);Array.isArray(h)&&(h=h.map(m=>m)),x(e,["mediaChunks"],h)}const r=y(t,["audio"]);r!=null&&x(e,["audio"],wj(r));const a=y(t,["audioStreamEnd"]);a!=null&&x(e,["audioStreamEnd"],a);const i=y(t,["video"]);i!=null&&x(e,["video"],vj(i));const l=y(t,["text"]);l!=null&&x(e,["text"],l);const u=y(t,["activityStart"]);u!=null&&x(e,["activityStart"],u);const d=y(t,["activityEnd"]);return d!=null&&x(e,["activityEnd"],d),e}function $5(t){const e={},n=y(t,["setupComplete"]);n!=null&&x(e,["setupComplete"],n);const r=y(t,["serverContent"]);r!=null&&x(e,["serverContent"],r);const a=y(t,["toolCall"]);a!=null&&x(e,["toolCall"],a);const i=y(t,["toolCallCancellation"]);i!=null&&x(e,["toolCallCancellation"],i);const l=y(t,["usageMetadata"]);l!=null&&x(e,["usageMetadata"],H5(l));const u=y(t,["goAway"]);u!=null&&x(e,["goAway"],u);const d=y(t,["sessionResumptionUpdate"]);return d!=null&&x(e,["sessionResumptionUpdate"],d),e}function q5(t){const e={},n=y(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=y(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const a=y(t,["executableCode"]);a!=null&&x(e,["executableCode"],a);const i=y(t,["fileData"]);i!=null&&x(e,["fileData"],C5(i));const l=y(t,["functionCall"]);l!=null&&x(e,["functionCall"],E5(l));const u=y(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const d=y(t,["inlineData"]);d!=null&&x(e,["inlineData"],Yd(d));const h=y(t,["text"]);h!=null&&x(e,["text"],h);const m=y(t,["thought"]);m!=null&&x(e,["thought"],m);const g=y(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const b=y(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function z5(t){const e={},n=y(t,["handle"]);if(n!=null&&x(e,["handle"],n),y(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ij(t){const e={},n=y(t,["languageCode"]);n!=null&&x(e,["languageCode"],n);const r=y(t,["voiceConfig"]);if(r!=null&&x(e,["voiceConfig"],r),y(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function G5(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>g)),x(e,["functionDeclarations"],m)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const a=y(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const i=y(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const l=y(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=y(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],j5(u));const d=y(t,["googleSearch"]);d!=null&&x(e,["googleSearch"],P5(d));const h=y(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}function F5(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(b=>T5(b))),x(e,["functionDeclarations"],g)}const r=y(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const a=y(t,["googleSearchRetrieval"]);a!=null&&x(e,["googleSearchRetrieval"],a);const i=y(t,["computerUse"]);if(i!=null&&x(e,["computerUse"],i),y(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=y(t,["codeExecution"]);l!=null&&x(e,["codeExecution"],l);const u=y(t,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const d=y(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],d);const h=y(t,["googleSearch"]);h!=null&&x(e,["googleSearch"],h);const m=y(t,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function H5(t){const e={},n=y(t,["promptTokenCount"]);n!=null&&x(e,["promptTokenCount"],n);const r=y(t,["cachedContentTokenCount"]);r!=null&&x(e,["cachedContentTokenCount"],r);const a=y(t,["candidatesTokenCount"]);a!=null&&x(e,["responseTokenCount"],a);const i=y(t,["toolUsePromptTokenCount"]);i!=null&&x(e,["toolUsePromptTokenCount"],i);const l=y(t,["thoughtsTokenCount"]);l!=null&&x(e,["thoughtsTokenCount"],l);const u=y(t,["totalTokenCount"]);u!=null&&x(e,["totalTokenCount"],u);const d=y(t,["promptTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(k=>k)),x(e,["promptTokensDetails"],v)}const h=y(t,["cacheTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(k=>k)),x(e,["cacheTokensDetails"],v)}const m=y(t,["candidatesTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(k=>k)),x(e,["responseTokensDetails"],v)}const g=y(t,["toolUsePromptTokensDetails"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(k=>k)),x(e,["toolUsePromptTokensDetails"],v)}const b=y(t,["trafficType"]);return b!=null&&x(e,["trafficType"],b),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V5(t){const e={},n=y(t,["data"]);if(n!=null&&x(e,["data"],n),y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function W5(t){const e={},n=y(t,["content"]);n!=null&&x(e,["content"],n);const r=y(t,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],K5(r));const a=y(t,["tokenCount"]);a!=null&&x(e,["tokenCount"],a);const i=y(t,["finishReason"]);i!=null&&x(e,["finishReason"],i);const l=y(t,["avgLogprobs"]);l!=null&&x(e,["avgLogprobs"],l);const u=y(t,["groundingMetadata"]);u!=null&&x(e,["groundingMetadata"],u);const d=y(t,["index"]);d!=null&&x(e,["index"],d);const h=y(t,["logprobsResult"]);h!=null&&x(e,["logprobsResult"],h);const m=y(t,["safetyRatings"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(v=>v)),x(e,["safetyRatings"],b)}const g=y(t,["urlContextMetadata"]);return g!=null&&x(e,["urlContextMetadata"],g),e}function K5(t){const e={},n=y(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>a)),x(e,["citations"],r)}return e}function Y5(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["contents"]);if(a!=null){let i=Qr(a);Array.isArray(i)&&(i=i.map(l=>l)),x(n,["contents"],i)}return n}function J5(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>i)),x(e,["tokensInfo"],a)}return e}function X5(t){const e={},n=y(t,["values"]);n!=null&&x(e,["values"],n);const r=y(t,["statistics"]);return r!=null&&x(e,["statistics"],Q5(r)),e}function Q5(t){const e={},n=y(t,["truncated"]);n!=null&&x(e,["truncated"],n);const r=y(t,["token_count"]);return r!=null&&x(e,["tokenCount"],r),e}function th(t){const e={},n=y(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>o$(i))),x(e,["parts"],a)}const r=y(t,["role"]);return r!=null&&x(e,["role"],r),e}function Z5(t){const e={},n=y(t,["controlType"]);n!=null&&x(e,["controlType"],n);const r=y(t,["enableControlImageComputation"]);return r!=null&&x(e,["computeControl"],r),e}function eB(t){const e={};if(y(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(y(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(y(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function tB(t,e){const n={},r=y(t,["systemInstruction"]);e!==void 0&&r!=null&&x(e,["systemInstruction"],tr(r));const a=y(t,["tools"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>Lj(u))),x(e,["tools"],l)}const i=y(t,["generationConfig"]);return e!==void 0&&i!=null&&x(e,["generationConfig"],VB(i)),n}function nB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["contents"]);if(a!=null){let l=Qr(a);Array.isArray(l)&&(l=l.map(u=>th(u))),x(n,["contents"],l)}const i=y(e,["config"]);return i!=null&&eB(i),n}function rB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["contents"]);if(a!=null){let l=Qr(a);Array.isArray(l)&&(l=l.map(u=>u)),x(n,["contents"],l)}const i=y(e,["config"]);return i!=null&&tB(i,n),n}function aB(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["totalTokens"]);r!=null&&x(e,["totalTokens"],r);const a=y(t,["cachedContentTokenCount"]);return a!=null&&x(e,["cachedContentTokenCount"],a),e}function iB(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["totalTokens"]);return r!=null&&x(e,["totalTokens"],r),e}function sB(t,e){const n={},r=y(e,["model"]);return r!=null&&x(n,["_url","name"],gt(t,r)),n}function oB(t,e){const n={},r=y(e,["model"]);return r!=null&&x(n,["_url","name"],gt(t,r)),n}function lB(t){const e={},n=y(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function cB(t){const e={},n=y(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function uB(t,e){const n={},r=y(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const a=y(t,["negativePrompt"]);e!==void 0&&a!=null&&x(e,["parameters","negativePrompt"],a);const i=y(t,["numberOfImages"]);e!==void 0&&i!=null&&x(e,["parameters","sampleCount"],i);const l=y(t,["aspectRatio"]);e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l);const u=y(t,["guidanceScale"]);e!==void 0&&u!=null&&x(e,["parameters","guidanceScale"],u);const d=y(t,["seed"]);e!==void 0&&d!=null&&x(e,["parameters","seed"],d);const h=y(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&x(e,["parameters","safetySetting"],h);const m=y(t,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const g=y(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&x(e,["parameters","includeSafetyAttributes"],g);const b=y(t,["includeRaiReason"]);e!==void 0&&b!=null&&x(e,["parameters","includeRaiReason"],b);const v=y(t,["language"]);e!==void 0&&v!=null&&x(e,["parameters","language"],v);const k=y(t,["outputMimeType"]);e!==void 0&&k!=null&&x(e,["parameters","outputOptions","mimeType"],k);const C=y(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&x(e,["parameters","outputOptions","compressionQuality"],C);const N=y(t,["addWatermark"]);e!==void 0&&N!=null&&x(e,["parameters","addWatermark"],N);const T=y(t,["labels"]);e!==void 0&&T!=null&&x(e,["labels"],T);const R=y(t,["editMode"]);e!==void 0&&R!=null&&x(e,["parameters","editMode"],R);const E=y(t,["baseSteps"]);return e!==void 0&&E!=null&&x(e,["parameters","editConfig","baseSteps"],E),n}function dB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["prompt"]);a!=null&&x(n,["instances[0]","prompt"],a);const i=y(e,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>h$(d))),x(n,["instances[0]","referenceImages"],u)}const l=y(e,["config"]);return l!=null&&uB(l,n),n}function fB(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>nh(i))),x(e,["generatedImages"],a)}return e}function hB(t,e){const n={},r=y(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const a=y(t,["title"]);e!==void 0&&a!=null&&x(e,["requests[]","title"],a);const i=y(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&x(e,["requests[]","outputDimensionality"],i),y(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function mB(t,e){const n={},r=y(t,["taskType"]);e!==void 0&&r!=null&&x(e,["instances[]","task_type"],r);const a=y(t,["title"]);e!==void 0&&a!=null&&x(e,["instances[]","title"],a);const i=y(t,["outputDimensionality"]);e!==void 0&&i!=null&&x(e,["parameters","outputDimensionality"],i);const l=y(t,["mimeType"]);e!==void 0&&l!=null&&x(e,["instances[]","mimeType"],l);const u=y(t,["autoTruncate"]);return e!==void 0&&u!=null&&x(e,["parameters","autoTruncate"],u),n}function pB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["contents"]);if(a!=null){let u=jb(t,a);Array.isArray(u)&&(u=u.map(d=>d)),x(n,["requests[]","content"],u)}const i=y(e,["config"]);i!=null&&hB(i,n);const l=y(e,["model"]);return l!==void 0&&x(n,["requests[]","model"],gt(t,l)),n}function gB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["contents"]);if(a!=null){let l=jb(t,a);Array.isArray(l)&&(l=l.map(u=>u)),x(n,["instances[]","content"],l)}const i=y(e,["config"]);return i!=null&&mB(i,n),n}function yB(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["embeddings"],i)}const a=y(t,["metadata"]);return a!=null&&x(e,["metadata"],a),e}function bB(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>X5(l))),x(e,["embeddings"],i)}const a=y(t,["metadata"]);return a!=null&&x(e,["metadata"],a),e}function xB(t){const e={},n=y(t,["endpoint"]);n!=null&&x(e,["name"],n);const r=y(t,["deployedModelId"]);return r!=null&&x(e,["deployedModelId"],r),e}function vB(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function wB(t){const e={},n=y(t,["id"]);n!=null&&x(e,["id"],n);const r=y(t,["args"]);r!=null&&x(e,["args"],r);const a=y(t,["name"]);if(a!=null&&x(e,["name"],a),y(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SB(t){const e={},n=y(t,["mode"]);n!=null&&x(e,["mode"],n);const r=y(t,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),y(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _B(t){const e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=y(t,["description"]);n!=null&&x(e,["description"],n);const r=y(t,["name"]);r!=null&&x(e,["name"],r);const a=y(t,["parameters"]);a!=null&&x(e,["parameters"],a);const i=y(t,["parametersJsonSchema"]);i!=null&&x(e,["parametersJsonSchema"],i);const l=y(t,["response"]);l!=null&&x(e,["response"],l);const u=y(t,["responseJsonSchema"]);return u!=null&&x(e,["responseJsonSchema"],u),e}function kB(t,e,n){const r={},a=y(e,["systemInstruction"]);n!==void 0&&a!=null&&x(n,["systemInstruction"],th(tr(a)));const i=y(e,["temperature"]);i!=null&&x(r,["temperature"],i);const l=y(e,["topP"]);l!=null&&x(r,["topP"],l);const u=y(e,["topK"]);u!=null&&x(r,["topK"],u);const d=y(e,["candidateCount"]);d!=null&&x(r,["candidateCount"],d);const h=y(e,["maxOutputTokens"]);h!=null&&x(r,["maxOutputTokens"],h);const m=y(e,["stopSequences"]);m!=null&&x(r,["stopSequences"],m);const g=y(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const b=y(e,["logprobs"]);b!=null&&x(r,["logprobs"],b);const v=y(e,["presencePenalty"]);v!=null&&x(r,["presencePenalty"],v);const k=y(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const C=y(e,["seed"]);C!=null&&x(r,["seed"],C);const N=y(e,["responseMimeType"]);N!=null&&x(r,["responseMimeType"],N);const T=y(e,["responseSchema"]);T!=null&&x(r,["responseSchema"],Pb(T));const R=y(e,["responseJsonSchema"]);if(R!=null&&x(r,["responseJsonSchema"],R),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=y(e,["safetySettings"]);if(n!==void 0&&E!=null){let V=E;Array.isArray(V)&&(V=V.map(K=>m$(K))),x(n,["safetySettings"],V)}const P=y(e,["tools"]);if(n!==void 0&&P!=null){let V=fl(P);Array.isArray(V)&&(V=V.map(K=>w$(dl(K)))),x(n,["tools"],V)}const j=y(e,["toolConfig"]);if(n!==void 0&&j!=null&&x(n,["toolConfig"],v$(j)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=y(e,["cachedContent"]);n!==void 0&&I!=null&&x(n,["cachedContent"],oi(t,I));const D=y(e,["responseModalities"]);D!=null&&x(r,["responseModalities"],D);const $=y(e,["mediaResolution"]);$!=null&&x(r,["mediaResolution"],$);const H=y(e,["speechConfig"]);if(H!=null&&x(r,["speechConfig"],Ib(H)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=y(e,["thinkingConfig"]);z!=null&&x(r,["thinkingConfig"],z);const F=y(e,["imageConfig"]);return F!=null&&x(r,["imageConfig"],XB(F)),r}function NB(t,e,n){const r={},a=y(e,["systemInstruction"]);n!==void 0&&a!=null&&x(n,["systemInstruction"],tr(a));const i=y(e,["temperature"]);i!=null&&x(r,["temperature"],i);const l=y(e,["topP"]);l!=null&&x(r,["topP"],l);const u=y(e,["topK"]);u!=null&&x(r,["topK"],u);const d=y(e,["candidateCount"]);d!=null&&x(r,["candidateCount"],d);const h=y(e,["maxOutputTokens"]);h!=null&&x(r,["maxOutputTokens"],h);const m=y(e,["stopSequences"]);m!=null&&x(r,["stopSequences"],m);const g=y(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const b=y(e,["logprobs"]);b!=null&&x(r,["logprobs"],b);const v=y(e,["presencePenalty"]);v!=null&&x(r,["presencePenalty"],v);const k=y(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const C=y(e,["seed"]);C!=null&&x(r,["seed"],C);const N=y(e,["responseMimeType"]);N!=null&&x(r,["responseMimeType"],N);const T=y(e,["responseSchema"]);T!=null&&x(r,["responseSchema"],Pb(T));const R=y(e,["responseJsonSchema"]);R!=null&&x(r,["responseJsonSchema"],R);const E=y(e,["routingConfig"]);E!=null&&x(r,["routingConfig"],E);const P=y(e,["modelSelectionConfig"]);P!=null&&x(r,["modelConfig"],P);const j=y(e,["safetySettings"]);if(n!==void 0&&j!=null){let q=j;Array.isArray(q)&&(q=q.map(B=>B)),x(n,["safetySettings"],q)}const I=y(e,["tools"]);if(n!==void 0&&I!=null){let q=fl(I);Array.isArray(q)&&(q=q.map(B=>Lj(dl(B)))),x(n,["tools"],q)}const D=y(e,["toolConfig"]);n!==void 0&&D!=null&&x(n,["toolConfig"],D);const $=y(e,["labels"]);n!==void 0&&$!=null&&x(n,["labels"],$);const H=y(e,["cachedContent"]);n!==void 0&&H!=null&&x(n,["cachedContent"],oi(t,H));const z=y(e,["responseModalities"]);z!=null&&x(r,["responseModalities"],z);const F=y(e,["mediaResolution"]);F!=null&&x(r,["mediaResolution"],F);const V=y(e,["speechConfig"]);V!=null&&x(r,["speechConfig"],Oj(Ib(V)));const K=y(e,["audioTimestamp"]);K!=null&&x(r,["audioTimestamp"],K);const pe=y(e,["thinkingConfig"]);pe!=null&&x(r,["thinkingConfig"],pe);const Y=y(e,["imageConfig"]);return Y!=null&&x(r,["imageConfig"],QB(Y)),r}function iC(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["contents"]);if(a!=null){let l=Qr(a);Array.isArray(l)&&(l=l.map(u=>th(u))),x(n,["contents"],l)}const i=y(e,["config"]);return i!=null&&x(n,["generationConfig"],kB(t,i,n)),n}function sC(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["contents"]);if(a!=null){let l=Qr(a);Array.isArray(l)&&(l=l.map(u=>u)),x(n,["contents"],l)}const i=y(e,["config"]);return i!=null&&x(n,["generationConfig"],NB(t,i,n)),n}function oC(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>W5(h))),x(e,["candidates"],d)}const a=y(t,["modelVersion"]);a!=null&&x(e,["modelVersion"],a);const i=y(t,["promptFeedback"]);i!=null&&x(e,["promptFeedback"],i);const l=y(t,["responseId"]);l!=null&&x(e,["responseId"],l);const u=y(t,["usageMetadata"]);return u!=null&&x(e,["usageMetadata"],u),e}function lC(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>m)),x(e,["candidates"],h)}const a=y(t,["createTime"]);a!=null&&x(e,["createTime"],a);const i=y(t,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const l=y(t,["promptFeedback"]);l!=null&&x(e,["promptFeedback"],l);const u=y(t,["responseId"]);u!=null&&x(e,["responseId"],u);const d=y(t,["usageMetadata"]);return d!=null&&x(e,["usageMetadata"],d),e}function CB(t,e){const n={};if(y(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=y(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const a=y(t,["aspectRatio"]);e!==void 0&&a!=null&&x(e,["parameters","aspectRatio"],a);const i=y(t,["guidanceScale"]);if(e!==void 0&&i!=null&&x(e,["parameters","guidanceScale"],i),y(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=y(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&x(e,["parameters","safetySetting"],l);const u=y(t,["personGeneration"]);e!==void 0&&u!=null&&x(e,["parameters","personGeneration"],u);const d=y(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&x(e,["parameters","includeSafetyAttributes"],d);const h=y(t,["includeRaiReason"]);e!==void 0&&h!=null&&x(e,["parameters","includeRaiReason"],h);const m=y(t,["language"]);e!==void 0&&m!=null&&x(e,["parameters","language"],m);const g=y(t,["outputMimeType"]);e!==void 0&&g!=null&&x(e,["parameters","outputOptions","mimeType"],g);const b=y(t,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&x(e,["parameters","outputOptions","compressionQuality"],b),y(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(y(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=y(t,["imageSize"]);if(e!==void 0&&v!=null&&x(e,["parameters","sampleImageSize"],v),y(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function EB(t,e){const n={},r=y(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const a=y(t,["negativePrompt"]);e!==void 0&&a!=null&&x(e,["parameters","negativePrompt"],a);const i=y(t,["numberOfImages"]);e!==void 0&&i!=null&&x(e,["parameters","sampleCount"],i);const l=y(t,["aspectRatio"]);e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l);const u=y(t,["guidanceScale"]);e!==void 0&&u!=null&&x(e,["parameters","guidanceScale"],u);const d=y(t,["seed"]);e!==void 0&&d!=null&&x(e,["parameters","seed"],d);const h=y(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&x(e,["parameters","safetySetting"],h);const m=y(t,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const g=y(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&x(e,["parameters","includeSafetyAttributes"],g);const b=y(t,["includeRaiReason"]);e!==void 0&&b!=null&&x(e,["parameters","includeRaiReason"],b);const v=y(t,["language"]);e!==void 0&&v!=null&&x(e,["parameters","language"],v);const k=y(t,["outputMimeType"]);e!==void 0&&k!=null&&x(e,["parameters","outputOptions","mimeType"],k);const C=y(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&x(e,["parameters","outputOptions","compressionQuality"],C);const N=y(t,["addWatermark"]);e!==void 0&&N!=null&&x(e,["parameters","addWatermark"],N);const T=y(t,["labels"]);e!==void 0&&T!=null&&x(e,["labels"],T);const R=y(t,["imageSize"]);e!==void 0&&R!=null&&x(e,["parameters","sampleImageSize"],R);const E=y(t,["enhancePrompt"]);return e!==void 0&&E!=null&&x(e,["parameters","enhancePrompt"],E),n}function TB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["prompt"]);a!=null&&x(n,["instances[0]","prompt"],a);const i=y(e,["config"]);return i!=null&&CB(i,n),n}function AB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["prompt"]);a!=null&&x(n,["instances[0]","prompt"],a);const i=y(e,["config"]);return i!=null&&EB(i,n),n}function jB(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>zB(l))),x(e,["generatedImages"],i)}const a=y(t,["positivePromptSafetyAttributes"]);return a!=null&&x(e,["positivePromptSafetyAttributes"],Mj(a)),e}function PB(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>nh(l))),x(e,["generatedImages"],i)}const a=y(t,["positivePromptSafetyAttributes"]);return a!=null&&x(e,["positivePromptSafetyAttributes"],Dj(a)),e}function IB(t,e){const n={},r=y(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r),y(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=y(t,["durationSeconds"]);if(e!==void 0&&a!=null&&x(e,["parameters","durationSeconds"],a),y(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=y(t,["aspectRatio"]);e!==void 0&&i!=null&&x(e,["parameters","aspectRatio"],i);const l=y(t,["resolution"]);e!==void 0&&l!=null&&x(e,["parameters","resolution"],l);const u=y(t,["personGeneration"]);if(e!==void 0&&u!=null&&x(e,["parameters","personGeneration"],u),y(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=y(t,["negativePrompt"]);e!==void 0&&d!=null&&x(e,["parameters","negativePrompt"],d);const h=y(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&x(e,["parameters","enhancePrompt"],h),y(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=y(t,["lastFrame"]);e!==void 0&&m!=null&&x(e,["instances[0]","lastFrame"],rh(m));const g=y(t,["referenceImages"]);if(e!==void 0&&g!=null){let b=g;Array.isArray(b)&&(b=b.map(v=>M$(v))),x(e,["instances[0]","referenceImages"],b)}if(y(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(y(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function RB(t,e){const n={},r=y(t,["numberOfVideos"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const a=y(t,["outputGcsUri"]);e!==void 0&&a!=null&&x(e,["parameters","storageUri"],a);const i=y(t,["fps"]);e!==void 0&&i!=null&&x(e,["parameters","fps"],i);const l=y(t,["durationSeconds"]);e!==void 0&&l!=null&&x(e,["parameters","durationSeconds"],l);const u=y(t,["seed"]);e!==void 0&&u!=null&&x(e,["parameters","seed"],u);const d=y(t,["aspectRatio"]);e!==void 0&&d!=null&&x(e,["parameters","aspectRatio"],d);const h=y(t,["resolution"]);e!==void 0&&h!=null&&x(e,["parameters","resolution"],h);const m=y(t,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const g=y(t,["pubsubTopic"]);e!==void 0&&g!=null&&x(e,["parameters","pubsubTopic"],g);const b=y(t,["negativePrompt"]);e!==void 0&&b!=null&&x(e,["parameters","negativePrompt"],b);const v=y(t,["enhancePrompt"]);e!==void 0&&v!=null&&x(e,["parameters","enhancePrompt"],v);const k=y(t,["generateAudio"]);e!==void 0&&k!=null&&x(e,["parameters","generateAudio"],k);const C=y(t,["lastFrame"]);e!==void 0&&C!=null&&x(e,["instances[0]","lastFrame"],ha(C));const N=y(t,["referenceImages"]);if(e!==void 0&&N!=null){let E=N;Array.isArray(E)&&(E=E.map(P=>D$(P))),x(e,["instances[0]","referenceImages"],E)}const T=y(t,["mask"]);e!==void 0&&T!=null&&x(e,["instances[0]","mask"],R$(T));const R=y(t,["compressionQuality"]);return e!==void 0&&R!=null&&x(e,["parameters","compressionQuality"],R),n}function MB(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["metadata"]);r!=null&&x(e,["metadata"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);i!=null&&x(e,["error"],i);const l=y(t,["response","generateVideoResponse"]);return l!=null&&x(e,["response"],UB(l)),e}function DB(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["metadata"]);r!=null&&x(e,["metadata"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);i!=null&&x(e,["error"],i);const l=y(t,["response"]);return l!=null&&x(e,["response"],BB(l)),e}function OB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["prompt"]);a!=null&&x(n,["instances[0]","prompt"],a);const i=y(e,["image"]);i!=null&&x(n,["instances[0]","image"],rh(i));const l=y(e,["video"]);l!=null&&x(n,["instances[0]","video"],Uj(l));const u=y(e,["source"]);u!=null&&$B(u,n);const d=y(e,["config"]);return d!=null&&IB(d,n),n}function LB(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["prompt"]);a!=null&&x(n,["instances[0]","prompt"],a);const i=y(e,["image"]);i!=null&&x(n,["instances[0]","image"],ha(i));const l=y(e,["video"]);l!=null&&x(n,["instances[0]","video"],Bj(l));const u=y(e,["source"]);u!=null&&qB(u,n);const d=y(e,["config"]);return d!=null&&RB(d,n),n}function UB(t){const e={},n=y(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>FB(l))),x(e,["generatedVideos"],i)}const r=y(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const a=y(t,["raiMediaFilteredReasons"]);return a!=null&&x(e,["raiMediaFilteredReasons"],a),e}function BB(t){const e={},n=y(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>HB(l))),x(e,["generatedVideos"],i)}const r=y(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const a=y(t,["raiMediaFilteredReasons"]);return a!=null&&x(e,["raiMediaFilteredReasons"],a),e}function $B(t,e){const n={},r=y(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const a=y(t,["image"]);e!==void 0&&a!=null&&x(e,["instances[0]","image"],rh(a));const i=y(t,["video"]);return e!==void 0&&i!=null&&x(e,["instances[0]","video"],Uj(i)),n}function qB(t,e){const n={},r=y(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const a=y(t,["image"]);e!==void 0&&a!=null&&x(e,["instances[0]","image"],ha(a));const i=y(t,["video"]);return e!==void 0&&i!=null&&x(e,["instances[0]","video"],Bj(i)),n}function zB(t){const e={},n=y(t,["_self"]);n!=null&&x(e,["image"],ZB(n));const r=y(t,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const a=y(t,["_self"]);return a!=null&&x(e,["safetyAttributes"],Mj(a)),e}function nh(t){const e={},n=y(t,["_self"]);n!=null&&x(e,["image"],Rj(n));const r=y(t,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const a=y(t,["_self"]);a!=null&&x(e,["safetyAttributes"],Dj(a));const i=y(t,["prompt"]);return i!=null&&x(e,["enhancedPrompt"],i),e}function GB(t){const e={},n=y(t,["_self"]);n!=null&&x(e,["mask"],Rj(n));const r=y(t,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>i)),x(e,["labels"],a)}return e}function FB(t){const e={},n=y(t,["video"]);return n!=null&&x(e,["video"],P$(n)),e}function HB(t){const e={},n=y(t,["_self"]);return n!=null&&x(e,["video"],I$(n)),e}function VB(t){const e={},n=y(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const r=y(t,["responseJsonSchema"]);r!=null&&x(e,["responseJsonSchema"],r);const a=y(t,["audioTimestamp"]);a!=null&&x(e,["audioTimestamp"],a);const i=y(t,["candidateCount"]);i!=null&&x(e,["candidateCount"],i);const l=y(t,["enableAffectiveDialog"]);l!=null&&x(e,["enableAffectiveDialog"],l);const u=y(t,["frequencyPenalty"]);u!=null&&x(e,["frequencyPenalty"],u);const d=y(t,["logprobs"]);d!=null&&x(e,["logprobs"],d);const h=y(t,["maxOutputTokens"]);h!=null&&x(e,["maxOutputTokens"],h);const m=y(t,["mediaResolution"]);m!=null&&x(e,["mediaResolution"],m);const g=y(t,["presencePenalty"]);g!=null&&x(e,["presencePenalty"],g);const b=y(t,["responseLogprobs"]);b!=null&&x(e,["responseLogprobs"],b);const v=y(t,["responseMimeType"]);v!=null&&x(e,["responseMimeType"],v);const k=y(t,["responseModalities"]);k!=null&&x(e,["responseModalities"],k);const C=y(t,["responseSchema"]);C!=null&&x(e,["responseSchema"],C);const N=y(t,["routingConfig"]);N!=null&&x(e,["routingConfig"],N);const T=y(t,["seed"]);T!=null&&x(e,["seed"],T);const R=y(t,["speechConfig"]);R!=null&&x(e,["speechConfig"],Oj(R));const E=y(t,["stopSequences"]);E!=null&&x(e,["stopSequences"],E);const P=y(t,["temperature"]);P!=null&&x(e,["temperature"],P);const j=y(t,["thinkingConfig"]);j!=null&&x(e,["thinkingConfig"],j);const I=y(t,["topK"]);I!=null&&x(e,["topK"],I);const D=y(t,["topP"]);if(D!=null&&x(e,["topP"],D),y(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WB(t,e){const n={},r=y(e,["model"]);return r!=null&&x(n,["_url","name"],gt(t,r)),n}function KB(t,e){const n={},r=y(e,["model"]);return r!=null&&x(n,["_url","name"],gt(t,r)),n}function YB(t){const e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=y(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function JB(t){const e={};if(y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=y(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function XB(t){const e={},n=y(t,["aspectRatio"]);n!=null&&x(e,["aspectRatio"],n);const r=y(t,["imageSize"]);if(r!=null&&x(e,["imageSize"],r),y(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function QB(t){const e={},n=y(t,["aspectRatio"]);n!=null&&x(e,["aspectRatio"],n);const r=y(t,["imageSize"]);r!=null&&x(e,["imageSize"],r);const a=y(t,["outputMimeType"]);a!=null&&x(e,["imageOutputOptions","mimeType"],a);const i=y(t,["outputCompressionQuality"]);return i!=null&&x(e,["imageOutputOptions","compressionQuality"],i),e}function ZB(t){const e={},n=y(t,["bytesBase64Encoded"]);n!=null&&x(e,["imageBytes"],Vi(n));const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Rj(t){const e={},n=y(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const r=y(t,["bytesBase64Encoded"]);r!=null&&x(e,["imageBytes"],Vi(r));const a=y(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function rh(t){const e={};if(y(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=y(t,["imageBytes"]);n!=null&&x(e,["bytesBase64Encoded"],Vi(n));const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function ha(t){const e={},n=y(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const r=y(t,["imageBytes"]);r!=null&&x(e,["bytesBase64Encoded"],Vi(r));const a=y(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function e$(t,e,n){const r={},a=y(e,["pageSize"]);n!==void 0&&a!=null&&x(n,["_query","pageSize"],a);const i=y(e,["pageToken"]);n!==void 0&&i!=null&&x(n,["_query","pageToken"],i);const l=y(e,["filter"]);n!==void 0&&l!=null&&x(n,["_query","filter"],l);const u=y(e,["queryBase"]);return n!==void 0&&u!=null&&x(n,["_url","models_url"],Nj(t,u)),r}function t$(t,e,n){const r={},a=y(e,["pageSize"]);n!==void 0&&a!=null&&x(n,["_query","pageSize"],a);const i=y(e,["pageToken"]);n!==void 0&&i!=null&&x(n,["_query","pageToken"],i);const l=y(e,["filter"]);n!==void 0&&l!=null&&x(n,["_query","filter"],l);const u=y(e,["queryBase"]);return n!==void 0&&u!=null&&x(n,["_url","models_url"],Nj(t,u)),r}function n$(t,e){const n={},r=y(e,["config"]);return r!=null&&e$(t,r,n),n}function r$(t,e){const n={},r=y(e,["config"]);return r!=null&&t$(t,r,n),n}function a$(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["_self"]);if(a!=null){let i=Cj(a);Array.isArray(i)&&(i=i.map(l=>x0(l))),x(e,["models"],i)}return e}function i$(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["_self"]);if(a!=null){let i=Cj(a);Array.isArray(i)&&(i=i.map(l=>v0(l))),x(e,["models"],i)}return e}function s$(t){const e={},n=y(t,["maskMode"]);n!=null&&x(e,["maskMode"],n);const r=y(t,["segmentationClasses"]);r!=null&&x(e,["maskClasses"],r);const a=y(t,["maskDilation"]);return a!=null&&x(e,["dilation"],a),e}function x0(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["displayName"]);r!=null&&x(e,["displayName"],r);const a=y(t,["description"]);a!=null&&x(e,["description"],a);const i=y(t,["version"]);i!=null&&x(e,["version"],i);const l=y(t,["_self"]);l!=null&&x(e,["tunedModelInfo"],S$(l));const u=y(t,["inputTokenLimit"]);u!=null&&x(e,["inputTokenLimit"],u);const d=y(t,["outputTokenLimit"]);d!=null&&x(e,["outputTokenLimit"],d);const h=y(t,["supportedGenerationMethods"]);h!=null&&x(e,["supportedActions"],h);const m=y(t,["temperature"]);m!=null&&x(e,["temperature"],m);const g=y(t,["maxTemperature"]);g!=null&&x(e,["maxTemperature"],g);const b=y(t,["topP"]);b!=null&&x(e,["topP"],b);const v=y(t,["topK"]);v!=null&&x(e,["topK"],v);const k=y(t,["thinking"]);return k!=null&&x(e,["thinking"],k),e}function v0(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["displayName"]);r!=null&&x(e,["displayName"],r);const a=y(t,["description"]);a!=null&&x(e,["description"],a);const i=y(t,["versionId"]);i!=null&&x(e,["version"],i);const l=y(t,["deployedModels"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(b=>xB(b))),x(e,["endpoints"],g)}const u=y(t,["labels"]);u!=null&&x(e,["labels"],u);const d=y(t,["_self"]);d!=null&&x(e,["tunedModelInfo"],_$(d));const h=y(t,["defaultCheckpointId"]);h!=null&&x(e,["defaultCheckpointId"],h);const m=y(t,["checkpoints"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(b=>b)),x(e,["checkpoints"],g)}return e}function o$(t){const e={},n=y(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=y(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const a=y(t,["executableCode"]);a!=null&&x(e,["executableCode"],a);const i=y(t,["fileData"]);i!=null&&x(e,["fileData"],vB(i));const l=y(t,["functionCall"]);l!=null&&x(e,["functionCall"],wB(l));const u=y(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const d=y(t,["inlineData"]);d!=null&&x(e,["inlineData"],V5(d));const h=y(t,["text"]);h!=null&&x(e,["text"],h);const m=y(t,["thought"]);m!=null&&x(e,["thought"],m);const g=y(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const b=y(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function l$(t){const e={},n=y(t,["productImage"]);return n!=null&&x(e,["image"],ha(n)),e}function c$(t,e){const n={},r=y(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const a=y(t,["baseSteps"]);e!==void 0&&a!=null&&x(e,["parameters","baseSteps"],a);const i=y(t,["outputGcsUri"]);e!==void 0&&i!=null&&x(e,["parameters","storageUri"],i);const l=y(t,["seed"]);e!==void 0&&l!=null&&x(e,["parameters","seed"],l);const u=y(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&x(e,["parameters","safetySetting"],u);const d=y(t,["personGeneration"]);e!==void 0&&d!=null&&x(e,["parameters","personGeneration"],d);const h=y(t,["addWatermark"]);e!==void 0&&h!=null&&x(e,["parameters","addWatermark"],h);const m=y(t,["outputMimeType"]);e!==void 0&&m!=null&&x(e,["parameters","outputOptions","mimeType"],m);const g=y(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&x(e,["parameters","outputOptions","compressionQuality"],g);const b=y(t,["enhancePrompt"]);e!==void 0&&b!=null&&x(e,["parameters","enhancePrompt"],b);const v=y(t,["labels"]);return e!==void 0&&v!=null&&x(e,["labels"],v),n}function u$(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["source"]);a!=null&&f$(a,n);const i=y(e,["config"]);return i!=null&&c$(i,n),n}function d$(t){const e={},n=y(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>nh(a))),x(e,["generatedImages"],r)}return e}function f$(t,e){const n={},r=y(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const a=y(t,["personImage"]);e!==void 0&&a!=null&&x(e,["instances[0]","personImage","image"],ha(a));const i=y(t,["productImages"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>l$(u))),x(e,["instances[0]","productImages"],l)}return n}function h$(t){const e={},n=y(t,["referenceImage"]);n!=null&&x(e,["referenceImage"],ha(n));const r=y(t,["referenceId"]);r!=null&&x(e,["referenceId"],r);const a=y(t,["referenceType"]);a!=null&&x(e,["referenceType"],a);const i=y(t,["maskImageConfig"]);i!=null&&x(e,["maskImageConfig"],s$(i));const l=y(t,["controlImageConfig"]);l!=null&&x(e,["controlImageConfig"],Z5(l));const u=y(t,["styleImageConfig"]);u!=null&&x(e,["styleImageConfig"],u);const d=y(t,["subjectImageConfig"]);return d!=null&&x(e,["subjectImageConfig"],d),e}function Mj(t){const e={},n=y(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const r=y(t,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const a=y(t,["contentType"]);return a!=null&&x(e,["contentType"],a),e}function Dj(t){const e={},n=y(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const r=y(t,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const a=y(t,["contentType"]);return a!=null&&x(e,["contentType"],a),e}function m$(t){const e={},n=y(t,["category"]);if(n!=null&&x(e,["category"],n),y(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=y(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function p$(t){const e={},n=y(t,["image"]);return n!=null&&x(e,["image"],ha(n)),e}function g$(t,e){const n={},r=y(t,["mode"]);e!==void 0&&r!=null&&x(e,["parameters","mode"],r);const a=y(t,["maxPredictions"]);e!==void 0&&a!=null&&x(e,["parameters","maxPredictions"],a);const i=y(t,["confidenceThreshold"]);e!==void 0&&i!=null&&x(e,["parameters","confidenceThreshold"],i);const l=y(t,["maskDilation"]);e!==void 0&&l!=null&&x(e,["parameters","maskDilation"],l);const u=y(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&x(e,["parameters","binaryColorThreshold"],u);const d=y(t,["labels"]);return e!==void 0&&d!=null&&x(e,["labels"],d),n}function y$(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["source"]);a!=null&&x$(a,n);const i=y(e,["config"]);return i!=null&&g$(i,n),n}function b$(t){const e={},n=y(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>GB(a))),x(e,["generatedMasks"],r)}return e}function x$(t,e){const n={},r=y(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const a=y(t,["image"]);e!==void 0&&a!=null&&x(e,["instances[0]","image"],ha(a));const i=y(t,["scribbleImage"]);return e!==void 0&&i!=null&&x(e,["instances[0]","scribble"],p$(i)),n}function Oj(t){const e={},n=y(t,["languageCode"]);n!=null&&x(e,["languageCode"],n);const r=y(t,["voiceConfig"]);if(r!=null&&x(e,["voiceConfig"],r),y(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function v$(t){const e={},n=y(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],SB(n));const r=y(t,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function w$(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>g)),x(e,["functionDeclarations"],m)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const a=y(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const i=y(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const l=y(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=y(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],YB(u));const d=y(t,["googleSearch"]);d!=null&&x(e,["googleSearch"],JB(d));const h=y(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}function Lj(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(b=>_B(b))),x(e,["functionDeclarations"],g)}const r=y(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const a=y(t,["googleSearchRetrieval"]);a!=null&&x(e,["googleSearchRetrieval"],a);const i=y(t,["computerUse"]);if(i!=null&&x(e,["computerUse"],i),y(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=y(t,["codeExecution"]);l!=null&&x(e,["codeExecution"],l);const u=y(t,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const d=y(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],d);const h=y(t,["googleSearch"]);h!=null&&x(e,["googleSearch"],h);const m=y(t,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function S$(t){const e={},n=y(t,["baseModel"]);n!=null&&x(e,["baseModel"],n);const r=y(t,["createTime"]);r!=null&&x(e,["createTime"],r);const a=y(t,["updateTime"]);return a!=null&&x(e,["updateTime"],a),e}function _$(t){const e={},n=y(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&x(e,["baseModel"],n);const r=y(t,["createTime"]);r!=null&&x(e,["createTime"],r);const a=y(t,["updateTime"]);return a!=null&&x(e,["updateTime"],a),e}function k$(t,e){const n={},r=y(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const a=y(t,["description"]);e!==void 0&&a!=null&&x(e,["description"],a);const i=y(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&x(e,["defaultCheckpointId"],i),n}function N$(t,e){const n={},r=y(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const a=y(t,["description"]);e!==void 0&&a!=null&&x(e,["description"],a);const i=y(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&x(e,["defaultCheckpointId"],i),n}function C$(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","name"],gt(t,r));const a=y(e,["config"]);return a!=null&&k$(a,n),n}function E$(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["config"]);return a!=null&&N$(a,n),n}function T$(t,e){const n={},r=y(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const a=y(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&x(e,["parameters","safetySetting"],a);const i=y(t,["personGeneration"]);e!==void 0&&i!=null&&x(e,["parameters","personGeneration"],i);const l=y(t,["includeRaiReason"]);e!==void 0&&l!=null&&x(e,["parameters","includeRaiReason"],l);const u=y(t,["outputMimeType"]);e!==void 0&&u!=null&&x(e,["parameters","outputOptions","mimeType"],u);const d=y(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&x(e,["parameters","outputOptions","compressionQuality"],d);const h=y(t,["enhanceInputImage"]);e!==void 0&&h!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],h);const m=y(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const g=y(t,["labels"]);e!==void 0&&g!=null&&x(e,["labels"],g);const b=y(t,["numberOfImages"]);e!==void 0&&b!=null&&x(e,["parameters","sampleCount"],b);const v=y(t,["mode"]);return e!==void 0&&v!=null&&x(e,["parameters","mode"],v),n}function A$(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["_url","model"],gt(t,r));const a=y(e,["image"]);a!=null&&x(n,["instances[0]","image"],ha(a));const i=y(e,["upscaleFactor"]);i!=null&&x(n,["parameters","upscaleConfig","upscaleFactor"],i);const l=y(e,["config"]);return l!=null&&T$(l,n),n}function j$(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>nh(i))),x(e,["generatedImages"],a)}return e}function P$(t){const e={},n=y(t,["uri"]);n!=null&&x(e,["uri"],n);const r=y(t,["encodedVideo"]);r!=null&&x(e,["videoBytes"],Vi(r));const a=y(t,["encoding"]);return a!=null&&x(e,["mimeType"],a),e}function I$(t){const e={},n=y(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const r=y(t,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],Vi(r));const a=y(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function R$(t){const e={},n=y(t,["image"]);n!=null&&x(e,["_self"],ha(n));const r=y(t,["maskMode"]);return r!=null&&x(e,["maskMode"],r),e}function M$(t){const e={},n=y(t,["image"]);n!=null&&x(e,["image"],rh(n));const r=y(t,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function D$(t){const e={},n=y(t,["image"]);n!=null&&x(e,["image"],ha(n));const r=y(t,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function Uj(t){const e={},n=y(t,["uri"]);n!=null&&x(e,["uri"],n);const r=y(t,["videoBytes"]);r!=null&&x(e,["encodedVideo"],Vi(r));const a=y(t,["mimeType"]);return a!=null&&x(e,["encoding"],a),e}function Bj(t){const e={},n=y(t,["uri"]);n!=null&&x(e,["gcsUri"],n);const r=y(t,["videoBytes"]);r!=null&&x(e,["bytesBase64Encoded"],Vi(r));const a=y(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O$="Content-Type",L$="X-Server-Timeout",U$="User-Agent",w0="x-goog-api-client",B$="1.30.0",$$=`google-genai-sdk/${B$}`,q$="v1beta1",z$="v1beta",cC=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class G${constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:q$,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:z$,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const a=[this.getRequestUrlInternal(n)];return r&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))a.searchParams.append(l,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,a.toString(),e.abortSignal),this.unaryApiCall(a,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[a,i]of Object.entries(n))typeof i=="object"?r[a]=Object.assign(Object.assign({},r[a]),i):i!==void 0&&(r[a]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,r);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,a.toString(),e.abortSignal),this.streamApiCall(a,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,a){if(n&&n.timeout||a){const i=new AbortController,l=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=l}return n&&n.extraBody!==null&&F$(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async a=>(await uC(a),new g0(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async a=>(await uC(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var n;return Yo(this,arguments,function*(){const a=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield Gt(a.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=i.decode(d,{stream:!0});try{const g=JSON.parse(h);if("error"in g){const b=JSON.parse(JSON.stringify(g.error)),v=b.status,k=b.code,C=`got status: ${v}. ${JSON.stringify(g)}`;if(k>=400&&k<600)throw new eh({message:C,status:k})}}catch(g){if(g.name==="ApiError")throw g}l+=h;let m=l.match(cC);for(;m;){const g=m[1];try{const b=new Response(g,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Gt(new g0(b)),l=l.slice(m[0].length),m=l.match(cC)}catch(b){throw new Error(`exception parsing stream chunk ${g}. ${b}`)}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=$$+" "+this.clientOptions.userAgentExtra;return e[U$]=n,e[w0]=n,e[O$]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))r.append(a,i);e.timeout&&e.timeout>0&&r.append(L$,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const i=this.clientOptions.uploader,l=await i.stat(e);a.sizeBytes=String(l.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=u;const d={file:a},h=this.getFileName(e),m=Te("upload/v1beta/files",d._url),g=await this.fetchUploadUrl(m,a.sizeBytes,a.mimeType,h,d,n==null?void 0:n.httpOptions);return i.upload(e,g,this)}async uploadFileToFileSearchStore(e,n,r){var a;const i=this.clientOptions.uploader,l=await i.stat(n),u=String(l.size),d=(a=r==null?void 0:r.mimeType)!==null&&a!==void 0?a:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),g={};r!=null&&r.customMetadata&&(g.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(g.chunkingConfig=r.chunkingConfig);const b=await this.fetchUploadUrl(h,u,d,m,g,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,a,i,l){var u;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},a?{"X-Goog-Upload-File-Name":a}:{})};const h=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(u=h==null?void 0:h.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function uC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(r);throw n>=400&&n<600?new eh({message:a,status:n}):new Error(a)}}function F$(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,l){const u=Object.assign({},i);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],m=u[d];h&&typeof h=="object"&&!Array.isArray(h)&&m&&typeof m=="object"&&!Array.isArray(m)?u[d]=r(m,h):(m&&h&&typeof m!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof m}, New type: ${typeof h}. Overwriting.`),u[d]=h)}return u}const a=r(n,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H$="mcp_used/unknown";let V$=!1;function $j(t){for(const e of t)if(W$(e)||typeof e=="object"&&"inputSchema"in e)return!0;return V$}function qj(t){var e;const n=(e=t[w0])!==null&&e!==void 0?e:"";t[w0]=(n+` ${H$}`).trimStart()}function W$(t){return t!==null&&typeof t=="object"&&t instanceof Mb}function K$(t,e=100){return Yo(this,arguments,function*(){let r,a=0;for(;a<e;){const i=yield Gt(t.listTools({cursor:r}));for(const l of i.tools)yield yield Gt(l),a++;if(!i.nextCursor)break;r=i.nextCursor}})}class Mb{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Mb(e,n)}async initialize(){var e,n,r,a;if(this.mcpTools.length>0)return;const i={},l=[];for(const m of this.mcpClients)try{for(var u=!0,d=(n=void 0,jc(K$(m))),h;h=await d.next(),e=h.done,!e;u=!0){a=h.value,u=!1;const g=a;l.push(g);const b=g.name;if(i[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);i[b]=m}}catch(g){n={error:g}}finally{try{!u&&!e&&(r=d.return)&&await r.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),$6(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const l=await a.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Y$(t,e,n){const r=new I6;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(r,a),e(r)}class J${constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),l=Z$(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${a}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let h=()=>{};const m=new Promise(E=>{h=E}),g=e.callbacks,b=function(){h({})},v=this.apiClient,k={onopen:b,onmessage:E=>{Y$(v,g.onmessage,E)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(E){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(E){}},C=this.webSocketFactory.create(d,Q$(l),k);C.connect(),await m;const R={setup:{model:gt(this.apiClient,e.model)}};return C.send(JSON.stringify(R)),new X$(C,this.apiClient)}}class X${constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=L5(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=O5(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Go.PLAY)}pause(){this.sendPlaybackControl(Go.PAUSE)}stop(){this.sendPlaybackControl(Go.STOP)}resetContext(){this.sendPlaybackControl(Go.RESET_CONTEXT)}close(){this.conn.close()}}function Q$(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Z$(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eq="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function tq(t,e,n){const r=new P6;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const i=JSON.parse(a);if(t.isVertexAI()){const l=$5(i);Object.assign(r,l)}else Object.assign(r,i);e(r)}class nq{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new J$(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,a,i,l,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let m;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&$j(e.config.tools)&&qj(g);const b=sq(g);if(this.apiClient.isVertexAI())m=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,m);else{const H=this.apiClient.getApiKey();let z="BidiGenerateContent",F="key";H!=null&&H.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),z="BidiGenerateContentConstrained",F="access_token"),m=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${z}?${F}=${H}`}let v=()=>{};const k=new Promise(H=>{v=H}),C=e.callbacks,N=function(){var H;(H=C==null?void 0:C.onopen)===null||H===void 0||H.call(C),v({})},T=this.apiClient,R={onopen:N,onmessage:H=>{tq(T,C.onmessage,H)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(H){},onclose:(r=C==null?void 0:C.onclose)!==null&&r!==void 0?r:function(H){}},E=this.webSocketFactory.create(m,iq(b),R);E.connect(),await k;let P=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const H=this.apiClient.getProject(),z=this.apiClient.getLocation();P=`projects/${H}/locations/${z}/`+P}let j={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[el.AUDIO]}:e.config.responseModalities=[el.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],D=[];for(const H of I)if(this.isCallableTool(H)){const z=H;D.push(await z.tool())}else D.push(H);D.length>0&&(e.config.tools=D);const $={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=D5(this.apiClient,$):j=M5(this.apiClient,$),delete j.config,E.send(JSON.stringify(j)),new aq(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const rq={turnComplete:!0};class aq{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Qr(n.turns),e.isVertexAI()||(r=r.map(a=>th(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(eq)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},rq),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:B5(e)}:n={realtimeInput:U5(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function iq(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function sq(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dC=10;function fC(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Jo(l)){a=!0;break}if(!a)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Jo(t){return"callTool"in t&&typeof t.callTool=="function"}function oq(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>Jo(a)))!==null&&r!==void 0?r:!1}function hC(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,a)=>{if(Jo(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(a)}),n}function mC(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lq extends si{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,a,i,l,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!oq(n)||fC(n.config))return await this.generateContentInternal(d);const h=hC(n);if(h.length>0){const C=h.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let m,g;const b=Qr(d.contents),v=(i=(a=(r=d.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&i!==void 0?i:dC;let k=0;for(;k<v&&(m=await this.generateContentInternal(d),!(!m.functionCalls||m.functionCalls.length===0));){const C=m.candidates[0].content,N=[];for(const T of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(Jo(T)){const E=await T.callTool(m.functionCalls);N.push(...E)}k++,g={role:"user",parts:N},d.contents=Qr(d.contents),d.contents.push(C),d.contents.push(g),mC(d.config)&&(b.push(C),b.push(g))}return mC(d.config)&&(m.automaticFunctionCallingHistory=b),m},this.generateContentStream=async n=>{var r,a,i,l,u;if(this.maybeMoveToResponseJsonSchem(n),fC(n.config)){const g=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(g)}const d=hC(n);if(d.length>0){const g=d.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${g}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(i=(a=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,m=(u=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(h&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var a;let i;const l=[];if(r!=null&&r.generatedImages)for(const d of r.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((a=d==null?void 0:d.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?i=d==null?void 0:d.safetyAttributes:l.push(d);let u;return i?u={generatedImages:l,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new qs(Za.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var r,a,i,l,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(i=n.source)===null||i===void 0?void 0:i.video)===null||l===void 0)&&l.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,a;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const l=await Promise.all(i.map(async d=>Jo(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&$j(e.config.tools)){const d=(a=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&a!==void 0?a:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),qj(h),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return u}async initAfcToolsMap(e){var n,r,a;const i=new Map;for(const l of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Jo(l)){const u=l,d=await u.tool();for(const h of(a=d.functionDeclarations)!==null&&a!==void 0?a:[]){if(!h.name)throw new Error("Function declaration name is required.");if(i.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);i.set(h.name,u)}}return i}async processAfcStream(e){var n,r,a;const i=(a=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:dC;let l=!1,u=0;const d=await this.initAfcToolsMap(e);return(function(h,m,g){var b,v;return Yo(this,arguments,function*(){for(var k,C,N,T;u<i;){l&&(u++,l=!1);const j=yield Gt(h.processParamsMaybeAddMcpUsage(g)),I=yield Gt(h.generateContentStreamInternal(j)),D=[],$=[];try{for(var R=!0,E=(C=void 0,jc(I)),P;P=yield Gt(E.next()),k=P.done,!k;R=!0){T=P.value,R=!1;const H=T;if(yield yield Gt(H),H.candidates&&(!((b=H.candidates[0])===null||b===void 0)&&b.content)){$.push(H.candidates[0].content);for(const z of(v=H.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(u<i&&z.functionCall){if(!z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(z.functionCall.name)){const F=yield Gt(m.get(z.functionCall.name).callTool([z.functionCall]));D.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${z.functionCall.name}`)}}}}catch(H){C={error:H}}finally{try{!R&&!k&&(N=E.return)&&(yield Gt(N.call(E)))}finally{if(C)throw C.error}}if(D.length>0){l=!0;const H=new yc;H.candidates=[{content:{role:"user",parts:D}}],yield yield Gt(H);const z=[];z.push(...$),z.push({role:"user",parts:D});const F=Qr(g.contents).concat(z);g.contents=F}else break}})})(this,d,e)}async generateContentInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=sC(this.apiClient,e);return u=Te("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=lC(m),b=new yc;return Object.assign(b,g),b})}else{const h=iC(this.apiClient,e);return u=Te("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=oC(m),b=new yc;return Object.assign(b,g),b})}}async generateContentStreamInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=sC(this.apiClient,e);return u=Te("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(g){return Yo(this,arguments,function*(){var b,v,k,C;try{for(var N=!0,T=jc(g),R;R=yield Gt(T.next()),b=R.done,!b;N=!0){C=R.value,N=!1;const E=C,P=lC(yield Gt(E.json()));P.sdkHttpResponse={headers:E.headers};const j=new yc;Object.assign(j,P),yield yield Gt(j)}}catch(E){v={error:E}}finally{try{!N&&!b&&(k=T.return)&&(yield Gt(k.call(T)))}finally{if(v)throw v.error}}})})}else{const h=iC(this.apiClient,e);return u=Te("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(g){return Yo(this,arguments,function*(){var b,v,k,C;try{for(var N=!0,T=jc(g),R;R=yield Gt(T.next()),b=R.done,!b;N=!0){C=R.value,N=!1;const E=C,P=oC(yield Gt(E.json()));P.sdkHttpResponse={headers:E.headers};const j=new yc;Object.assign(j,P),yield yield Gt(j)}}catch(E){v={error:E}}finally{try{!N&&!b&&(k=T.return)&&(yield Gt(k.call(T)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=gB(this.apiClient,e);return u=Te("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=bB(m),b=new GN;return Object.assign(b,g),b})}else{const h=pB(this.apiClient,e);return u=Te("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=yB(m),b=new GN;return Object.assign(b,g),b})}}async generateImagesInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=AB(this.apiClient,e);return u=Te("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=PB(m),b=new FN;return Object.assign(b,g),b})}else{const h=TB(this.apiClient,e);return u=Te("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=jB(m),b=new FN;return Object.assign(b,g),b})}}async editImageInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI()){const u=dB(this.apiClient,e);return i=Te("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const h=fB(d),m=new v6;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI()){const u=A$(this.apiClient,e);return i=Te("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const h=j$(d),m=new w6;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI()){const u=u$(this.apiClient,e);return i=Te("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const h=d$(d),m=new S6;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI()){const u=y$(this.apiClient,e);return i=Te("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const h=b$(d),m=new _6;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=KB(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>v0(m))}else{const h=WB(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>x0(m))}}async listInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=r$(this.apiClient,e);return u=Te("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=i$(m),b=new HN;return Object.assign(b,g),b})}else{const h=n$(this.apiClient,e);return u=Te("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=a$(m),b=new HN;return Object.assign(b,g),b})}}async update(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=E$(this.apiClient,e);return u=Te("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>v0(m))}else{const h=C$(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>x0(m))}}async delete(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=oB(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=cB(m),b=new VN;return Object.assign(b,g),b})}else{const h=sB(this.apiClient,e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=lB(m),b=new VN;return Object.assign(b,g),b})}}async countTokens(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=rB(this.apiClient,e);return u=Te("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=iB(m),b=new WN;return Object.assign(b,g),b})}else{const h=nB(this.apiClient,e);return u=Te("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=aB(m),b=new WN;return Object.assign(b,g),b})}}async computeTokens(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI()){const u=Y5(this.apiClient,e);return i=Te("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const h=J5(d),m=new k6;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=LB(this.apiClient,e);return u=Te("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>{const g=DB(m),b=new af;return Object.assign(b,g),b})}else{const h=OB(this.apiClient,e);return u=Te("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>{const g=MB(m),b=new af;return Object.assign(b,g),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cq extends si{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=m6(e);return u=Te("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l}else{const h=h6(e);return u=Te("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l}}async fetchPredictVideosOperationInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI()){const u=s6(e);return i=Te("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uq(t){const e={},n=y(t,["data"]);if(n!=null&&x(e,["data"],n),y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function dq(t){const e={},n=y(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>vq(i))),x(e,["parts"],a)}const r=y(t,["role"]);return r!=null&&x(e,["role"],r),e}function fq(t,e,n){const r={},a=y(e,["expireTime"]);n!==void 0&&a!=null&&x(n,["expireTime"],a);const i=y(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&x(n,["newSessionExpireTime"],i);const l=y(e,["uses"]);n!==void 0&&l!=null&&x(n,["uses"],l);const u=y(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&x(n,["bidiGenerateContentSetup"],xq(t,u));const d=y(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&x(n,["fieldMask"],d),r}function hq(t,e){const n={},r=y(e,["config"]);return r!=null&&x(n,["config"],fq(t,r,n)),n}function mq(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function pq(t){const e={},n=y(t,["id"]);n!=null&&x(e,["id"],n);const r=y(t,["args"]);r!=null&&x(e,["args"],r);const a=y(t,["name"]);if(a!=null&&x(e,["name"],a),y(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gq(t){const e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=y(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function yq(t){const e={};if(y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=y(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function bq(t,e){const n={},r=y(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const a=y(t,["responseModalities"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","responseModalities"],a);const i=y(t,["temperature"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","temperature"],i);const l=y(t,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const u=y(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const d=y(t,["maxOutputTokens"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","maxOutputTokens"],d);const h=y(t,["mediaResolution"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","mediaResolution"],h);const m=y(t,["seed"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","seed"],m);const g=y(t,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],Rb(g));const b=y(t,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const v=y(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],v);const k=y(t,["systemInstruction"]);e!==void 0&&k!=null&&x(e,["setup","systemInstruction"],dq(tr(k)));const C=y(t,["tools"]);if(e!==void 0&&C!=null){let I=fl(C);Array.isArray(I)&&(I=I.map(D=>Sq(dl(D)))),x(e,["setup","tools"],I)}const N=y(t,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],wq(N));const T=y(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const R=y(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","outputAudioTranscription"],R);const E=y(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&x(e,["setup","realtimeInputConfig"],E);const P=y(t,["contextWindowCompression"]);e!==void 0&&P!=null&&x(e,["setup","contextWindowCompression"],P);const j=y(t,["proactivity"]);return e!==void 0&&j!=null&&x(e,["setup","proactivity"],j),n}function xq(t,e){const n={},r=y(e,["model"]);r!=null&&x(n,["setup","model"],gt(t,r));const a=y(e,["config"]);return a!=null&&x(n,["config"],bq(a,n)),n}function vq(t){const e={},n=y(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=y(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const a=y(t,["executableCode"]);a!=null&&x(e,["executableCode"],a);const i=y(t,["fileData"]);i!=null&&x(e,["fileData"],mq(i));const l=y(t,["functionCall"]);l!=null&&x(e,["functionCall"],pq(l));const u=y(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const d=y(t,["inlineData"]);d!=null&&x(e,["inlineData"],uq(d));const h=y(t,["text"]);h!=null&&x(e,["text"],h);const m=y(t,["thought"]);m!=null&&x(e,["thought"],m);const g=y(t,["thoughtSignature"]);g!=null&&x(e,["thoughtSignature"],g);const b=y(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function wq(t){const e={},n=y(t,["handle"]);if(n!=null&&x(e,["handle"],n),y(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Sq(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>g)),x(e,["functionDeclarations"],m)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const a=y(t,["computerUse"]);a!=null&&x(e,["computerUse"],a);const i=y(t,["fileSearch"]);i!=null&&x(e,["fileSearch"],i);const l=y(t,["codeExecution"]);if(l!=null&&x(e,["codeExecution"],l),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=y(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],gq(u));const d=y(t,["googleSearch"]);d!=null&&x(e,["googleSearch"],yq(d));const h=y(t,["urlContext"]);return h!=null&&x(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _q(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const a=Object.keys(r).map(i=>`${n}.${i}`);e.push(...a)}else e.push(n)}return e.join(",")}function kq(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const i=_q(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];a.length>0&&(u=a.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];i&&d.push(i),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class Nq extends si{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=hq(this.apiClient,e);i=Te("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=kq(u,e.config);return a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cq(t,e){const n={},r=y(t,["displayName"]);return e!==void 0&&r!=null&&x(e,["displayName"],r),n}function Eq(t){const e={},n=y(t,["config"]);return n!=null&&Cq(n,e),e}function Tq(t,e){const n={},r=y(t,["force"]);return e!==void 0&&r!=null&&x(e,["_query","force"],r),n}function Aq(t){const e={},n=y(t,["name"]);n!=null&&x(e,["_url","name"],n);const r=y(t,["config"]);return r!=null&&Tq(r,e),e}function jq(t){const e={},n=y(t,["name"]);return n!=null&&x(e,["_url","name"],n),e}function Pq(t,e){const n={},r=y(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["customMetadata"],i)}const a=y(t,["chunkingConfig"]);return e!==void 0&&a!=null&&x(e,["chunkingConfig"],a),n}function Iq(t){const e={},n=y(t,["name"]);n!=null&&x(e,["name"],n);const r=y(t,["metadata"]);r!=null&&x(e,["metadata"],r);const a=y(t,["done"]);a!=null&&x(e,["done"],a);const i=y(t,["error"]);i!=null&&x(e,["error"],i);const l=y(t,["response"]);return l!=null&&x(e,["response"],Mq(l)),e}function Rq(t){const e={},n=y(t,["fileSearchStoreName"]);n!=null&&x(e,["_url","file_search_store_name"],n);const r=y(t,["fileName"]);r!=null&&x(e,["fileName"],r);const a=y(t,["config"]);return a!=null&&Pq(a,e),e}function Mq(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["parent"]);r!=null&&x(e,["parent"],r);const a=y(t,["documentName"]);return a!=null&&x(e,["documentName"],a),e}function Dq(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const a=y(t,["pageToken"]);return e!==void 0&&a!=null&&x(e,["_query","pageToken"],a),n}function Oq(t){const e={},n=y(t,["config"]);return n!=null&&Dq(n,e),e}function Lq(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["fileSearchStores"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["fileSearchStores"],i)}return e}function Uq(t,e){const n={},r=y(t,["mimeType"]);e!==void 0&&r!=null&&x(e,["mimeType"],r);const a=y(t,["displayName"]);e!==void 0&&a!=null&&x(e,["displayName"],a);const i=y(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),x(e,["customMetadata"],u)}const l=y(t,["chunkingConfig"]);return e!==void 0&&l!=null&&x(e,["chunkingConfig"],l),n}function Bq(t){const e={},n=y(t,["fileSearchStoreName"]);n!=null&&x(e,["_url","file_search_store_name"],n);const r=y(t,["config"]);return r!=null&&Uq(r,e),e}function $q(t){const e={},n=y(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qq(t,e){const n={},r=y(t,["force"]);return e!==void 0&&r!=null&&x(e,["_query","force"],r),n}function zq(t){const e={},n=y(t,["name"]);n!=null&&x(e,["_url","name"],n);const r=y(t,["config"]);return r!=null&&qq(r,e),e}function Gq(t){const e={},n=y(t,["name"]);return n!=null&&x(e,["_url","name"],n),e}function Fq(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const a=y(t,["pageToken"]);return e!==void 0&&a!=null&&x(e,["_query","pageToken"],a),n}function Hq(t){const e={},n=y(t,["parent"]);n!=null&&x(e,["_url","parent"],n);const r=y(t,["config"]);return r!=null&&Fq(r,e),e}function Vq(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const a=y(t,["documents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wq extends si{constructor(e){super(),this.apiClient=e,this.list=async n=>new qs(Za.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gq(e);return i=Te("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,r;let a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=zq(e);a=Te("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Hq(e);return i=Te("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const h=Vq(d),m=new N6;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kq extends si{constructor(e,n=new Wq(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new qs(Za.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Eq(e);return i=Te("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async get(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jq(e);return i=Te("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,r;let a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Aq(e);a=Te("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Oq(e);return i=Te("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const h=Lq(d),m=new C6;return Object.assign(m,h),m})}}async uploadToFileSearchStoreInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Bq(e);return i=Te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const h=$q(d),m=new E6;return Object.assign(m,h),m})}}async importFile(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Rq(e);return i=Te("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const h=Iq(d),m=new Tb;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yq(t,e){const n={},r=y(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function Jq(t,e){const n={},r=y(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function Xq(t,e,n){const r={};if(y(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=y(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&x(e,["displayName"],a),y(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=y(t,["epochCount"]);e!==void 0&&i!=null&&x(e,["tuningTask","hyperparameters","epochCount"],i);const l=y(t,["learningRateMultiplier"]);if(l!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),y(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(y(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(y(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=y(t,["batchSize"]);e!==void 0&&u!=null&&x(e,["tuningTask","hyperparameters","batchSize"],u);const d=y(t,["learningRate"]);if(e!==void 0&&d!=null&&x(e,["tuningTask","hyperparameters","learningRate"],d),y(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(y(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Qq(t,e,n){const r={};let a=y(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const v=y(t,["validationDataset"]);e!==void 0&&v!=null&&x(e,["supervisedTuningSpec"],pC(v))}else if(a==="PREFERENCE_TUNING"){const v=y(t,["validationDataset"]);e!==void 0&&v!=null&&x(e,["preferenceOptimizationSpec"],pC(v))}const i=y(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&x(e,["tunedModelDisplayName"],i);const l=y(t,["description"]);e!==void 0&&l!=null&&x(e,["description"],l);let u=y(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const v=y(t,["epochCount"]);e!==void 0&&v!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(u==="PREFERENCE_TUNING"){const v=y(t,["epochCount"]);e!==void 0&&v!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let d=y(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const v=y(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(d==="PREFERENCE_TUNING"){const v=y(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let h=y(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const v=y(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(h==="PREFERENCE_TUNING"){const v=y(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let m=y(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const v=y(t,["adapterSize"]);e!==void 0&&v!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(m==="PREFERENCE_TUNING"){const v=y(t,["adapterSize"]);e!==void 0&&v!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(y(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(y(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=y(t,["labels"]);e!==void 0&&g!=null&&x(e,["labels"],g);const b=y(t,["beta"]);return e!==void 0&&b!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],b),r}function Zq(t,e){const n={},r=y(t,["baseModel"]);r!=null&&x(n,["baseModel"],r);const a=y(t,["preTunedModel"]);a!=null&&x(n,["preTunedModel"],a);const i=y(t,["trainingDataset"]);i!=null&&u8(i);const l=y(t,["config"]);return l!=null&&Xq(l,n),n}function e8(t,e){const n={},r=y(t,["baseModel"]);r!=null&&x(n,["baseModel"],r);const a=y(t,["preTunedModel"]);a!=null&&x(n,["preTunedModel"],a);const i=y(t,["trainingDataset"]);i!=null&&d8(i,n,e);const l=y(t,["config"]);return l!=null&&Qq(l,n,e),n}function t8(t,e){const n={},r=y(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function n8(t,e){const n={},r=y(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function r8(t,e,n){const r={},a=y(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const i=y(t,["pageToken"]);e!==void 0&&i!=null&&x(e,["_query","pageToken"],i);const l=y(t,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),r}function a8(t,e,n){const r={},a=y(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const i=y(t,["pageToken"]);e!==void 0&&i!=null&&x(e,["_query","pageToken"],i);const l=y(t,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),r}function i8(t,e){const n={},r=y(t,["config"]);return r!=null&&r8(r,n),n}function s8(t,e){const n={},r=y(t,["config"]);return r!=null&&a8(r,n),n}function o8(t,e){const n={},r=y(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const a=y(t,["nextPageToken"]);a!=null&&x(n,["nextPageToken"],a);const i=y(t,["tunedModels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>zj(u))),x(n,["tuningJobs"],l)}return n}function l8(t,e){const n={},r=y(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const a=y(t,["nextPageToken"]);a!=null&&x(n,["nextPageToken"],a);const i=y(t,["tuningJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>S0(u))),x(n,["tuningJobs"],l)}return n}function c8(t,e){const n={},r=y(t,["name"]);r!=null&&x(n,["model"],r);const a=y(t,["name"]);return a!=null&&x(n,["endpoint"],a),n}function u8(t,e){const n={};if(y(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=y(t,["examples"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>i)),x(n,["examples","examples"],a)}return n}function d8(t,e,n){const r={};let a=y(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=y(t,["gcsUri"]);e!==void 0&&l!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=y(t,["gcsUri"]);e!==void 0&&l!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let i=y(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=y(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=y(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(y(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function zj(t,e){const n={},r=y(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const a=y(t,["name"]);a!=null&&x(n,["name"],a);const i=y(t,["state"]);i!=null&&x(n,["state"],_j(i));const l=y(t,["createTime"]);l!=null&&x(n,["createTime"],l);const u=y(t,["tuningTask","startTime"]);u!=null&&x(n,["startTime"],u);const d=y(t,["tuningTask","completeTime"]);d!=null&&x(n,["endTime"],d);const h=y(t,["updateTime"]);h!=null&&x(n,["updateTime"],h);const m=y(t,["description"]);m!=null&&x(n,["description"],m);const g=y(t,["baseModel"]);g!=null&&x(n,["baseModel"],g);const b=y(t,["_self"]);return b!=null&&x(n,["tunedModel"],c8(b)),n}function S0(t,e){const n={},r=y(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const a=y(t,["name"]);a!=null&&x(n,["name"],a);const i=y(t,["state"]);i!=null&&x(n,["state"],_j(i));const l=y(t,["createTime"]);l!=null&&x(n,["createTime"],l);const u=y(t,["startTime"]);u!=null&&x(n,["startTime"],u);const d=y(t,["endTime"]);d!=null&&x(n,["endTime"],d);const h=y(t,["updateTime"]);h!=null&&x(n,["updateTime"],h);const m=y(t,["error"]);m!=null&&x(n,["error"],m);const g=y(t,["description"]);g!=null&&x(n,["description"],g);const b=y(t,["baseModel"]);b!=null&&x(n,["baseModel"],b);const v=y(t,["tunedModel"]);v!=null&&x(n,["tunedModel"],v);const k=y(t,["preTunedModel"]);k!=null&&x(n,["preTunedModel"],k);const C=y(t,["supervisedTuningSpec"]);C!=null&&x(n,["supervisedTuningSpec"],C);const N=y(t,["preferenceOptimizationSpec"]);N!=null&&x(n,["preferenceOptimizationSpec"],N);const T=y(t,["tuningDataStats"]);T!=null&&x(n,["tuningDataStats"],T);const R=y(t,["encryptionSpec"]);R!=null&&x(n,["encryptionSpec"],R);const E=y(t,["partnerModelTuningSpec"]);E!=null&&x(n,["partnerModelTuningSpec"],E);const P=y(t,["customBaseModel"]);P!=null&&x(n,["customBaseModel"],P);const j=y(t,["experiment"]);j!=null&&x(n,["experiment"],j);const I=y(t,["labels"]);I!=null&&x(n,["labels"],I);const D=y(t,["outputUri"]);D!=null&&x(n,["outputUri"],D);const $=y(t,["pipelineJob"]);$!=null&&x(n,["pipelineJob"],$);const H=y(t,["serviceAccount"]);H!=null&&x(n,["serviceAccount"],H);const z=y(t,["tunedModelDisplayName"]);z!=null&&x(n,["tunedModelDisplayName"],z);const F=y(t,["veoTuningSpec"]);return F!=null&&x(n,["veoTuningSpec"],F),n}function f8(t,e){const n={},r=y(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const a=y(t,["name"]);a!=null&&x(n,["name"],a);const i=y(t,["metadata"]);i!=null&&x(n,["metadata"],i);const l=y(t,["done"]);l!=null&&x(n,["done"],l);const u=y(t,["error"]);return u!=null&&x(n,["error"],u),n}function pC(t,e){const n={},r=y(t,["gcsUri"]);r!=null&&x(n,["validationDatasetUri"],r);const a=y(t,["vertexDatasetResource"]);return a!=null&&x(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h8 extends si{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new qs(Za.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:a});return i.baseModel=void 0,await this.tuneInternal(i)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),i=await this.tuneMldevInternal(a);let l="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?l=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(l=i.name.split("/operations/")[0]),{name:l,state:p0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=n8(e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>S0(m))}else{const h=t8(e);return u=Te("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>zj(m))}}async listInternal(e){var n,r,a,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const h=s8(e);return u=Te("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=l8(m),b=new KN;return Object.assign(b,g),b})}else{const h=i8(e);return u=Te("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const b=g;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const g=o8(m),b=new KN;return Object.assign(b,g),b})}}async cancel(e){var n,r,a,i;let l="",u={};if(this.apiClient.isVertexAI()){const d=Jq(e);l=Te("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const d=Yq(e);l=Te("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI()){const u=e8(e,e);return i=Te("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>S0(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let a,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zq(e);return i=Te("tunedModels",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>f8(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m8{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const p8=1024*1024*8,g8=3,y8=1e3,b8=2,of="x-goog-upload-status";async function x8(t,e,n){var r;const a=await Gj(t,e,n),i=await(a==null?void 0:a.json());if(((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[of])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function v8(t,e,n){var r;const a=await Gj(t,e,n),i=await(a==null?void 0:a.json());if(((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[of])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=yj(i),u=new Ab;return Object.assign(u,l),u}async function Gj(t,e,n){var r,a;let i=0,l=0,u=new g0(new Response),d="upload";for(i=t.size;l<i;){const h=Math.min(p8,i-l),m=t.slice(l,l+h);l+h>=i&&(d+=", finalize");let g=0,b=y8;for(;g<g8&&(u=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[of]));)g++,await S8(b),b=b*b8;if(l+=h,((a=u==null?void 0:u.headers)===null||a===void 0?void 0:a[of])!=="active")break;if(i<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function w8(t){return{size:t.size,type:t.type}}function S8(t){return new Promise(e=>setTimeout(e,t))}class _8{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await x8(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await v8(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await w8(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k8{create(e,n,r){return new N8(e,n,r)}}class N8{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gC="x-goog-api-key";class C8{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(gC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(gC,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E8="gl-node/";class Fj{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=a6(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const a=new C8(this.apiKey);this.apiClient=new G$({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:E8+"web",uploader:new _8,downloader:new m8}),this.models=new lq(this.apiClient),this.live=new nq(this.apiClient,a,new k8),this.batches=new RU(this.apiClient),this.chats=new m5(this.models,this.apiClient),this.caches=new d5(this.apiClient),this.files=new k5(this.apiClient),this.operations=new cq(this.apiClient),this.authTokens=new Nq(this.apiClient),this.tunings=new h8(this.apiClient),this.fileSearchStores=new Kq(this.apiClient)}}const T8="AIzaSyDckvKJTvGuykfDjSnF2f2pwbTQGQfXd5s",li=new Fj({apiKey:T8}),ah=(t,e)=>{try{const n=t.replace(/^```json\s*/,"").replace(/\s*```$/,"");return JSON.parse(n)}catch(n){return console.error("Failed to parse JSON response:",t,n),e}},A8=async(t,e)=>{try{const n=e?"gemini-2.5-pro":"gemini-2.5-flash",r=e?{thinkingConfig:{thinkingBudget:8192}}:{};return(await li.models.generateContent({model:n,contents:t,config:r})).text}catch(n){throw console.error("Error generating response:",n),n}},j8=async t=>{if(!t)return[];try{const e=await li.models.generateContent({model:"gemini-2.5-flash",contents:`List 5 to 7 common products or services a ${t} would sell.`,config:{responseMimeType:"application/json",responseSchema:{type:lt.OBJECT,properties:{products:{type:lt.ARRAY,items:{type:lt.STRING}}},required:["products"]}}});return ah(e.text,{products:[]}).products}catch(e){throw console.error(`Error fetching products for ${t}:`,e),e}},Hj=async(t,e)=>{var n,r;try{const a=e?`${t}

Aspect ratio: ${e}`:t,i=await li.models.generateContent({model:"gemini-2.5-flash-image",contents:a,config:{responseModalities:[el.IMAGE]}}),l=(n=i.candidates)==null?void 0:n[0],u=((r=l==null?void 0:l.content)==null?void 0:r.parts)??[];for(const d of u)if(d.inlineData)return`data:${d.inlineData.mimeType||"image/png"};base64,${d.inlineData.data}`;throw console.error("generateImage: No inlineData part found in response",{response:i}),new Error("No image was returned from generateImage.")}catch(a){throw console.error("Error generating image:",a),a}},P8=async(t,e,n)=>{var r,a;try{const i=await li.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{data:t,mimeType:e}},{text:n}]},config:{responseModalities:[el.IMAGE]}}),l=(r=i.candidates)==null?void 0:r[0],u=((a=l==null?void 0:l.content)==null?void 0:a.parts)??[];for(const d of u)if(d.inlineData)return`data:${d.inlineData.mimeType||"image/png"};base64,${d.inlineData.data}`;throw console.error("editImage: No inlineData part found in response",{response:i}),new Error("No image was returned from the editImage call.")}catch(i){throw console.error("Error editing image:",i),i}},I8=async(t,e)=>{try{return((await li.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{data:t,mimeType:e}},{text:'Suggest a short, creative edit for this image. The suggestion should be a command, like "Make the sky a vibrant sunset" or "Add a small, red boat on the water". Provide only the command text, nothing else.'}]}})).text??"").trim()||"Enhance the lighting and colors."}catch(n){return console.error("Error getting edit suggestion:",n),"Enhance the lighting and colors."}},R8=async(t,e)=>{try{const n=`Generate a "${t}" based on these details: ${JSON.stringify(e,null,2)}. The tone should be professional, clear, and persuasive. Format as clean text.`;return(await li.models.generateContent({model:"gemini-2.5-pro",contents:n})).text}catch(n){throw console.error("Error generating business content:",n),n}},M8=async t=>{if(!t)return[];try{const e=await li.models.generateContent({model:"gemini-2.5-flash",contents:`Provide 5 famous quotes by ${t}.`,config:{responseMimeType:"application/json",responseSchema:{type:lt.OBJECT,properties:{quotes:{type:lt.ARRAY,items:{type:lt.OBJECT,properties:{text:{type:lt.STRING},author:{type:lt.STRING}},required:["text","author"]}}},required:["quotes"]}}});return ah(e.text,{quotes:[]}).quotes}catch(e){throw console.error(`Error fetching quotes for ${t}:`,e),e}},D8=async t=>{const e=`Analyze sales metrics for ${t.timeframeDays} days: Revenue: ${t.revenue}, Calls: ${t.calls}, Appts: ${t.appts}, Deals: ${t.deals}. Provide an "Activity Score" (1-100) and 2-3 concise improvement suggestions.`;try{const n=await li.models.generateContent({model:"gemini-2.5-pro",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:lt.OBJECT,properties:{score:{type:lt.INTEGER},suggestions:{type:lt.STRING}},required:["score","suggestions"]}}});return ah(n.text,{score:0,suggestions:"Could not generate evaluation."})}catch(n){throw console.error("Error fetching performance evaluation:",n),n}},O8=async(t,e)=>{const n=`Analyze product sales data for ${e}: ${JSON.stringify(t)}. Provide JSON with: 1. "questions" (2-3 insightful questions). 2. "strategies" (2 actionable marketing strategies). 3. "reading" (1 relevant book recommendation). 4. "quote" (1 relevant motivational quote).`;try{const r=await li.models.generateContent({model:"gemini-2.5-pro",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:lt.OBJECT,properties:{questions:{type:lt.ARRAY,items:{type:lt.STRING}},strategies:{type:lt.ARRAY,items:{type:lt.STRING}},reading:{type:lt.OBJECT,properties:{title:{type:lt.STRING},author:{type:lt.STRING},description:{type:lt.STRING}},required:["title","author","description"]},quote:{type:lt.OBJECT,properties:{text:{type:lt.STRING},author:{type:lt.STRING}},required:["text","author"]}},required:["questions","strategies","reading","quote"]}}});return ah(r.text,{questions:[],strategies:[],reading:{title:"",author:"",description:""},quote:{text:"",author:""}})}catch(r){throw console.error("Error fetching revenue analysis:",r),r}},Wi=({selectedDate:t,onDateChange:e,datesWithActivity:n=[]})=>{const r=["S","M","T","W","T","F","S"],a=t.getMonth(),i=t.getFullYear(),l=t.getDate(),u=()=>{e(new Date(i,a-1,1))},d=()=>{e(new Date(i,a+1,1))},h=N=>{if(N>0){const T=new Date(i,a,N);e(T)}},m=(N,T)=>new Date(N,T+1,0).getDate(),g=(N,T)=>new Date(N,T,1).getDay(),b=N=>{if(!N)return!1;const T=new Date(i,a,N).toISOString().split("T")[0];return n.includes(T)},v=m(i,a),k=g(i,a),C=Array.from({length:k},()=>null).concat(Array.from({length:v},(N,T)=>T+1));return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-3 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 px-1",children:[o.jsx("button",{onClick:u,className:"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-brand-gray/50","aria-label":"Previous month",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),o.jsx("h4",{className:"font-bold text-sm text-center text-brand-light-text dark:text-white select-none",children:t.toLocaleString("en-US",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:d,className:"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-brand-gray/50","aria-label":"Next month",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),o.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-gray-500 dark:text-gray-400",children:[r.map((N,T)=>o.jsx("div",{className:"font-semibold w-7 h-7 flex items-center justify-center",children:N},T)),C.map((N,T)=>{const R=N===l,E=b(N);return o.jsxs("button",{onClick:()=>h(N),disabled:!N,className:`p-1 rounded-full w-7 h-7 mx-auto flex items-center justify-center text-xs transition-colors relative ${N?"hover:bg-gray-200 dark:hover:bg-brand-gray":"cursor-default"} ${R?"bg-brand-blue text-white font-bold":"text-brand-light-text dark:text-gray-300"}`,children:[N,E&&o.jsx("span",{className:`absolute bottom-0.5 w-1 h-1 rounded-full ${R?"bg-white":"bg-brand-lime"}`})]},T)})]})]})},Do=({label:t,value:e,onClick:n})=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:n,className:"text-sm font-medium text-left flex items-center rounded px-2 py-1 transition-colors w-1/3 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-brand-gray/50",children:[o.jsx("span",{className:"text-brand-red mr-2",children:""})," ",t]}),o.jsx("p",{className:"w-2/3 bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md px-2 py-1 text-sm text-brand-light-text dark:text-white text-right font-semibold",children:e||"$0.00"})]}),L8=({data:t,onNavigate:e})=>o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:"REVENUE GENERATED"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Do,{label:"TODAY",value:t.today,onClick:()=>e("today")}),o.jsx(Do,{label:"WEEK",value:t.week,onClick:()=>e("week")}),o.jsx(Do,{label:"MONTH",value:t.month,onClick:()=>e("month")}),o.jsx(Do,{label:"YTD",value:t.ytd,onClick:()=>e("ytd")}),o.jsx(Do,{label:"MCV",value:t.mcv,onClick:()=>e("mcv")}),o.jsx(Do,{label:"ACV",value:t.acv,onClick:()=>e("acv")})]})]}),U8=({targets:t,onTargetChange:e,onMoveToTomorrow:n})=>{const[r,a]=_.useState(t&&t.length>0?t:Array.from({length:3},(P,j)=>({id:`soi-${j+1}`,text:"",completed:!1,currentDay:0,totalDays:0,startDate:""}))),[i,l]=_.useState({visible:!1,x:0,y:0,target:null}),[u,d]=_.useState(null);_.useEffect(()=>{t&&t.length>0&&a(t)},[t]),_.useEffect(()=>{const P=()=>l({visible:!1,x:0,y:0,target:null});if(i.visible)return document.addEventListener("click",P),()=>document.removeEventListener("click",P)},[i.visible]);const h=P=>{const j={...P,completed:!P.completed};a(I=>I.map(D=>D.id===P.id?j:D)),e(j,!0)},m=(P,j)=>{const I={...P,text:j};a(D=>D.map($=>$.id===P.id?I:$)),e(I,!1)},g=(P,j)=>{n&&(P.preventDefault(),l({visible:!0,x:P.clientX,y:P.clientY,target:j}))},b=(P,j)=>{if(!n)return;const I=setTimeout(()=>{const D=P.touches[0];l({visible:!0,x:D.clientX,y:D.clientY,target:j})},500);d(I)},v=()=>{u&&(clearTimeout(u),d(null))},k=()=>{i.target&&h(i.target),l({visible:!1,x:0,y:0,target:null})},C=()=>{i.target&&n&&n(i.target),l({visible:!1,x:0,y:0,target:null})},N=r.filter(P=>P.text&&P.text.trim()!==""),T=N.filter(P=>P.completed).length,R=N.length,E=R>0?T/R*100:0;return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"bg-purple-600 dark:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg mb-4",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsx("span",{className:"text-lg",children:"IMPLEMENT NOW"})]}),o.jsx("p",{className:"text-center text-xs text-purple-100 italic font-normal",children:'"Knowledge without action is worthless. Speed of implementation is the ultimate competitive advantage."'})]}),o.jsx("div",{className:"space-y-3 mb-4",children:r.map(P=>o.jsxs("div",{className:"flex items-start space-x-3",onContextMenu:j=>g(j,P),onTouchStart:j=>b(j,P),onTouchEnd:v,onTouchCancel:v,children:[o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("input",{type:"checkbox",checked:P.completed,onChange:()=>h(P),className:"peer",style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#9333ea"}}),o.jsx("svg",{className:"absolute w-5 h-5 pointer-events-none hidden peer-checked:block text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"20 6 9 17 4 12"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"text",value:P.text,onChange:j=>m(P,j.target.value),placeholder:"",readOnly:!0,className:`w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-sm p-1 focus:outline-none cursor-default ${P.completed?"line-through text-gray-500":P.rolledOver?"text-red-600 dark:text-red-500 font-semibold":"text-purple-600 dark:text-purple-400 font-bold"}`}),P.text&&P.totalDays>0&&o.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Day ",P.currentDay," of ",P.totalDays]}),P.source&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsx("span",{children:P.source})]})]})]})]},P.id))}),R>0&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-800",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[o.jsx("span",{className:"font-semibold",children:"Progress:"}),o.jsxs("span",{children:[T," of ",R," completed"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:"bg-purple-600 dark:bg-purple-500 h-full rounded-full transition-all duration-500 ease-out",style:{width:`${E}%`},children:E>10&&o.jsxs("div",{className:"text-white text-xs font-bold text-center leading-3",children:[Math.round(E),"%"]})})})]}),i.visible&&i.target&&o.jsxs("div",{className:"fixed bg-white dark:bg-brand-navy border border-gray-300 dark:border-brand-gray rounded-lg shadow-xl py-2 z-50",style:{left:`${i.x}px`,top:`${i.y}px`},children:[o.jsx("button",{onClick:k,className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-brand-gray text-sm text-brand-light-text dark:text-white",children:i.target.completed?" Mark Incomplete":" Mark Complete"}),n&&o.jsx("button",{onClick:C,className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-brand-gray text-sm text-brand-light-text dark:text-white",children:" Move to Tomorrow"})]})]})},Vj=({contacts:t,events:e})=>{const n=_.useMemo(()=>{const r=t.filter(h=>h.prospecting.SW||h.prospecting.NA||h.prospecting.LM).length,a=t.filter(h=>h.prospecting.ST).length,i=t.filter(h=>h.prospecting.EP).length,l=(e||[]).filter(h=>h.type==="Appointment").length,u=(e||[]).filter(h=>h.type==="Appointment"&&h.conducted).length,d=t.filter(h=>h.name).length;return{callsMade:r,textsSent:a,emailsSent:i,apptsSet:l,demosHeld:u,prospectsCollected:d}},[t,e]);return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:"DAILY PROSPECTING KPIS"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-8 gap-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-black text-brand-lime",children:n.callsMade}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Calls Made"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-black text-brand-lime",children:n.apptsSet}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Appointments Set"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-black text-brand-lime",children:n.demosHeld}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Demos Held"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-black text-brand-lime",children:n.textsSent}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Texts Sent"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-black text-brand-lime",children:n.emailsSent}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Emails Sent"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-black text-brand-lime",children:n.prospectsCollected}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prospects Collected"})]})]})]})},yC=({title:t,goals:e,onGoalChange:n,onMoveToTomorrow:r,highlight:a=!1,iconType:i="checkbox",showForwardTip:l=!1})=>{const[u,d]=_.useState(e),[h,m]=_.useState({visible:!1,x:0,y:0,goal:null}),[g,b]=_.useState(null);_.useEffect(()=>{d(e)},[e]),_.useEffect(()=>{const j=()=>m({visible:!1,x:0,y:0,goal:null});if(h.visible)return document.addEventListener("click",j),()=>document.removeEventListener("click",j)},[h.visible]);const v=j=>{const I={...j,completed:!j.completed};d(D=>D.map($=>$.id===j.id?I:$)),n(I,!0)},k=(j,I)=>{const D={...j,text:I};d($=>$.map(H=>H.id===j.id?D:H)),n(D,!1)},C=(j,I)=>{r&&(j.preventDefault(),m({visible:!0,x:j.clientX,y:j.clientY,goal:I}))},N=(j,I)=>{if(!r)return;const D=setTimeout(()=>{const $=j.touches[0];m({visible:!0,x:$.clientX,y:$.clientY,goal:I})},500);b(D)},T=()=>{g&&(clearTimeout(g),b(null))},R=()=>{h.goal&&v(h.goal),m({visible:!1,x:0,y:0,goal:null})},E=()=>{h.goal&&r&&r(h.goal),m({visible:!1,x:0,y:0,goal:null})},P=u.slice(0,6);return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:`text-sm font-bold uppercase ${a?"text-brand-red":"text-gray-600 dark:text-gray-300"}`,children:t}),l&&r&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[o.jsx("span",{className:"text-sm",children:""}),o.jsx("span",{className:"hidden sm:inline",children:"Right-click or long press to move forward"}),o.jsx("span",{className:"sm:hidden",children:"Long press to move forward"})]})]}),o.jsx("div",{className:"space-y-2",children:P.map(j=>o.jsxs("div",{className:"flex items-center space-x-3",onContextMenu:I=>C(I,j),onTouchStart:I=>N(I,j),onTouchEnd:T,onTouchCancel:T,children:[o.jsx("div",{className:"relative flex items-center",children:i==="checkbox"?o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"checkbox",checked:j.completed,onChange:()=>v(j),className:"peer",style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#2563eb"}}),o.jsx("svg",{className:"absolute w-5 h-5 pointer-events-none hidden peer-checked:block text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"20 6 9 17 4 12"})})]}):o.jsx("div",{onClick:()=>v(j),className:"w-5 h-5 flex items-center justify-center cursor-pointer text-xl",style:{fontSize:"20px"},children:""})}),o.jsx("input",{type:"text",value:j.text,onChange:I=>k(j,I.target.value),className:`w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid ${j.completed?"line-through text-gray-500":j.fromCoaching?"text-purple-600 dark:text-purple-400 font-bold":j.forwarded?"text-gray-400 dark:text-gray-500":j.rolledOver?"text-red-600 dark:text-red-500 font-semibold":"text-brand-light-text dark:text-white"}`}),(j.forwarded||j.forward_count>0)&&o.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap flex items-center gap-1",children:[o.jsx("span",{children:""}),j.forward_count>1&&o.jsxs("span",{className:"text-xs",children:["".repeat(Math.min(j.forward_count-1,2)),j.forward_count>3&&` ${j.forward_count}x`]})]})]},j.id))}),h.visible&&h.goal&&o.jsxs("div",{className:"fixed bg-white dark:bg-brand-navy border-2 border-brand-blue shadow-2xl rounded-lg py-2 z-50 min-w-[200px]",style:{left:`${h.x}px`,top:`${h.y}px`},onClick:j=>j.stopPropagation(),children:[o.jsxs("button",{onClick:R,className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-brand-gray flex items-center gap-2 text-brand-light-text dark:text-white",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"font-medium",children:"Mark Complete"})]}),r&&!h.goal.completed&&o.jsxs("button",{onClick:E,className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-brand-gray flex items-center gap-2 text-brand-light-text dark:text-white",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"font-medium",children:"Move to Tomorrow"})]})]})]})},B8=({hotLeads:t,onUpdateHotLead:e,selectedDate:n,onWin:r})=>{const a=d=>d.toISOString().split("T")[0],i=a(n),l=t.flatMap(d=>{if(!d.appointmentDate)return[];const h=new Date(d.appointmentDate+"T00:00:00");return Object.entries(e6).map(([m,g])=>{var k;const b=parseInt(m,10),v=new Date(h);return v.setDate(v.getDate()+b-1),a(v)===i?{lead:d,day:b,activity:g,isCompleted:!!((k=d.completedFollowUps)!=null&&k[b])}:null}).filter(Boolean)}),u=(d,h,m)=>{var k;if(!!((k=d.completedFollowUps)!=null&&k[h]))return;const b={...d.completedFollowUps||{},[h]:i},v={...d,completedFollowUps:b};e(v),r(`Follow-up: '${m}' for ${d.name}`)};return l.length===0?o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-sm font-bold text-brand-red uppercase mb-2",children:"Daily Follow-Ups"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No follow-ups scheduled for today."})]}):o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-sm font-bold text-brand-red uppercase mb-3",children:"Daily Follow-Ups"}),o.jsx("div",{className:"space-y-3",children:l.map(({lead:d,day:h,activity:m,isCompleted:g},b)=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("input",{type:"checkbox",id:`followup-${d.id}-${h}`,checked:g,onChange:()=>u(d,h,m),disabled:g,className:"h-5 w-5 mt-0.5 rounded bg-brand-light-border dark:bg-brand-gray border-gray-300 dark:border-gray-600 text-brand-blue focus:ring-brand-blue disabled:opacity-50"}),o.jsxs("label",{htmlFor:`followup-${d.id}-${h}`,className:`text-sm ${g?"line-through text-gray-500":"text-brand-light-text dark:text-gray-300"}`,children:[o.jsx("span",{className:"font-semibold",children:m})," for ",d.name]})]},`${d.id}-${h}`))})]})},$8=({isOpen:t,onClose:e,onSave:n})=>{const[r,a]=_.useState(""),[i,l]=_.useState(""),[u,d]=_.useState(""),[h,m]=_.useState(""),[g,b]=_.useState(5),[v,k]=_.useState("");_.useEffect(()=>{t&&(a(""),l(""),d(""),m(""),b(5),k(""))},[t]);const C=T=>{d(ks(T.target.value))},N=T=>{if(T.preventDefault(),!r.trim()){alert("Please enter a contact name.");return}n({name:r,company:i,phone:u,email:h,interestLevel:g,lead_source:v||"Unknown"})};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-lg flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:"Add New Lead"}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[o.jsx("input",{type:"text",placeholder:"Contact Name *",value:r,onChange:T=>a(T.target.value),required:!0,className:"w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"}),o.jsx("input",{type:"text",placeholder:"Company (Optional)",value:i,onChange:T=>l(T.target.value),className:"w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"}),o.jsx("input",{type:"tel",placeholder:"Phone Number (Optional)",value:u,onChange:C,className:"w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"}),o.jsx("input",{type:"email",placeholder:"Email Address (Optional)",value:h,onChange:T=>m(T.target.value),className:"w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-2",children:"Lead Source"}),o.jsxs("select",{value:v,onChange:T=>k(T.target.value),className:"w-full bg-white dark:bg-brand-gray border-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-2 rounded-lg focus:outline-none focus:border-brand-blue",children:[o.jsx("option",{value:"",children:"Select Source..."}),o.jsx("option",{value:"Facebook",children:" Facebook"}),o.jsx("option",{value:"Instagram",children:" Instagram"}),o.jsx("option",{value:"LinkedIn",children:" LinkedIn"}),o.jsx("option",{value:"TikTok",children:" TikTok"}),o.jsx("option",{value:"Website",children:" Website"}),o.jsx("option",{value:"Referral",children:" Referral"}),o.jsx("option",{value:"Direct Call",children:" Direct Call"}),o.jsx("option",{value:"Other",children:" Other"})]})]}),o.jsxs("div",{className:"pt-2",children:[o.jsxs("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:["Interest Level: ",o.jsx("span",{className:"font-bold text-brand-lime",children:g})]}),o.jsx("input",{type:"range",min:"1",max:"10",value:g,onChange:T=>b(parseInt(T.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-brand-gray rounded-lg appearance-none cursor-pointer accent-brand-lime mt-1"})]})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-brand-light-border dark:border-brand-gray space-x-2",children:[o.jsx("button",{onClick:e,className:"bg-brand-gray text-white font-bold py-2 px-6 rounded-lg hover:bg-brand-light-gray transition text-sm",children:"Cancel"}),o.jsx("button",{onClick:N,className:"bg-brand-blue text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition text-sm",children:"Save Lead"})]})]})}):null},wg=t=>{if(!t||!/^\d{4}-\d{2}-\d{2}$/.test(t))return"";const e=new Date(t+"T00:00:00");if(isNaN(e.getTime()))return"";const n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a=String(e.getFullYear()).slice(-2);return`${n}/${r}/${a}`},q8=t=>{const e=t.trim();if(!e)return null;const n=e.split(/[/-]/);if(n.length!==3)return null;let[r,a,i]=n.map(u=>parseInt(u,10));if(isNaN(r)||isNaN(a)||isNaN(i)||(i>=0&&i<100&&(i+=i>50?1900:2e3),i<1900||i>2100)||r<1||r>12||a<1||a>31)return null;const l=new Date(i,r-1,a);return l.getFullYear()!==i||l.getMonth()!==r-1||l.getDate()!==a?null:l.toISOString().split("T")[0]},Rs=({value:t,onChange:e,className:n})=>{const[r,a]=_.useState(wg(t)),[i,l]=_.useState(!1),u=_.useRef(null),d=_.useMemo(()=>t&&/^\d{4}-\d{2}-\d{2}$/.test(t)?new Date(t+"T00:00:00"):new Date,[t]);_.useEffect(()=>{a(wg(t))},[t]),_.useEffect(()=>{const v=k=>{u.current&&!u.current.contains(k.target)&&(i&&g(),l(!1))};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[u,i,r,t]);const h=v=>{a(v.target.value)},m=v=>{v.key==="Enter"&&g()},g=()=>{const v=q8(r);v?v!==t&&e(v):r.trim()!==""&&a(wg(t))},b=v=>{const k=v.toISOString().split("T")[0];e(k),l(!1)};return o.jsxs("div",{ref:u,className:`relative w-full ${n}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",value:r,onChange:h,onBlur:g,onKeyDown:m,placeholder:"mm/dd/yy",className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid pr-8"}),o.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute inset-y-0 right-0 flex items-center pr-2 text-gray-400 hover:text-brand-blue","aria-label":"Open calendar",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),i&&o.jsx("div",{className:"absolute top-full mt-2 z-30 bg-brand-light-card dark:bg-brand-navy shadow-lg rounded-lg border border-brand-light-border dark:border-brand-gray",children:o.jsx(Wi,{selectedDate:d,onDateChange:b})})]})},z8=Array.from({length:12},(t,e)=>String(e+1)),G8=["00","30"],F8=["AM","PM"],Wj=({isOpen:t,onClose:e,onSave:n,onDelete:r,date:a,eventToEdit:i,onGoToDay:l})=>{const[u,d]=_.useState("9"),[h,m]=_.useState("00"),[g,b]=_.useState("AM"),[v,k]=_.useState(""),[C,N]=_.useState(""),[T,R]=_.useState("Appointment"),[E,P]=_.useState(""),[j,I]=_.useState(""),[D,$]=_.useState("none"),[H,z]=_.useState(4);_.useEffect(()=>{const K=a||new Date;if(i){const[pe,Y]=i.time.split(":").map(Number),q=pe>=12?"PM":"AM";let B=pe%12||12;d(String(B)),m(String(Y).padStart(2,"0")),b(q),k(i.title),N(i.client||""),R(i.type),P(i.details||""),$("none")}else{const pe=new Date;let Y=pe.getHours();const q=pe.getMinutes();b(Y>=12?"PM":"AM"),Y=Y%12||12,d(String(Y)),m(q<30?"00":"30"),k(""),N(""),R("Appointment"),P(""),$("none"),z(4)}I(K.toISOString().split("T")[0])},[i,a,t]);const F=K=>{if(K.preventDefault(),!v||!j){alert("Please provide at least a title and a full date.");return}if(D==="weekly"&&(H<=0||H>52)){alert("Please enter a number of weeks between 1 and 52.");return}let pe=parseInt(u,10);g==="PM"&&pe<12&&(pe+=12),g==="AM"&&pe===12&&(pe=0);const Y=`${String(pe).padStart(2,"0")}:${h}`,q=a?a.toISOString().split("T")[0]:null,B=j;let ae;if(i)ae={...i,time:Y,title:v,type:T,details:E,client:C,isRecurring:!1,groupId:void 0};else{const X=Date.now().toString();ae={id:X,time:Y,title:v,type:T,details:E,client:C,isRecurring:D==="weekly",groupId:D==="weekly"?`${X}-${H}`:void 0}}n(ae,q,B)},V=()=>{i&&a&&window.confirm("Are you sure you want to delete this event?")&&r(i.id,a.toISOString().split("T")[0])};return!t||!a?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-lg flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("div",{children:o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:i?"Edit Event":"Add Event"})}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsxs("form",{onSubmit:F,className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Date"}),o.jsx(Rs,{value:j,onChange:I})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Time"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("select",{value:u,onChange:K=>d(K.target.value),className:"w-1/3 bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:z8.map(K=>o.jsx("option",{value:K,children:K},K))}),o.jsx("select",{value:h,onChange:K=>m(K.target.value),className:"w-1/3 bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:G8.map(K=>o.jsx("option",{value:K,children:K},K))}),o.jsx("select",{value:g,onChange:K=>b(K.target.value),className:"w-1/3 bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:F8.map(K=>o.jsx("option",{value:K,children:K},K))})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"type",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Type"}),o.jsx("select",{id:"type",value:T,onChange:K=>R(K.target.value),className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:ZL.map(K=>o.jsx("option",{value:K,children:K},K))})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Title"}),o.jsx("input",{type:"text",id:"title",value:v,onChange:K=>k(K.target.value),required:!0,placeholder:"e.g., Discovery Call",className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"client",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Client / Contact (Optional)"}),o.jsx("input",{type:"text",id:"client",value:C,onChange:K=>N(K.target.value),placeholder:"e.g., Jane Doe from Acme Inc.",className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"details",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Details (Optional)"}),o.jsx("textarea",{id:"details",value:E,onChange:K=>P(K.target.value),placeholder:"e.g., Discuss Q4 proposal",rows:2,className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"recurrence",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Repeats"}),o.jsxs("select",{id:"recurrence",value:D,onChange:K=>$(K.target.value),disabled:!!i,className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white disabled:opacity-50",children:[o.jsx("option",{value:"none",children:"Does not repeat"}),o.jsx("option",{value:"weekly",children:"Weekly"})]})]}),D==="weekly"&&!i&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"repeatWeeks",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Repeat for (weeks)"}),o.jsx("input",{type:"number",id:"repeatWeeks",value:H,onChange:K=>z(parseInt(K.target.value)),min:"1",max:"52",className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white"})]})]}),i&&o.jsx("p",{className:"text-xs text-center text-gray-400 dark:text-gray-500",children:"Editing an event will detach it from any recurring series."})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex gap-2",children:[l&&a&&o.jsx("button",{type:"button",onClick:()=>l(a),className:"bg-brand-lime text-brand-ink font-bold py-2 px-6 rounded-lg hover:bg-green-400 transition text-sm",children:"Go to Day"}),i&&o.jsx("button",{onClick:V,className:"bg-brand-red text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 transition text-sm",children:"Delete"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:e,className:"bg-brand-gray text-white font-bold py-2 px-6 rounded-lg hover:bg-brand-light-gray transition text-sm",children:"Cancel"}),o.jsx("button",{onClick:F,className:"bg-brand-blue text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition text-sm",children:"Save"})]})]})]})})},H8=({isOpen:t,onClose:e,leads:n,users:r})=>{const[a,i]=_.useState("all"),l=_.useMemo(()=>{const d=new Map;return n.forEach(h=>{if(h.userId&&!d.has(h.userId)){const m=r.find(g=>g.id===h.userId);m&&d.set(h.userId,m)}}),Array.from(d.values())},[n,r]),u=_.useMemo(()=>a==="all"?n:n.filter(d=>d.userId===a),[n,a]);return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsxs("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:["Leads Added Today (",n.length,")"]}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsx("div",{className:"p-3 border-b border-brand-light-border dark:border-brand-gray",children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:()=>i("all"),className:`text-xs font-bold py-1 px-3 rounded-full transition-colors ${a==="all"?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:["All (",n.length,")"]}),l.map(d=>o.jsxs("button",{onClick:()=>i(d.id),className:`text-xs font-bold py-1 px-3 rounded-full transition-colors ${a===d.id?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:[d.name," (",n.filter(h=>h.userId===d.id).length,")"]},d.id))]})}),o.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:u.length>0?o.jsx("ul",{className:"space-y-3",children:u.map(d=>o.jsxs("li",{className:"p-2 bg-brand-light-bg dark:bg-brand-gray/20 rounded-md",children:[o.jsxs("p",{className:"font-semibold text-brand-light-text dark:text-gray-200 text-sm",children:[d.name," ",d.company&&`(${d.company})`]}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[d.phone,"  ",d.email]})]},d.id))}):o.jsx("p",{className:"text-center text-gray-500 p-8",children:"No leads found for this selection."})}),o.jsx("div",{className:"p-4 border-t border-brand-light-border dark:border-brand-gray text-right",children:o.jsx("button",{onClick:e,className:"bg-brand-gray text-white font-bold py-2 px-6 rounded-lg hover:bg-brand-light-gray transition text-sm",children:"Close"})})]})}):null},V8=({wins:t=[]})=>o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-sm font-bold text-brand-red uppercase mb-2",children:"Wins Today"}),o.jsx("div",{className:"bg-brand-light-bg dark:bg-brand-gray/20 rounded p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:t.length>0?o.jsx("ul",{className:"space-y-2",children:t.map((e,n)=>o.jsxs("li",{className:"flex items-start text-sm text-brand-light-text dark:text-gray-300",children:[o.jsx("span",{className:"text-brand-lime mr-2 mt-1 flex-shrink-0",children:""}),o.jsx("span",{children:e})]},n))}):o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Your wins for today will appear here!"})})})]}),W8=({allData:t,onDataChange:e,selectedDate:n,onDateChange:r,onAddWin:a,onAddHotLead:i,onUpdateHotLead:l,hotLeads:u,transactions:d,users:h,onNavigateToRevenue:m,user:g})=>{const[b,v]=_.useState(!1),[k,C]=_.useState(!1),[N,T]=_.useState(!1),[R,E]=_.useState(null),[P,j]=_.useState(!1),I=U=>U.toISOString().split("T")[0],D=I(n),$=t[D]||sr(),z=(()=>{const U=new Date(n);U.setDate(U.getDate()-1);const J=I(U),oe=t[J];if(!oe)return{targets:[],goals:[]};if($.lastRolloverDate===D)return{targets:[],goals:[]};const me=(oe.topTargets||[]).filter(Q=>!Q.completed&&!Q.rolledOver&&Q.text&&Q.text.trim()!==""),xe=(oe.massiveGoals||[]).filter(Q=>!Q.completed&&!Q.id.includes("-rolled")&&Q.text&&Q.text.trim()!=="");return{targets:me,goals:xe}})(),F=z.targets.length>0||z.goals.length>0,V=async()=>{const U=$.topTargets||[],J=$.massiveGoals||[],oe=z.targets.map(we=>({...we,rolledOver:!0,id:`${we.id}-rolled-${D}`})),me=z.goals.map(we=>({...we,id:`${we.id}-rolled-${D}`})),xe=[...oe,...U].slice(0,6),Q=[...me,...J].slice(0,6);await K({topTargets:xe,massiveGoals:Q,lastRolloverDate:D})},K=async U=>{const J={...sr(),...$,...U};await e(D,J)},pe=_.useMemo(()=>{const U=I(n),J=new Date(n);J.setDate(J.getDate()-n.getDay());const oe=new Date(J);oe.setDate(oe.getDate()+6);const me=I(J),xe=I(oe),Q=n.getMonth(),we=n.getFullYear();let _e=0,ie=0,Le=0,ce=0,Se=0;(d||[]).forEach(Ye=>{const Fe=new Date(Ye.date+"T00:00:00");Ye.date===U&&(_e+=Ye.amount),Ye.date>=me&&Ye.date<=xe&&(ie+=Ye.amount),Fe.getMonth()===Q&&Fe.getFullYear()===we&&(Le+=Ye.amount,Ye.isRecurring&&(Se+=Ye.amount)),Fe.getFullYear()===we&&(ce+=Ye.amount)});const je=Se*12;return{today:ft(_e),week:ft(ie),month:ft(Le),ytd:ft(ce),mcv:ft(Se),acv:ft(je)}},[d,n]),Y=_.useMemo(()=>($.events||[]).filter(U=>!!(U!=null&&U.type)).sort((U,J)=>(U.time||"").localeCompare(J.time||"")),[$.events]),q=_.useMemo(()=>(u||[]).filter(U=>{var J;return(J=U.dateAdded)==null?void 0:J.startsWith(D)}),[u,D]),B=async(U,J,oe)=>{const xe=($[U]||[]).map(Q=>Q.id===J.id?J:Q);await K({[U]:xe})},ae=async(U,J)=>{const me=($.speedOfImplementation||[]).map(xe=>xe.id===U.id?U:xe);await K({speedOfImplementation:me})},X=async U=>{const J=new Date(n);J.setDate(J.getDate()+1);const oe=I(J),me=t[oe]||sr(),xe={...U,id:`${U.id}-fwd-${oe}`,currentDay:U.currentDay+1,completed:!1,rolledOver:!1},Q=[...me.speedOfImplementation||[]],we=Q.findIndex(ie=>!ie.text||ie.text.trim()==="");we!==-1&&(Q[we]=xe);const _e=($.speedOfImplementation||[]).map(ie=>ie.id===U.id?{...ie,completed:!0}:ie);await e(oe,{...me,speedOfImplementation:Q}),await K({speedOfImplementation:_e})},ve=async(U,J)=>{const oe=new Date(n);oe.setDate(oe.getDate()+1);const me=I(oe),xe=t[me]||sr(),we=[{...J,id:`${J.id}-fwd-${me}`,forwarded_from_date:D,forward_count:(J.forward_count||0)+1,last_forwarded_at:new Date().toISOString()},...xe[U]||[]].slice(0,6),_e=($[U]||[]).map(ie=>ie.id===J.id?{...ie,completed:!1,forwarded:!0}:ie);await K({[U]:_e}),await e(me,{...xe,[U]:we})},L=async(U,J,oe)=>{const me={...U,conducted:U.conducted??!1};if(R){const xe=oe,Q=t[xe]||sr(),we=(Q.events||[]).map(ie=>ie.id===U.id?me:ie),_e={...sr(),...Q,events:we};await e(xe,_e)}else if(U.isRecurring&&U.groupId){const xe=U.groupId.split("-"),Q=parseInt(xe[xe.length-1],10)||1;for(let we=0;we<Q;we++){const _e=new Date(oe);_e.setDate(_e.getDate()+we*7);const ie=I(_e),Le=`${U.id}-week${we}`,ce={...me,id:Le},Se=t[ie]||sr(),je=[...Se.events||[],ce],Ye={...sr(),...Se,events:je};await e(ie,Ye)}}else{const xe=oe,Q=t[xe]||sr(),we=[...Q.events||[],me],_e={...sr(),...Q,events:we};await e(xe,_e)}C(!1),E(null)},O=async U=>{const J=($.events||[]).filter(oe=>oe.id!==U);await K({events:J})},Z=async U=>{const J=!U.conducted,oe=($.events||[]).map(xe=>xe.id===U.id?{...xe,conducted:J}:xe);await K({events:oe});const me=U.client?`${U.client}  ${U.title||U.type}`:U.title||U.type;J&&a(D,`${U.type} Conducted: ${me}`)};return o.jsxs(o.Fragment,{children:[o.jsx($8,{isOpen:b,onClose:()=>v(!1),onSave:()=>{}}),o.jsx(Wj,{isOpen:k,onClose:()=>{C(!1),E(null)},onSave:L,onDelete:O,date:n,eventToEdit:R}),o.jsx(H8,{isOpen:N,onClose:()=>T(!1),leads:q,users:h}),o.jsxs("div",{className:"text-left mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold uppercase text-brand-light-text dark:text-white",children:n.toLocaleDateString("en-US",{weekday:"long"})}),o.jsx("p",{className:"text-brand-light-gray dark:text-gray-400 text-sm font-medium",children:n.toLocaleDateString("en-US",{month:"long",day:"numeric"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 md:items-start",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsx(Wi,{selectedDate:n,onDateChange:r}),o.jsx(L8,{data:pe,onNavigate:m}),o.jsx(U8,{targets:$.speedOfImplementation||[],onTargetChange:ae,onMoveToTomorrow:X})]}),o.jsxs("div",{className:"space-y-8",children:[o.jsx(Vj,{contacts:$.prospectingContacts||[],events:$.events||[]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-red-600",children:"TODAY'S APPOINTMENTS"}),o.jsx("button",{onClick:()=>{E(null),C(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700",children:"+ Add"})]}),Y.length===0?o.jsx("p",{className:"text-gray-500 italic",children:"No appointments today."}):o.jsx("div",{className:"space-y-3",children:Y.map(U=>{const J=U.client?`${U.client}  ${U.title||U.type}`:U.title||U.type;return o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",className:"w-5 h-5 form-checkbox text-green-600 rounded focus:ring-green-500",checked:!!U.conducted,onChange:()=>Z(U)}),o.jsxs("div",{className:U.conducted?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white",children:[o.jsx("p",{className:"font-medium",children:J}),U.time&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:gj(U.time)})]})]},U.id)})})]}),o.jsx(B8,{hotLeads:u,onUpdateHotLead:l,selectedDate:n,onWin:U=>a(D,U)}),o.jsx(V8,{wins:$.winsToday||[]})]}),o.jsxs("div",{className:"space-y-8",children:[F&&o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-2 border-yellow-400 dark:border-yellow-600 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:" Uncompleted Items from Yesterday"}),o.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[z.targets.length," target(s) and ",z.goals.length," goal(s)"]})]}),o.jsx("button",{onClick:V,className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Roll Forward "})]})}),o.jsx(yC,{title:"Today's Top 6 Targets",goals:$.topTargets||[],onGoalChange:(U,J)=>B("topTargets",U),onMoveToTomorrow:U=>ve("topTargets",U),showForwardTip:!0}),o.jsx(yC,{title:"Massive Action Goals",goals:$.massiveGoals||[],onGoalChange:(U,J)=>B("massiveGoals",U),onMoveToTomorrow:U=>ve("massiveGoals",U),highlight:!0,iconType:"target",showForwardTip:!0}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-brand-blue mb-4",children:" DAILY REFLECTION"}),o.jsx("textarea",{value:$.dailyNotes||"",onChange:U=>K({dailyNotes:U.target.value}),placeholder:"Reflect on your day...\\n\\n What went well today?\\n What could be improved?\\n Key learnings or insights?\\n Tomorrow's priorities?",className:"w-full h-64 p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-brand-light-text dark:text-white resize-none focus:outline-none focus:ring-2 focus:ring-brand-blue"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Auto-saves as you type"})]})]})]})]})},Kj=({onSetAppointment:t,onAddToHotLeads:e,autoEnrollInHotLeads:n=!0})=>{const[r,a]=_.useState(""),[i,l]=_.useState(""),[u,d]=_.useState(""),[h,m]=_.useState(""),[g,b]=_.useState(""),[v,k]=_.useState(5),[C,N]=_.useState(!1),T=_.useMemo(()=>{const I=[];for(let D=7;D<=20;D++)for(let $ of[0,30]){const H=D%12||12,z=D>=12?"PM":"AM",F=String($).padStart(2,"0"),V=`${H}:${F} ${z}`,K=`${String(D).padStart(2,"0")}:${F}`;I.push({display:V,value:K})}return I},[]),R=()=>{a(""),l(""),d(""),m(""),b(""),k(5)},E=I=>{l(ks(I.target.value))},P=()=>{if(!r||!h||!g){alert("Please fill in at least Name, a Date, and a Time for an appointment.");return}t({name:r,phone:i,email:u,date:h,time:g,interestLevel:v}),n&&e({name:r,phone:i,email:u,interestLevel:v,appointmentDate:h}),R()},j=()=>{if(!r){alert("Please fill in at least a Name to add a hot lead.");return}e({name:r,phone:i,email:u,interestLevel:v}),R()};return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 bg-brand-gray/80 text-white p-2 rounded",children:[o.jsx("h3",{className:"text-lg font-bold text-center flex-1",children:"PIPELINE PROGRESS"}),o.jsx("button",{onClick:()=>N(!C),className:"text-white hover:text-brand-lime transition-colors text-xl font-bold ml-2",title:"Show/Hide Follow-up Plan",children:""})]}),C&&o.jsxs("div",{className:"mb-4 p-3 bg-brand-blue/10 dark:bg-brand-blue/20 border border-brand-blue/30 rounded-lg relative",children:[o.jsx("button",{onClick:()=>N(!1),className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl font-bold leading-none",title:"Close",children:""}),o.jsx("h4",{className:"text-sm font-bold text-brand-blue dark:text-brand-lime mb-2",children:"30-Day Follow-up Plan"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3 italic",children:"Follow-ups start on appointment date (Day 1)"}),o.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 1:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Call"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 2:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Handwritten Letter"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 3:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Text Video"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 4:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Personal Visit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 5:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Thought of You"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 10:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Event Offer"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 14:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Informational Links"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 21:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Video Email"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold text-brand-blue dark:text-brand-lime mr-2 w-16",children:"Day 30:"}),o.jsx("span",{className:"mr-2",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Special Offer"})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{type:"text",placeholder:"Contact Name",value:r,onChange:I=>a(I.target.value),className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid"}),o.jsx("input",{type:"tel",placeholder:"Phone Number (XXX) XXX-XXXX",value:i,onChange:E,className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid"}),o.jsx("input",{type:"email",placeholder:"Email Address",value:u,onChange:I=>d(I.target.value),className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(Rs,{value:h,onChange:m}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("select",{value:g,onChange:I=>b(I.target.value),className:`w-full pl-8 bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text ${g?"dark:text-white":"dark:text-gray-400"} text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid appearance-none cursor-pointer`,children:[o.jsx("option",{value:"",children:"Time"}),T.map(I=>o.jsx("option",{value:I.value,children:I.display},I.value))]})]})]}),o.jsxs("div",{className:"pt-2",children:[o.jsxs("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:["Interest Level: ",o.jsx("span",{className:"font-bold text-brand-lime",children:v})]}),o.jsx("input",{type:"range",min:"1",max:"10",value:v,onChange:I=>k(parseInt(I.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-brand-gray rounded-lg appearance-none cursor-pointer accent-brand-lime mt-1"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[o.jsx("button",{onClick:P,className:"bg-brand-blue text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition text-sm",children:"Set Appointment"}),o.jsx("button",{onClick:j,className:"bg-brand-lime text-brand-ink font-bold py-2 px-4 rounded-lg hover:bg-green-400 transition text-sm",children:"Add to Hot Leads"})]})]})]})},K8=({onImport:t})=>{const e=_.useRef(null),n=a=>{var u;const i=(u=a.target.files)==null?void 0:u[0];if(!i)return;const l=new FileReader;l.onload=d=>{var N;const m=((N=d.target)==null?void 0:N.result).split(/\r?\n/).filter(T=>T.trim()!=="");if(m.length===0)return;const g=m[0].split(",").map(T=>T.trim().toLowerCase()),b=g.indexOf("name"),v=g.indexOf("phone"),k=g.indexOf("email"),C=m.slice(1).map(T=>{var P,j,I;const R=T.split(","),E={};return b!==-1&&(E.name=(P=R[b])==null?void 0:P.trim()),v!==-1&&(E.phone=(j=R[v])==null?void 0:j.trim()),k!==-1&&(E.email=(I=R[k])==null?void 0:I.trim()),E}).filter(T=>T.name||T.phone||T.email);t(C)},l.readAsText(i),e.current&&(e.current.value="")},r=()=>{var a;(a=e.current)==null||a.click()};return o.jsxs("div",{children:[o.jsx("input",{type:"file",ref:e,onChange:n,accept:".csv",className:"hidden"}),o.jsx("button",{onClick:r,className:"p-2 rounded-md text-gray-400 hover:bg-gray-200 dark:hover:bg-brand-gray/50",title:"Import from CSV",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z",clipRule:"evenodd"})})})]})},Y8=({allData:t,onDataChange:e,selectedDate:n,onDateChange:r,onAddHotLead:a,onAddWin:i,handleSetAppointment:l,hotLeads:u})=>{var R;const h=(E=>E.toISOString().split("T")[0])(n),m=t[h]||sr();_.useEffect(()=>{var j;if((m.prospectingContacts||[]).filter(I=>I.prospecting.SW||I.prospecting.NA||I.prospecting.LM).length>=30&&!((j=m.milestones)!=null&&j.calls30Achieved)){i(h,"Accomplished 30 daily calls!");const I=t[h]||sr();e(h,{...I,milestones:{...I.milestones,calls30Achieved:!0}})}},[m.prospectingContacts,h,i,e,t,(R=m.milestones)==null?void 0:R.calls30Achieved]);const g=E=>{const P={...t[h]||sr(),...E};e(h,P)},b=(E,P,j)=>{const I=[...m.prospectingContacts],D=P==="phone"?ks(j):j;I[E]={...I[E],[P]:D},g({prospectingContacts:I})},v=(E,P)=>{const j=[...m.prospectingContacts],I={...j[E]},D=!I.prospecting[P],$={...I.prospecting,[P]:D};j[E]={...I,prospecting:$},g({prospectingContacts:j}),P==="SA"&&D&&I.name&&(u.some(z=>z.name===I.name&&z.phone===I.phone&&z.email===I.email)||a({...I,dateAdded:new Date().toISOString(),completedFollowUps:{}}).then(z=>{z&&i(h,`Added ${I.name} to Hot Leads.`)}))},k=E=>{const P=[...m.prospectingContacts];let j=0;for(const I of E){const D=P.findIndex($=>!$.name&&!$.phone&&!$.email);if(D!==-1)P[D]={...P[D],name:I.name||"",company:I.company||P[D].company||"",phone:I.phone?ks(I.phone):"",email:I.email||"",date:new Date().toISOString().split("T")[0]},j++;else break}g({prospectingContacts:P}),alert(`Successfully imported ${j} contacts.`)},C=E=>{const P=new Date(`${E.date}T${E.time}`);l({client:E.name,lead:"Prospecting Page",time:E.time},P);const j=[...m.prospectingContacts],I=j.findIndex(D=>!D.name);I!==-1&&(j[I]={...j[I],name:E.name,phone:ks(E.phone),email:E.email,date:new Date().toISOString().split("T")[0],prospecting:{SA:!0},interestLevel:E.interestLevel},g({prospectingContacts:j})),alert(`Appointment set for ${E.name} on ${E.date} at ${E.time}. Contact added to Hot Leads with follow-up tracking!`)},N=async E=>{const P={name:E.name,date:new Date().toISOString().split("T")[0],phone:ks(E.phone),email:E.email,interestLevel:E.interestLevel,prospecting:{},dateAdded:new Date().toISOString(),appointmentDate:E.appointmentDate,completedFollowUps:{}},j=await a(P);if(j){const I=[...m.prospectingContacts],D=I.findIndex($=>!$.name);D!==-1&&(I[D]={...I[D],...j},g({prospectingContacts:I})),E.appointmentDate||alert(`${E.name} added to Hot Leads!`)}},T=async E=>{if(!E.name)return;await a({...E,dateAdded:new Date().toISOString(),completedFollowUps:{}})&&alert(`${E.name} marked as a hot lead!`)};return o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_minmax(0,1fr)] gap-6",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsx(Wi,{selectedDate:n,onDateChange:r}),o.jsx(Vj,{contacts:m.prospectingContacts,events:m.events}),o.jsx(Kj,{onSetAppointment:C,onAddToHotLeads:N})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray h-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:["Prospecting List - ",n.toLocaleDateString()]}),o.jsx(K8,{onImport:k})]}),o.jsx("div",{className:"overflow-x-auto max-h-[28rem] overflow-y-auto",children:o.jsxs("table",{className:"w-full text-sm text-left table-fixed",children:[o.jsx("thead",{className:"bg-brand-light-bg dark:bg-brand-gray/50 text-xs uppercase text-gray-500 dark:text-gray-400 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 w-10 text-center",children:"#"}),o.jsx("th",{className:"p-2 w-1/5",children:"Name"}),o.jsx("th",{className:"p-2 w-1/5 hidden md:table-cell",children:"Company"}),o.jsx("th",{className:"p-2 w-1/5",children:"Phone"}),o.jsx("th",{className:"p-2 w-1/4 hidden md:table-cell",children:"Email"}),o.jsx("th",{className:"p-2 w-10 text-center",children:"Hot"}),o.jsx("th",{className:"p-2 w-[220px] text-center hidden md:table-cell",children:"Codes"})]})}),o.jsx("tbody",{children:m.prospectingContacts.map((E,P)=>o.jsxs("tr",{className:"border-b border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white",children:[o.jsx("td",{className:"p-2 text-gray-500 dark:text-gray-400 text-center",children:P+1}),o.jsxs("td",{children:[o.jsx("input",{type:"text",value:E.name,onChange:j=>b(P,"name",j.target.value),className:"w-full bg-transparent p-1 text-sm focus:outline-none focus:bg-brand-light-bg dark:focus:bg-brand-gray/50 rounded dark:text-white"}),o.jsx("div",{className:"flex md:hidden items-center justify-start space-x-1 mt-1",children:xg.map(j=>o.jsx("button",{onClick:()=>v(P,j),title:vg[j],className:`w-6 h-6 flex items-center justify-center rounded text-[10px] font-mono transition-colors ${E.prospecting[j]?j==="SA"?"bg-brand-blue text-white":"bg-brand-red text-white":"bg-gray-200 dark:bg-brand-gray text-gray-500 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-brand-gray/50"}`,children:j},j))})]}),o.jsx("td",{className:"hidden md:table-cell",children:o.jsx("input",{type:"text",value:E.company||"",onChange:j=>b(P,"company",j.target.value),className:"w-full bg-transparent p-1 text-sm focus:outline-none focus:bg-brand-light-bg dark:focus:bg-brand-gray/50 rounded dark:text-white"})}),o.jsx("td",{children:o.jsx("input",{type:"tel",value:E.phone,onChange:j=>b(P,"phone",j.target.value),className:"w-full bg-transparent p-1 text-sm focus:outline-none focus:bg-brand-light-bg dark:focus:bg-brand-gray/50 rounded dark:text-white"})}),o.jsx("td",{className:"hidden md:table-cell",children:o.jsx("input",{type:"email",value:E.email,onChange:j=>b(P,"email",j.target.value),className:"w-full bg-transparent p-1 text-sm focus:outline-none focus:bg-brand-light-bg dark:focus:bg-brand-gray/50 rounded dark:text-white"})}),o.jsx("td",{className:"p-2 text-center",children:o.jsx("button",{onClick:()=>T(E),disabled:!E.name,className:"text-lg disabled:opacity-40 disabled:cursor-not-allowed hover:scale-110 transition-transform",title:"Mark as Hot Lead",children:""})}),o.jsx("td",{className:"p-2 hidden md:table-cell",children:o.jsx("div",{className:"flex items-center justify-center space-x-1",children:xg.map(j=>o.jsx("button",{onClick:()=>v(P,j),title:vg[j],className:`w-6 h-6 flex items-center justify-center rounded text-[10px] font-mono transition-colors ${E.prospecting[j]?j==="SA"?"bg-brand-blue text-white":"bg-brand-red text-white":"bg-gray-200 dark:bg-brand-gray text-gray-500 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-brand-gray/50"}`,children:j},j))})})]},E.id))})]})}),o.jsxs("div",{className:"mt-4 pt-2 border-t border-brand-light-border dark:border-brand-gray",children:[o.jsx("h4",{className:"text-xs font-bold uppercase text-gray-500 dark:text-gray-400 mb-2",children:"Code Legend"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1 text-xs",children:xg.map(E=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-mono font-bold text-brand-light-text dark:text-white mr-2",children:E}),o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:vg[E]})]},E))})]})]})})]})},J8=Array.from({length:12},(t,e)=>String(e+1)),X8=["00","15","30","45"],Q8=["AM","PM"],Z8=({isOpen:t,onClose:e,onSave:n,contact:r})=>{const[a,i]=_.useState(""),[l,u]=_.useState("9"),[d,h]=_.useState("00"),[m,g]=_.useState("AM"),[b,v]=_.useState("");_.useEffect(()=>{if(t){i(new Date().toISOString().split("T")[0]);let N=new Date().getHours();g(N>=12?"PM":"AM"),N=N%12||12,u(String(N)),h("00"),v("")}},[t]);const k=C=>{if(C.preventDefault(),!a){alert("Please select a date for the appointment.");return}let N=parseInt(l,10);m==="PM"&&N<12&&(N+=12),m==="AM"&&N===12&&(N=0);const T=`${String(N).padStart(2,"0")}:${d}`;n({date:a,time:T,note:b})};return!t||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-lg flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsxs("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:["Set Appointment for ",r.name]}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Date"}),o.jsx(Rs,{value:a,onChange:i})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Time"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("select",{value:l,onChange:C=>u(C.target.value),className:"w-1/3 bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:J8.map(C=>o.jsx("option",{value:C,children:C},C))}),o.jsx("select",{value:d,onChange:C=>h(C.target.value),className:"w-1/3 bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:X8.map(C=>o.jsx("option",{value:C,children:C},C))}),o.jsx("select",{value:m,onChange:C=>g(C.target.value),className:"w-1/3 bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:Q8.map(C=>o.jsx("option",{value:C,children:C},C))})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"note",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Notes (Optional)"}),o.jsx("textarea",{id:"note",value:b,onChange:C=>v(C.target.value),placeholder:"e.g., Discuss interior painting project...",rows:3,className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue"})]})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-brand-light-border dark:border-brand-gray space-x-2",children:[o.jsx("button",{onClick:e,className:"bg-brand-gray text-white font-bold py-2 px-6 rounded-lg hover:bg-brand-light-gray transition text-sm",children:"Cancel"}),o.jsx("button",{onClick:k,className:"bg-brand-blue text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition text-sm",children:"Save Appointment"})]})]})})},ez=({isOpen:t,onClose:e,onSave:n,contact:r})=>{const[a,i]=_.useState("");_.useEffect(()=>{t&&i("")},[t]);const l=u=>{u.preventDefault();const d=parseFloat(a);if(isNaN(d)||d<0){alert("Please enter a valid, non-negative amount.");return}n(d)};return!t||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-md flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:"Convert to Client"}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["You are converting ",o.jsx("span",{className:"font-bold text-brand-light-text dark:text-white",children:r.name})," into a new client. Please enter the initial amount collected."]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"initialAmount",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Initial Amount Collected"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:"$"}),o.jsx("input",{id:"initialAmount",type:"number",value:a,onChange:u=>i(u.target.value),required:!0,autoFocus:!0,placeholder:"e.g., 5000",className:"w-full pl-7 pr-4 py-2 bg-brand-light-bg dark:bg-brand-ink border border-brand-light-border dark:border-brand-gray rounded-md text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue"})]})]})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-brand-light-border dark:border-brand-gray space-x-2",children:[o.jsx("button",{onClick:e,className:"bg-brand-gray text-white font-bold py-2 px-6 rounded-lg hover:bg-brand-light-gray transition text-sm",children:"Cancel"}),o.jsx("button",{onClick:l,className:"bg-brand-lime text-brand-ink font-bold py-2 px-6 rounded-lg hover:bg-green-400 transition text-sm",children:"Confirm & Convert"})]})]})})},tz=({hotLeads:t,onAddHotLead:e,onUpdateHotLead:n,onDeleteHotLead:r,selectedDate:a,onDateChange:i,handleSetAppointment:l,onConvertToClient:u})=>{const[d,h]=_.useState(!1),[m,g]=_.useState(!1),[b,v]=_.useState(null),[k,C]=_.useState(null),[N,T]=_.useState(!1),[R,E]=_.useState(!1),P=_.useMemo(()=>{const B=new Set;return t.forEach(ae=>{if(ae.dateAdded){const X=ae.dateAdded.split("T")[0];B.add(X)}}),Array.from(B)},[t]),j=_.useMemo(()=>{const B=[...t].sort((X,ve)=>new Date(ve.dateAdded||0).getTime()-new Date(X.dateAdded||0).getTime());if(!N)return B;const ae=a.toISOString().split("T")[0];return B.filter(X=>X.dateAdded&&X.dateAdded.startsWith(ae))},[t,a,N]),I=(B,ae,X)=>{const ve=t.find(O=>O.id===B);if(!ve)return;const L=ae==="phone"?qL(String(X)):X;n({...ve,[ae]:L})},D=B=>{window.confirm("Are you sure you want to remove this hot lead?")&&r(B)},$=()=>{const B={name:"",company:"",date:new Date().toISOString().split("T")[0],phone:"",email:"",interestLevel:5,prospecting:{},dateAdded:new Date().toISOString(),completedFollowUps:{}};e(B)},H=B=>{v(B),h(!0)},z=B=>{v(B),g(!0)},F=({date:B,time:ae,note:X})=>{if(!b)return;const ve=new Date(`${B}T${ae}`);l({client:b.name,lead:"Hot Lead",time:ae,details:X},ve),n({...b,appointmentDate:B}),h(!1)},V=B=>{b&&(u(b,B),g(!1))},K=B=>{const ae=new Date(`${B.date}T${B.time}`);l({client:B.name,lead:"Hot Lead",time:B.time},ae)},pe=B=>{const ae={name:B.name,company:"",date:new Date().toISOString().split("T")[0],phone:B.phone,email:B.email,interestLevel:B.interestLevel,prospecting:{},dateAdded:new Date().toISOString(),completedFollowUps:{}};e(ae),alert(`${B.name} added to Hot Leads!`)},Y=B=>{i(B),T(!0)},q=()=>{T(!1)};return o.jsxs(o.Fragment,{children:[o.jsx(Z8,{isOpen:d,onClose:()=>h(!1),onSave:F,contact:b}),o.jsx(ez,{isOpen:m,onClose:()=>g(!1),onSave:V,contact:b}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[o.jsx(Wi,{selectedDate:a,onDateChange:Y,datesWithActivity:P}),o.jsx(Kj,{onSetAppointment:K,onAddToHotLeads:pe})]}),o.jsx("div",{className:"lg:col-span-9",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("h1",{className:"text-3xl font-bold text-brand-light-text dark:text-white",children:["Hot Leads",N&&o.jsxs("span",{className:"text-lg font-normal text-gray-500 dark:text-gray-400 ml-2",children:["- ",a.toLocaleDateString()," (",j.length,")"]})]}),N&&o.jsx("button",{onClick:q,className:"text-sm bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300 px-3 py-1 rounded-lg hover:bg-gray-300 dark:hover:bg-brand-gray/70 transition",children:"Show All Leads"})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsx("button",{onClick:$,className:"bg-brand-lime text-brand-ink font-bold py-2 px-4 rounded-lg hover:bg-green-400 transition text-sm whitespace-nowrap",children:"+ Add New Lead"})})]}),R&&o.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-brand-gray/30 border border-brand-blue/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-bold text-brand-blue uppercase",children:" 30-Day Follow-Up Plan"}),o.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 font-bold text-lg",children:""})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"Follow-ups begin on the appointment date. Complete each step to maximize conversion."}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 text-xs",children:Object.entries(bg).map(([B,ae])=>o.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[o.jsxs("span",{className:"font-bold text-brand-blue min-w-[60px]",children:["Day ",B,":"]}),o.jsx("span",{children:ae})]},B))})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left table-auto",children:[o.jsx("thead",{className:"bg-brand-light-bg dark:bg-brand-gray/50 text-xs uppercase text-gray-500 dark:text-gray-400 hidden sm:table-header-group",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:"Name"}),o.jsx("th",{className:"p-3",children:"Phone"}),o.jsx("th",{className:"p-3 hidden md:table-cell",children:"Email"}),o.jsx("th",{className:"p-3 text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx("span",{children:"Follow-ups"}),o.jsx("button",{onClick:()=>E(!R),className:"text-brand-blue hover:text-blue-600 font-bold text-sm",title:"View 30-Day Follow-Up Plan",children:""})]})}),o.jsx("th",{className:"p-3",children:"Actions"}),o.jsx("th",{className:"p-3 text-center w-12"})]})}),o.jsxs("tbody",{children:[j.map(B=>o.jsxs(zo.Fragment,{children:[o.jsxs("tr",{className:"border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("td",{className:"p-2","data-label":"Name",children:o.jsx("input",{type:"text",value:B.name,onBlur:ae=>I(B.id,"name",ae.target.value),onChange:ae=>I(B.id,"name",ae.target.value),className:"w-full bg-transparent p-1 text-sm focus:outline-none focus:bg-brand-light-bg dark:focus:bg-brand-gray/50 rounded dark:text-white"})}),o.jsx("td",{className:"p-2","data-label":"Phone",children:o.jsx("input",{type:"tel",value:B.phone,onBlur:ae=>I(B.id,"phone",ae.target.value),onChange:ae=>I(B.id,"phone",ae.target.value),className:"w-full bg-transparent p-1 text-sm focus:outline-none focus:bg-brand-light-bg dark:focus:bg-brand-gray/50 rounded dark:text-white"})}),o.jsx("td",{className:"p-2 hidden md:table-cell","data-label":"Email",children:o.jsx("input",{type:"email",value:B.email,onBlur:ae=>I(B.id,"email",ae.target.value),onChange:ae=>I(B.id,"email",ae.target.value),className:"w-full bg-transparent p-1 text-sm focus:outline-none focus:bg-brand-light-bg dark:focus:bg-brand-gray/50 rounded dark:text-white"})}),o.jsx("td",{className:"p-2 text-center",children:o.jsxs("button",{onClick:()=>C(k===B.id?null:B.id),className:"font-bold text-brand-blue hover:underline",disabled:!B.appointmentDate,title:B.appointmentDate?"View Follow-up Plan":"Set an appointment to start follow-ups",children:[B.completedFollowUps?Object.keys(B.completedFollowUps).length:0," / ",Object.keys(bg).length]})}),o.jsxs("td",{className:"p-2 flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[o.jsx("button",{onClick:()=>H(B),className:"bg-brand-blue text-white font-bold py-2 px-3 rounded-md hover:bg-blue-700 transition text-xs whitespace-nowrap",children:"Set Appt"}),o.jsx("button",{onClick:()=>z(B),className:"bg-brand-lime text-brand-ink font-bold py-2 px-3 rounded-md hover:bg-green-400 transition text-xs whitespace-nowrap",children:"Convert"})]}),o.jsx("td",{className:"p-2 text-center",children:o.jsx("button",{onClick:()=>D(B.id),className:"text-red-500 hover:text-red-400 font-bold text-xl",title:"Remove Lead",children:""})})]}),k===B.id&&o.jsx("tr",{children:o.jsxs("td",{colSpan:6,className:"p-3 bg-brand-light-bg dark:bg-brand-gray/20",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase text-gray-500 dark:text-gray-400 mb-2",children:["Follow-up Plan (Starts: ",B.appointmentDate,")"]}),o.jsx("ul",{className:"text-xs space-y-1",children:Object.entries(bg).map(([ae,X])=>{const ve=B.completedFollowUps&&B.completedFollowUps[parseInt(ae,10)];return o.jsxs("li",{className:`flex items-center ${ve?"text-gray-500 line-through":"text-gray-700 dark:text-gray-300"}`,children:[o.jsxs("span",{className:"font-bold w-12",children:["Day ",ae,":"]}),o.jsx("span",{children:X})]},ae)})})]})})]},B.id)),j.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center p-8 text-gray-500 dark:text-gray-400",children:N?`No hot leads added on ${a.toLocaleDateString()}.`:"No hot leads yet. Add some from the Prospecting page!"})})]})]})})]})})]})]})},nz=({newClients:t})=>{const e=_.useMemo(()=>{const n=new Date,r=n.getMonth(),a=n.getFullYear(),i=t.filter(h=>{const m=new Date(h.closeDate);return m.getMonth()===r&&m.getFullYear()===a}),l=i.reduce((h,m)=>h+m.initialAmountCollected,0),u=i.reduce((h,m)=>h+(m.monthlyContractValue||0),0),d=i.length>0?l/i.length:0;return{clientsThisMonth:i.length,initialCollectedThisMonth:ft(l),newMCVThisMonth:ft(u),avgDealSize:ft(d)}},[t]);return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:"NEW CLIENT KPIS"}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-4xl font-black text-brand-lime",children:e.clientsThisMonth}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"New Clients (Month)"})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-baseline border-t border-dashed border-gray-200 dark:border-brand-gray pt-2",children:[o.jsx("span",{className:"font-semibold text-sm text-gray-700 dark:text-gray-300",children:"Initial Collected (Month):"}),o.jsx("span",{className:"font-bold text-lg text-brand-light-text dark:text-white",children:e.initialCollectedThisMonth})]}),o.jsxs("div",{className:"flex justify-between items-baseline border-t border-dashed border-gray-200 dark:border-brand-gray pt-2",children:[o.jsx("span",{className:"font-semibold text-sm text-gray-700 dark:text-gray-300",children:"New MCV (Month):"}),o.jsx("span",{className:"font-bold text-lg text-brand-light-text dark:text-white",children:e.newMCVThisMonth})]}),o.jsxs("div",{className:"flex justify-between items-baseline border-t border-dashed border-gray-200 dark:border-brand-gray pt-2",children:[o.jsx("span",{className:"font-semibold text-sm text-gray-700 dark:text-gray-300",children:"Average Deal Size:"}),o.jsx("span",{className:"font-bold text-lg text-brand-light-text dark:text-white",children:e.avgDealSize})]})]})]})},rz=({isOpen:t,onClose:e,onSave:n,client:r,transactions:a=[]})=>{const[i,l]=_.useState({}),[u,d]=_.useState("contact");_.useEffect(()=>{l(r||{id:`manual-${Date.now()}`,name:"",company:"",phone:"",email:"",address:"",city:"",state:"",zip:"",salesProcessLength:"",monthlyContractValue:0,initialAmountCollected:0,closeDate:new Date().toISOString().split("T")[0],stage:"Contract Signed"}),d("contact")},[r,t]);const h=C=>{const{name:N,value:T,type:R}=C.target;if(R==="number"){const E=parseFloat(T);l(P=>({...P,[N]:isNaN(E)?void 0:E}))}else l(N==="phone"?E=>({...E,[N]:ks(T)}):E=>({...E,[N]:T}))},m=C=>{if(C.preventDefault(),!i.name||i.initialAmountCollected==null){alert("Please provide at least a client name and initial amount collected.");return}n(i)},g=a.filter(C=>{var E,P,j;const N=((E=C.clientName)==null?void 0:E.toLowerCase())||"",T=((P=i.name)==null?void 0:P.toLowerCase())||"",R=((j=i.company)==null?void 0:j.toLowerCase())||"";return N===T||N===R}),b=g.reduce((C,N)=>C+N.amount,0),v=i.monthlyContractValue||0,k=v*12;return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:r?"Edit Client":"Add New Client"}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsxs("div",{className:"flex border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("button",{onClick:()=>d("contact"),className:`flex-1 py-3 px-4 text-sm font-semibold transition ${u==="contact"?"text-brand-blue border-b-2 border-brand-blue":"text-gray-500 dark:text-gray-400 hover:text-brand-light-text dark:hover:text-white"}`,children:"Contact Info"}),o.jsx("button",{onClick:()=>d("financial"),className:`flex-1 py-3 px-4 text-sm font-semibold transition ${u==="financial"?"text-brand-blue border-b-2 border-brand-blue":"text-gray-500 dark:text-gray-400 hover:text-brand-light-text dark:hover:text-white"}`,children:"Financial"}),o.jsxs("button",{onClick:()=>d("transactions"),className:`flex-1 py-3 px-4 text-sm font-semibold transition ${u==="transactions"?"text-brand-blue border-b-2 border-brand-blue":"text-gray-500 dark:text-gray-400 hover:text-brand-light-text dark:hover:text-white"}`,children:["Transactions (",g.length,")"]})]}),o.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[u==="contact"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Name"}),o.jsx("input",{type:"text",name:"name",value:i.name||"",onChange:h,required:!0,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Company"}),o.jsx("input",{type:"text",name:"company",value:i.company||"",onChange:h,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Phone"}),o.jsx("input",{type:"tel",name:"phone",value:i.phone||"",onChange:h,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Email"}),o.jsx("input",{type:"email",name:"email",value:i.email||"",onChange:h,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Address"}),o.jsx("input",{type:"text",name:"address",value:i.address||"",onChange:h,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"City"}),o.jsx("input",{type:"text",name:"city",value:i.city||"",onChange:h,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"State"}),o.jsx("input",{type:"text",name:"state",value:i.state||"",onChange:h,maxLength:2,placeholder:"CA",className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Zip"}),o.jsx("input",{type:"text",name:"zip",value:i.zip||"",onChange:h,maxLength:10,placeholder:"12345",className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]})]})]}),u==="financial"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-gray/30 p-4 rounded-lg space-y-3",children:[o.jsx("h3",{className:"text-sm font-bold uppercase text-gray-500 dark:text-gray-400 mb-3",children:"Financial Summary"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Monthly Contract Value (MCV)"}),o.jsxs("p",{className:"text-2xl font-bold text-brand-lime",children:[ft(v),"/mo"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Annual Contract Value (ACV)"}),o.jsxs("p",{className:"text-2xl font-bold text-brand-blue",children:[ft(k),"/yr"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Collected"}),o.jsx("p",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:ft(b)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Monthly Contract Value (MCV)"}),o.jsx("input",{type:"number",name:"monthlyContractValue",value:i.monthlyContractValue===void 0?"":i.monthlyContractValue,onChange:h,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Initial Amount Collected"}),o.jsx("input",{type:"number",name:"initialAmountCollected",value:i.initialAmountCollected===void 0?"":i.initialAmountCollected,onChange:h,required:!0,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Sales Process Length"}),o.jsx("input",{type:"text",name:"salesProcessLength",placeholder:"e.g., 3 months",value:i.salesProcessLength||"",onChange:h,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Close Date"}),o.jsx("input",{type:"date",name:"closeDate",value:i.closeDate||"",onChange:h,className:"mt-1 w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white p-1 focus:outline-none focus:border-brand-blue"})]})]})]}),u==="transactions"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold uppercase text-gray-500 dark:text-gray-400 mb-4",children:"Transaction History"}),g.length===0?o.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No transactions found for this client."}):o.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:g.sort((C,N)=>new Date(N.date).getTime()-new Date(C.date).getTime()).map(C=>o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-gray/30 p-3 rounded-lg flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-brand-light-text dark:text-white",children:C.product}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(C.date).toLocaleDateString()}),C.isRecurring&&o.jsx("span",{className:"inline-block mt-1 text-xs bg-brand-blue text-white px-2 py-0.5 rounded",children:"Recurring"})]}),o.jsx("p",{className:"text-lg font-bold text-brand-lime",children:ft(C.amount)})]},C.id))})]})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-brand-light-border dark:border-brand-gray space-x-2",children:[o.jsx("button",{onClick:e,className:"bg-brand-gray text-white font-bold py-2 px-6 rounded-lg hover:bg-brand-light-gray transition text-sm",children:"Cancel"}),o.jsx("button",{onClick:m,className:"bg-brand-blue text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition text-sm",children:"Save Client"})]})]})}):null},az=({onImport:t})=>{const e=_.useRef(null),n=a=>{var u;const i=(u=a.target.files)==null?void 0:u[0];if(!i)return;const l=new FileReader;l.onload=d=>{var h;try{const g=((h=d.target)==null?void 0:h.result).split(/\r?\n/).filter(k=>k.trim()!=="");if(g.length<2){alert("CSV file must have a header row and at least one data row.");return}const b=g[0].split(",").map(k=>k.trim().toLowerCase().replace(/ /g,"")),v=g.slice(1).map(k=>{const C=k.split(","),N={};return b.forEach((T,R)=>{var P;const E=(P=C[R])==null?void 0:P.trim();if(E!=null)switch(T){case"name":case"clientname":N.name=E;break;case"company":N.company=E;break;case"phone":case"phonenumber":N.phone=E;break;case"email":case"emailaddress":N.email=E;break;case"address":N.address=E;break;case"salesprocesslength":N.salesProcessLength=E;break;case"monthlycontractvalue":case"mcv":N.monthlyContractValue=parseFloat(E.replace(/[^0-9.-]+/g,""))||0;break;case"initialamountcollected":case"amount":case"amountcollected":N.initialAmountCollected=parseFloat(E.replace(/[^0-9.-]+/g,""))||0;break;case"closedate":case"date":N.closeDate=E;break;case"stage":N.stage=E;break}}),N}).filter(k=>k.name);v.length>0?t(v):alert("Could not find any valid client data in the file. Make sure your CSV has a 'name' column and that headers match expected values (e.g., name, company, phone, email, amount, date).")}catch(m){console.error("Error parsing CSV:",m),alert("There was an error parsing the CSV file. Please check the file format and try again.")}},l.readAsText(i),e.current&&(e.current.value="")},r=()=>{var a;(a=e.current)==null||a.click()};return o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"file",ref:e,onChange:n,accept:".csv",className:"hidden"}),o.jsxs("button",{type:"button",onClick:r,className:"bg-brand-blue text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition text-sm flex items-center gap-2 whitespace-nowrap",title:"Import clients from a CSV file",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),"Import CSV"]})]})},iz=({client:t,onClick:e,userColor:n="#6b7280"})=>o.jsxs("div",{onClick:e,className:"bg-brand-light-bg dark:bg-brand-gray/50 p-3 rounded-md border border-brand-light-border dark:border-brand-gray shadow-sm cursor-pointer hover:border-brand-blue flex items-center space-x-3 transition-all",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:n,children:o.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"flex-grow overflow-hidden",children:[o.jsx("p",{className:"font-bold text-sm text-brand-light-text dark:text-white truncate",title:t.name,children:t.name}),o.jsx("p",{className:"text-xs text-brand-lime font-semibold",children:ft(t.initialAmountCollected)}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Closed: ",t.closeDate]})]})]}),sz=({newClients:t,onSaveClient:e,onSaveTransaction:n,selectedDate:r,onDateChange:a,loggedInUser:i,users:l,transactions:u=[],companyId:d})=>{const[h,m]=_.useState(!1),[g,b]=_.useState(null),[v,k]=_.useState(""),[C,N]=_.useState("all"),[T,R]=_.useState(!1),[E,P]=_.useState(""),[j,I]=_.useState(null),[D,$]=_.useState(null),[H,z]=_.useState(!1),[F,V]=_.useState(!1),K=["#2F81F7","#34D399","#FBBF24","#A855F7","#E53E3E","#EC4899","#06B6D4"],pe=_.useMemo(()=>l.filter(U=>U.role==="Sales Rep"&&U.status==="Active"),[l]),Y=_.useMemo(()=>{const U={};return pe.forEach((J,oe)=>{U[J.id]=K[oe%K.length]}),U},[pe]),q=_.useMemo(()=>{const U=[...t].sort((xe,Q)=>new Date(Q.closeDate).getTime()-new Date(xe.closeDate).getTime()),J=C==="all"?U:U.filter(xe=>xe.userId===C);if(!v.trim())return J;const oe=v.toLowerCase(),me=v.replace(/[^\d]/g,"");return J.filter(xe=>{var Le,ce,Se,je;const Q=((Le=xe.name)==null?void 0:Le.toLowerCase())||"",we=((ce=xe.company)==null?void 0:ce.toLowerCase())||"",_e=((Se=xe.email)==null?void 0:Se.toLowerCase())||"",ie=((je=xe.phone)==null?void 0:je.replace(/[^\d]/g,""))||"";return Q.includes(oe)||we.includes(oe)||_e.includes(oe)||me&&ie.includes(me)})},[t,v,C]),B=()=>{b(null),m(!0)},ae=U=>{b(U),m(!0)},X=async U=>{console.log(" NewClientsPage handleSaveClient called with:",U);const J=String(U.id).startsWith("manual-")?{...U,userId:i.id,assignedTo:i.id}:U;console.log(" Calling onSaveClient with payload:",J),await e(J),console.log(" About to sync to GHL...");try{setTimeout(async()=>{const oe=document.querySelectorAll('[class*="ClientCard"]');console.log(" Found clients:",oe.length),console.log(" Sync trigger point reached!")},1e3)}catch(oe){console.error(" GHL sync error:",oe)}m(!1),b(null)},ve=U=>{U.forEach((J,oe)=>{const me={id:`manual-${Date.now()}-${oe}`,name:J.name||"Unnamed Client",company:J.company||"",phone:J.phone||"",email:J.email||"",address:J.address||"",salesProcessLength:J.salesProcessLength||"",monthlyContractValue:Number(J.monthlyContractValue)||0,initialAmountCollected:Number(J.initialAmountCollected)||0,closeDate:J.closeDate&&!isNaN(new Date(J.closeDate).getTime())?J.closeDate:new Date().toISOString().split("T")[0],userId:i.id,companyId:i.companyId};e(me)})},L=async()=>{var U,J;R(!0),P("Connecting to GoHighLevel..."),I(null),$(null);try{const{data:oe,error:me}=await Ee.from("ghl_integrations").select("*").eq("company_id",d).eq("is_active",!0).single();if(me||!oe)throw new Error("GHL integration not found. Please configure in Settings  GHL Integration.");P("Fetching contacts from GoHighLevel...");const xe=Cb(oe.ghl_api_key,oe.ghl_location_id),Q=await xe.importAllContacts();if(console.log(` Found ${Q.length} contacts in GHL`),Q.length===0)throw new Error("No contacts found in GoHighLevel.");P(`Found ${Q.length} contacts. Fetching transaction data...`);let we=[],_e=0;const ie=100;let Le=!0;for(;Le;)try{const Je=(await xe.getTransactions(ie,_e,{paymentMode:"live"})).data||[];_e===0&&Je.length>0&&console.log(" Sample transaction structure:",JSON.stringify(Je[0],null,2));const fe=Je.filter(Ne=>{const ye=(Ne.status||"").toLowerCase();return ye==="succeeded"||ye==="success"});we.push(...fe),console.log(` Fetched ${Je.length} total transactions, ${fe.length} successful (offset ${_e})`),Je.length<ie?Le=!1:_e+=ie}catch(Fe){console.error(" Error fetching transactions:",Fe),Le=!1}console.log(` Found ${we.length} successful transactions`);const ce=new Map;for(const Fe of we)Fe.contactId&&(ce.has(Fe.contactId)||ce.set(Fe.contactId,[]),ce.get(Fe.contactId).push(Fe));P(`Processing ${Q.length} contacts...`);let Se=0,je=0;for(const Fe of Q)try{if(!Fe.id){je++;continue}const{data:Je}=await Ee.from("clients").select("id").eq("ghl_contact_id",Fe.id).eq("company_id",d).single();if(Je){je++;continue}const fe=ce.get(Fe.id)||[];let Ne=0,ye=0,Re=0,Ce=null;for(const Ut of fe){const ln=Ut.amount_received?Ut.amount_received/100:Ut.amount||0;Ne+=ln,((U=Ut.entitySourceName)==null?void 0:U.toLowerCase().includes("recurring"))||((J=Ut.entitySourceName)==null?void 0:J.toLowerCase().includes("subscription"))?ye+=ln:Re+=ln;const Qt=new Date(Ut.createdAt);(!Ce||Qt<Ce)&&(Ce=Qt)}const He=ye,nt=He*12,We=Fe.name||`${Fe.firstName||""} ${Fe.lastName||""}`.trim()||"Unknown Contact",Dt=Ce?Ce.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],{error:Yt}=await Ee.from("clients").insert({name:We,company:Fe.companyName||"",phone:Fe.phone||"",email:Fe.email||"",address:Fe.address1||"",city:Fe.city||"",state:Fe.state||"",zip:Fe.postalCode||"",sales_process_length:"0",monthly_contract_value:He,initial_amount_collected:Re,close_date:Dt,stage:fe.length>0?"Closed":"New",user_id:i.id,company_id:d,ghl_contact_id:Fe.id,assigned_to:i.id});Yt?console.error(` Failed to insert client ${We}:`,Yt):(Se++,console.log(` Imported client: ${We} (MCV: $${He}, ACV: $${nt}, Total: $${Ne})`)),Se%10===0&&P(`Imported ${Se} of ${Q.length} clients...`)}catch(Je){console.error(`Error processing contact ${Fe.id}:`,Je),je++}await Ee.from("ghl_integrations").update({last_sync_at:new Date().toISOString()}).eq("company_id",d);const Ye=je>0?` Imported ${Se} new clients! (Skipped ${je} duplicates/invalid)`:` Successfully imported ${Se} clients!`;$(Ye),console.log(` Import Summary: ${Se} new clients, ${je} skipped`),setTimeout(()=>{window.location.reload()},2e3)}catch(oe){console.error("GHL Client Import Error:",oe),I(oe.message||"Failed to import clients from GoHighLevel")}finally{R(!1),P("")}},O=async()=>{var U,J,oe;if(!u||u.length===0){I("No transactions found to generate clients from.");return}V(!0),P("Analyzing transactions..."),I(null),$(null);try{const me=new Map;for(const ie of u){const Le=(U=ie.clientName)==null?void 0:U.trim();Le&&(me.has(Le)||me.set(Le,[]),me.get(Le).push(ie))}P(`Found ${me.size} unique clients. Creating client cards...`);const xe=new Set(t.map(ie=>{var Le;return(Le=ie.name)==null?void 0:Le.toLowerCase()}).filter(Boolean)),Q=new Set(t.map(ie=>{var Le;return(Le=ie.company)==null?void 0:Le.toLowerCase()}).filter(Boolean));let we=0,_e=0;for(const[ie,Le]of me.entries()){const ce=ie.toLowerCase();if(xe.has(ce)||Q.has(ce)){_e++;continue}const Se=Le.reduce((nt,We)=>nt+We.amount,0),je=[...Le].sort((nt,We)=>new Date(nt.date).getTime()-new Date(We.date).getTime()),Ye=((J=je[0])==null?void 0:J.date)||new Date().toISOString().split("T")[0],Fe=((oe=je[0])==null?void 0:oe.amount)||0,Je=Le.filter(nt=>nt.isRecurring),fe=new Set(Je.map(nt=>nt.amount));let Ne=0;if(fe.size===1)Ne=Array.from(fe)[0];else if(fe.size>1){const nt=new Map;Je.forEach(Dt=>{nt.set(Dt.amount,(nt.get(Dt.amount)||0)+1)});const We=Array.from(nt.entries()).sort((Dt,Yt)=>Yt[1]-Dt[1])[0];Ne=We?We[0]:0}const ye=["llc","inc","corp","company","co.","ltd","limited","construction","painting","services","consulting","group","enterprises","solutions","partners","associates","industries","contractors","builders","roofing","plumbing","electrical","landscaping","design","remodeling","restoration","cleaning","maintenance","repair","hvac","flooring"],Re=ie.toLowerCase(),Ce=ye.some(nt=>Re.includes(nt)),He={id:void 0,name:ie,company:Ce?ie:"",phone:"",email:"",address:"",city:"",state:"",zip:"",salesProcessLength:"",monthlyContractValue:Ne,initialAmountCollected:Fe,closeDate:Ye,stage:"Closed",userId:i.id,companyId:d,assigned_to:i.id};await e(He),we++,P(`Created ${we} of ${me.size-_e} clients...`)}$(` Successfully created ${we} client cards! ${_e>0?`(${_e} already existed)`:""}`),setTimeout(()=>{window.location.reload()},2e3)}catch(me){console.error("Auto-generate Error:",me),I(me.message||"Failed to generate clients")}finally{V(!1),P("")}},Z=async()=>{if(window.confirm(" Are you sure you want to DELETE ALL CLIENTS? This cannot be undone!")){z(!0),I(null);try{const{error:U}=await Ee.from("clients").delete().eq("company_id",d);if(U)throw U;$(" All clients deleted successfully!"),setTimeout(()=>$(null),5e3),window.location.reload()}catch(U){console.error("Delete All Error:",U),I(U.message||"Failed to delete clients")}finally{z(!1)}}};return o.jsxs(o.Fragment,{children:[o.jsx(rz,{isOpen:h,onClose:()=>m(!1),onSave:X,client:g,transactions:u}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[o.jsx(Wi,{selectedDate:r,onDateChange:a}),o.jsx(nz,{newClients:t})]}),o.jsx("div",{className:"lg:col-span-9",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[o.jsx("h1",{className:"text-3xl font-bold text-brand-light-text dark:text-white",children:"New Clients"}),o.jsxs("div",{className:"flex items-center gap-2",children:[t.length>0&&o.jsx("button",{onClick:Z,disabled:H,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition text-sm whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:H?" Deleting...":" Delete All"}),(i.role==="Admin"||i.role==="admin")&&o.jsx("button",{onClick:L,disabled:T,className:"bg-brand-blue text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition text-sm whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:T?" Importing...":" Import from GHL"}),o.jsx("button",{onClick:O,disabled:F||!u||u.length===0,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition text-sm whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",title:"Automatically create client cards from existing transactions",children:F?" Generating...":" Auto-Generate from Transactions"}),o.jsx(az,{onImport:ve}),o.jsx("button",{onClick:B,className:"bg-brand-lime text-brand-ink font-bold py-2 px-4 rounded-lg hover:bg-green-400 transition text-sm whitespace-nowrap",children:"+ Add Client"})]})]}),E&&o.jsxs("div",{className:"mb-4 p-3 bg-blue-100 dark:bg-blue-900/30 border border-blue-500 rounded-lg text-blue-700 dark:text-blue-300 text-sm",children:[" ",E]}),D&&o.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-500 rounded-lg text-green-700 dark:text-green-300 text-sm",children:D}),j&&o.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-500 rounded-lg text-red-700 dark:text-red-300 text-sm",children:[" ",j]}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),o.jsx("input",{type:"text",placeholder:"Search clients by name, company, email...",value:v,onChange:U=>k(U.target.value),className:"w-full pl-10 pr-4 py-2 bg-brand-light-bg dark:bg-brand-ink border border-brand-light-border dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue"})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:q.map(U=>o.jsx(iz,{client:U,onClick:()=>ae(U),userColor:U.userId?Y[U.userId]:void 0},U.id))}),t.length>0&&q.length===0&&o.jsx("div",{className:"text-center py-10",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No clients match your search."})}),t.length===0&&o.jsxs("div",{className:"text-center py-10",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No new clients yet."}),o.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Convert a hot lead or add one manually!"})]})]})})]})]})},oz=[{category:"Business Coaching",keywords:["coaching","coach","consulting","consultant","mentoring","mentor","training","trainer","advisory","advisor","strategy session","business development","leadership","accountability","mastermind"]},{category:"Website Design",keywords:["website","web design","web development","web dev","site","landing page","hosting","domain","wordpress","shopify","ecommerce","e-commerce","web app","webapp","portal","online store","web build","redesign"]},{category:"Graphic Design",keywords:["logo","branding","brand","graphic","graphics","design project","flyer","poster","banner","business card","print design","illustration","visual identity","brand guide","style guide","mockup","layout"]},{category:"CRM Services",keywords:["crm","gohighlevel","go high level","highlevel","automation","workflow","workflows","funnel","funnels","pipeline","sales automation","lead management","contact management","email automation","sms automation"]},{category:"Marketing Services",keywords:["seo","search engine","ads","advertising","ppc","google ads","facebook ads","social media","content marketing","content creation","email marketing","digital marketing","marketing campaign","lead generation","social","instagram","facebook","linkedin","twitter","tiktok","youtube"]}];function lz(t){if(t.trim()==="")return"Other";const e=t.toLowerCase();for(const n of oz)for(const r of n.keywords)if(e.includes(r))return n.category;return"Other"}const cz=["Business Coach","Landscaper","Hardscaper","Painter","Plumber","Electrician","HVAC","Roofer","General Contractor","Financial Services","Insurance Agent","Real Estate Agent","Marketing Agency","Software/SaaS","Personal Trainer","Photographer","Web Developer","IT Services","Lawyer","Accountant"],uz=({onProductSelect:t})=>{const[e,n]=_.useState(""),[r,a]=_.useState([]),[i,l]=_.useState(!1),[u,d]=_.useState(null),[h,m]=_.useState("");_.useEffect(()=>{(async()=>{if(!e){a([]);return}l(!0),a([]),d(null);try{const k=await j8(e);a(k)}catch(k){console.error("Error fetching products:",k),d("Could not fetch suggestions due to an API error. This can happen if the API key is invalid or quota has been exceeded.")}finally{l(!1)}})()},[e]);const g=()=>{h.trim()&&(t(h.trim()),m(""))},b=v=>{v.key==="Enter"&&(v.preventDefault(),g())};return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold mb-2 text-brand-light-text dark:text-white",children:"Industry & Products"}),o.jsxs("select",{value:e,onChange:v=>n(v.target.value),className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",children:[o.jsx("option",{value:"",children:"-- Select an Industry --"}),cz.sort().map(v=>o.jsx("option",{value:v,children:v},v))]})]}),i&&o.jsx("div",{className:"flex justify-center items-center h-24",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-red"})}),u&&!i&&o.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-md text-center",children:o.jsx("p",{className:"text-xs text-red-500",children:u})}),r.length>0&&!i&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 mb-2",children:"Suggested Products"}),o.jsx("ul",{className:"space-y-2",children:r.map(v=>o.jsxs("li",{className:"flex items-center justify-between p-2 bg-brand-light-bg dark:bg-brand-gray/20 rounded-md",children:[o.jsx("span",{className:"text-sm text-brand-light-text dark:text-gray-300",children:v}),o.jsx("button",{onClick:()=>t(v),className:"bg-brand-blue text-white text-xs font-semibold px-3 py-1 rounded-full hover:bg-blue-600 transition-colors",children:"Select"})]},v))})]}),o.jsxs("div",{className:"border-t border-brand-light-border dark:border-brand-gray pt-4",children:[o.jsx("h4",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 mb-2",children:"Add Custom Product"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Custom Product Name",value:h,onChange:v=>m(v.target.value),onKeyPress:b,className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid"}),o.jsx("button",{onClick:g,className:"bg-brand-lime text-brand-ink font-bold py-1 px-3 rounded-lg hover:bg-green-400 transition text-xs",children:"Add"})]})]})]})},dz=({productData:t,timeframeText:e})=>{const[n,r]=_.useState(null),[a,i]=_.useState(!1),[l,u]=_.useState(null),d=async()=>{if(t.length===0){u("No sales data available to analyze for this period.");return}i(!0),u(null);try{const h=await O8(t,e);r(h)}catch(h){u("Failed to generate AI analysis. Please try again."),console.error(h)}finally{i(!1)}};return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:"AI REVENUE ANALYSIS"}),!n&&!a&&o.jsxs("div",{className:"text-center p-4",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Get AI-powered insights on your product sales, marketing strategies, and more."}),o.jsx("button",{onClick:d,className:"bg-brand-red text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 transition",children:"Analyze My Revenue"}),l&&o.jsx("p",{className:"text-red-500 text-xs mt-2",children:l})]}),a&&o.jsx("div",{className:"flex justify-center items-center h-48",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-red"})}),n&&!a&&o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-brand-red mb-2",children:"Key Questions"}),o.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700 dark:text-gray-300",children:n.questions.map((h,m)=>o.jsx("li",{children:h},m))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-brand-lime mb-2",children:"Marketing Strategies"}),o.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700 dark:text-gray-300",children:n.strategies.map((h,m)=>o.jsx("li",{children:h},m))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-brand-blue mb-2",children:"Recommended Reading"}),o.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-semibold",children:n.reading.title})," by ",n.reading.author]}),o.jsx("p",{className:"text-xs italic text-gray-500",children:n.reading.description})]})]}),n.quote&&o.jsxs("div",{className:"border-t border-dashed border-brand-light-border dark:border-brand-gray pt-4 text-center",children:[o.jsxs("blockquote",{className:"italic text-gray-700 dark:text-gray-300",children:['"',n.quote.text,'"']}),o.jsxs("cite",{className:"not-italic font-semibold text-sm text-gray-500 dark:text-gray-400",children:["- ",n.quote.author]})]})]})]})},bC=["#2F81F7","#34D399","#FBBF24","#A855F7","#E53E3E","#EC4899","#06B6D4","#F97316","#6366F1","#10B981"],fz=(t,e)=>t?bC[e%bC.length]:"#cbd5e1",hz=({data:t,onBarClick:e})=>{const n=t.slice(0,5);if(n.length===0)return o.jsx("p",{className:"text-center text-sm text-gray-500 py-8",children:"No revenue data for this period."});const r=Math.max(...n.map(a=>a.revenue),1);return o.jsx("div",{className:"space-y-4 animate-fade-in",children:n.map((a,i)=>o.jsxs("div",{className:`flex items-center gap-2 ${e?"cursor-pointer hover:opacity-80 transition-opacity":""}`,onClick:()=>e==null?void 0:e(a.name),title:e?`Click to view ${a.name} transactions`:a.name,children:[o.jsx("div",{className:"w-28 text-right text-xs font-semibold text-gray-600 dark:text-gray-400 truncate",children:a.name}),o.jsx("div",{className:"flex-grow bg-gray-200 dark:bg-brand-gray rounded-full h-6",children:o.jsx("div",{className:"h-6 rounded-full text-white text-xs flex items-center px-2",style:{width:`${a.revenue/r*100}%`,backgroundColor:fz(a.name,i)},children:ft(a.revenue)})})]},a.name))})},mz=({transactions:t,onSaveTransaction:e,onDeleteTransaction:n,selectedDate:r,onDateChange:a,initialState:i,onInitialStateConsumed:l,loggedInUser:u,users:d,companyId:h})=>{const[m,g]=_.useState("daily"),[b,v]=_.useState(""),[k,C]=_.useState(""),[N,T]=_.useState(""),[R,E]=_.useState(!1),[P,j]=_.useState(null),[I,D]=_.useState(u.id),[$,H]=_.useState(()=>Array.from(new Set(t.map(te=>te.product)))),[z,F]=_.useState(null),[V,K]=_.useState(!1),[pe,Y]=_.useState(!1),[q,B]=_.useState(""),[ae,X]=_.useState(null),[ve,L]=_.useState(null),[O,Z]=_.useState(null),[U,J]=_.useState(!1),[oe,me]=_.useState(null),[xe,Q]=_.useState(!1),[we,_e]=_.useState(""),[ie,Le]=_.useState(""),ce=new Date().toISOString().split("T")[0],Se=new Date;Se.setDate(Se.getDate()-29);const[je,Ye]=_.useState({start:Se.toISOString().split("T")[0],end:ce}),Fe=te=>te.toISOString().split("T")[0];_.useEffect(()=>{i&&(g(i.viewMode),i.dateRange&&Ye(i.dateRange),l())},[i,l]),_.useEffect(()=>{Re(),F(null)},[r]);const Je=_.useMemo(()=>{const te=Fe(r);return(t||[]).filter(de=>de.date===te).sort((de,ke)=>de.clientName.localeCompare(ke.clientName))},[t,r]),fe=_.useMemo(()=>Array.from(new Set(Je.map(te=>te.product))),[Je]),Ne=_.useMemo(()=>{if(!z)return null;const te=r,de=te.toISOString().split("T")[0],ke=new Date(te);ke.setDate(ke.getDate()-te.getDay());const Be=new Date(ke);Be.setDate(Be.getDate()+6);const ct=ke.toISOString().split("T")[0],vt=Be.toISOString().split("T")[0],it=te.getMonth(),Bt=te.getFullYear();let Ve={day:0,week:0,month:0,year:0},Ae={day:0,week:0,month:0,year:0};(t||[]).forEach(dt=>{const ht=new Date(dt.date+"T00:00:00");dt.date===de&&(Ve.day+=dt.amount),dt.date>=ct&&dt.date<=vt&&(Ve.week+=dt.amount),ht.getMonth()===it&&ht.getFullYear()===Bt&&(Ve.month+=dt.amount),ht.getFullYear()===Bt&&(Ve.year+=dt.amount),dt.product===z&&(dt.date===de&&(Ae.day+=dt.amount),dt.date>=ct&&dt.date<=vt&&(Ae.week+=dt.amount),ht.getMonth()===it&&ht.getFullYear()===Bt&&(Ae.month+=dt.amount),ht.getFullYear()===Bt&&(Ae.year+=dt.amount))});const Et=(dt,ht)=>ht>0?(dt/ht*100).toFixed(1)+"%":"0.0%";return{day:Et(Ae.day,Ve.day),week:Et(Ae.week,Ve.week),month:Et(Ae.month,Ve.month),year:Et(Ae.year,Ve.year)}},[z,t,r]),ye=_.useMemo(()=>{const{start:te,end:de}=je,ke=(t||[]).filter(Ve=>Ve.date>=te&&Ve.date<=de),Be={};let ct=0;ke.forEach(Ve=>{Be[Ve.product]||(Be[Ve.product]={revenue:0,count:0}),Be[Ve.product].revenue+=Ve.amount,Be[Ve.product].count+=1,ct+=Ve.amount});const vt=Object.entries(Be).map(([Ve,Ae])=>({product:Ve,...Ae})).sort((Ve,Ae)=>Ae.revenue-Ve.revenue),it={};ke.forEach(Ve=>{it[Ve.date]=(it[Ve.date]||0)+Ve.amount});const Bt=Object.entries(it).map(([Ve,Ae])=>({date:Ve,revenue:Ae})).sort((Ve,Ae)=>Ve.date.localeCompare(Ae.date));return{totalRevenue:ct,totalTransactions:ke.length,avgDealSize:ke.length>0?ct/ke.length:0,productChartData:vt,timeChartData:Bt}},[t,je]),Re=()=>{v(""),C(""),T(""),E(!1),j(null)},Ce=te=>{Z(te),J(!0)},He=_.useMemo(()=>{if(!O)return[];const{start:te,end:de}=je;return(t||[]).filter(ke=>ke.product===O&&ke.date>=te&&ke.date<=de).sort((ke,Be)=>Be.date.localeCompare(ke.date))},[O,t,je]),nt=(te,de,ke)=>{me(JSON.stringify({startDate:te,endDate:de,label:ke})),Q(!0)},We=_.useMemo(()=>{if(!oe)return[];try{const{startDate:te,endDate:de}=JSON.parse(oe);let ke=(t||[]).filter(Be=>Be.date>=te&&Be.date<=de);if(we&&(ke=ke.filter(Be=>Be.product.toLowerCase().includes(we.toLowerCase()))),ie){const Be=parseFloat(ie);isNaN(Be)||(ke=ke.filter(ct=>ct.amount>=Be))}return ke.sort((Be,ct)=>Be.date.localeCompare(ct.date)||Be.clientName.localeCompare(ct.clientName))}catch{return[]}},[oe,t,we,ie]),Dt=async te=>{te.preventDefault(),K(!0);const de=parseFloat(N);if(!b||!k||isNaN(de)||de<0){alert("Please fill out all fields with valid data."),K(!1);return}console.log("[REVENUE DEBUG] Creating transaction with:"),console.log("[REVENUE DEBUG] loggedInUser:",{id:u.id,name:u.name,email:u.email,role:u.role}),console.log("[REVENUE DEBUG] selectedUserId:",I);const ke={id:P||`new-${Date.now()}`,date:Fe(r),clientName:b,product:k,amount:de,isRecurring:R,userId:I};console.log("[REVENUE DEBUG] transactionData.userId:",ke.userId);try{await e(ke),$.includes(k)||H(Be=>[...Be,k].sort()),Re()}catch(Be){console.error("Failed to save transaction:",Be),alert("Could not save the transaction. Please try again.")}finally{K(!1)}},Yt=te=>{j(te.id),v(te.clientName),C(te.product),T(te.amount.toString()),E(te.isRecurring)},Ut=te=>{window.confirm("Are you sure you want to delete this transaction?")&&n(te)},ln=async()=>{var te,de;Y(!0),B("Connecting to GoHighLevel..."),X(null),L(null);try{const{data:ke,error:Be}=await Ee.from("ghl_integrations").select("*").eq("company_id",h).eq("is_active",!0).single();if(Be||!ke)throw new Error("GHL integration not found. Please configure in Settings  GHL Integration.");B("Fetching transactions from GoHighLevel...");const ct=Cb(ke.ghl_api_key,ke.ghl_location_id);let vt=[],it=0;const Bt=100;let Ve=!0;for(;Ve;)try{const Ht=(await ct.getTransactions(Bt,it,{paymentMode:"live"})).data||[],bt=Ht.filter(Sn=>{const Zt=(Sn.status||"").toLowerCase();return Zt==="succeeded"||Zt==="success"});vt.push(...bt),Ht.length<Bt?Ve=!1:it+=Bt}catch(Xe){console.error(" Error fetching transactions:",Xe),Ve=!1}if(vt.length===0)throw new Error("No successful transactions found in GoHighLevel.");B(`Found ${vt.length} transactions. Analyzing product names...`);const Ae=new Map;for(const Xe of vt)Xe.contactId&&(Ae.has(Xe.contactId)||Ae.set(Xe.contactId,[]),Ae.get(Xe.contactId).push(Xe));console.log(` Grouped transactions by ${Ae.size} unique contacts`);const Et=new Map;let dt=0;for(const[Xe,Ht]of Ae){dt++,B(`Analyzing products for contact ${dt} of ${Ae.size}...`);const bt=Ht.sort((Zt,Kn)=>{const St=new Date(Zt.createdAt||0).getTime(),un=new Date(Kn.createdAt||0).getTime();return St-un});let Sn="Payment";for(const Zt of bt)if(Zt.entityType==="invoice"&&Zt.entityId)try{console.log(` Fetching invoice ${Zt.entityId} for contact ${Xe}...`);const St=(await ct.getInvoice(Zt.entityId)).invoice;if(St.items&&St.items.length>0&&St.items[0].name){Sn=St.items[0].name,console.log(` Found product for contact ${Xe}: "${Sn}"`);break}}catch{console.warn(` Could not fetch invoice ${Zt.entityId}`)}Sn==="Payment"&&bt.length>0&&(Sn=bt[0].entitySourceName||bt[0].name||bt[0].description||"Payment"),Et.set(Xe,Sn)}console.log(` Mapped product names for ${Et.size} contacts`),B("Loading existing clients for assignment...");const{data:ht,error:Ln}=await Ee.from("new_clients").select("name, assigned_to").eq("company_id",h);Ln&&console.error("Error loading clients:",Ln);const Ke=new Map;ht&&ht.forEach(Xe=>{Xe.name&&Xe.assigned_to&&Ke.set(Xe.name.toLowerCase().trim(),Xe.assigned_to)}),console.log(` Loaded ${Ke.size} clients for auto-assignment`),B(`Importing ${vt.length} transactions...`);let Ze=0,rn=0,wt=0;for(const Xe of vt){const Ht=Xe.contactName||Xe.name||"Unknown Customer",bt=Et.get(Xe.contactId)||"Payment",Sn=Xe.amount_received?Xe.amount_received/100:Xe.amount||0,Zt=lz(bt),Kn=Xe.createdAt?new Date(Xe.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],St=((te=Xe.entitySourceName)==null?void 0:te.toLowerCase().includes("recurring"))||((de=Xe.entitySourceName)==null?void 0:de.toLowerCase().includes("subscription"))||(bt==null?void 0:bt.toLowerCase().includes("recurring"))||(bt==null?void 0:bt.toLowerCase().includes("monthly"))||(bt==null?void 0:bt.toLowerCase().includes("weekly")),{data:un}=await Ee.from("transactions").select("id").eq("ghl_transaction_id",Xe.id).single();if(un){rn++;continue}const pa=Ke.get(Ht.toLowerCase().trim())||u.id,Hs=Ke.has(Ht.toLowerCase().trim());Hs&&wt++,console.log(` ${Ht}: "${bt}"  ${Zt} ($${Sn}) ${St?"(RECURRING)":"(ONE-TIME)"} ${Hs?" Auto-assigned":""}`);const{error:kl}=await Ee.from("transactions").insert({date:Kn,client_name:Ht,product:Zt,amount:Sn,is_recurring:St,user_id:u.id,company_id:h,assigned_to:pa,ghl_transaction_id:Xe.id});if(kl)throw console.error(` Failed to insert transaction for ${Ht}:`,kl),new Error(`Database insert failed: ${kl.message}`);Ze++,Ze%20===0&&B(`Imported ${Ze} of ${vt.length} transactions...`)}await Ee.from("ghl_integrations").update({last_sync_at:new Date().toISOString()}).eq("company_id",h);const $t=rn>0?` Imported ${Ze} new transactions! (${wt} auto-assigned, ${rn} duplicates skipped)`:` Successfully imported ${Ze} transactions! (${wt} auto-assigned to sales reps)`;L($t),setTimeout(()=>L(null),1e4),window.location.reload()}catch(ke){console.error("GHL Import Error:",ke),X(ke.message||"Failed to import from GoHighLevel")}finally{Y(!1),B("")}},cn=te=>{var de;C(te),(de=document.getElementById("clientNameInput"))==null||de.focus()},Qt=({data:te,onBarClick:de})=>{if(te.length===0)return o.jsx("p",{className:"text-center text-sm text-gray-500 py-8",children:"No data for this period."});const Be=(()=>{const ht=te.length;if(te.length>0){const Ke=new Date(te[0].date),Ze=new Date(te[te.length-1].date),rn=Ke.getDate(),wt=Ze.getDate();if(Ke.getMonth()===Ze.getMonth()&&Ke.getFullYear()===Ze.getFullYear()&&rn===1){const Xe=new Date(Ke.getFullYear(),Ke.getMonth()+1,0).getDate();if(wt===Xe){const Ht=te.reduce((Sn,Zt)=>Sn+Zt.revenue,0);return[{label:Ke.toLocaleDateString("en-US",{month:"short"}),revenue:Ht,startDate:te[0].date,endDate:te[te.length-1].date}]}}}if(ht<=7)return te.map(Ke=>({label:new Date(Ke.date).toLocaleDateString("en-US",{weekday:"short"}),revenue:Ke.revenue,startDate:Ke.date,endDate:Ke.date}));if(ht<=30){const Ke=[];let Ze=1,rn=0,wt=0,$t="",Xe="";return te.forEach((Ht,bt)=>{wt===0&&($t=Ht.date),Xe=Ht.date,rn+=Ht.revenue,wt++,(wt===7||bt===te.length-1)&&(Ke.push({label:`Week ${Ze}`,revenue:rn,startDate:$t,endDate:Xe}),Ze++,rn=0,wt=0)}),Ke}if(ht<=90){const Ke=[];let Ze=0,rn=0,wt="",$t="";return te.forEach((Xe,Ht)=>{if(rn===0&&(wt=Xe.date),$t=Xe.date,Ze+=Xe.revenue,rn++,rn===7||Ht===te.length-1){const bt=new Date(wt).toLocaleDateString("en-US",{month:"short",day:"numeric"});Ke.push({label:bt,revenue:Ze,startDate:wt,endDate:$t}),Ze=0,rn=0}}),Ke}if(ht<=365){const Ke={};new Date(te[0].date),new Date(te[te.length-1].date),te.forEach(wt=>{if(wt.revenue===0)return;const[$t,Xe,Ht]=wt.date.split("-").map(Number),bt=new Date($t,Xe-1,Ht),Sn=bt.getMonth(),Zt=`${bt.toLocaleDateString("en-US",{month:"short"})} ${$t}`,Kn=new Date($t,Sn,1),St=new Date($t,Sn+1,0),un=Kn.toISOString().split("T")[0],pa=St.toISOString().split("T")[0];Ke[Zt]||(Ke[Zt]={revenue:0,monthNum:Sn,year:$t,startDate:un,endDate:pa}),Ke[Zt].revenue+=wt.revenue});const Ze=Object.entries(Ke).sort(([,wt],[,$t])=>wt.year!==$t.year?wt.year-$t.year:wt.monthNum-$t.monthNum);return new Set(Ze.map(([,wt])=>wt.year)).size>1,Ze.map(([wt,$t])=>({label:wt.split(" ")[0],revenue:$t.revenue,startDate:$t.startDate,endDate:$t.endDate}))}const Ln={};return te.forEach(Ke=>{const Ze=new Date(Ke.date).getFullYear().toString();Ln[Ze]||(Ln[Ze]={revenue:0,startDate:Ke.date,endDate:Ke.date}),Ln[Ze].revenue+=Ke.revenue,Ke.date>Ln[Ze].endDate&&(Ln[Ze].endDate=Ke.date),Ke.date<Ln[Ze].startDate&&(Ln[Ze].startDate=Ke.date)}),Object.entries(Ln).map(([Ke,Ze])=>({label:Ke,revenue:Ze.revenue,startDate:Ze.startDate,endDate:Ze.endDate}))})(),ct=500,vt=220,it=40,Bt=Math.max(...Be.map(ht=>ht.revenue),0),Ve=Bt===0?1e3:Math.ceil(Bt*1.1),Et=(ct-it*2)/Be.length,dt=Et*.75;return o.jsxs("svg",{viewBox:`0 0 ${ct} ${vt}`,className:"w-full h-auto",children:[o.jsx("line",{x1:it,y1:vt-it,x2:ct-it,y2:vt-it,stroke:"#4b5563",strokeWidth:"1"}),o.jsx("line",{x1:it,y1:it,x2:it,y2:vt-it,stroke:"#4b5563",strokeWidth:"1"}),o.jsx("text",{x:"5",y:"15",className:"text-[10px] fill-gray-400",children:ft(Ve)}),o.jsx("text",{x:"5",y:vt-it+3,className:"text-[10px] fill-gray-400",children:ft(0)}),Be.map((ht,Ln)=>{const Ke=ht.revenue/Ve*(vt-it*2),Ze=it+Ln*Et+(Et-dt)/2,rn=vt-it-Ke;return o.jsxs("g",{className:de?"cursor-pointer":"",onClick:()=>de==null?void 0:de(ht.startDate||ht.label,ht.endDate||ht.label,ht.label),children:[o.jsx("rect",{x:Ze,y:rn,width:dt,height:Ke,fill:"#34D399",className:"hover:opacity-80 transition-opacity"}),de&&o.jsxs("title",{children:["Click to view transactions for ",ht.label]}),ht.revenue>0&&o.jsx("text",{x:Ze+dt/2,y:rn-8,className:"text-[8px] fill-gray-600 dark:fill-gray-300 font-semibold",textAnchor:"start",transform:`rotate(-45 ${Ze+dt/2} ${rn-8})`,children:`$${Math.round(ht.revenue).toLocaleString()}`}),o.jsx("text",{x:Ze+dt/2,y:vt-it+15,className:"text-[10px] fill-gray-500 dark:fill-gray-400 font-medium",textAnchor:"middle",children:ht.label})]},Ln)})]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h1",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:"Revenue Center"}),o.jsxs("div",{className:"flex items-center gap-3",children:[(u.role==="Admin"||u.role==="admin")&&o.jsx("button",{onClick:ln,disabled:pe,className:"bg-brand-lime text-brand-ink font-bold py-2 px-4 rounded-lg hover:bg-green-400 transition text-sm whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:pe?" Importing...":" Import from GHL"}),o.jsxs("div",{className:"flex items-center bg-brand-light-bg dark:bg-brand-ink p-1 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("button",{onClick:()=>g("daily"),className:`px-4 py-2 text-sm font-bold rounded-md transition-colors ${m==="daily"?"bg-brand-blue text-white":"text-gray-500 dark:text-gray-400 hover:text-brand-light-text dark:hover:text-white"}`,children:"Daily Entry"}),o.jsx("button",{onClick:()=>g("analysis"),className:`px-4 py-2 text-sm font-bold rounded-md transition-colors ${m==="analysis"?"bg-brand-blue text-white":"text-gray-500 dark:text-gray-400 hover:text-brand-light-text dark:hover:text-white"}`,children:"Analysis"})]})]})]}),q&&o.jsxs("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 border border-blue-500 rounded-lg text-blue-700 dark:text-blue-300 text-sm",children:[" ",q]}),ve&&o.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 border border-green-500 rounded-lg text-green-700 dark:text-green-300 text-sm",children:ve}),ae&&o.jsxs("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 border border-red-500 rounded-lg text-red-700 dark:text-red-300 text-sm",children:[" ",ae]}),m==="daily"?o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-fade-in",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsx(Wi,{selectedDate:r,onDateChange:a}),o.jsx(uz,{onProductSelect:cn})]}),o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:[P?"EDIT":"ADD"," TRANSACTION"]}),o.jsxs("form",{onSubmit:Dt,className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx("input",{id:"clientNameInput",type:"text",placeholder:"Client / Company Name",value:b,onChange:te=>v(te.target.value),required:!0,className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid"}),o.jsxs("div",{children:[o.jsx("input",{list:"product-list",type:"text",placeholder:"Product / Service",value:k,onChange:te=>C(te.target.value),className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid"}),o.jsx("datalist",{id:"product-list",children:$.map(te=>o.jsx("option",{value:te},te))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-center",children:[o.jsx("input",{type:"number",placeholder:"Amount",value:N,onChange:te=>T(te.target.value),className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid"}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer text-sm text-gray-500 dark:text-gray-400",children:[o.jsx("input",{type:"checkbox",checked:R,onChange:te=>E(te.target.checked),className:"h-4 w-4 rounded bg-brand-light-border dark:bg-brand-gray border-gray-300 dark:border-gray-600 text-brand-lime focus:ring-brand-lime"}),o.jsx("span",{children:"Recurring (MCV)"})]})]}),(u.role==="Admin"||u.role==="Manager")&&o.jsx("div",{className:"grid grid-cols-1 gap-3",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Assign to Sales Rep"}),o.jsxs("select",{value:I,onChange:te=>D(te.target.value),className:"w-full bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid",children:[o.jsxs("option",{value:u.id,children:["Me (",u.name,")"]}),d.filter(te=>te.role==="Sales Rep"&&te.status==="Active").map(te=>o.jsx("option",{value:te.id,children:te.name},te.id))]})]})}),o.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[o.jsx("button",{type:"submit",disabled:V,className:"flex-grow bg-brand-blue text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition text-sm disabled:bg-brand-gray",children:V?"Saving...":P?"Update Transaction":"Add Transaction"}),P&&o.jsx("button",{type:"button",onClick:Re,className:"bg-brand-gray text-white font-bold py-2 px-4 rounded-lg hover:bg-brand-light-gray transition text-sm",children:"Cancel"})]})]})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("h3",{className:"text-lg font-bold mb-3 text-brand-light-text dark:text-white",children:["Transactions for ",r.toLocaleDateString()]}),o.jsxs("button",{onClick:()=>{const te=r.getMonth(),de=r.getFullYear(),ke=r.toLocaleDateString("en-US",{month:"long"}),Be=new Date(de,te,1),ct=new Date(de,te+1,0),vt=Be.toISOString().split("T")[0],it=ct.toISOString().split("T")[0],Bt=`${ke} (${Be.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ct.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})`;me(JSON.stringify({startDate:vt,endDate:it,label:Bt})),Q(!0)},className:"w-full bg-brand-lime text-brand-navy font-bold py-2 px-4 rounded-lg hover:bg-green-400 transition text-sm mb-3 flex items-center justify-center gap-2",children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["View All ",r.toLocaleDateString("en-US",{month:"long"})," Transactions"]})]}),o.jsx("div",{className:"overflow-x-auto max-h-96",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-brand-light-bg dark:bg-brand-gray/50 text-xs uppercase text-gray-500 dark:text-gray-400 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2",children:"Client"}),o.jsx("th",{className:"p-2",children:"Product"}),o.jsx("th",{className:"p-2 text-right",children:"Amount"}),o.jsx("th",{className:"p-2 text-center",children:"MCV"}),o.jsx("th",{className:"p-2 text-right",children:"ACV"}),o.jsx("th",{className:"p-2 text-center",children:"Actions"})]})}),o.jsxs("tbody",{children:[Je.map(te=>o.jsxs("tr",{className:"border-b border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white",children:[o.jsx("td",{className:"p-2 font-medium",children:te.clientName}),o.jsx("td",{className:"p-2 text-gray-500 dark:text-gray-400",children:te.product}),o.jsx("td",{className:"p-2 text-right font-semibold text-brand-lime",children:ft(te.amount)}),o.jsx("td",{className:"p-2 text-center",children:te.isRecurring?"":"-"}),o.jsx("td",{className:"p-2 text-right text-gray-500 dark:text-gray-400",children:te.isRecurring?ft(te.amount*12):"-"}),o.jsxs("td",{className:"p-2 text-center space-x-2",children:[o.jsx("button",{onClick:()=>Yt(te),className:"text-xs text-blue-400 hover:underline",children:"Edit"}),o.jsx("button",{onClick:()=>Ut(te.id),className:"text-xs text-red-400 hover:underline",children:"Del"})]})]},te.id)),Je.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center p-4 text-gray-500 dark:text-gray-400",children:"No transactions for this day."})})]})]})}),fe.length>0&&o.jsxs("div",{className:"mt-6 pt-4 border-t border-dashed border-brand-light-border dark:border-brand-gray",children:[o.jsx("h4",{className:"text-md font-bold text-brand-light-text dark:text-white mb-3",children:"Product Contribution Analysis"}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:["Select a product from today's transactions to see its revenue contribution to the total sales for different periods (relative to ",r.toLocaleDateString(),")."]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:fe.map(te=>o.jsx("button",{onClick:()=>F(te),className:`text-xs font-bold py-1 px-3 rounded-full transition-colors ${z===te?"bg-brand-red text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:te},te))}),z&&Ne&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-brand-light-bg dark:bg-brand-ink rounded-lg animate-fade-in",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-black text-brand-blue",children:Ne.day}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"of Day's Revenue"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-black text-brand-blue",children:Ne.week}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"of Week's Revenue"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-black text-brand-blue",children:Ne.month}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"of Month's Revenue"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-black text-brand-blue",children:Ne.year}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"of Year's Revenue"})]})]})]})]})]})]}):o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray flex flex-col md:flex-row items-center justify-between gap-4",children:[o.jsx("h2",{className:"text-lg font-bold text-brand-light-text dark:text-white",children:"Date Range Analysis"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rs,{value:je.start,onChange:te=>Ye(de=>({...de,start:te})),className:"w-32"}),o.jsx("span",{className:"font-semibold text-gray-500",children:"to"}),o.jsx(Rs,{value:je.end,onChange:te=>Ye(de=>({...de,end:te})),className:"w-32"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray text-center",children:[o.jsx("h4",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Total Revenue"}),o.jsx("p",{className:"text-4xl font-black text-brand-lime",children:ft(ye.totalRevenue)})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray text-center",children:[o.jsx("h4",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Transactions"}),o.jsx("p",{className:"text-4xl font-black text-brand-light-text dark:text-white",children:ye.totalTransactions})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray text-center",children:[o.jsx("h4",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Avg. Deal Size"}),o.jsx("p",{className:"text-4xl font-black text-brand-blue",children:ft(ye.avgDealSize)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 text-brand-light-text dark:text-white",children:"Top Products by Revenue"}),o.jsx(hz,{data:ye.productChartData.map(te=>({name:te.product,revenue:te.revenue})),onBarClick:Ce})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 text-brand-light-text dark:text-white",children:"Revenue Over Time"}),o.jsx(Qt,{data:ye.timeChartData,onBarClick:nt})]})]}),o.jsx(dz,{productData:ye.productChartData,timeframeText:`${je.start} to ${je.end}`})]}),xe&&oe&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Q(!1),children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6 max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:te=>te.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:(()=>{try{const{startDate:te,endDate:de,label:ke}=JSON.parse(oe);return te===de?new Date(te+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):`${ke} (${new Date(te+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${new Date(de+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})`}catch{return"Transactions"}})()}),o.jsx("button",{onClick:()=>Q(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-ink p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Revenue"}),o.jsx("p",{className:"text-xl font-bold text-brand-lime",children:ft(We.reduce((te,de)=>te+de.amount,0))})]}),o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-ink p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transactions"}),o.jsx("p",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:We.length})]}),o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-ink p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Deal"}),o.jsx("p",{className:"text-xl font-bold text-brand-blue",children:ft(We.length>0?We.reduce((te,de)=>te+de.amount,0)/We.length:0)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filter by Product"}),o.jsx("input",{type:"text",placeholder:"Search product...",value:we,onChange:te=>_e(te.target.value),className:"w-full px-3 py-2 border border-brand-light-border dark:border-brand-gray rounded-lg bg-white dark:bg-brand-ink text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Minimum Amount"}),o.jsx("input",{type:"number",placeholder:"Min amount...",value:ie,onChange:te=>Le(te.target.value),className:"w-full px-3 py-2 border border-brand-light-border dark:border-brand-gray rounded-lg bg-white dark:bg-brand-ink text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue"})]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"sticky top-0 bg-brand-light-card dark:bg-brand-navy",children:o.jsxs("tr",{className:"border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Date"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Customer"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Product"}),o.jsx("th",{className:"text-right py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Amount"}),o.jsx("th",{className:"text-center py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Recurring"}),o.jsx("th",{className:"text-center py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Actions"})]})}),o.jsx("tbody",{children:We.map(te=>o.jsxs("tr",{className:"border-b border-brand-light-border dark:border-brand-gray hover:bg-brand-light-bg dark:hover:bg-brand-ink",children:[o.jsx("td",{className:"py-2 px-3 text-sm text-gray-600 dark:text-gray-400",children:new Date(te.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),o.jsx("td",{className:"py-2 px-3 text-sm text-brand-light-text dark:text-white",children:te.clientName}),o.jsx("td",{className:"py-2 px-3 text-sm text-gray-600 dark:text-gray-400",children:te.product}),o.jsx("td",{className:"py-2 px-3 text-sm text-right font-semibold text-brand-lime",children:ft(te.amount)}),o.jsx("td",{className:"py-2 px-3 text-sm text-center",children:te.isRecurring&&o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300",children:"Recurring"})}),o.jsx("td",{className:"py-2 px-3 text-sm text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{onClick:()=>{Q(!1),J(!1),Yt(te)},className:"text-brand-blue hover:text-brand-blue/80 font-medium",children:"Edit"}),o.jsx("button",{onClick:()=>{window.confirm("Delete this transaction?")&&(Q(!1),J(!1),Ut(te.id))},className:"text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})})]},te.id))})]})})]})}),U&&O&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>J(!1),children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6 max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:te=>te.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:O}),o.jsx("button",{onClick:()=>J(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-ink p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Revenue"}),o.jsx("p",{className:"text-xl font-bold text-brand-lime",children:ft(He.reduce((te,de)=>te+de.amount,0))})]}),o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-ink p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transactions"}),o.jsx("p",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:He.length})]}),o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-ink p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Deal"}),o.jsx("p",{className:"text-xl font-bold text-brand-blue",children:ft(He.length>0?He.reduce((te,de)=>te+de.amount,0)/He.length:0)})]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"sticky top-0 bg-brand-light-card dark:bg-brand-navy",children:o.jsxs("tr",{className:"border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Date"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Customer"}),o.jsx("th",{className:"text-right py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Amount"}),o.jsx("th",{className:"text-center py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Recurring"}),o.jsx("th",{className:"text-center py-2 px-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Actions"})]})}),o.jsx("tbody",{children:He.map(te=>o.jsxs("tr",{className:"border-b border-brand-light-border dark:border-brand-gray hover:bg-brand-light-bg dark:hover:bg-brand-ink",children:[o.jsx("td",{className:"py-2 px-3 text-sm text-brand-light-text dark:text-white",children:new Date(te.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),o.jsx("td",{className:"py-2 px-3 text-sm text-brand-light-text dark:text-white",children:te.clientName}),o.jsx("td",{className:"py-2 px-3 text-sm text-right font-semibold text-brand-lime",children:ft(te.amount)}),o.jsx("td",{className:"py-2 px-3 text-sm text-center",children:te.isRecurring&&o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300",children:"Recurring"})}),o.jsx("td",{className:"py-2 px-3 text-sm text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{onClick:()=>{Q(!1),J(!1),Yt(te)},className:"text-brand-blue hover:text-brand-blue/80 font-medium",children:"Edit"}),o.jsx("button",{onClick:()=>{window.confirm("Delete this transaction?")&&(Q(!1),J(!1),Ut(te.id))},className:"text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})})]},te.id))})]})})]})})]})},pz=({isOpen:t,onClose:e,data:n,onEditEvent:r})=>{if(!t||!n)return null;const{title:a,events:i,day:l}=n;return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:a}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:i.length>0?o.jsx("ul",{className:"space-y-3",children:i.map(u=>o.jsxs("li",{className:"p-3 bg-brand-light-bg dark:bg-brand-gray/20 rounded-md flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white",children:u.client||u.title}),o.jsx("p",{className:"text-sm text-brand-blue font-semibold",children:gj(u.time)}),u.details&&o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u.details})]}),o.jsx("button",{onClick:()=>r(u,l),className:"text-xs bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300 font-bold py-1 px-3 rounded-md hover:bg-gray-300 dark:hover:bg-brand-gray/50 transition whitespace-nowrap",children:"View / Edit"})]},u.id))}):o.jsx("p",{className:"text-center text-gray-500 p-8",children:"No events of this type for the selected day."})}),o.jsx("div",{className:"p-4 border-t border-brand-light-border dark:border-brand-gray text-right",children:o.jsx("button",{onClick:e,className:"bg-brand-gray text-white font-bold py-2 px-6 rounded-lg hover:bg-brand-light-gray transition text-sm",children:"Close"})})]})})},gz=t=>t===0?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),yz=t=>{if(!t||!t.prospectingContacts)return 0;const e={SW:3,SA:10,EP:5,LM:1,ST:1,NA:1};let n=0;return t.prospectingContacts.forEach(r=>{for(const a in r.prospecting)r.prospecting[a]&&(n+=e[a]||0)}),n},bz={Appointment:"bg-brand-blue text-white",Meeting:"bg-purple-600 text-white",Call:"bg-brand-lime text-brand-ink","Follow-up":"bg-yellow-500 text-brand-ink",Personal:"bg-pink-500 text-white",Task:"bg-brand-gray text-white"},xz=({allData:t,onDataChange:e,transactions:n,selectedDate:r,onDateChange:a,setView:i})=>{const[l,u]=_.useState(!1),[d,h]=_.useState(!1),[m,g]=_.useState(null),[b,v]=_.useState({event:null,date:null}),k=r.getMonth(),C=r.getFullYear(),N=_.useMemo(()=>{const z=new Date(C,k,1).getDay(),F=new Date(C,k+1,0).getDate(),V=[];for(let K=0;K<z;K++)V.push(null);for(let K=1;K<=F;K++)V.push(new Date(C,k,K));return V},[k,C]),T=_.useMemo(()=>{const z={};return n.forEach(F=>{const V=new Date(F.date+"T00:00:00");V.getFullYear()===C&&V.getMonth()===k&&(z[F.date]||(z[F.date]={revenue:0,kpiScore:0,events:[]}),z[F.date].revenue+=F.amount)}),Object.keys(t).forEach(F=>{const V=new Date(F+"T00:00:00");V.getFullYear()===C&&V.getMonth()===k&&(z[F]||(z[F]={revenue:0,kpiScore:0,events:[]}),z[F].kpiScore=yz(t[F]),z[F].events=t[F].events||[])}),z},[t,n,k,C]),R=()=>a(new Date(C,k-1,1)),E=()=>a(new Date(C,k+1,1)),P=z=>{v({event:null,date:z}),u(!0)},j=(z,F)=>{h(!1),v({event:z,date:F}),u(!0)},I=(z,F,V)=>{if(F&&t[F]&&F!==V){const Y=t[F],q=Y.events.filter(B=>B.id!==z.id);e(F,{...Y,events:q})}const K=t[V]||sr(),pe=K.events.findIndex(Y=>Y.id===z.id);pe>-1?K.events[pe]=z:K.events.push(z),K.events.sort((Y,q)=>Y.time.localeCompare(q.time)),e(V,K),u(!1),v({event:null,date:null})},D=(z,F)=>{const V=t[F];if(V){const K=V.events.filter(pe=>pe.id!==z);e(F,{...V,events:K})}u(!1),v({event:null,date:null})},$=z=>{var K;const F=z.toISOString().split("T")[0],V=((K=T[F])==null?void 0:K.events)||[];g({title:`Activities for ${z.toLocaleDateString()}`,events:V,day:z}),h(!0)},H=z=>{a(z),i("day-view"),u(!1)};return o.jsxs(o.Fragment,{children:[o.jsx(Wj,{isOpen:l,onClose:()=>u(!1),onSave:I,onDelete:D,date:b.date,eventToEdit:b.event,onGoToDay:H}),o.jsx(pz,{isOpen:d,onClose:()=>h(!1),data:m,onEditEvent:j}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 sm:p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("button",{onClick:R,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-brand-gray/50","aria-label":"Previous month",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-brand-light-text dark:text-white",children:r.toLocaleString("default",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:E,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-brand-gray/50","aria-label":"Next month",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),o.jsxs("div",{className:"grid grid-cols-7 gap-px bg-brand-light-border dark:bg-brand-gray",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(z=>o.jsx("div",{className:"text-center font-bold text-xs text-gray-500 dark:text-gray-400 py-2 uppercase bg-brand-light-bg dark:bg-brand-gray/50",children:z},z)),N.map((z,F)=>{if(!z)return o.jsx("div",{className:"bg-brand-light-bg dark:bg-brand-ink/50"},`empty-${F}`);const V=z.toISOString().split("T")[0],K=T[V]||{revenue:0,kpiScore:0,events:[]},pe=V===new Date().toISOString().split("T")[0],Y=V===r.toISOString().split("T")[0];return o.jsxs("div",{className:`relative p-2 min-h-[120px] flex flex-col group bg-brand-light-card dark:bg-brand-navy ${Y?"bg-brand-blue/10 dark:bg-brand-blue/20":""}`,children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:`text-sm font-bold ${pe?"bg-brand-red text-white rounded-full w-6 h-6 flex items-center justify-center":"text-brand-light-text dark:text-white"}`,children:z.getDate()}),o.jsx("button",{onClick:()=>P(z),className:"opacity-0 group-hover:opacity-100 transition-opacity text-brand-blue font-bold text-lg rounded-full w-6 h-6 flex items-center justify-center hover:bg-brand-blue/20",children:"+"})]}),o.jsxs("div",{className:"flex-grow mt-1 text-xs space-y-1",children:[K.revenue>0&&o.jsx("p",{className:"text-brand-lime font-semibold",children:gz(K.revenue)}),K.kpiScore>0&&o.jsxs("p",{className:"text-yellow-500 font-semibold",children:["Score: ",K.kpiScore]}),o.jsxs("div",{className:"space-y-1 overflow-hidden",children:[K.events.slice(0,2).map(q=>o.jsx("div",{onClick:()=>j(q,z),className:`p-1 rounded-sm cursor-pointer text-[10px] leading-tight font-semibold truncate ${bz[q.type]}`,children:q.title},q.id)),K.events.length>2&&o.jsxs("button",{onClick:()=>$(z),className:"text-blue-500 hover:underline text-xs font-semibold w-full text-left",children:["+ ",K.events.length-2," more"]})]})]}),o.jsx("button",{onClick:()=>{a(z),i("day-view")},className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity text-xs text-gray-400 hover:text-brand-blue",children:""})]},V)})]})]})]})},vz=()=>{const t=[{title:"Be Specific",description:"Instead of 'a dog', try 'a golden retriever puppy playing in a field of daisies at sunset'."},{title:"Use Adjectives",description:"Words like 'vibrant', 'surreal', 'photorealistic', 'minimalist' can dramatically change the style."},{title:"Mention Artists or Styles",description:"Try adding 'in the style of Van Gogh' or 'as a watercolor painting'."},{title:"Set the Scene",description:"Describe the environment, lighting, and camera angle (e.g., 'cinematic lighting', 'wide-angle shot')."}];return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:"PROMPT ENGINEERING 101"}),o.jsx("ul",{className:"space-y-3",children:t.map((e,n)=>o.jsxs("li",{className:"flex items-start space-x-3",children:[o.jsx("span",{className:"text-brand-red font-bold text-lg mt-[-2px]",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm text-brand-light-text dark:text-white",children:e.title}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]})]},n))})]})},wz=[{value:"1:1",label:"Instagram Post (1:1)",size:"1080x1080px"},{value:"9:16",label:"Instagram Story (9:16)",size:"1080x1920px"},{value:"9:16",label:"TikTok Video (9:16)",size:"1080x1920px"},{value:"16:9",label:"YouTube Thumbnail (16:9)",size:"1280x720px"},{value:"1.91:1",label:"Facebook Post (1.91:1)",size:"1200x630px"},{value:"16:9",label:"LinkedIn Post (16:9)",size:"1200x627px"},{value:"1:1",label:"LinkedIn Carousel (1:1)",size:"1080x1080px"},{value:"16:9",label:"Twitter/X Header (16:9)",size:"1500x500px"},{value:"4:5",label:"Pinterest Pin (4:5)",size:"1000x1250px"},{value:"1:1",label:"Facebook Profile (1:1)",size:"180x180px"}],xC={Accountant:[{name:"Tax Season Professional",prompt:"Professional accountant workspace, organized tax documents and calculator, expertise and precision theme, corporate office setting, trustworthy and detail-oriented aesthetic",aspectRatio:"16:9",category:"Accountant"},{name:"Financial Planning Meeting",prompt:"Accountant consulting with client, financial planning session, professional office environment, trust and expertise theme, collaborative and approachable",aspectRatio:"4:3",category:"Accountant"},{name:"Bookkeeping Excellence",prompt:"Clean organized bookkeeping concept, professional financial records, accuracy and efficiency theme, modern accounting aesthetic, reliable and systematic",aspectRatio:"16:9",category:"Accountant"},{name:"Business Growth Analytics",prompt:"Business financial growth charts and analytics, professional accounting visualization, success and prosperity theme, data-driven and insightful",aspectRatio:"16:9",category:"Accountant"},{name:"CPA Credibility",prompt:"Professional CPA certification and credentials showcase, trust and authority theme, corporate accounting aesthetic, established and credible",aspectRatio:"4:3",category:"Accountant"}],"Business Coach":[{name:"Leadership Development",prompt:"Business coaching leadership session, professional mentor and mentee, growth and transformation theme, inspiring and motivational aesthetic, success-focused",aspectRatio:"16:9",category:"Business Coach"},{name:"Goal Achievement Vision",prompt:"Goal setting and achievement visualization, business success concept, motivational and inspiring theme, professional coaching imagery, empowering and focused",aspectRatio:"1:1",category:"Business Coach"},{name:"Strategy Workshop",prompt:"Business strategy workshop session, collaborative planning environment, professional coaching setting, growth and innovation theme, dynamic and engaging",aspectRatio:"16:9",category:"Business Coach"},{name:"Success Mindset",prompt:"Success mindset and breakthrough concept, motivational business coaching theme, professional and inspiring imagery, transformational and powerful",aspectRatio:"4:3",category:"Business Coach"},{name:"Executive Coaching",prompt:"Executive business coaching session, high-level professional development, leadership and excellence theme, sophisticated and impactful",aspectRatio:"16:9",category:"Business Coach"}],Electrician:[{name:"Professional Installation",prompt:"Professional electrician installing modern electrical panel, skilled tradesperson at work, expertise and safety theme, clean and professional service aesthetic",aspectRatio:"4:3",category:"Electrician"},{name:"Emergency Service Ready",prompt:"Emergency electrical service truck and equipment, 24/7 availability theme, reliable and responsive service, professional and trustworthy",aspectRatio:"16:9",category:"Electrician"},{name:"Smart Home Technology",prompt:"Modern smart home electrical installation, cutting-edge technology and automation, professional electrical service, innovative and efficient",aspectRatio:"16:9",category:"Electrician"},{name:"Commercial Electrical",prompt:"Commercial electrical project, large-scale professional installation, industrial and commercial theme, expert and reliable service",aspectRatio:"16:9",category:"Electrician"},{name:"Safety Inspection",prompt:"Electrical safety inspection and testing, professional electrician with diagnostic equipment, safety and compliance theme, thorough and certified",aspectRatio:"4:3",category:"Electrician"}],"General Contractor":[{name:"Construction Project",prompt:"Active construction site with professional contractor, building project in progress, quality and craftsmanship theme, reliable and experienced",aspectRatio:"16:9",category:"General Contractor"},{name:"Home Renovation",prompt:"Beautiful home renovation transformation, before and after concept, quality craftsmanship theme, professional contractor work, impressive results",aspectRatio:"4:3",category:"General Contractor"},{name:"Commercial Build",prompt:"Commercial construction project, large-scale building development, professional contractor management, quality and efficiency theme",aspectRatio:"16:9",category:"General Contractor"},{name:"Custom Build Quality",prompt:"Custom home construction, high-end building project, craftsmanship and attention to detail theme, premium contractor service",aspectRatio:"4:3",category:"General Contractor"},{name:"Project Planning",prompt:"Contractor reviewing blueprints and plans, professional project management, expertise and precision theme, organized and thorough",aspectRatio:"16:9",category:"General Contractor"}],HVAC:[{name:"System Installation",prompt:"Professional HVAC technician installing modern heating and cooling system, expert service and quality equipment, comfort and efficiency theme",aspectRatio:"4:3",category:"HVAC"},{name:"Maintenance Service",prompt:"HVAC maintenance and tune-up service, professional technician with diagnostic tools, preventive care theme, reliable and thorough",aspectRatio:"16:9",category:"HVAC"},{name:"Energy Efficiency",prompt:"Energy-efficient HVAC system concept, modern climate control technology, savings and comfort theme, professional and eco-friendly",aspectRatio:"16:9",category:"HVAC"},{name:"Emergency Repair",prompt:"Emergency HVAC repair service, 24/7 availability and quick response, reliable and professional service, comfort restoration theme",aspectRatio:"16:9",category:"HVAC"},{name:"Indoor Comfort",prompt:"Perfect indoor climate and comfort concept, modern HVAC system benefits, comfort and quality of life theme, professional and inviting",aspectRatio:"4:3",category:"HVAC"}],Hardscaper:[{name:"Patio Paradise",prompt:"Beautiful hardscape patio design, professional stone or paver installation, outdoor living space theme, elegant and inviting",aspectRatio:"16:9",category:"Hardscaper"},{name:"Retaining Wall Mastery",prompt:"Professional retaining wall construction, expert hardscape engineering, functional and beautiful design, quality craftsmanship",aspectRatio:"4:3",category:"Hardscaper"},{name:"Driveway Excellence",prompt:"Premium driveway hardscape installation, professional paver or concrete work, curb appeal and durability theme, high-quality results",aspectRatio:"16:9",category:"Hardscaper"},{name:"Outdoor Kitchen",prompt:"Luxury outdoor kitchen hardscape, professional stone and masonry work, outdoor entertainment theme, sophisticated and functional",aspectRatio:"16:9",category:"Hardscaper"},{name:"Walkway Design",prompt:"Beautiful hardscape walkway and pathway, professional landscape integration, aesthetic and functional design, inviting and well-crafted",aspectRatio:"4:3",category:"Hardscaper"}],"IT Services":[{name:"Network Solutions",prompt:"Professional IT network infrastructure, server room and technology systems, reliability and security theme, expert IT services",aspectRatio:"16:9",category:"IT Services"},{name:"Cybersecurity Protection",prompt:"IT cybersecurity and data protection concept, digital security shield, safety and trust theme, professional IT security services",aspectRatio:"16:9",category:"IT Services"},{name:"Cloud Migration",prompt:"Cloud computing and migration services, modern IT infrastructure, efficiency and scalability theme, professional cloud solutions",aspectRatio:"16:9",category:"IT Services"},{name:"Help Desk Support",prompt:"IT support and help desk service, professional technician assisting client, responsive and reliable support theme, customer-focused",aspectRatio:"4:3",category:"IT Services"},{name:"Managed IT Services",prompt:"Comprehensive managed IT services concept, proactive technology management, efficiency and peace of mind theme, professional and reliable",aspectRatio:"16:9",category:"IT Services"}],Landscaper:[{name:"Lawn Perfection",prompt:"Perfectly manicured lawn and landscape, professional landscaping service results, lush and beautiful outdoor space, quality and care",aspectRatio:"16:9",category:"Landscaper"},{name:"Garden Design",prompt:"Beautiful garden landscape design, professional planting and arrangement, colorful and vibrant outdoor space, artistic and natural",aspectRatio:"4:3",category:"Landscaper"},{name:"Seasonal Cleanup",prompt:"Professional landscape maintenance and cleanup, seasonal yard care service, neat and well-maintained property, reliable service",aspectRatio:"16:9",category:"Landscaper"},{name:"Landscape Transformation",prompt:"Dramatic landscape transformation before and after, professional landscaping results, impressive improvement theme, quality workmanship",aspectRatio:"16:9",category:"Landscaper"},{name:"Outdoor Living Space",prompt:"Beautiful outdoor living space with professional landscaping, integrated design and natural elements, relaxing and inviting atmosphere",aspectRatio:"4:3",category:"Landscaper"}],Lawyer:[{name:"Legal Expertise",prompt:"Professional lawyer in office with law books, legal expertise and authority theme, trustworthy and credible, corporate legal aesthetic",aspectRatio:"4:3",category:"Lawyer"},{name:"Courtroom Advocacy",prompt:"Courtroom and legal advocacy concept, professional legal representation, justice and expertise theme, authoritative and confident",aspectRatio:"16:9",category:"Lawyer"},{name:"Contract Review",prompt:"Legal contract review and consultation, professional lawyer analyzing documents, attention to detail theme, thorough and expert",aspectRatio:"16:9",category:"Lawyer"},{name:"Client Consultation",prompt:"Lawyer consulting with client, professional legal advice session, trust and guidance theme, approachable and expert",aspectRatio:"4:3",category:"Lawyer"},{name:"Justice & Protection",prompt:"Legal protection and justice concept, scales of justice and legal symbols, defense and advocacy theme, professional and trustworthy",aspectRatio:"16:9",category:"Lawyer"}],"Marketing Agency":[{name:"Creative Campaign",prompt:"Creative marketing campaign concept, brainstorming and strategy session, innovation and results theme, dynamic agency environment",aspectRatio:"16:9",category:"Marketing Agency"},{name:"Digital Marketing",prompt:"Digital marketing analytics and performance, social media and online presence, growth and engagement theme, data-driven results",aspectRatio:"16:9",category:"Marketing Agency"},{name:"Brand Development",prompt:"Brand development and identity creation, professional branding services, creative and strategic theme, impactful and memorable",aspectRatio:"4:3",category:"Marketing Agency"},{name:"Content Creation",prompt:"Content creation and marketing production, professional creative team at work, engaging and quality content theme, innovative and strategic",aspectRatio:"16:9",category:"Marketing Agency"},{name:"ROI Success",prompt:"Marketing ROI and business growth results, successful campaign metrics, performance and results theme, proven and effective",aspectRatio:"16:9",category:"Marketing Agency"}],Painter:[{name:"Interior Transformation",prompt:"Professional interior painting transformation, fresh painted room with perfect finish, quality and craftsmanship theme, clean and beautiful results",aspectRatio:"4:3",category:"Painter"},{name:"Exterior Excellence",prompt:"Exterior house painting project, professional painter at work, curb appeal and protection theme, quality and durability",aspectRatio:"16:9",category:"Painter"},{name:"Color Consultation",prompt:"Professional color consultation and paint selection, expert advice and samples, personalized and creative theme, helpful and knowledgeable",aspectRatio:"4:3",category:"Painter"},{name:"Commercial Painting",prompt:"Commercial painting project, large-scale professional work, efficiency and quality theme, reliable business service",aspectRatio:"16:9",category:"Painter"},{name:"Detail & Precision",prompt:"Precision painting detail work, professional craftsmanship close-up, attention to detail theme, quality and expertise",aspectRatio:"4:3",category:"Painter"}],"Personal Trainer":[{name:"Fitness Transformation",prompt:"Personal training fitness transformation, client achieving goals with trainer support, motivation and results theme, inspiring and empowering",aspectRatio:"16:9",category:"Personal Trainer"},{name:"Workout Session",prompt:"Personal training workout session, trainer coaching client, professional fitness guidance, energetic and motivating",aspectRatio:"4:3",category:"Personal Trainer"},{name:"Nutrition Coaching",prompt:"Personal trainer nutrition coaching, healthy meal planning and guidance, wellness and health theme, holistic and supportive",aspectRatio:"16:9",category:"Personal Trainer"},{name:"Strength Training",prompt:"Strength training with personal trainer, professional fitness coaching, power and progress theme, motivating and results-focused",aspectRatio:"4:3",category:"Personal Trainer"},{name:"Goal Achievement",prompt:"Fitness goal achievement celebration, personal training success story, transformation and victory theme, inspiring and motivational",aspectRatio:"1:1",category:"Personal Trainer"}],Photographer:[{name:"Portrait Session",prompt:"Professional portrait photography session, photographer with camera and lighting, artistic and creative theme, quality and expertise",aspectRatio:"4:3",category:"Photographer"},{name:"Wedding Photography",prompt:"Beautiful wedding photography moment, romantic and elegant capture, special memories theme, artistic and professional",aspectRatio:"16:9",category:"Photographer"},{name:"Commercial Photography",prompt:"Commercial photography studio setup, professional product or business photography, quality and precision theme, expert and versatile",aspectRatio:"16:9",category:"Photographer"},{name:"Event Coverage",prompt:"Event photography coverage, photographer capturing special moments, professional documentation theme, reliable and skilled",aspectRatio:"16:9",category:"Photographer"},{name:"Creative Vision",prompt:"Creative photography concept, artistic vision and unique perspective, innovation and artistry theme, distinctive and professional",aspectRatio:"4:3",category:"Photographer"}],Plumber:[{name:"Expert Installation",prompt:"Professional plumber installing modern fixtures, expert plumbing service, quality and reliability theme, skilled and trustworthy",aspectRatio:"4:3",category:"Plumber"},{name:"Emergency Service",prompt:"Emergency plumbing service response, 24/7 availability and quick repair, reliable and professional service, problem-solving theme",aspectRatio:"16:9",category:"Plumber"},{name:"Pipe Repair",prompt:"Professional pipe repair and plumbing maintenance, expert diagnosis and fix, quality workmanship theme, thorough and reliable",aspectRatio:"16:9",category:"Plumber"},{name:"Bathroom Renovation",prompt:"Bathroom plumbing renovation, modern fixture installation, upgrade and improvement theme, quality and style",aspectRatio:"4:3",category:"Plumber"},{name:"Water Heater Service",prompt:"Water heater installation or repair service, professional plumbing expertise, comfort and efficiency theme, reliable and expert",aspectRatio:"16:9",category:"Plumber"}],"Real Estate":[{name:"Luxury Property Showcase",prompt:"Elegant luxury home exterior with modern architecture, manicured landscaping, golden hour lighting, professional real estate photography style, high-end residential property",aspectRatio:"4:3",category:"Real Estate"},{name:"Open House Invitation",prompt:'Welcoming open house scene with "Welcome Home" aesthetic, bright and inviting residential entrance, professional staging, warm afternoon lighting, real estate marketing style',aspectRatio:"16:9",category:"Real Estate"},{name:"Just Sold Celebration",prompt:"Celebratory real estate success image with sold sign, happy homeowners silhouette, keys in hand, achievement and success theme, professional photography",aspectRatio:"1:1",category:"Real Estate"},{name:"New Listing Feature",prompt:'Eye-catching "New Listing" property feature image, stunning home exterior, professional real estate photography, vibrant and inviting, market-ready presentation',aspectRatio:"3:4",category:"Real Estate"},{name:"Agent Headshot Background",prompt:"Professional real estate office background, modern and clean, subtle luxury elements, perfect for agent headshots, corporate and trustworthy aesthetic",aspectRatio:"4:3",category:"Real Estate"}],Insurance:[{name:"Family Protection Theme",prompt:"Caring family protection concept, silhouette of family under umbrella, security and safety theme, warm and trustworthy, insurance marketing style, professional and reassuring",aspectRatio:"16:9",category:"Insurance"},{name:"Life Insurance Security",prompt:"Life insurance security concept, peaceful family scene, protection and peace of mind theme, soft lighting, professional and caring aesthetic, trust-building imagery",aspectRatio:"4:3",category:"Insurance"},{name:"Auto Insurance Coverage",prompt:"Modern car protection concept, sleek vehicle with shield imagery, safety and coverage theme, professional automotive photography, insurance marketing style",aspectRatio:"16:9",category:"Insurance"},{name:"Health Insurance Wellness",prompt:"Health and wellness concept, active healthy lifestyle, medical protection theme, bright and positive, professional healthcare imagery, trust and care aesthetic",aspectRatio:"1:1",category:"Insurance"},{name:"Business Insurance Professional",prompt:"Professional business protection concept, modern office building, corporate security theme, trustworthy and established, commercial insurance marketing style",aspectRatio:"16:9",category:"Insurance"}],"Financial Services":[{name:"Wealth Management Success",prompt:"Financial success and wealth growth concept, upward trending graphs, prosperity theme, professional financial imagery, trust and expertise aesthetic, corporate and sophisticated",aspectRatio:"16:9",category:"Financial Services"},{name:"Retirement Planning Peace",prompt:"Peaceful retirement planning concept, serene beach or mountain scene, financial security theme, relaxed and confident, professional financial planning imagery",aspectRatio:"4:3",category:"Financial Services"},{name:"Investment Growth Chart",prompt:"Investment portfolio growth visualization, professional financial charts and graphs, success and prosperity theme, corporate financial imagery, data-driven aesthetic",aspectRatio:"16:9",category:"Financial Services"},{name:"Financial Advisor Trust",prompt:"Professional financial advisor consultation scene, modern office setting, trust and expertise theme, corporate and approachable, financial services marketing",aspectRatio:"4:3",category:"Financial Services"},{name:"Tax Planning Strategy",prompt:"Tax planning and strategy concept, organized financial documents, professional accounting imagery, efficiency and expertise theme, corporate and trustworthy",aspectRatio:"16:9",category:"Financial Services"}],"B2B Technology":[{name:"Cloud Solutions Innovation",prompt:"Modern cloud computing concept, futuristic technology visualization, innovation and efficiency theme, professional tech imagery, corporate and cutting-edge aesthetic",aspectRatio:"16:9",category:"B2B Technology"},{name:"Cybersecurity Protection",prompt:"Cybersecurity and data protection concept, digital security visualization, trust and safety theme, professional technology imagery, corporate and secure aesthetic",aspectRatio:"16:9",category:"B2B Technology"},{name:"AI & Automation Future",prompt:"Artificial intelligence and automation concept, futuristic AI visualization, innovation and efficiency theme, professional technology imagery, cutting-edge and sophisticated",aspectRatio:"16:9",category:"B2B Technology"},{name:"SaaS Platform Interface",prompt:"Modern SaaS platform dashboard visualization, clean user interface design, professional software imagery, efficiency and usability theme, corporate tech aesthetic",aspectRatio:"16:9",category:"B2B Technology"},{name:"Data Analytics Insights",prompt:"Business intelligence and data analytics concept, professional data visualization, insights and growth theme, corporate technology imagery, sophisticated and data-driven",aspectRatio:"16:9",category:"B2B Technology"}],Healthcare:[{name:"Medical Care Compassion",prompt:"Compassionate healthcare professional, caring medical environment, trust and expertise theme, professional healthcare photography, warm and reassuring aesthetic",aspectRatio:"4:3",category:"Healthcare"},{name:"Wellness & Prevention",prompt:"Health and wellness prevention concept, active healthy lifestyle, preventive care theme, bright and positive, professional healthcare imagery, encouraging aesthetic",aspectRatio:"1:1",category:"Healthcare"},{name:"Telemedicine Innovation",prompt:"Modern telemedicine consultation concept, digital healthcare technology, accessibility and convenience theme, professional medical imagery, innovative and caring",aspectRatio:"16:9",category:"Healthcare"},{name:"Patient Success Story",prompt:"Positive patient outcome and recovery, healthcare success story, hope and healing theme, professional medical photography, uplifting and inspirational",aspectRatio:"4:3",category:"Healthcare"},{name:"Medical Facility Modern",prompt:"State-of-the-art medical facility, modern healthcare environment, advanced care theme, professional hospital photography, clean and trustworthy aesthetic",aspectRatio:"16:9",category:"Healthcare"}],Consulting:[{name:"Business Strategy Session",prompt:"Professional business consulting session, modern boardroom meeting, strategy and growth theme, corporate photography, collaborative and expert aesthetic",aspectRatio:"16:9",category:"Consulting"},{name:"Executive Leadership",prompt:"Executive leadership and management concept, professional business leader, authority and expertise theme, corporate photography, confident and trustworthy",aspectRatio:"4:3",category:"Consulting"},{name:"Growth & Transformation",prompt:"Business growth and transformation concept, upward trajectory visualization, success and innovation theme, professional consulting imagery, dynamic and progressive",aspectRatio:"16:9",category:"Consulting"},{name:"Team Collaboration",prompt:"Collaborative team working together, modern office environment, teamwork and synergy theme, professional business photography, energetic and productive",aspectRatio:"16:9",category:"Consulting"},{name:"Problem Solving Expert",prompt:"Problem-solving and strategic thinking concept, professional consultant analyzing data, expertise and solutions theme, corporate imagery, analytical and confident",aspectRatio:"4:3",category:"Consulting"}],Roofer:[{name:"Roof Installation",prompt:"Professional roofing installation project, roofer working on quality roof, craftsmanship and durability theme, reliable and expert service",aspectRatio:"16:9",category:"Roofer"},{name:"Storm Damage Repair",prompt:"Emergency roof repair after storm damage, professional roofing restoration, quick response and quality work theme, reliable and trustworthy",aspectRatio:"16:9",category:"Roofer"},{name:"Roof Inspection",prompt:"Professional roof inspection service, roofer examining roof condition, preventive maintenance theme, thorough and expert assessment",aspectRatio:"4:3",category:"Roofer"},{name:"New Construction Roofing",prompt:"New construction roofing project, professional installation on new build, quality and precision theme, expert craftsmanship",aspectRatio:"16:9",category:"Roofer"},{name:"Roof Replacement",prompt:"Complete roof replacement project, transformation and upgrade, quality materials and workmanship theme, professional and reliable",aspectRatio:"4:3",category:"Roofer"}],"Software/SaaS":[{name:"Product Dashboard",prompt:"Modern SaaS product dashboard interface, clean user experience design, professional software visualization, innovation and usability theme",aspectRatio:"16:9",category:"Software/SaaS"},{name:"Development Team",prompt:"Software development team collaborating, modern tech office environment, innovation and expertise theme, professional and dynamic",aspectRatio:"16:9",category:"Software/SaaS"},{name:"Cloud Platform",prompt:"Cloud-based software platform concept, scalable technology infrastructure, efficiency and reliability theme, professional and cutting-edge",aspectRatio:"16:9",category:"Software/SaaS"},{name:"Integration Ecosystem",prompt:"Software integration and API ecosystem, connected platforms visualization, versatility and compatibility theme, professional tech imagery",aspectRatio:"16:9",category:"Software/SaaS"},{name:"Customer Success",prompt:"SaaS customer success and support, professional client relationship, satisfaction and results theme, trustworthy and supportive",aspectRatio:"4:3",category:"Software/SaaS"}],"Web Developer":[{name:"Modern Website Design",prompt:"Modern responsive website design showcase, professional web development, clean user interface theme, innovative and functional",aspectRatio:"16:9",category:"Web Developer"},{name:"Coding Workspace",prompt:"Professional web developer coding workspace, multiple monitors with code, expertise and precision theme, technical and focused",aspectRatio:"16:9",category:"Web Developer"},{name:"E-commerce Platform",prompt:"Professional e-commerce website development, online store platform, conversion and user experience theme, polished and effective",aspectRatio:"16:9",category:"Web Developer"},{name:"Mobile Responsive",prompt:"Mobile-responsive web design concept, cross-device compatibility, modern web development theme, professional and versatile",aspectRatio:"4:3",category:"Web Developer"},{name:"Web Application",prompt:"Custom web application development, complex functionality and clean interface, professional software engineering theme, sophisticated and powerful",aspectRatio:"16:9",category:"Web Developer"}]},vC={"Email Marketing":[{name:"Newsletter Header - Professional",prompt:"Professional email newsletter header design, clean and modern layout, corporate branding space, minimalist aesthetic, business communication style, high-end marketing design",aspectRatio:"16:9",category:"Email Marketing"},{name:"Newsletter Header - Bold",prompt:"Bold and eye-catching email header, vibrant colors and dynamic composition, attention-grabbing design, modern marketing aesthetic, energetic and engaging",aspectRatio:"16:9",category:"Email Marketing"},{name:"Promotional Email Banner",prompt:"Promotional email campaign banner, special offer aesthetic, compelling visual design, marketing-focused composition, conversion-optimized imagery, professional and persuasive",aspectRatio:"16:9",category:"Email Marketing"},{name:"Welcome Email Hero",prompt:"Welcoming email hero image, warm and inviting design, onboarding aesthetic, professional welcome message visual, friendly and engaging, brand introduction style",aspectRatio:"16:9",category:"Email Marketing"},{name:"Product Showcase Email",prompt:"Product feature showcase for email, clean product photography style, professional e-commerce aesthetic, conversion-focused design, high-quality marketing imagery",aspectRatio:"4:3",category:"Email Marketing"}],"Social Media Content":[{name:"Motivational Quote Post",prompt:"Inspirational motivational quote background, professional typography space, uplifting and energetic design, social media optimized, engaging and shareable aesthetic",aspectRatio:"1:1",category:"Social Media Content"},{name:"Behind-the-Scenes Story",prompt:"Behind-the-scenes business moment, authentic and relatable, company culture showcase, professional yet casual, social media storytelling style, engaging and personal",aspectRatio:"9:16",category:"Social Media Content"},{name:"Product Announcement",prompt:"Exciting product announcement visual, bold and attention-grabbing, launch campaign aesthetic, professional marketing design, buzz-worthy and shareable",aspectRatio:"1:1",category:"Social Media Content"},{name:"Tips & Advice Carousel",prompt:"Educational tips and advice graphic, clean infographic style, professional knowledge-sharing design, social media carousel optimized, informative and valuable aesthetic",aspectRatio:"1:1",category:"Social Media Content"},{name:"Event Promotion Post",prompt:"Event promotion and invitation design, exciting and engaging visual, call-to-action focused, professional event marketing, compelling and informative aesthetic",aspectRatio:"1:1",category:"Social Media Content"},{name:"Customer Testimonial",prompt:"Customer testimonial and review showcase, trust-building design, social proof aesthetic, professional testimonial visual, credible and persuasive",aspectRatio:"1:1",category:"Social Media Content"}],"Print Materials":[{name:"Business Flyer - Modern",prompt:"Modern business flyer background, clean and professional design, corporate aesthetic, print-ready quality, high-resolution marketing material, sophisticated and polished",aspectRatio:"3:4",category:"Print Materials"},{name:"Business Flyer - Creative",prompt:"Creative and eye-catching flyer design, bold visual elements, artistic marketing aesthetic, print-optimized quality, unique and memorable design",aspectRatio:"3:4",category:"Print Materials"},{name:"Postcard Mailer",prompt:"Direct mail postcard design, attention-grabbing visual, professional marketing aesthetic, print-ready quality, compelling and conversion-focused",aspectRatio:"4:3",category:"Print Materials"},{name:"Brochure Cover",prompt:"Professional brochure cover design, premium business aesthetic, corporate marketing material, high-quality print design, sophisticated and trustworthy",aspectRatio:"3:4",category:"Print Materials"},{name:"Event Poster",prompt:"Event poster design, bold and informative visual, professional event marketing, print-ready quality, attention-grabbing and clear communication",aspectRatio:"3:4",category:"Print Materials"}],"Presentation Graphics":[{name:"Title Slide Background",prompt:"Professional presentation title slide background, clean and modern design, corporate aesthetic, minimalist and sophisticated, business presentation style",aspectRatio:"16:9",category:"Presentation Graphics"},{name:"Section Divider Slide",prompt:"Presentation section divider background, visual break design, professional transition slide, corporate aesthetic, clean and purposeful",aspectRatio:"16:9",category:"Presentation Graphics"},{name:"Data Visualization Background",prompt:"Data presentation background, professional chart and graph aesthetic, corporate analytics style, clean and data-focused design, business intelligence visual",aspectRatio:"16:9",category:"Presentation Graphics"},{name:"Thank You Slide",prompt:"Professional thank you slide background, closing presentation design, corporate and appreciative aesthetic, memorable conclusion visual, polished and professional",aspectRatio:"16:9",category:"Presentation Graphics"},{name:"Team Introduction Slide",prompt:"Team introduction slide background, professional headshot backdrop, corporate team presentation, clean and people-focused design, trustworthy aesthetic",aspectRatio:"16:9",category:"Presentation Graphics"}],"Website Graphics":[{name:"Hero Section Background",prompt:"Website hero section background, modern and engaging design, professional web aesthetic, high-quality digital imagery, conversion-optimized visual",aspectRatio:"16:9",category:"Website Graphics"},{name:"About Us Page Banner",prompt:"About us page header image, company story visual, professional corporate photography, trustworthy and authentic aesthetic, brand-building design",aspectRatio:"16:9",category:"Website Graphics"},{name:"Services Page Feature",prompt:"Services page feature image, professional service showcase, corporate web design, high-quality digital asset, value-focused visual",aspectRatio:"4:3",category:"Website Graphics"},{name:"Blog Post Featured Image",prompt:"Blog post featured image, engaging article visual, professional content marketing, SEO-optimized imagery, shareable and clickable aesthetic",aspectRatio:"16:9",category:"Website Graphics"},{name:"Contact Page Background",prompt:"Contact page background image, welcoming and approachable design, professional communication visual, trust-building aesthetic, call-to-action focused",aspectRatio:"16:9",category:"Website Graphics"}],Advertising:[{name:"Google Display Ad",prompt:"Google display ad creative, attention-grabbing design, professional digital advertising, click-worthy visual, conversion-optimized imagery, marketing campaign style",aspectRatio:"16:9",category:"Advertising"},{name:"Facebook Ad Creative",prompt:"Facebook advertising creative, scroll-stopping visual, social media ad optimized, professional marketing design, engagement-focused aesthetic, campaign-ready",aspectRatio:"1:1",category:"Advertising"},{name:"LinkedIn Sponsored Content",prompt:"LinkedIn sponsored content image, professional B2B advertising, corporate marketing aesthetic, business-focused visual, lead generation optimized",aspectRatio:"16:9",category:"Advertising"},{name:"Instagram Ad Story",prompt:"Instagram story ad creative, mobile-optimized design, attention-grabbing visual, social media advertising style, swipe-up worthy aesthetic",aspectRatio:"9:16",category:"Advertising"},{name:"Retargeting Ad Banner",prompt:"Retargeting campaign banner, reminder and conversion-focused, professional remarketing design, brand recall visual, persuasive advertising aesthetic",aspectRatio:"16:9",category:"Advertising"}]},wC=[{value:"photorealistic",label:"Photorealistic",description:"Looks like a real photograph"},{value:"professional",label:"Professional",description:"Corporate and polished"},{value:"modern",label:"Modern",description:"Contemporary and clean"},{value:"minimalist",label:"Minimalist",description:"Simple and elegant"},{value:"bold",label:"Bold & Vibrant",description:"Eye-catching and colorful"},{value:"elegant",label:"Elegant",description:"Sophisticated and refined"},{value:"creative",label:"Creative",description:"Artistic and unique"},{value:"corporate",label:"Corporate",description:"Business-focused and trustworthy"}],SC=[{value:"blue",label:"Trust Blue",description:"Professional and reliable"},{value:"green",label:"Growth Green",description:"Fresh and prosperous"},{value:"red",label:"Energy Red",description:"Bold and attention-grabbing"},{value:"purple",label:"Premium Purple",description:"Luxury and sophistication"},{value:"orange",label:"Optimistic Orange",description:"Warm and friendly"},{value:"neutral",label:"Neutral Tones",description:"Versatile and timeless"},{value:"monochrome",label:"Black & White",description:"Classic and dramatic"},{value:"warm",label:"Warm Tones",description:"Inviting and comfortable"},{value:"cool",label:"Cool Tones",description:"Calm and professional"}],Sz=()=>{const[t,e]=_.useState(""),[n,r]=_.useState("1:1"),[a,i]=_.useState(null),[l,u]=_.useState(!1),[d,h]=_.useState(null),[m,g]=_.useState(""),[b,v]=_.useState(""),[k,C]=_.useState(""),[N,T]=_.useState(""),[R,E]=_.useState(!0),[P,j]=_.useState(""),[I,D]=_.useState(null),[$,H]=_.useState(""),[z,F]=_.useState(!1),[V,K]=_.useState(null),[pe,Y]=_.useState(null),q=_.useRef(null),B=(O,Z)=>{let U=O;if(k){const J=wC.find(oe=>oe.value===k);J&&(U+=`, ${J.value} style`)}if(N){const J=SC.find(oe=>oe.value===N);J&&(U+=`, ${J.label.toLowerCase()} color palette`)}e(U),r(Z)},ae=async()=>{if(!t){h("Please enter a prompt or select a template.");return}u(!0),h(null),i(null),K(null);try{const O=await Hj(t,n);i(O),D(O)}catch(O){console.error(O),h("Failed to generate image. Please check the console for details.")}finally{u(!1)}},X=async()=>{var O;if(!$||!I){Y("Please enter an edit prompt and ensure an image is loaded.");return}F(!0),Y(null),K(null);try{const Z=I.split(",")[1],U=((O=I.match(/:(.*?);/))==null?void 0:O[1])||"image/jpeg",J=await P8(Z,U,$);K(J)}catch(Z){console.error(Z),Y("Failed to edit image. Please check the console for details.")}finally{F(!1)}},ve=O=>{var U;const Z=(U=O.target.files)==null?void 0:U[0];if(Z){const J=new FileReader;J.onload=async oe=>{var xe,Q;const me=(xe=oe.target)==null?void 0:xe.result;D(me),i(null),K(null),H("");try{const we=me.split(",")[1],_e=((Q=me.match(/:(.*?);/))==null?void 0:Q[1])||"image/jpeg",ie=await I8(we,_e);H(ie)}catch(we){console.error("Could not get edit suggestion:",we),H("Enhance the lighting and colors.")}},J.readAsDataURL(Z)}},L=(O,Z)=>{const U=document.createElement("a");U.href=O,U.download=Z,document.body.appendChild(U),U.click(),document.body.removeChild(U)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:" Premium Marketing Asset Generator"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mode:"}),o.jsx("button",{onClick:()=>E(!0),className:`px-4 py-2 rounded-lg font-medium transition ${R?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:" Templates"}),o.jsx("button",{onClick:()=>E(!1),className:`px-4 py-2 rounded-lg font-medium transition ${R?"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300":"bg-brand-blue text-white"}`,children:" Custom"})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[R?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:" Industry Templates"}),o.jsxs("select",{value:m,onChange:O=>g(O.target.value),className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white mb-3",children:[o.jsx("option",{value:"",children:"Select Industry..."}),Object.keys(xC).map(O=>o.jsx("option",{value:O,children:O},O))]}),m&&o.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:xC[m].map((O,Z)=>o.jsxs("button",{onClick:()=>B(O.prompt,O.aspectRatio),className:"w-full text-left bg-brand-light-bg dark:bg-brand-gray/50 hover:bg-gray-200 dark:hover:bg-brand-gray p-3 rounded-md transition text-sm",children:[o.jsx("div",{className:"font-medium text-brand-light-text dark:text-white",children:O.name}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[O.aspectRatio,"  ",O.category]})]},Z))})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:" Custom Description"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Don't see your industry or want something specific? Describe what you need!"}),o.jsx("textarea",{value:P,onChange:O=>{j(O.target.value),e(O.target.value)},rows:4,className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",placeholder:"Example: Luxury yacht broker showcasing premium boats at sunset marina, professional and elegant..."})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:" Marketing Pieces"}),o.jsxs("select",{value:b,onChange:O=>v(O.target.value),className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white mb-3",children:[o.jsx("option",{value:"",children:"Select Marketing Piece..."}),Object.keys(vC).map(O=>o.jsx("option",{value:O,children:O},O))]}),b&&o.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:vC[b].map((O,Z)=>o.jsxs("button",{onClick:()=>B(O.prompt,O.aspectRatio),className:"w-full text-left bg-brand-light-bg dark:bg-brand-gray/50 hover:bg-gray-200 dark:hover:bg-brand-gray p-3 rounded-md transition text-sm",children:[o.jsx("div",{className:"font-medium text-brand-light-text dark:text-white",children:O.name}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[O.aspectRatio,"  ",O.category]})]},Z))})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:" Style & Color"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Visual Style"}),o.jsxs("select",{value:k,onChange:O=>C(O.target.value),className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:[o.jsx("option",{value:"",children:"Default"}),wC.map(O=>o.jsxs("option",{value:O.value,children:[O.label," - ",O.description]},O.value))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Color Theme"}),o.jsxs("select",{value:N,onChange:O=>T(O.target.value),className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:[o.jsx("option",{value:"",children:"Default"}),SC.map(O=>o.jsxs("option",{value:O.value,children:[O.label," - ",O.description]},O.value))]})]})]})]})]}):o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white",children:"Custom Image Generation"}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"prompt",className:"block text-sm font-bold text-gray-600 dark:text-gray-300 mb-1",children:"Prompt"}),o.jsx("textarea",{id:"prompt",value:t,onChange:O=>e(O.target.value),rows:6,className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",placeholder:"Describe the image you want to create..."})]})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:" Output Size"}),o.jsxs("select",{value:n,onChange:O=>r(O.target.value),className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",children:[o.jsx("optgroup",{label:"Social Media Presets",children:wz.map(O=>o.jsxs("option",{value:O.value,children:[O.label," - ",O.size]},O.label))}),o.jsxs("optgroup",{label:"Standard Sizes",children:[o.jsx("option",{value:"1:1",children:"Square (1:1)"}),o.jsx("option",{value:"16:9",children:"Widescreen (16:9)"}),o.jsx("option",{value:"9:16",children:"Portrait (9:16)"}),o.jsx("option",{value:"4:3",children:"Landscape (4:3)"}),o.jsx("option",{value:"3:4",children:"Tall (3:4)"})]})]})]}),t&&o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 mb-2",children:"Current Prompt:"}),o.jsx("p",{className:"text-xs text-brand-light-text dark:text-white break-words",children:t})]}),o.jsx("button",{onClick:ae,disabled:l||!t,className:"w-full bg-brand-red text-white font-bold py-3 px-4 rounded-lg hover:bg-red-700 transition disabled:bg-brand-gray disabled:cursor-not-allowed",children:l?" Generating...":" Generate Image"}),d&&o.jsx("p",{className:"text-sm text-red-500",children:d}),o.jsx(vz,{})]}),o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray min-h-[400px] flex flex-col items-center justify-center",children:[o.jsxs("div",{className:"flex justify-between items-center w-full mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:"Your Generated Image"}),a&&o.jsx("button",{onClick:()=>L(a,"marketing-asset.png"),className:"bg-brand-blue text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition text-sm",children:" Download"})]}),l?o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-red mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Creating your marketing asset..."})]}):a?o.jsx("img",{src:a,alt:t,className:"max-w-full max-h-[500px] rounded-lg shadow-lg"}):o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Your generated image will appear here."}),o.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Select a template or enter a custom prompt to get started"})]})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:"Edit an Image"}),o.jsx("input",{type:"file",ref:q,onChange:ve,accept:"image/*",className:"hidden"}),o.jsx("button",{onClick:()=>{var O;return(O=q.current)==null?void 0:O.click()},className:"text-xs bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300 font-bold py-1 px-3 rounded-md hover:bg-gray-300 dark:hover:bg-brand-gray/50 transition",children:" Upload Image"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{htmlFor:"edit-prompt",className:"block text-sm font-bold text-gray-600 dark:text-gray-300",children:"Edit Prompt"}),o.jsx("textarea",{id:"edit-prompt",value:$,onChange:O=>H(O.target.value),rows:3,className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white",placeholder:"e.g., make the background more vibrant"}),o.jsx("button",{onClick:X,disabled:z||!I,className:"w-full bg-brand-blue text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition disabled:bg-brand-gray",children:z?"Editing...":" Apply Edit"}),pe&&o.jsx("p",{className:"text-sm text-red-500",children:pe})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[150px] bg-brand-light-bg dark:bg-brand-ink rounded-lg p-2",children:[I&&!V&&o.jsx("img",{src:I,alt:"Image to edit",className:"max-w-full max-h-[200px] rounded-lg mb-2"}),z?o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-blue"}):V?o.jsxs("div",{className:"space-y-2",children:[o.jsx("img",{src:V,alt:$,className:"max-w-full max-h-[200px] rounded-lg"}),o.jsx("button",{onClick:()=>L(V,"edited-asset.png"),className:"w-full bg-brand-lime text-brand-ink font-bold py-1 px-3 rounded-md hover:bg-green-400 transition text-xs",children:" Download Edited"})]}):I?null:o.jsx("p",{className:"text-gray-500 text-center text-sm",children:"Upload or generate an image to start editing."})]})]})]})]})]})]})},_z=["Welcome Email","Business Proposal","Service Contract","Anniversary/Birthday Message","Sales Email Sequence (3 emails)","Website Landing Page Copy","LinkedIn Post","New Product Introduction","Mastermind Group Invitation","Company Newsletter","Lesson Outline","Checklist"],kz=({selectedTemplate:t,setSelectedTemplate:e})=>o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:"CONTENT TEMPLATES"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Select a Template"}),o.jsx("select",{value:t,onChange:n=>e(n.target.value),className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",children:_z.map(n=>o.jsx("option",{value:n,children:n},n))})]}),o.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:"Select a template to see the required fields."})]})]}),Sg={"Welcome Email":[{label:"Client Name",name:"clientName",placeholder:"Jane Doe"},{label:"Your Company Name",name:"companyName",placeholder:"Acme Inc."},{label:"Key Service/Product",name:"service",placeholder:"our premium marketing package"}],"Business Proposal":[{label:"Client Name",name:"clientName",placeholder:"John Smith"},{label:"Project Name",name:"projectName",placeholder:"Website Redesign"},{label:"Key Objective",name:"objective",placeholder:"Increase online leads by 30%"},{label:"Total Price",name:"price",placeholder:"$5,000"}],"Service Contract":[{label:"Client Name",name:"clientName",placeholder:"Innovate Corp"},{label:"Service Provided",name:"service",placeholder:"Monthly social media management"},{label:"Term Length",name:"term",placeholder:"12 months"},{label:"Monthly Fee",name:"fee",placeholder:"$1,500"}],"LinkedIn Post":[{label:"Topic",name:"topic",placeholder:"The importance of follow-up in sales"},{label:"Key Takeaway",name:"takeaway",placeholder:"Consistency is more important than perfection."},{label:"Call to Action",name:"cta",placeholder:"What's your best follow-up tip?"}],"Anniversary/Birthday Message":[{label:"Client Name",name:"clientName",placeholder:"Susan"},{label:"Occasion",name:"occasion",placeholder:"Work Anniversary"},{label:"Years",name:"years",placeholder:"3"}],"Sales Email Sequence (3 emails)":[{label:"Prospect Name",name:"prospectName",placeholder:"David"},{label:"Your Product/Service",name:"product",placeholder:"our automated CRM"},{label:"Key Pain Point",name:"painPoint",placeholder:"spending too much time on data entry"}],"Website Landing Page Copy":[{label:"Product Name",name:"productName",placeholder:"ConnectSphere CRM"},{label:"Target Audience",name:"audience",placeholder:"Small business owners"},{label:"Main Benefit",name:"benefit",placeholder:"Saves 10+ hours per week"}],"New Product Introduction":[{label:"Product Name",name:"productName",placeholder:"InnovateX"},{label:"Key Feature",name:"feature",placeholder:"AI-powered predictive analysis"},{label:"Target Market",name:"market",placeholder:"Enterprise-level sales teams"}]},Nz=["Mastermind Group Invitation","Company Newsletter","Lesson Outline","Checklist"],Cz=t=>{switch(t){case"Mastermind Group Invitation":return"Describe who the mastermind is for, the main promise, how often you meet, what topics you cover, and the tone you want (casual, elite, faith-based, etc.).";case"Company Newsletter":return"Describe this issue's focus: your audience, main theme, key company updates or wins, and any important calls to action or offers you want included.";case"Lesson Outline":return"Describe the lesson topic, audience (e.g., sales team, congregation, youth), time length, key points or scriptures, and the main outcome you want for your listeners.";case"Checklist":return'Describe what the checklist should cover (e.g., sermon prep, public talk, sales presentation, home inspection, ministry event), the setting, and what "done" should look like.';default:return"Add any details that will help the AI create exactly what you have in mind."}},Ez=()=>{const[t,e]=_.useState("Welcome Email"),[n,r]=_.useState({}),[a,i]=_.useState(""),[l,u]=_.useState(""),[d,h]=_.useState(!1),[m,g]=_.useState(null),[b,v]=_.useState([]),[k,C]=_.useState(!1),[N,T]=_.useState(""),[R,E]=_.useState(new Date),[P,j]=_.useState(new Set),[I,D]=_.useState(!1);_.useEffect(()=>{$()},[]);const $=async()=>{D(!0);try{const{data:{user:Y}}=await Xt.auth.getUser();if(!Y)return;const{data:q,error:B}=await Xt.from("saved_ai_content").select("*").eq("user_id",Y.id).order("created_at",{ascending:!1});if(B)throw B;if(q){v(q.map(X=>({...X,isExpanded:!1})));const ae=new Set(q.map(X=>X.content_date));j(ae)}}catch(Y){console.error("Error loading saved content:",Y)}finally{D(!1)}},H=async()=>{h(!0),g(null);try{const Y=await R8(t,{...n,description:a});u(Y)}catch(Y){g("Failed to generate content. Please try again."),console.error(Y)}finally{h(!1)}},z=async()=>{if(l)try{const{data:{user:Y}}=await Xt.auth.getUser();if(!Y){alert("Please log in to save content");return}const{data:q}=await Xt.from("users").select("company_id").eq("id",Y.id).single();if(!(q!=null&&q.company_id)){alert("Company ID not found");return}const B=l.substring(0,60)+(l.length>60?"...":""),{error:ae}=await Xt.from("saved_ai_content").insert({user_id:Y.id,company_id:q.company_id,content_date:new Date().toISOString().split("T")[0],template_type:t,title:B,content_text:l,tags:[t]});if(ae)throw ae;alert("Content saved successfully!"),await $()}catch(Y){console.error("Error saving content:",Y),alert("Failed to save content")}},F=async Y=>{if(confirm("Delete this saved content?"))try{const{error:q}=await Xt.from("saved_ai_content").delete().eq("id",Y);if(q)throw q;await $()}catch(q){console.error("Error deleting content:",q),alert("Failed to delete content")}},V=Y=>{v(q=>q.map(B=>B.id===Y?{...B,isExpanded:!B.isExpanded}:B))},K=b.filter(Y=>{const q=N===""||Y.title.toLowerCase().includes(N.toLowerCase())||Y.template_type.toLowerCase().includes(N.toLowerCase())||Y.content_text.toLowerCase().includes(N.toLowerCase()),B=R.toISOString().split("T")[0],ae=Y.content_date===B;return q&&ae}),pe=()=>{const Y=R.getFullYear(),q=R.getMonth(),B=new Date(Y,q,1),X=new Date(Y,q+1,0).getDate(),ve=B.getDay(),L=[];for(let O=0;O<ve;O++)L.push(o.jsx("div",{className:"h-8"},`empty-${O}`));for(let O=1;O<=X;O++){const Z=`${Y}-${String(q+1).padStart(2,"0")}-${String(O).padStart(2,"0")}`,U=P.has(Z),J=R.getDate()===O;L.push(o.jsxs("button",{onClick:()=>E(new Date(Y,q,O)),className:`h-8 w-8 rounded-full flex items-center justify-center text-sm relative
                        ${J?"bg-blue-500 text-white":"hover:bg-gray-100"}
                        ${U?"font-bold":""}`,children:[O,U&&o.jsx("span",{className:"absolute bottom-0 w-1 h-1 bg-blue-500 rounded-full"})]},O))}return o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("button",{onClick:()=>E(new Date(Y,q-1,1)),className:"text-gray-600 hover:text-gray-900",children:""}),o.jsx("div",{className:"font-semibold",children:R.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:()=>E(new Date(Y,q+1,1)),className:"text-gray-600 hover:text-gray-900",children:""})]}),o.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-gray-500 mb-2",children:[o.jsx("div",{children:"S"}),o.jsx("div",{children:"M"}),o.jsx("div",{children:"T"}),o.jsx("div",{children:"W"}),o.jsx("div",{children:"T"}),o.jsx("div",{children:"F"}),o.jsx("div",{children:"S"})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:L})]})};return o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"flex gap-6",children:[o.jsxs("div",{className:"w-64 flex-shrink-0 space-y-4",children:[o.jsx(kz,{selectedTemplate:t,onSelectTemplate:e}),o.jsx("button",{onClick:()=>C(!k),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition",children:k?"Generate New":`Saved Content (${b.length})`}),k&&o.jsxs(o.Fragment,{children:[pe(),o.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:o.jsx("input",{type:"text",placeholder:"Search content...",value:N,onChange:Y=>T(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})})]})]}),o.jsx("div",{className:"flex-1",children:k?o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Saved Content for ",R.toLocaleDateString()]}),I?o.jsx("div",{children:"Loading..."}):K.length===0?o.jsx("div",{className:"text-gray-500",children:"No saved content for this date"}):o.jsx("div",{className:"space-y-3",children:K.map(Y=>o.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("button",{onClick:()=>V(Y.id),className:"flex items-center gap-2 text-left w-full",children:[o.jsx("span",{children:Y.isExpanded?"":""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:Y.title}),o.jsxs("div",{className:"text-sm text-gray-500",children:[Y.template_type,"  ",new Date(Y.created_at).toLocaleTimeString()]})]})]}),Y.isExpanded&&o.jsx("div",{className:"mt-3 pl-6 max-h-64 overflow-y-auto whitespace-pre-wrap text-sm",children:Y.content_text})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>navigator.clipboard.writeText(Y.content_text),className:"text-blue-500 hover:text-blue-700 text-sm",children:"Copy"}),o.jsx("button",{onClick:()=>F(Y.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Delete"})]})]})},Y.id))})]}):o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"CONTENT TEMPLATES"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select a Template"}),o.jsxs("select",{value:t,onChange:Y=>e(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[Object.keys(Sg).map(Y=>o.jsx("option",{value:Y,children:Y},Y)),Nz.map(Y=>o.jsx("option",{value:Y,children:Y},Y))]})]}),Sg[t]?o.jsx("div",{className:"space-y-4",children:Sg[t].map(Y=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:Y.label}),o.jsx("input",{type:"text",placeholder:Y.placeholder,value:n[Y.name]||"",onChange:q=>r({...n,[Y.name]:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]},Y.name))}):o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description of what to create"}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Cz(t)}),o.jsx("textarea",{value:a,onChange:Y=>i(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg h-32"})]}),o.jsx("button",{onClick:H,disabled:d,className:"w-full mt-4 bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 disabled:bg-gray-400",children:d?"Generating...":"Generate Content"}),m&&o.jsx("div",{className:"mt-4 text-red-500",children:m}),l&&o.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("h3",{className:"font-semibold",children:"Generated Content:"}),o.jsxs("div",{className:"space-x-2",children:[o.jsx("button",{onClick:()=>navigator.clipboard.writeText(l),className:"text-blue-500 hover:text-blue-700",children:"Copy"}),o.jsx("button",{onClick:z,className:"text-green-500 hover:text-green-700",children:"Save"})]})]}),o.jsx("div",{className:"whitespace-pre-wrap",children:l})]})]})})]})})},Tz=["Tony Robbins","Jim Rohn","Zig Ziglar","Brian Tracy","Napoleon Hill"],Az=["John Wooden","Phil Jackson","Nick Saban"],jz=({onSaveQuote:t,savedQuotes:e})=>{const[n,r]=_.useState("Tony Robbins"),[a,i]=_.useState(""),[l,u]=_.useState([]),[d,h]=_.useState(!1),[m,g]=_.useState(null),b=new Set(e.map(N=>N.text)),v=async N=>{if(N){h(!0),g(null),u([]);try{const T=await M8(N);u(T)}catch{g("Failed to fetch quotes. Please try again.")}finally{h(!1)}}};_.useEffect(()=>{v(n)},[n]);const k=()=>{r(""),v(a)},C=N=>{N.key==="Enter"&&k()};return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:"WORDS OF WISDOM"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"quote-select",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Select an Influencer"}),o.jsxs("select",{id:"quote-select",value:n,onChange:N=>{i(""),r(N.target.value)},className:"w-full bg-brand-light-bg dark:bg-brand-gray/50 border border-brand-light-border dark:border-brand-gray rounded-md p-2 text-sm text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",children:[o.jsx("option",{value:"",disabled:!0,children:"-- Select --"}),o.jsx("optgroup",{label:"Business Masterminds",children:Tz.map(N=>o.jsx("option",{value:N,children:N},N))}),o.jsx("optgroup",{label:"Legendary Coaches",children:Az.map(N=>o.jsx("option",{value:N,children:N},N))})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:a,onChange:N=>i(N.target.value),onKeyPress:C,placeholder:"Or type an influencer's name...",className:"flex-grow bg-transparent border-b border-dashed border-brand-light-border dark:border-brand-gray text-brand-light-text dark:text-white text-sm p-1 focus:outline-none focus:border-brand-blue focus:border-solid"}),o.jsx("button",{onClick:k,className:"text-xs bg-brand-blue text-white font-bold py-1 px-3 rounded-md hover:bg-blue-700 transition",children:"Find"})]}),o.jsxs("div",{className:"p-2 bg-brand-light-bg dark:bg-brand-gray/50 rounded-lg min-h-[250px] max-h-[400px] overflow-y-auto flex flex-col",children:[d&&o.jsx("div",{className:"flex-grow flex justify-center items-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-red"})}),m&&!d&&o.jsx("div",{className:"flex-grow flex justify-center items-center text-red-500 text-sm",children:m}),!d&&!m&&l.length>0&&o.jsx("div",{className:"space-y-4",children:l.map((N,T)=>o.jsx("div",{className:"p-3 border-b border-brand-light-border dark:border-brand-gray last:border-b-0",children:o.jsxs("blockquote",{className:"flex items-start gap-2",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsxs("p",{className:"italic text-sm text-brand-light-text dark:text-gray-300",children:['"',N.text,'"']}),o.jsxs("cite",{className:"block text-right not-italic mt-1 font-semibold text-xs text-gray-500 dark:text-gray-400",children:["- ",N.author]})]}),o.jsx("button",{onClick:()=>t(N),disabled:b.has(N.text),className:"p-1 rounded-full text-gray-400 disabled:text-brand-lime disabled:cursor-not-allowed hover:bg-gray-300 dark:hover:bg-brand-gray",title:b.has(N.text)?"Saved":"Save Quote",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-3.13L5 18V4z"})})})]})},T))}),!d&&!m&&l.length===0&&o.jsx("div",{className:"flex-grow flex justify-center items-center text-gray-500 text-sm",children:"Select or search for an influencer to see their quotes."})]})]})]})},Pz=({savedQuotes:t,onSaveQuote:e,onRemoveQuote:n})=>{const[r,a]=_.useState(""),[i,l]=_.useState(""),[u,d]=_.useState(null),[h,m]=_.useState(""),[g,b]=_.useState(""),v=()=>{r.trim()&&i.trim()?(e({text:r,author:i}),a(""),l("")):alert("Please fill in both the quote and the author.")},k=async E=>{const P=`"${E.text}"

- ${E.author}`;try{await navigator.clipboard.writeText(P),alert("Quote copied to clipboard! You can now paste it anywhere.")}catch{const I=document.createElement("textarea");I.value=P,I.style.position="fixed",I.style.opacity="0",document.body.appendChild(I),I.select();try{document.execCommand("copy"),alert("Quote copied to clipboard! You can now paste it anywhere.")}catch{alert("Failed to copy quote. Please select and copy manually.")}document.body.removeChild(I)}},C=E=>{d(E.id),m(E.text),b(E.author)},N=E=>{h.trim()&&g.trim()?(n(E),e({text:h,author:g}),d(null),m(""),b("")):alert("Please fill in both the quote and the author.")},T=()=>{d(null),m(""),b("")},R=[...t].sort((E,P)=>new Date(P.savedAt||0).getTime()-new Date(E.savedAt||0).getTime());return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 bg-brand-gray/80 text-white p-2 rounded text-center",children:"MY SAVED QUOTES"}),o.jsxs("div",{className:"mb-6 p-4 bg-brand-light-bg dark:bg-brand-gray/20 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 mb-2",children:"Add a Custom Quote"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("textarea",{value:r,onChange:E=>a(E.target.value),placeholder:"The quote that inspired you...",rows:2,className:"w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray p-1 focus:outline-none focus:border-brand-blue dark:text-white"}),o.jsx("input",{type:"text",placeholder:"Author or Source",value:i,onChange:E=>l(E.target.value),className:"w-full bg-transparent border-b-2 border-brand-light-border dark:border-brand-gray p-1 focus:outline-none focus:border-brand-blue dark:text-white"}),o.jsx("button",{onClick:v,className:"w-full bg-brand-lime text-brand-ink font-bold py-2 px-4 rounded-lg hover:bg-green-400 transition text-sm",children:"Save My Quote"})]})]}),t.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[60vh] overflow-y-auto pr-2",children:R.map(E=>o.jsx("div",{className:"bg-brand-light-bg dark:bg-brand-gray/50 p-4 rounded-md flex flex-col justify-between shadow-sm",children:u===E.id?o.jsxs("div",{className:"space-y-2",children:[o.jsx("textarea",{value:h,onChange:P=>m(P.target.value),rows:3,className:"w-full bg-white dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray p-2 rounded focus:outline-none focus:border-brand-blue dark:text-white text-sm"}),o.jsx("input",{type:"text",value:g,onChange:P=>b(P.target.value),className:"w-full bg-white dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray p-2 rounded focus:outline-none focus:border-brand-blue dark:text-white text-sm"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:T,className:"px-3 py-1 text-sm bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"}),o.jsx("button",{onClick:()=>N(E.id),className:"px-3 py-1 text-sm bg-brand-lime text-brand-ink font-bold rounded hover:bg-green-400",children:"Save"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("blockquote",{className:"flex-grow",children:[o.jsxs("p",{className:"italic text-sm text-brand-light-text dark:text-gray-300",children:['"',E.text,'"']}),o.jsxs("cite",{className:"block text-right not-italic mt-2 font-semibold text-xs text-gray-500 dark:text-gray-400",children:["- ",E.author]})]}),o.jsx("div",{className:"flex justify-end items-center mt-3 pt-2 border-t border-brand-light-border dark:border-brand-gray",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>k(E),className:"p-1 rounded-full text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/20 transition-colors",title:"Copy to Clipboard",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),o.jsx("button",{onClick:()=>C(E),className:"p-1 rounded-full text-yellow-600 dark:text-yellow-400 hover:bg-yellow-100 dark:hover:bg-yellow-900/20 transition-colors",title:"Edit Quote",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("button",{onClick:()=>n(E.id),className:"p-1 rounded-full text-red-500 hover:bg-red-500/10",title:"Remove Quote",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]})})]})},E.id))}):o.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 py-4",children:"Your saved quotes will appear here. Click the bookmark icon on a quote to save it."})]})},Iz=({isOpen:t,onClose:e,onConfirm:n,actionItemText:r})=>{const[a,i]=_.useState(30),l=[{value:1,label:"1 Day",description:"One-time task"},{value:3,label:"3 Days",description:"Quick sprint"},{value:7,label:"7 Days",description:"Weekly focus"},{value:14,label:"14 Days",description:"Two-week challenge"},{value:30,label:"30 Days",description:"Build the habit (Recommended)"}],u=()=>{n(a),e()};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-brand-navy rounded-xl shadow-2xl max-w-lg w-full p-6 border border-gray-200 dark:border-brand-gray",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white mb-2",children:"Add to Daily Targets"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"How many days should this action item appear in your targets?"})]}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-brand-red dark:hover:text-brand-red text-2xl font-bold",children:""})]}),o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg p-4 mb-6",children:[o.jsx("p",{className:"text-sm font-bold text-purple-900 dark:text-purple-300 mb-1",children:"Action Item:"}),o.jsx("p",{className:"text-brand-light-text dark:text-white",children:r})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsx("label",{className:"block text-sm font-bold text-brand-light-text dark:text-white mb-3",children:"Select Duration:"}),l.map(d=>o.jsx("button",{onClick:()=>i(d.value),className:`w-full p-4 rounded-lg border-2 text-left transition-all ${a===d.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/30 dark:border-purple-500":"border-gray-200 dark:border-brand-gray bg-white dark:bg-brand-ink hover:border-purple-300 dark:hover:border-purple-700"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white",children:d.label}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d.description})]}),o.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${a===d.value?"border-purple-600 bg-purple-600":"border-gray-300 dark:border-brand-gray"}`,children:a===d.value&&o.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},d.value))]}),a===30&&o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-3 mb-6",children:o.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[o.jsx("strong",{children:" Excellent choice!"})," Consistency over 30 days builds lasting habits and drives real results."]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"flex-1 px-6 py-3 border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white hover:bg-gray-100 dark:hover:bg-brand-gray transition font-bold",children:"Cancel"}),o.jsxs("button",{onClick:u,className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition font-bold shadow-lg",children:["Add to Next ",a," ",a===1?"Day":"Days"]})]}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 text-center",children:["This will add the action item to your Top 6 Daily Targets for the next ",a," ",a===1?"day":"days"]})]})}):null},Rz=({userId:t,companyId:e,notes:n,onCreateNote:r,onUpdateNote:a,onDeleteNote:i,onAddToTargets:l})=>{const[u,d]=_.useState(new Date),[h,m]=_.useState(""),[g,b]=_.useState(!1),[v,k]=_.useState(null),[C,N]=_.useState(!1),[T,R]=_.useState(null),[E,P]=_.useState(null),[j,I]=_.useState(""),[D,$]=_.useState(""),[H,z]=_.useState(""),[F,V]=_.useState(""),[K,pe]=_.useState([]),[Y,q]=_.useState(""),[B,ae]=_.useState([]),[X,ve]=_.useState(""),L=_.useMemo(()=>n.map(ce=>ce.session_date),[n]),O=_.useMemo(()=>{if(h)return n.filter(Se=>{var je;return Se.title.toLowerCase().includes(h.toLowerCase())||((je=Se.topic_focus)==null?void 0:je.toLowerCase().includes(h.toLowerCase()))||Se.key_takeaways.toLowerCase().includes(h.toLowerCase())});const ce=u.toISOString().split("T")[0];return n.filter(Se=>Se.session_date===ce)},[n,u,h]),Z=ce=>{b(!0),k(ce.id),I(ce.topic_focus||""),$(ce.title),z(ce.topic_focus||""),V(ce.key_takeaways),pe(ce.action_items||[]),ae(ce.tags||[])},U=()=>{b(!1),k(null),I(""),$(""),z(""),V(""),pe([]),q(""),ae([]),ve("")},J=async()=>{if(!D||!F){alert("Please fill in Title and Key Takeaways");return}const ce={user_id:t,company_id:e,session_date:u.toISOString().split("T")[0],title:D,topic_focus:j,key_takeaways:F,action_items:K,tags:B,resources:[]};try{v?await a(v,ce):await r(ce),U()}catch(Se){console.error("Error saving note:",Se),alert("Failed to save note")}},oe=()=>{Y.trim()&&(pe([...K,{text:Y,completed:!1,added_to_targets:!1}]),q(""))},me=ce=>{pe(K.filter((Se,je)=>je!==ce))},xe=ce=>{const Se=[...K];Se[ce].completed=!Se[ce].completed,pe(Se)},Q=()=>{!X.trim()||B.includes(X.trim())||(ae([...B,X.trim()]),ve(""))},we=ce=>{ae(B.filter(Se=>Se!==ce))},_e=(ce,Se,je)=>{R({text:ce.text,noteDate:Se,source:je}),P(null),N(!0)},ie=(ce,Se,je)=>{const Ye=ce.filter(Fe=>!Fe.added_to_targets);if(Ye.length===0){alert("All action items have already been added to targets!");return}P({items:Ye,noteDate:Se,source:je}),R(null),N(!0)},Le=async ce=>{if(E)try{let Se=0;for(const je of E.items)await l(je.text,E.noteDate,ce,E.source),Se++;alert(` ${Se} action ${Se===1?"item":"items"} added to Implement Now for the next ${ce} ${ce===1?"day":"days"}!`),P(null)}catch(Se){console.error("Error adding to targets:",Se),alert("Failed to add some items to targets")}else if(T)try{await l(T.text,T.noteDate,ce,T.source),R(null)}catch(Se){console.error("Error adding to targets:",Se),alert("Failed to add to targets")}};return o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[o.jsx(Wi,{selectedDate:u,onDateChange:d,datesWithActivity:L}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:"Search Notes"}),o.jsx("input",{type:"text",placeholder:"Search by keyword...",value:h,onChange:ce=>m(ce.target.value),className:"w-full px-3 py-2 bg-white dark:bg-brand-ink border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue"}),h&&o.jsx("button",{onClick:()=>m(""),className:"mt-2 text-sm text-brand-blue hover:underline",children:"Clear search"})]}),!g&&o.jsx("button",{onClick:()=>b(!0),className:"w-full bg-brand-lime text-brand-ink font-bold py-3 px-4 rounded-lg hover:bg-green-400 transition",children:"+ New Coaching Note"})]}),o.jsx("div",{className:"lg:col-span-9",children:g?o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:v?"Edit Coaching Note":"New Coaching Note"}),o.jsx("button",{onClick:U,className:"text-gray-500 dark:text-gray-400 hover:text-brand-red dark:hover:text-brand-red",children:" Cancel"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-brand-light-text dark:text-white mb-2",children:"Source"}),o.jsx("input",{type:"text",placeholder:"e.g., Coaching Call with John, Book: 10X Rule, Podcast: Grant Cardone",value:j,onChange:ce=>I(ce.target.value),className:"w-full px-3 py-2 bg-white dark:bg-brand-ink border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-brand-light-text dark:text-white mb-2",children:"Session Title *"}),o.jsx("input",{type:"text",placeholder:"e.g., Cold Calling Mastery Session",value:D,onChange:ce=>$(ce.target.value),className:"w-full px-3 py-2 bg-white dark:bg-brand-ink border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-brand-light-text dark:text-white mb-2",children:"Topic / Focus"}),o.jsx("input",{type:"text",placeholder:"e.g., Objection Handling, Follow-up Strategies",value:H,onChange:ce=>z(ce.target.value),className:"w-full px-3 py-2 bg-white dark:bg-brand-ink border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-brand-light-text dark:text-white mb-2",children:"Key Insights & Takeaways *"}),o.jsx("textarea",{placeholder:"What did you learn? What insights stood out? What strategies will you implement?",value:F,onChange:ce=>V(ce.target.value),rows:8,className:"w-full px-3 py-2 bg-white dark:bg-brand-ink border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white resize-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-brand-light-text dark:text-white mb-2",children:"Action Items (Speed of Implementation!)"}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("input",{type:"text",placeholder:"Add an action item...",value:Y,onChange:ce=>q(ce.target.value),onKeyPress:ce=>ce.key==="Enter"&&oe(),className:"flex-1 px-3 py-2 bg-white dark:bg-brand-ink border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white"}),o.jsx("button",{onClick:oe,className:"bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:"Add"})]}),K.length>0&&o.jsx("ul",{className:"space-y-2",children:K.map((ce,Se)=>o.jsxs("li",{className:"flex items-center gap-2 bg-gray-50 dark:bg-brand-ink p-2 rounded",children:[o.jsx("input",{type:"checkbox",checked:ce.completed,onChange:()=>xe(Se),className:"w-4 h-4"}),o.jsx("span",{className:`flex-1 text-sm ${ce.completed?"line-through text-gray-500":"text-brand-light-text dark:text-white"}`,children:ce.text}),o.jsx("button",{onClick:()=>me(Se),className:"text-brand-red hover:text-red-700 text-sm",children:"Remove"})]},Se))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-brand-light-text dark:text-white mb-2",children:"Tags"}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("input",{type:"text",placeholder:"Add a tag (e.g., Sales, Mindset)",value:X,onChange:ce=>ve(ce.target.value),onKeyPress:ce=>ce.key==="Enter"&&Q(),className:"flex-1 px-3 py-2 bg-white dark:bg-brand-ink border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white"}),o.jsx("button",{onClick:Q,className:"bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:"Add"})]}),B.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:B.map((ce,Se)=>o.jsxs("span",{className:"bg-brand-blue text-white px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[ce,o.jsx("button",{onClick:()=>we(ce),className:"hover:text-brand-red",children:""})]},Se))})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:J,className:"flex-1 bg-brand-lime text-brand-ink font-bold py-3 px-6 rounded-lg hover:bg-green-400 transition",children:v?"Update Note":"Save Note"}),o.jsx("button",{onClick:U,className:"px-6 py-3 border border-gray-300 dark:border-brand-gray rounded-lg text-brand-light-text dark:text-white hover:bg-gray-100 dark:hover:bg-brand-gray transition",children:"Cancel"})]})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:h?`Search Results (${O.length})`:`Notes for ${u.toLocaleDateString()}`})}),O.length===0?o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-12 rounded-lg border border-brand-light-border dark:border-brand-gray text-center",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:h?"No notes found matching your search.":"No coaching notes for this date."}),o.jsx("button",{onClick:()=>b(!0),className:"mt-4 bg-brand-lime text-brand-ink font-bold py-2 px-6 rounded-lg hover:bg-green-400 transition",children:"+ Create First Note"})]}):O.map(ce=>o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-1",children:ce.title}),ce.topic_focus&&o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Source: ",ce.topic_focus]}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:new Date(ce.session_date).toLocaleDateString()})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Z(ce),className:"text-brand-blue hover:text-blue-700 text-sm font-bold",children:"Edit"}),o.jsx("button",{onClick:()=>{confirm("Delete this note?")&&i(ce.id)},className:"text-brand-red hover:text-red-700 text-sm font-bold",children:"Delete"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-bold text-brand-light-text dark:text-white mb-2",children:"Key Takeaways:"}),o.jsx("p",{className:"text-brand-light-text dark:text-gray-300 whitespace-pre-wrap",children:ce.key_takeaways})]}),ce.action_items&&ce.action_items.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"text-sm font-bold text-brand-light-text dark:text-white",children:"Action Items:"}),ce.action_items.some(Se=>!Se.added_to_targets)&&o.jsx("button",{onClick:()=>ie(ce.action_items,ce.session_date,ce.topic_focus),className:"text-xs bg-purple-600 text-white px-4 py-1.5 rounded-lg hover:bg-purple-700 transition font-bold shadow-md",children:"Add All to Targets"})]}),o.jsx("ul",{className:"space-y-2",children:ce.action_items.map((Se,je)=>o.jsxs("li",{className:"flex items-center gap-3 text-sm",children:[o.jsxs("span",{className:Se.completed?"text-gray-500 line-through":"text-brand-light-text dark:text-gray-300",children:[" ",Se.text]}),!Se.added_to_targets&&o.jsx("button",{onClick:()=>_e(Se,ce.session_date,ce.topic_focus),className:"text-xs bg-purple-600 text-white px-3 py-1 rounded-lg hover:bg-purple-700 transition font-bold shadow-md",children:"Add to Targets"}),Se.added_to_targets&&o.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Added"})]},je))})]}),ce.tags&&ce.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:ce.tags.map((Se,je)=>o.jsx("span",{className:"bg-gray-200 dark:bg-brand-gray text-brand-light-text dark:text-white px-2 py-1 rounded text-xs",children:Se},je))})]},ce.id))]})}),o.jsx(Iz,{isOpen:C,onClose:()=>{N(!1),R(null),P(null)},onConfirm:Le,actionItemText:E?`${E.items.length} action ${E.items.length===1?"item":"items"}`:(T==null?void 0:T.text)||""})]})};async function Mz(t){const{data:e,error:n}=await Ee.from("coaching_notes").select("*").eq("user_id",t).order("session_date",{ascending:!1});if(n)throw console.error("Error fetching coaching notes:",n),n;return e||[]}async function Dz(t){const{data:e,error:n}=await Ee.from("coaching_notes").insert({user_id:t.user_id,company_id:t.company_id,session_date:t.session_date,title:t.title,topic_focus:t.topic_focus,key_takeaways:t.key_takeaways,action_items:t.action_items,tags:t.tags,resources:t.resources}).select().single();if(n)throw console.error("Error creating coaching note:",n),n;return e}async function Oz(t,e){const{data:n,error:r}=await Ee.from("coaching_notes").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw console.error("Error updating coaching note:",r),r;return n}async function Lz(t){const{error:e}=await Ee.from("coaching_notes").delete().eq("id",t);if(e)throw console.error("Error deleting coaching note:",e),e}const Uz=({userId:t,companyId:e,savedQuotes:n=[],onSaveQuote:r,onRemoveQuote:a,onAddToTargets:i})=>{const[l,u]=_.useState([]),[d,h]=_.useState(!0);_.useEffect(()=>{m()},[t]);const m=async()=>{try{h(!0);const T=await Mz(t);u(T)}catch(T){console.error("Error loading coaching notes:",T)}finally{h(!1)}},g=async T=>{try{const R=await Dz(T);u([R,...l])}catch(R){throw console.error("Error creating note:",R),R}},b=async(T,R)=>{try{const E=await Oz(T,R);u(l.map(P=>P.id===T?E:P))}catch(E){throw console.error("Error updating note:",E),E}},v=async T=>{try{await Lz(T),u(l.filter(R=>R.id!==T))}catch(R){throw console.error("Error deleting note:",R),R}},k=async(T,R,E,P)=>{i?await i(T,R,E,P):alert(`Action item will be added to targets for ${E} ${E===1?"day":"days"} starting ${R}: ${T}`)},C=T=>{n.some(R=>R.text===T.text&&R.author===T.author)?alert("This quote is already in your saved list."):r&&r(T)};return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-gradient-to-br from-purple-600 via-purple-700 to-purple-800 dark:from-purple-700 dark:via-purple-800 dark:to-purple-900 rounded-2xl p-6 md:p-8 text-white shadow-2xl",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-black mb-3",children:"Coaching & Learning Hub"}),o.jsx("p",{className:"text-lg md:text-xl mb-2 text-purple-100",children:"Learn. Document. Implement. Repeat."}),o.jsx("p",{className:"text-base mb-6 text-purple-200",children:"Track your coaching sessions, capture key insights, and convert learnings into action"}),o.jsx("a",{href:"https://truexpanse.app.clientclub.net/communities/groups/massive-action-nation/home?invite=6942bb7b7b52699851bdbb0f",target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-transparent border-2 border-white hover:bg-black text-white font-black text-lg px-8 py-3 rounded-xl shadow-2xl transform hover:scale-105 transition-all duration-200",children:"Join Community "})]})}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white mb-2",children:"Coaching Notes & Journal"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Document your coaching sessions, capture key takeaways, and create action items for immediate implementation."})]}),d?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading notes..."})}):o.jsx(Rz,{userId:t,companyId:e,notes:l,onCreateNote:g,onUpdateNote:b,onDeleteNote:v,onAddToTargets:k})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:"Daily Inspiration"}),o.jsx(jz,{onSaveQuote:C,savedQuotes:n})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:"Saved Quotes"}),o.jsx(Pz,{savedQuotes:n,onSaveQuote:C,onRemoveQuote:a})]})]})]})},Bz=({users:t,onViewUserTrends:e,onDeleteUser:n,companyId:r})=>{const[a,i]=_.useState(!1),[l,u]=_.useState(!1),d=()=>i(!0),h=async(g,b,v)=>{if(confirm(`Are you sure you want to delete ${b} (${v})?

This action cannot be undone.`))try{const k=await fetch("/.netlify/functions/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:g})}),C=await k.json();if(!k.ok)throw new Error(C.error||"Failed to delete user");alert(`${b} has been deleted successfully.`),n&&n(g),window.location.reload()}catch(k){alert("Failed to delete user: "+k.message)}},m=async g=>{var T;g.preventDefault(),u(!0);const b=g.currentTarget,v=b.name.value.trim(),k=b.email.value.trim().toLowerCase(),C=b.role.value||"Sales Rep",N=b.password.value||null;try{const{data:R,error:E}=await Xt.auth.signUp({email:k,password:N||void 0,options:{emailRedirectTo:window.location.origin,data:{full_name:v,role:C}}});if(E)throw E;if(R.user&&!((T=R.user.identities)!=null&&T.length))throw new Error("User already exists");R.user&&await Xt.from("users").upsert({id:R.user.id,name:v,email:k,role:C,status:"Active",company_id:r}),alert(`Success!

\${name} has been invited.

`+(N?"They can log in immediately.":"They will receive an email to set their password.")),i(!1),window.location.reload()}catch(R){alert("Failed to add user: "+R.message)}finally{u(!1)}};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-black",children:"Team Control Panel"}),o.jsx("button",{onClick:d,className:"bg-brand-ink hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-xl shadow-lg transition",children:"+ Add User"})]}),o.jsx("div",{className:"bg-white dark:bg-brand-navy rounded-xl shadow overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-brand-gray/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left",children:"Name"}),o.jsx("th",{className:"px-6 py-4 text-left",children:"Email"}),o.jsx("th",{className:"px-6 py-4 text-left",children:"Role"}),o.jsx("th",{className:"px-6 py-4 text-center",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-center",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(g=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 font-medium",children:g.name}),o.jsx("td",{className:"px-6 py-4",children:g.email}),o.jsx("td",{className:"px-6 py-4",children:g.role}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full \${
                          user.status === 'Active'
                            ? 'bg-green-100 text-green-800'
                            : 'bg-gray-100 text-gray-600'
                        }`,children:g.status})}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-4",children:[o.jsx("button",{onClick:()=>e(g.id),className:"text-brand-blue hover:underline text-sm",children:"View Trends"}),o.jsx("button",{onClick:()=>h(g.id,g.name,g.email),className:"text-red-600 hover:text-red-800 hover:underline text-sm font-medium",children:"Delete"})]})})]},g.id))})]})})})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:()=>i(!1),children:o.jsxs("div",{className:"bg-white dark:bg-brand-navy rounded-2xl p-8 max-w-md w-full shadow-2xl",onClick:g=>g.stopPropagation(),children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Add New Team Member"}),o.jsxs("form",{onSubmit:m,className:"space-y-5",children:[o.jsx("input",{name:"name",type:"text",placeholder:"Full Name",required:!0,className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-brand-blue outline-none"}),o.jsx("input",{name:"email",type:"email",placeholder:"Email",required:!0,className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-brand-blue outline-none"}),o.jsx("input",{name:"password",type:"text",placeholder:"Password (optional  auto-generated if blank)",className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-brand-blue outline-none"}),o.jsxs("select",{name:"role",defaultValue:"Sales Rep",className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-brand-blue outline-none",children:[o.jsx("option",{children:"Sales Rep"}),o.jsx("option",{children:"Manager"}),o.jsx("option",{children:"Admin"})]}),o.jsxs("div",{className:"flex gap-4 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>i(!1),disabled:l,className:"flex-1 py-3 border rounded-lg font-semibold",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:l,className:"flex-1 py-3 bg-brand-green hover:bg-green-700 text-white font-bold rounded-lg shadow-lg",children:l?"Adding...":"Add User"})]})]})]})})]})},$z=[{key:"revenue",label:"Revenue",color:"#10B981"},{key:"appointments",label:"Appointments",color:"#3B82F6"},{key:"calls",label:"Calls",color:"#8B5CF6"},{key:"leads",label:"Leads",color:"#F59E0B"},{key:"proposals",label:"Proposals",color:"#EC4899"}],qz=({activeMetrics:t,onToggle:e})=>o.jsx("div",{className:"flex flex-wrap gap-3 justify-center mb-6",children:$z.map(n=>{const r=t[n.key];return o.jsxs("button",{onClick:()=>e(n.key),className:`
              px-6 py-3 rounded-lg font-semibold transition-all duration-300
              ${r?"opacity-100 shadow-lg transform hover:scale-105":"opacity-40 hover:opacity-60"}
            `,style:{backgroundColor:r?n.color:"#CBD5E1",color:"white",border:`3px solid ${r?n.color:"transparent"}`},children:[r&&o.jsx("span",{className:"mr-2",children:""}),n.label]},n.key)})});function Yj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Yj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ct(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Yj(t))&&(r&&(r+=" "),r+=e);return r}var zz=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Db(t){if(typeof t!="string")return!1;var e=zz;return e.includes(t)}var Gz=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Jj(t){if(typeof t!="string")return!1;var e=Gz;return e.includes(t)}function Xj(t){return typeof t=="string"&&t.startsWith("data-")}function Zr(t){var e=Object.entries(t).filter(n=>{var[r]=n;return Jj(r)||Xj(r)});return Object.fromEntries(e)}function ih(t){if(t==null)return null;if(_.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Zr(e)}return typeof t=="object"&&!Array.isArray(t)?Zr(t):null}function rr(t){var e=Object.entries(t).filter(n=>{var[r]=n;return Jj(r)||Xj(r)||Db(r)});return Object.fromEntries(e)}function Fz(t){return t==null?null:_.isValidElement(t)?rr(t.props):typeof t=="object"&&!Array.isArray(t)?rr(t):null}var Hz=["children","width","height","viewBox","className","style","title","desc"];function _0(){return _0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_0.apply(null,arguments)}function Vz(t,e){if(t==null)return{};var n,r,a=Wz(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Wz(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ob=_.forwardRef((t,e)=>{var{children:n,width:r,height:a,viewBox:i,className:l,style:u,title:d,desc:h}=t,m=Vz(t,Hz),g=i||{width:r,height:a,x:0,y:0},b=Ct("recharts-surface",l);return _.createElement("svg",_0({},rr(m),{className:b,width:r,height:a,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),_.createElement("title",null,d),_.createElement("desc",null,h),n)}),Kz=["children","className"];function k0(){return k0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k0.apply(null,arguments)}function Yz(t,e){if(t==null)return{};var n,r,a=Jz(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Jz(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ea=_.forwardRef((t,e)=>{var{children:n,className:r}=t,a=Yz(t,Kz),i=Ct("recharts-layer",r);return _.createElement("g",k0({className:i},rr(a),{ref:e}),n)}),Lb=wA(),Qj=_.createContext(null),Xz=()=>_.useContext(Qj);function Lt(t){return function(){return t}}const Zj=Math.cos,lf=Math.sin,ma=Math.sqrt,cf=Math.PI,sh=2*cf,N0=Math.PI,C0=2*N0,ys=1e-6,Qz=C0-ys;function e2(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Zz(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return e2;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class eG{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?e2:Zz(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,l){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=r-e,h=a-n,m=l-e,g=u-n,b=m*m+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(b>ys)if(!(Math.abs(g*d-h*m)>ys)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-l,k=a-u,C=d*d+h*h,N=v*v+k*k,T=Math.sqrt(C),R=Math.sqrt(b),E=i*Math.tan((N0-Math.acos((C+b-N)/(2*T*R)))/2),P=E/R,j=E/T;Math.abs(P-1)>ys&&this._append`L${e+P*m},${n+P*g}`,this._append`A${i},${i},0,0,${+(g*v>m*k)},${this._x1=e+j*d},${this._y1=n+j*h}`}}arc(e,n,r,a,i,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(a),d=r*Math.sin(a),h=e+u,m=n+d,g=1^l,b=l?a-i:i-a;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>ys||Math.abs(this._y1-m)>ys)&&this._append`L${h},${m}`,r&&(b<0&&(b=b%C0+C0),b>Qz?this._append`A${r},${r},0,1,${g},${e-u},${n-d}A${r},${r},0,1,${g},${this._x1=h},${this._y1=m}`:b>ys&&this._append`A${r},${r},0,${+(b>=N0)},${g},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function Ub(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new eG(e)}function Bb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function t2(t){this._context=t}t2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function oh(t){return new t2(t)}function n2(t){return t[0]}function r2(t){return t[1]}function a2(t,e){var n=Lt(!0),r=null,a=oh,i=null,l=Ub(u);t=typeof t=="function"?t:t===void 0?n2:Lt(t),e=typeof e=="function"?e:e===void 0?r2:Lt(e);function u(d){var h,m=(d=Bb(d)).length,g,b=!1,v;for(r==null&&(i=a(v=l())),h=0;h<=m;++h)!(h<m&&n(g=d[h],h,d))===b&&((b=!b)?i.lineStart():i.lineEnd()),b&&i.point(+t(g,h,d),+e(g,h,d));if(v)return i=null,v+""||null}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:Lt(+d),u):t},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:Lt(+d),u):e},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:Lt(!!d),u):n},u.curve=function(d){return arguments.length?(a=d,r!=null&&(i=a(r)),u):a},u.context=function(d){return arguments.length?(d==null?r=i=null:i=a(r=d),u):r},u}function Rd(t,e,n){var r=null,a=Lt(!0),i=null,l=oh,u=null,d=Ub(h);t=typeof t=="function"?t:t===void 0?n2:Lt(+t),e=typeof e=="function"?e:Lt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?r2:Lt(+n);function h(g){var b,v,k,C=(g=Bb(g)).length,N,T=!1,R,E=new Array(C),P=new Array(C);for(i==null&&(u=l(R=d())),b=0;b<=C;++b){if(!(b<C&&a(N=g[b],b,g))===T)if(T=!T)v=b,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),k=b-1;k>=v;--k)u.point(E[k],P[k]);u.lineEnd(),u.areaEnd()}T&&(E[b]=+t(N,b,g),P[b]=+e(N,b,g),u.point(r?+r(N,b,g):E[b],n?+n(N,b,g):P[b]))}if(R)return u=null,R+""||null}function m(){return a2().defined(a).curve(l).context(i)}return h.x=function(g){return arguments.length?(t=typeof g=="function"?g:Lt(+g),r=null,h):t},h.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Lt(+g),h):t},h.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Lt(+g),h):r},h.y=function(g){return arguments.length?(e=typeof g=="function"?g:Lt(+g),n=null,h):e},h.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Lt(+g),h):e},h.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Lt(+g),h):n},h.lineX0=h.lineY0=function(){return m().x(t).y(e)},h.lineY1=function(){return m().x(t).y(n)},h.lineX1=function(){return m().x(r).y(e)},h.defined=function(g){return arguments.length?(a=typeof g=="function"?g:Lt(!!g),h):a},h.curve=function(g){return arguments.length?(l=g,i!=null&&(u=l(i)),h):l},h.context=function(g){return arguments.length?(g==null?i=u=null:u=l(i=g),h):i},h}class i2{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function tG(t){return new i2(t,!0)}function nG(t){return new i2(t,!1)}const $b={draw(t,e){const n=ma(e/cf);t.moveTo(n,0),t.arc(0,0,n,0,sh)}},rG={draw(t,e){const n=ma(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},s2=ma(1/3),aG=s2*2,iG={draw(t,e){const n=ma(e/aG),r=n*s2;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},sG={draw(t,e){const n=ma(e),r=-n/2;t.rect(r,r,n,n)}},oG=.8908130915292852,o2=lf(cf/10)/lf(7*cf/10),lG=lf(sh/10)*o2,cG=-Zj(sh/10)*o2,uG={draw(t,e){const n=ma(e*oG),r=lG*n,a=cG*n;t.moveTo(0,-n),t.lineTo(r,a);for(let i=1;i<5;++i){const l=sh*i/5,u=Zj(l),d=lf(l);t.lineTo(d*n,-u*n),t.lineTo(u*r-d*a,d*r+u*a)}t.closePath()}},_g=ma(3),dG={draw(t,e){const n=-ma(e/(_g*3));t.moveTo(0,n*2),t.lineTo(-_g*n,-n),t.lineTo(_g*n,-n),t.closePath()}},Fr=-.5,Hr=ma(3)/2,E0=1/ma(12),fG=(E0/2+1)*3,hG={draw(t,e){const n=ma(e/fG),r=n/2,a=n*E0,i=r,l=n*E0+n,u=-i,d=l;t.moveTo(r,a),t.lineTo(i,l),t.lineTo(u,d),t.lineTo(Fr*r-Hr*a,Hr*r+Fr*a),t.lineTo(Fr*i-Hr*l,Hr*i+Fr*l),t.lineTo(Fr*u-Hr*d,Hr*u+Fr*d),t.lineTo(Fr*r+Hr*a,Fr*a-Hr*r),t.lineTo(Fr*i+Hr*l,Fr*l-Hr*i),t.lineTo(Fr*u+Hr*d,Fr*d-Hr*u),t.closePath()}};function mG(t,e){let n=null,r=Ub(a);t=typeof t=="function"?t:Lt(t||$b),e=typeof e=="function"?e:Lt(e===void 0?64:+e);function a(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Lt(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Lt(+i),a):e},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function uf(){}function df(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function l2(t){this._context=t}l2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:df(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:df(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pG(t){return new l2(t)}function c2(t){this._context=t}c2.prototype={areaStart:uf,areaEnd:uf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:df(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gG(t){return new c2(t)}function u2(t){this._context=t}u2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:df(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yG(t){return new u2(t)}function d2(t){this._context=t}d2.prototype={areaStart:uf,areaEnd:uf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function bG(t){return new d2(t)}function _C(t){return t<0?-1:1}function kC(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),l=(n-t._y1)/(a||r<0&&-0),u=(i*a+l*r)/(r+a);return(_C(i)+_C(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function NC(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kg(t,e,n){var r=t._x0,a=t._y0,i=t._x1,l=t._y1,u=(i-r)/3;t._context.bezierCurveTo(r+u,a+u*e,i-u,l-u*n,i,l)}function ff(t){this._context=t}ff.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kg(this,this._t0,NC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kg(this,NC(this,n=kC(this,t,e)),n);break;default:kg(this,this._t0,n=kC(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function f2(t){this._context=new h2(t)}(f2.prototype=Object.create(ff.prototype)).point=function(t,e){ff.prototype.point.call(this,e,t)};function h2(t){this._context=t}h2.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,a,i){this._context.bezierCurveTo(e,t,r,n,i,a)}};function xG(t){return new ff(t)}function vG(t){return new f2(t)}function m2(t){this._context=t}m2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=CC(t),a=CC(e),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],t[l],e[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function CC(t){var e,n=t.length-1,r,a=new Array(n),i=new Array(n),l=new Array(n);for(a[0]=0,i[0]=2,l[0]=t[0]+2*t[1],e=1;e<n-1;++e)a[e]=1,i[e]=4,l[e]=4*t[e]+2*t[e+1];for(a[n-1]=2,i[n-1]=7,l[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=a[e]/i[e-1],i[e]-=r,l[e]-=r*l[e-1];for(a[n-1]=l[n-1]/i[n-1],e=n-2;e>=0;--e)a[e]=(l[e]-a[e+1])/i[e];for(i[n-1]=(t[n]+a[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function wG(t){return new m2(t)}function lh(t,e){this._context=t,this._t=e}lh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function SG(t){return new lh(t,.5)}function _G(t){return new lh(t,0)}function kG(t){return new lh(t,1)}function tl(t,e){if((l=t.length)>1)for(var n=1,r,a,i=t[e[0]],l,u=i.length;n<l;++n)for(a=i,i=t[e[n]],r=0;r<u;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function T0(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function NG(t,e){return t[e]}function CG(t){const e=[];return e.key=t,e}function EG(){var t=Lt([]),e=T0,n=tl,r=NG;function a(i){var l=Array.from(t.apply(this,arguments),CG),u,d=l.length,h=-1,m;for(const g of i)for(u=0,++h;u<d;++u)(l[u][h]=[0,+r(g,l[u].key,h,i)]).data=g;for(u=0,m=Bb(e(l));u<d;++u)l[m[u]].index=u;return n(l,m),l}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Lt(Array.from(i)),a):t},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:Lt(+i),a):r},a.order=function(i){return arguments.length?(e=i==null?T0:typeof i=="function"?i:Lt(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(n=i??tl,a):n},a}function TG(t,e){if((r=t.length)>0){for(var n,r,a=0,i=t[0].length,l;a<i;++a){for(l=n=0;n<r;++n)l+=t[n][a][1]||0;if(l)for(n=0;n<r;++n)t[n][a][1]/=l}tl(t,e)}}function AG(t,e){if((a=t.length)>0){for(var n=0,r=t[e[0]],a,i=r.length;n<i;++n){for(var l=0,u=0;l<a;++l)u+=t[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}tl(t,e)}}function jG(t,e){if(!(!((l=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var n=0,r=1,a,i,l;r<i;++r){for(var u=0,d=0,h=0;u<l;++u){for(var m=t[e[u]],g=m[r][1]||0,b=m[r-1][1]||0,v=(g-b)/2,k=0;k<u;++k){var C=t[e[k]],N=C[r][1]||0,T=C[r-1][1]||0;v+=N-T}d+=g,h+=v*g}a[r-1][1]+=a[r-1][0]=n,d&&(n-=h/d)}a[r-1][1]+=a[r-1][0]=n,tl(t,e)}}var Ng={},Cg={},EC;function PG(){return EC||(EC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Cg)),Cg}var Eg={},TC;function p2(){return TC||(TC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Eg)),Eg}var Tg={},AC;function qb(){return AC||(AC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(Tg)),Tg}var Ag={},jg={},jC;function IG(){return jC||(jC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(jg)),jg}var PC;function zb(){return PC||(PC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IG(),n=qb();function r(a){if(Array.isArray(a))return a.map(n.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const i=[],l=a.length;if(l===0)return i;let u=0,d="",h="",m=!1;for(a.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const g=a[u];h?g==="\\"&&u+1<l?(u++,d+=a[u]):g===h?h="":d+=g:m?g==='"'||g==="'"?h=g:g==="]"?(m=!1,i.push(d),d=""):d+=g:g==="["?(m=!0,d&&(i.push(d),d="")):g==="."?d&&(i.push(d),d=""):d+=g,u++}return d&&i.push(d),i}t.toPath=r})(Ag)),Ag}var IC;function Gb(){return IC||(IC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PG(),n=p2(),r=qb(),a=zb();function i(u,d,h){if(u==null)return h;switch(typeof d){case"string":{if(e.isUnsafeProperty(d))return h;const m=u[d];return m===void 0?n.isDeepKey(d)?i(u,a.toPath(d),h):h:m}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const m=u[d];return m===void 0?h:m}default:{if(Array.isArray(d))return l(u,d,h);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),e.isUnsafeProperty(d))return h;const m=u[d];return m===void 0?h:m}}}function l(u,d,h){if(d.length===0)return h;let m=u;for(let g=0;g<d.length;g++){if(m==null||e.isUnsafeProperty(d[g]))return h;m=m[d[g]]}return m===void 0?h:m}t.get=i})(Ng)),Ng}var Pg,RC;function RG(){return RC||(RC=1,Pg=Gb().get),Pg}var MG=RG();const ch=fa(MG);var Jr=t=>t===0?0:t>0?1:-1,da=t=>typeof t=="number"&&t!=+t,ei=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,De=t=>(typeof t=="number"||t instanceof Number)&&!da(t),_a=t=>De(t)||typeof t=="string",DG=0,Oc=t=>{var e=++DG;return"".concat(t||"").concat(e)},Fi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(e)&&typeof e!="string")return r;var i;if(ei(e)){if(n==null)return r;var l=e.indexOf("%");i=n*parseFloat(e.slice(0,l))/100}else i=+e;return da(i)&&(i=r),a&&n!=null&&i>n&&(i=n),i},g2=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function xn(t,e,n){return De(t)&&De(e)?t+n*(e-t):e}function y2(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):ch(r,e))===n)}var En=t=>t===null||typeof t>"u",Xc=t=>En(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function OG(t){return t!=null}function ml(){}var LG=["type","size","sizeType"];function A0(){return A0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A0.apply(null,arguments)}function MC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function DC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(n),!0).forEach(function(r){UG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UG(t,e,n){return(e=BG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BG(t){var e=$G(t,"string");return typeof e=="symbol"?e:e+""}function $G(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qG(t,e){if(t==null)return{};var n,r,a=zG(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function zG(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var b2={symbolCircle:$b,symbolCross:rG,symbolDiamond:iG,symbolSquare:sG,symbolStar:uG,symbolTriangle:dG,symbolWye:hG},GG=Math.PI/180,FG=t=>{var e="symbol".concat(Xc(t));return b2[e]||$b},HG=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*GG;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},VG=(t,e)=>{b2["symbol".concat(Xc(t))]=e},Fb=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,a=qG(t,LG),i=DC(DC({},a),{},{type:e,size:n,sizeType:r}),l="circle";typeof e=="string"&&(l=e);var u=()=>{var b=FG(l),v=mG().type(b).size(HG(n,r,l)),k=v();if(k!==null)return k},{className:d,cx:h,cy:m}=i,g=rr(i);return De(h)&&De(m)&&De(n)?_.createElement("path",A0({},g,{className:Ct("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:u()})):null};Fb.registerSymbol=VG;var x2=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,Hb=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(_.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(a=>{Db(a)&&(r[a]=(i=>n[a](n,i)))}),r},WG=(t,e,n)=>r=>(t(e,n,r),null),v2=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(a=>{var i=t[a];Db(a)&&typeof i=="function"&&(r||(r={}),r[a]=WG(i,e,n))}),r};function OC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function KG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OC(Object(n),!0).forEach(function(r){YG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YG(t,e,n){return(e=JG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JG(t){var e=XG(t,"string");return typeof e=="symbol"?e:e+""}function XG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dn(t,e){var n=KG({},t),r=e,a=Object.keys(e),i=a.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return i}function hf(){return hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hf.apply(null,arguments)}function LC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function QG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LC(Object(n),!0).forEach(function(r){ZG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZG(t,e,n){return(e=eF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eF(t){var e=tF(t,"string");return typeof e=="symbol"?e:e+""}function tF(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kr=32,nF={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function rF(t){var{data:e,iconType:n,inactiveColor:r}=t,a=Kr/2,i=Kr/6,l=Kr/3,u=e.inactive?r:e.color,d=n??e.type;if(d==="none")return null;if(d==="plainline"){var h;return _.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:(h=e.payload)===null||h===void 0?void 0:h.strokeDasharray,x1:0,y1:a,x2:Kr,y2:a,className:"recharts-legend-icon"})}if(d==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Kr,"M").concat(2*l,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(d==="rect")return _.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Kr/8,"h").concat(Kr,"v").concat(Kr*3/4,"h").concat(-Kr,"z"),className:"recharts-legend-icon"});if(_.isValidElement(e.legendIcon)){var m=QG({},e);return delete m.legendIcon,_.cloneElement(e.legendIcon,m)}return _.createElement(Fb,{fill:u,cx:a,cy:a,size:Kr,sizeType:"diameter",type:d})}function aF(t){var{payload:e,iconSize:n,layout:r,formatter:a,inactiveColor:i,iconType:l}=t,u={x:0,y:0,width:Kr,height:Kr},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((m,g)=>{var b=m.formatter||a,v=Ct({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:m.inactive});if(m.type==="none")return null;var k=m.inactive?i:m.color,C=b?b(m.value,m,g):m.value;return _.createElement("li",hf({className:v,style:d,key:"legend-item-".concat(g)},v2(t,m,g)),_.createElement(Ob,{width:n,height:n,viewBox:u,style:h,"aria-label":"".concat(C," legend icon")},_.createElement(rF,{data:m,iconType:l,inactiveColor:i})),_.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},C))})}var iF=t=>{var e=Dn(t,nF),{payload:n,layout:r,align:a}=e;if(!n||!n.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:i},_.createElement(aF,hf({},e,{payload:n})))},Ig={},Rg={},UC;function sF(){return UC||(UC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const a=new Map;for(let i=0;i<n.length;i++){const l=n[i],u=r(l);a.has(u)||a.set(u,l)}return Array.from(a.values())}t.uniqBy=e})(Rg)),Rg}var Mg={},BC;function w2(){return BC||(BC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Mg)),Mg}var Dg={},Og={},Lg={},$C;function oF(){return $C||($C=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Lg)),Lg}var qC;function Vb(){return qC||(qC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oF();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Og)),Og}var Ug={},zC;function lF(){return zC||(zC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Ug)),Ug}var GC;function cF(){return GC||(GC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vb(),n=lF();function r(a){return n.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=r})(Dg)),Dg}var Bg={},$g={},FC;function uF(){return FC||(FC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gb();function n(r){return function(a){return e.get(a,r)}}t.property=n})($g)),$g}var qg={},zg={},Gg={},Fg={},HC;function S2(){return HC||(HC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Fg)),Fg}var Hg={},VC;function _2(){return VC||(VC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Hg)),Hg}var Vg={},WC;function k2(){return WC||(WC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(Vg)),Vg}var KC;function dF(){return KC||(KC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S2(),n=_2(),r=k2();function a(m,g,b){return typeof b!="function"?a(m,g,()=>{}):i(m,g,function v(k,C,N,T,R,E){const P=b(k,C,N,T,R,E);return P!==void 0?!!P:i(k,C,v,E)},new Map)}function i(m,g,b,v){if(g===m)return!0;switch(typeof g){case"object":return l(m,g,b,v);case"function":return Object.keys(g).length>0?i(m,{...g},b,v):r.eq(m,g);default:return e.isObject(m)?typeof g=="string"?g==="":!0:r.eq(m,g)}}function l(m,g,b,v){if(g==null)return!0;if(Array.isArray(g))return d(m,g,b,v);if(g instanceof Map)return u(m,g,b,v);if(g instanceof Set)return h(m,g,b,v);const k=Object.keys(g);if(m==null)return k.length===0;if(k.length===0)return!0;if(v!=null&&v.has(g))return v.get(g)===m;v==null||v.set(g,m);try{for(let C=0;C<k.length;C++){const N=k[C];if(!n.isPrimitive(m)&&!(N in m)||g[N]===void 0&&m[N]!==void 0||g[N]===null&&m[N]!==null||!b(m[N],g[N],N,m,g,v))return!1}return!0}finally{v==null||v.delete(g)}}function u(m,g,b,v){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[k,C]of g.entries()){const N=m.get(k);if(b(N,C,k,m,g,v)===!1)return!1}return!0}function d(m,g,b,v){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const k=new Set;for(let C=0;C<g.length;C++){const N=g[C];let T=!1;for(let R=0;R<m.length;R++){if(k.has(R))continue;const E=m[R];let P=!1;if(b(E,N,C,m,g,v)&&(P=!0),P){k.add(R),T=!0;break}}if(!T)return!1}return!0}function h(m,g,b,v){return g.size===0?!0:m instanceof Set?d([...m],[...g],b,v):!1}t.isMatchWith=a,t.isSetMatch=h})(Gg)),Gg}var YC;function N2(){return YC||(YC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dF();function n(r,a){return e.isMatchWith(r,a,()=>{})}t.isMatch=n})(zg)),zg}var Wg={},Kg={},Yg={},JC;function fF(){return JC||(JC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Yg)),Yg}var Jg={},XC;function C2(){return XC||(XC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Jg)),Jg}var Xg={},QC;function E2(){return QC||(QC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",a="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",h="[object Set]",m="[object Array]",g="[object Function]",b="[object ArrayBuffer]",v="[object Object]",k="[object Error]",C="[object DataView]",N="[object Uint8Array]",T="[object Uint8ClampedArray]",R="[object Uint16Array]",E="[object Uint32Array]",P="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",D="[object Int32Array]",$="[object BigInt64Array]",H="[object Float32Array]",z="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=b,t.arrayTag=m,t.bigInt64ArrayTag=$,t.bigUint64ArrayTag=P,t.booleanTag=a,t.dataViewTag=C,t.dateTag=u,t.errorTag=k,t.float32ArrayTag=H,t.float64ArrayTag=z,t.functionTag=g,t.int16ArrayTag=I,t.int32ArrayTag=D,t.int8ArrayTag=j,t.mapTag=d,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=h,t.stringTag=n,t.symbolTag=l,t.uint16ArrayTag=R,t.uint32ArrayTag=E,t.uint8ArrayTag=N,t.uint8ClampedArrayTag=T})(Xg)),Xg}var Qg={},ZC;function hF(){return ZC||(ZC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Qg)),Qg}var e1;function T2(){return e1||(e1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fF(),n=C2(),r=E2(),a=_2(),i=hF();function l(m,g){return u(m,void 0,m,new Map,g)}function u(m,g,b,v=new Map,k=void 0){const C=k==null?void 0:k(m,g,b,v);if(C!==void 0)return C;if(a.isPrimitive(m))return m;if(v.has(m))return v.get(m);if(Array.isArray(m)){const N=new Array(m.length);v.set(m,N);for(let T=0;T<m.length;T++)N[T]=u(m[T],T,b,v,k);return Object.hasOwn(m,"index")&&(N.index=m.index),Object.hasOwn(m,"input")&&(N.input=m.input),N}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const N=new RegExp(m.source,m.flags);return N.lastIndex=m.lastIndex,N}if(m instanceof Map){const N=new Map;v.set(m,N);for(const[T,R]of m)N.set(T,u(R,T,b,v,k));return N}if(m instanceof Set){const N=new Set;v.set(m,N);for(const T of m)N.add(u(T,void 0,b,v,k));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(i.isTypedArray(m)){const N=new(Object.getPrototypeOf(m)).constructor(m.length);v.set(m,N);for(let T=0;T<m.length;T++)N[T]=u(m[T],T,b,v,k);return N}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const N=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return v.set(m,N),d(N,m,b,v,k),N}if(typeof File<"u"&&m instanceof File){const N=new File([m],m.name,{type:m.type});return v.set(m,N),d(N,m,b,v,k),N}if(typeof Blob<"u"&&m instanceof Blob){const N=new Blob([m],{type:m.type});return v.set(m,N),d(N,m,b,v,k),N}if(m instanceof Error){const N=new m.constructor;return v.set(m,N),N.message=m.message,N.name=m.name,N.stack=m.stack,N.cause=m.cause,d(N,m,b,v,k),N}if(m instanceof Boolean){const N=new Boolean(m.valueOf());return v.set(m,N),d(N,m,b,v,k),N}if(m instanceof Number){const N=new Number(m.valueOf());return v.set(m,N),d(N,m,b,v,k),N}if(m instanceof String){const N=new String(m.valueOf());return v.set(m,N),d(N,m,b,v,k),N}if(typeof m=="object"&&h(m)){const N=Object.create(Object.getPrototypeOf(m));return v.set(m,N),d(N,m,b,v,k),N}return m}function d(m,g,b=m,v,k){const C=[...Object.keys(g),...e.getSymbols(g)];for(let N=0;N<C.length;N++){const T=C[N],R=Object.getOwnPropertyDescriptor(m,T);(R==null||R.writable)&&(m[T]=u(g[T],T,b,v,k))}}function h(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=l,t.cloneDeepWithImpl=u,t.copyProperties=d})(Kg)),Kg}var t1;function mF(){return t1||(t1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T2();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Wg)),Wg}var n1;function pF(){return n1||(n1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N2(),n=mF();function r(a){return a=n.cloneDeep(a),i=>e.isMatch(i,a)}t.matches=r})(qg)),qg}var Zg={},ey={},ty={},r1;function gF(){return r1||(r1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T2(),n=E2();function r(a,i){return e.cloneDeepWith(a,(l,u,d,h)=>{const m=i==null?void 0:i(l,u,d,h);if(m!==void 0)return m;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(g,a),g}case n.argumentsTag:{const g={};return e.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}})}t.cloneDeepWith=r})(ty)),ty}var a1;function yF(){return a1||(a1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gF();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(ey)),ey}var ny={},ry={},i1;function A2(){return i1||(i1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,a=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<a;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(ry)),ry}var ay={},s1;function bF(){return s1||(s1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C2();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(ay)),ay}var o1;function xF(){return o1||(o1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=p2(),n=A2(),r=bF(),a=zb();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&e.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=a.toPath(u):d=[u],d.length===0)return!1;let h=l;for(let m=0;m<d.length;m++){const g=d[m];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}t.has=i})(ny)),ny}var l1;function vF(){return l1||(l1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N2(),n=qb(),r=yF(),a=Gb(),i=xF();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=r.cloneDeep(d),function(h){const m=a.get(h,u);return m===void 0?i.has(h,u):d===void 0?m===void 0:e.isMatch(m,d)}}t.matchesProperty=l})(Zg)),Zg}var c1;function wF(){return c1||(c1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=w2(),n=uF(),r=pF(),a=vF();function i(l){if(l==null)return e.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?a.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}t.iteratee=i})(Bg)),Bg}var u1;function SF(){return u1||(u1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sF(),n=w2(),r=cF(),a=wF();function i(l,u=n.identity){return r.isArrayLikeObject(l)?e.uniqBy(Array.from(l),a.iteratee(u)):[]}t.uniqBy=i})(Ig)),Ig}var iy,d1;function _F(){return d1||(d1=1,iy=SF().uniqBy),iy}var kF=_F();const f1=fa(kF);function j2(t,e,n){return e===!0?f1(t,n):typeof e=="function"?f1(t,e):t}var sy={exports:{}},oy={},ly={exports:{}},cy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h1;function NF(){if(h1)return cy;h1=1;var t=ll();function e(g,b){return g===b&&(g!==0||1/g===1/b)||g!==g&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,i=t.useLayoutEffect,l=t.useDebugValue;function u(g,b){var v=b(),k=r({inst:{value:v,getSnapshot:b}}),C=k[0].inst,N=k[1];return i(function(){C.value=v,C.getSnapshot=b,d(C)&&N({inst:C})},[g,v,b]),a(function(){return d(C)&&N({inst:C}),g(function(){d(C)&&N({inst:C})})},[g]),l(v),v}function d(g){var b=g.getSnapshot;g=g.value;try{var v=b();return!n(g,v)}catch{return!0}}function h(g,b){return b()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return cy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,cy}var m1;function CF(){return m1||(m1=1,ly.exports=NF()),ly.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p1;function EF(){if(p1)return oy;p1=1;var t=ll(),e=CF();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,i=t.useRef,l=t.useEffect,u=t.useMemo,d=t.useDebugValue;return oy.useSyncExternalStoreWithSelector=function(h,m,g,b,v){var k=i(null);if(k.current===null){var C={hasValue:!1,value:null};k.current=C}else C=k.current;k=u(function(){function T(I){if(!R){if(R=!0,E=I,I=b(I),v!==void 0&&C.hasValue){var D=C.value;if(v(D,I))return P=D}return P=I}if(D=P,r(E,I))return D;var $=b(I);return v!==void 0&&v(D,$)?(E=I,D):(E=I,P=$)}var R=!1,E,P,j=g===void 0?null:g;return[function(){return T(m())},j===null?void 0:function(){return T(j())}]},[m,g,b,v]);var N=a(h,k[0],k[1]);return l(function(){C.hasValue=!0,C.value=N},[N]),d(N),N},oy}var g1;function TF(){return g1||(g1=1,sy.exports=EF()),sy.exports}var AF=TF(),Wb=_.createContext(null),jF=t=>t,wn=()=>{var t=_.useContext(Wb);return t?t.store.dispatch:jF},Jd=()=>{},PF=()=>Jd,IF=(t,e)=>t===e;function $e(t){var e=_.useContext(Wb);return AF.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:PF,e?e.store.getState:Jd,e?e.store.getState:Jd,e?t:Jd,IF)}function RF(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function MF(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function DF(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var y1=t=>Array.isArray(t)?t:[t];function OF(t){const e=Array.isArray(t[0])?t[0]:t;return DF(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function LF(t,e){const n=[],{length:r}=t;for(let a=0;a<r;a++)n.push(t[a].apply(null,e));return n}var UF=class{constructor(t){this.value=t}deref(){return this.value}},BF=typeof WeakRef<"u"?WeakRef:UF,$F=0,b1=1;function Md(){return{s:$F,v:void 0,o:null,p:null}}function P2(t,e={}){let n=Md();const{resultEqualityCheck:r}=e;let a,i=0;function l(){var g;let u=n;const{length:d}=arguments;for(let b=0,v=d;b<v;b++){const k=arguments[b];if(typeof k=="function"||typeof k=="object"&&k!==null){let C=u.o;C===null&&(u.o=C=new WeakMap);const N=C.get(k);N===void 0?(u=Md(),C.set(k,u)):u=N}else{let C=u.p;C===null&&(u.p=C=new Map);const N=C.get(k);N===void 0?(u=Md(),C.set(k,u)):u=N}}const h=u;let m;if(u.s===b1)m=u.v;else if(m=t.apply(null,arguments),i++,r){const b=((g=a==null?void 0:a.deref)==null?void 0:g.call(a))??a;b!=null&&r(b,m)&&(m=b,i!==0&&i--),a=typeof m=="object"&&m!==null||typeof m=="function"?new BF(m):m}return h.s=b1,h.v=m,m}return l.clearCache=()=>{n=Md(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function qF(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...a)=>{let i=0,l=0,u,d={},h=a.pop();typeof h=="object"&&(d=h,h=a.pop()),RF(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...n,...d},{memoize:g,memoizeOptions:b=[],argsMemoize:v=P2,argsMemoizeOptions:k=[]}=m,C=y1(b),N=y1(k),T=OF(a),R=g(function(){return i++,h.apply(null,arguments)},...C),E=v(function(){l++;const j=LF(T,arguments);return u=R.apply(null,j),u},...N);return Object.assign(E,{resultFunc:h,memoizedResultFunc:R,dependencies:T,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:g,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var ue=qF(P2),zF=Object.assign((t,e=ue)=>{MF(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((l,u,d)=>(l[n[d]]=u,l),{}))},{withTypes:()=>zF}),uy={},dy={},fy={},x1;function GF(){return x1||(x1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,a,i)=>{if(r!==a){const l=e(r),u=e(a);if(l===u&&l===0){if(r<a)return i==="desc"?1:-1;if(r>a)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};t.compareValues=n})(fy)),fy}var hy={},my={},v1;function I2(){return v1||(v1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(my)),my}var w1;function FF(){return w1||(w1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I2(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function a(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||e.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||l!=null&&Object.hasOwn(l,i)}t.isKey=a})(hy)),hy}var S1;function HF(){return S1||(S1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GF(),n=FF(),r=zb();function a(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(v=>String(v));const h=(v,k)=>{let C=v;for(let N=0;N<k.length&&C!=null;++N)C=C[k[N]];return C},m=(v,k)=>k==null||v==null?k:typeof v=="object"&&"key"in v?Object.hasOwn(k,v.key)?k[v.key]:h(k,v.path):typeof v=="function"?v(k):Array.isArray(v)?h(k,v):typeof k=="object"?k[v]:k,g=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return i.map(v=>({original:v,criteria:g.map(k=>m(k,v))})).slice().sort((v,k)=>{for(let C=0;C<g.length;C++){const N=e.compareValues(v.criteria[C],k.criteria[C],u[C]);if(N!==0)return N}return 0}).map(v=>v.original)}t.orderBy=a})(dy)),dy}var py={},_1;function VF(){return _1||(_1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const a=[],i=Math.floor(r),l=(u,d)=>{for(let h=0;h<u.length;h++){const m=u[h];Array.isArray(m)&&d<i?l(m,d+1):a.push(m)}};return l(n,0),a}t.flatten=e})(py)),py}var gy={},k1;function R2(){return k1||(k1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A2(),n=Vb(),r=S2(),a=k2();function i(l,u,d){return r.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&e.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?a.eq(d[u],l):!1}t.isIterateeCall=i})(gy)),gy}var N1;function WF(){return N1||(N1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HF(),n=VF(),r=R2();function a(i,...l){const u=l.length;return u>1&&r.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),e.orderBy(i,n.flatten(l),["asc"])}t.sortBy=a})(uy)),uy}var yy,C1;function KF(){return C1||(C1=1,yy=WF().sortBy),yy}var YF=KF();const uh=fa(YF);var M2=t=>t.legend.settings,JF=t=>t.legend.size,XF=t=>t.legend.payload,QF=ue([XF,M2],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?uh(r,n):r});function ZF(){return $e(QF)}var Dd=1;function D2(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=_.useState({height:0,left:0,top:0,width:0}),r=_.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-e.height)>Dd||Math.abs(l.left-e.left)>Dd||Math.abs(l.top-e.top)>Dd||Math.abs(l.width-e.width)>Dd)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Gn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var eH=typeof Symbol=="function"&&Symbol.observable||"@@observable",E1=eH,by=()=>Math.random().toString(36).substring(7).split("").join("."),tH={INIT:`@@redux/INIT${by()}`,REPLACE:`@@redux/REPLACE${by()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${by()}`},mf=tH;function Kb(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function O2(t,e,n){if(typeof t!="function")throw new Error(Gn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Gn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Gn(1));return n(O2)(t,e)}let r=t,a=e,i=new Map,l=i,u=0,d=!1;function h(){l===i&&(l=new Map,i.forEach((N,T)=>{l.set(T,N)}))}function m(){if(d)throw new Error(Gn(3));return a}function g(N){if(typeof N!="function")throw new Error(Gn(4));if(d)throw new Error(Gn(5));let T=!0;h();const R=u++;return l.set(R,N),function(){if(T){if(d)throw new Error(Gn(6));T=!1,h(),l.delete(R),i=null}}}function b(N){if(!Kb(N))throw new Error(Gn(7));if(typeof N.type>"u")throw new Error(Gn(8));if(typeof N.type!="string")throw new Error(Gn(17));if(d)throw new Error(Gn(9));try{d=!0,a=r(a,N)}finally{d=!1}return(i=l).forEach(R=>{R()}),N}function v(N){if(typeof N!="function")throw new Error(Gn(10));r=N,b({type:mf.REPLACE})}function k(){const N=g;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(Gn(11));function R(){const P=T;P.next&&P.next(m())}return R(),{unsubscribe:N(R)}},[E1](){return this}}}return b({type:mf.INIT}),{dispatch:b,subscribe:g,getState:m,replaceReducer:v,[E1]:k}}function nH(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:mf.INIT})>"u")throw new Error(Gn(12));if(typeof n(void 0,{type:mf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gn(13))})}function L2(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const l=e[i];typeof t[l]=="function"&&(n[l]=t[l])}const r=Object.keys(n);let a;try{nH(n)}catch(i){a=i}return function(l={},u){if(a)throw a;let d=!1;const h={};for(let m=0;m<r.length;m++){const g=r[m],b=n[g],v=l[g],k=b(v,u);if(typeof k>"u")throw u&&u.type,new Error(Gn(14));h[g]=k,d=d||k!==v}return d=d||r.length!==Object.keys(l).length,d?h:l}}function pf(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function rH(...t){return e=>(n,r)=>{const a=e(n,r);let i=()=>{throw new Error(Gn(15))};const l={getState:a.getState,dispatch:(d,...h)=>i(d,...h)},u=t.map(d=>d(l));return i=pf(...u)(a.dispatch),{...a,dispatch:i}}}function U2(t){return Kb(t)&&"type"in t&&typeof t.type=="string"}var B2=Symbol.for("immer-nothing"),T1=Symbol.for("immer-draftable"),Rr=Symbol.for("immer-state");function ca(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Lc=Object.getPrototypeOf;function Ms(t){return!!t&&!!t[Rr]}function ti(t){var e;return t?$2(t)||Array.isArray(t)||!!t[T1]||!!((e=t.constructor)!=null&&e[T1])||Qc(t)||fh(t):!1}var aH=Object.prototype.constructor.toString(),A1=new WeakMap;function $2(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=A1.get(n);return r===void 0&&(r=Function.toString.call(n),A1.set(n,r)),r===aH}function gf(t,e,n=!0){dh(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((r,a)=>e(a,r,t))}function dh(t){const e=t[Rr];return e?e.type_:Array.isArray(t)?1:Qc(t)?2:fh(t)?3:0}function j0(t,e){return dh(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function q2(t,e,n){const r=dh(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function iH(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Qc(t){return t instanceof Map}function fh(t){return t instanceof Set}function bs(t){return t.copy_||t.base_}function P0(t,e){if(Qc(t))return new Map(t);if(fh(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=$2(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Rr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const l=a[i],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[l]})}return Object.create(Lc(t),r)}else{const r=Lc(t);if(r!==null&&n)return{...t};const a=Object.create(r);return Object.assign(a,t)}}function Yb(t,e=!1){return hh(t)||Ms(t)||!ti(t)||(dh(t)>1&&Object.defineProperties(t,{set:Od,add:Od,clear:Od,delete:Od}),Object.freeze(t),e&&Object.values(t).forEach(n=>Yb(n,!0))),t}function sH(){ca(2)}var Od={value:sH};function hh(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var oH={};function Ds(t){const e=oH[t];return e||ca(0,t),e}var Uc;function z2(){return Uc}function lH(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function j1(t,e){e&&(Ds("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function I0(t){R0(t),t.drafts_.forEach(cH),t.drafts_=null}function R0(t){t===Uc&&(Uc=t.parent_)}function P1(t){return Uc=lH(Uc,t)}function cH(t){const e=t[Rr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function I1(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Rr].modified_&&(I0(e),ca(4)),ti(t)&&(t=yf(e,t),e.parent_||bf(e,t)),e.patches_&&Ds("Patches").generateReplacementPatches_(n[Rr].base_,t,e.patches_,e.inversePatches_)):t=yf(e,n,[]),I0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==B2?t:void 0}function yf(t,e,n){if(hh(e))return e;const r=t.immer_.shouldUseStrictIteration(),a=e[Rr];if(!a)return gf(e,(i,l)=>R1(t,a,e,i,l,n),r),e;if(a.scope_!==t)return e;if(!a.modified_)return bf(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let l=i,u=!1;a.type_===3&&(l=new Set(i),i.clear(),u=!0),gf(l,(d,h)=>R1(t,a,i,d,h,n,u),r),bf(t,i,!1),n&&t.patches_&&Ds("Patches").generatePatches_(a,n,t.patches_,t.inversePatches_)}return a.copy_}function R1(t,e,n,r,a,i,l){if(a==null||typeof a!="object"&&!l)return;const u=hh(a);if(!(u&&!l)){if(Ms(a)){const d=i&&e&&e.type_!==3&&!j0(e.assigned_,r)?i.concat(r):void 0,h=yf(t,a,d);if(q2(n,r,h),Ms(h))t.canAutoFreeze_=!1;else return}else l&&n.add(a);if(ti(a)&&!u){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===a&&u)return;yf(t,a),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Qc(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&bf(t,a)}}}function bf(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Yb(e,n)}function uH(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:z2(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=Jb;n&&(a=[r],i=Bc);const{revoke:l,proxy:u}=Proxy.revocable(a,i);return r.draft_=u,r.revoke_=l,u}var Jb={get(t,e){if(e===Rr)return t;const n=bs(t);if(!j0(n,e))return dH(t,n,e);const r=n[e];return t.finalized_||!ti(r)?r:r===xy(t.base_,e)?(vy(t),t.copy_[e]=D0(r,t)):r},has(t,e){return e in bs(t)},ownKeys(t){return Reflect.ownKeys(bs(t))},set(t,e,n){const r=G2(bs(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const a=xy(bs(t),e),i=a==null?void 0:a[Rr];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(iH(n,a)&&(n!==void 0||j0(t.base_,e)))return!0;vy(t),M0(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return xy(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,vy(t),M0(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=bs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ca(11)},getPrototypeOf(t){return Lc(t.base_)},setPrototypeOf(){ca(12)}},Bc={};gf(Jb,(t,e)=>{Bc[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Bc.deleteProperty=function(t,e){return Bc.set.call(this,t,e,void 0)};Bc.set=function(t,e,n){return Jb.set.call(this,t[0],e,n,t[0])};function xy(t,e){const n=t[Rr];return(n?bs(n):t)[e]}function dH(t,e,n){var a;const r=G2(e,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(t.draft_):void 0}function G2(t,e){if(!(e in t))return;let n=Lc(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Lc(n)}}function M0(t){t.modified_||(t.modified_=!0,t.parent_&&M0(t.parent_))}function vy(t){t.copy_||(t.copy_=P0(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var fH=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const l=this;return function(d=i,...h){return l.produce(d,m=>n.call(this,m,...h))}}typeof n!="function"&&ca(6),r!==void 0&&typeof r!="function"&&ca(7);let a;if(ti(e)){const i=P1(this),l=D0(e,void 0);let u=!0;try{a=n(l),u=!1}finally{u?I0(i):R0(i)}return j1(i,r),I1(a,i)}else if(!e||typeof e!="object"){if(a=n(e),a===void 0&&(a=e),a===B2&&(a=void 0),this.autoFreeze_&&Yb(a,!0),r){const i=[],l=[];Ds("Patches").generateReplacementPatches_(e,a,i,l),r(i,l)}return a}else ca(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(l,...u)=>this.produceWithPatches(l,d=>e(d,...u));let r,a;return[this.produce(e,n,(l,u)=>{r=l,a=u}),r,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ti(t)||ca(8),Ms(t)&&(t=Xa(t));const e=P1(this),n=D0(t,void 0);return n[Rr].isManual_=!0,R0(e),n}finishDraft(t,e){const n=t&&t[Rr];(!n||!n.isManual_)&&ca(9);const{scope_:r}=n;return j1(r,e),I1(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const a=e[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(e=e.slice(n+1));const r=Ds("Patches").applyPatches_;return Ms(t)?r(t,e):this.produce(t,a=>r(a,e))}};function D0(t,e){const n=Qc(t)?Ds("MapSet").proxyMap_(t,e):fh(t)?Ds("MapSet").proxySet_(t,e):uH(t,e);return(e?e.scope_:z2()).drafts_.push(n),n}function Xa(t){return Ms(t)||ca(10,t),F2(t)}function F2(t){if(!ti(t)||hh(t))return t;const e=t[Rr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=P0(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=P0(t,!0);return gf(n,(a,i)=>{q2(n,a,F2(i))},r),e&&(e.finalized_=!1),n}var O0=new fH,H2=O0.produce,hH=O0.setUseStrictIteration.bind(O0);function V2(t){return({dispatch:n,getState:r})=>a=>i=>typeof i=="function"?i(n,r,t):a(i)}var mH=V2(),pH=V2,gH=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?pf:pf.apply(null,arguments)};function ta(t,e){function n(...r){if(e){let a=e(...r);if(!a)throw new Error(Ir(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>U2(r)&&r.type===t,n}var W2=class Cc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Cc.prototype)}static get[Symbol.species](){return Cc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Cc(...e[0].concat(this)):new Cc(...e.concat(this))}};function M1(t){return ti(t)?H2(t,()=>{}):t}function Ld(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function yH(t){return typeof t=="boolean"}var bH=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=e??{};let l=new W2;return n&&(yH(n)?l.push(mH):l.push(pH(n.extraArgument))),l},K2="RTK_autoBatch",Cn=()=>t=>({payload:t,meta:{[K2]:!0}}),D1=t=>e=>{setTimeout(e,t)},Y2=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let a=!0,i=!1,l=!1;const u=new Set,d=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:D1(10):t.type==="callback"?t.queueNotification:D1(t.timeout),h=()=>{l=!1,i&&(i=!1,u.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const g=()=>a&&m(),b=r.subscribe(g);return u.add(m),()=>{b(),u.delete(m)}},dispatch(m){var g;try{return a=!((g=m==null?void 0:m.meta)!=null&&g[K2]),i=!a,i&&(l||(l=!0,d(h))),r.dispatch(m)}finally{a=!0}}})},xH=t=>function(n){const{autoBatch:r=!0}=n??{};let a=new W2(t);return r&&a.push(Y2(typeof r=="object"?r:void 0)),a};function vH(t){const e=bH(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:i=void 0,enhancers:l=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(Kb(n))u=L2(n);else throw new Error(Ir(1));let d;typeof r=="function"?d=r(e):d=e();let h=pf;a&&(h=gH({trace:!1,...typeof a=="object"&&a}));const m=rH(...d),g=xH(m);let b=typeof l=="function"?l(g):g();const v=h(...b);return O2(u,i,v)}function J2(t){const e={},n=[];let r;const a={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(Ir(28));if(u in e)throw new Error(Ir(29));return e[u]=l,a},addAsyncThunk(i,l){return l.pending&&(e[i.pending.type]=l.pending),l.rejected&&(e[i.rejected.type]=l.rejected),l.fulfilled&&(e[i.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:i.settled,reducer:l.settled}),a},addMatcher(i,l){return n.push({matcher:i,reducer:l}),a},addDefaultCase(i){return r=i,a}};return t(a),[e,n,r]}hH(!1);function wH(t){return typeof t=="function"}function SH(t,e){let[n,r,a]=J2(e),i;if(wH(t))i=()=>M1(t());else{const u=M1(t);i=()=>u}function l(u=i(),d){let h=[n[d.type],...r.filter(({matcher:m})=>m(d)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[a]),h.reduce((m,g)=>{if(g)if(Ms(m)){const v=g(m,d);return v===void 0?m:v}else{if(ti(m))return H2(m,b=>g(b,d));{const b=g(m,d);if(b===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return m},u)}return l.getInitialState=i,l}var _H="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",kH=(t=21)=>{let e="",n=t;for(;n--;)e+=_H[Math.random()*64|0];return e},NH=Symbol.for("rtk-slice-createasyncthunk");function CH(t,e){return`${t}/${e}`}function EH({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[NH];return function(a){const{name:i,reducerPath:l=i}=a;if(!i)throw new Error(Ir(11));const u=(typeof a.reducers=="function"?a.reducers(AH()):a.reducers)||{},d=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(P,j){const I=typeof P=="string"?P:P.type;if(!I)throw new Error(Ir(12));if(I in h.sliceCaseReducersByType)throw new Error(Ir(13));return h.sliceCaseReducersByType[I]=j,m},addMatcher(P,j){return h.sliceMatchers.push({matcher:P,reducer:j}),m},exposeAction(P,j){return h.actionCreators[P]=j,m},exposeCaseReducer(P,j){return h.sliceCaseReducersByName[P]=j,m}};d.forEach(P=>{const j=u[P],I={reducerName:P,type:CH(i,P),createNotation:typeof a.reducers=="function"};PH(j)?RH(I,j,m,e):jH(I,j,m)});function g(){const[P={},j=[],I=void 0]=typeof a.extraReducers=="function"?J2(a.extraReducers):[a.extraReducers],D={...P,...h.sliceCaseReducersByType};return SH(a.initialState,$=>{for(let H in D)$.addCase(H,D[H]);for(let H of h.sliceMatchers)$.addMatcher(H.matcher,H.reducer);for(let H of j)$.addMatcher(H.matcher,H.reducer);I&&$.addDefaultCase(I)})}const b=P=>P,v=new Map,k=new WeakMap;let C;function N(P,j){return C||(C=g()),C(P,j)}function T(){return C||(C=g()),C.getInitialState()}function R(P,j=!1){function I($){let H=$[P];return typeof H>"u"&&j&&(H=Ld(k,I,T)),H}function D($=b){const H=Ld(v,j,()=>new WeakMap);return Ld(H,$,()=>{const z={};for(const[F,V]of Object.entries(a.selectors??{}))z[F]=TH(V,$,()=>Ld(k,$,T),j);return z})}return{reducerPath:P,getSelectors:D,get selectors(){return D(I)},selectSlice:I}}const E={name:i,reducer:N,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:T,...R(l),injectInto(P,{reducerPath:j,...I}={}){const D=j??l;return P.inject({reducerPath:D,reducer:N},I),{...E,...R(D,!0)}}};return E}}function TH(t,e,n,r){function a(i,...l){let u=e(i);return typeof u>"u"&&r&&(u=n()),t(u,...l)}return a.unwrapped=t,a}var yr=EH();function AH(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function jH({type:t,reducerName:e,createNotation:n},r,a){let i,l;if("reducer"in r){if(n&&!IH(r))throw new Error(Ir(17));i=r.reducer,l=r.prepare}else i=r;a.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,l?ta(t,l):ta(t))}function PH(t){return t._reducerDefinitionType==="asyncThunk"}function IH(t){return t._reducerDefinitionType==="reducerWithPrepare"}function RH({type:t,reducerName:e},n,r,a){if(!a)throw new Error(Ir(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:h,options:m}=n,g=a(t,i,m);r.exposeAction(e,g),l&&r.addCase(g.fulfilled,l),u&&r.addCase(g.pending,u),d&&r.addCase(g.rejected,d),h&&r.addMatcher(g.settled,h),r.exposeCaseReducer(e,{fulfilled:l||Ud,pending:u||Ud,rejected:d||Ud,settled:h||Ud})}function Ud(){}var MH="task",X2="listener",Q2="completed",Xb="cancelled",DH=`task-${Xb}`,OH=`task-${Q2}`,L0=`${X2}-${Xb}`,LH=`${X2}-${Q2}`,mh=class{constructor(t){ng(this,"name","TaskAbortError");ng(this,"message");this.code=t,this.message=`${MH} ${Xb} (reason: ${t})`}},Qb=(t,e)=>{if(typeof t!="function")throw new TypeError(Ir(32))},xf=()=>{},Z2=(t,e=xf)=>(t.catch(e),t),eP=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Ts=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},As=t=>{if(t.aborted){const{reason:e}=t;throw new mh(e)}};function tP(t,e){let n=xf;return new Promise((r,a)=>{const i=()=>a(new mh(t.reason));if(t.aborted){i();return}n=eP(t,i),e.finally(()=>n()).then(r,a)}).finally(()=>{n=xf})}var UH=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof mh?"cancelled":"rejected",error:n}}finally{e==null||e()}},vf=t=>e=>Z2(tP(t,e).then(n=>(As(t),n))),nP=t=>{const e=vf(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Xo}=Object,O1={},ph="listenerMiddleware",BH=(t,e)=>{const n=r=>eP(t,()=>Ts(r,t.reason));return(r,a)=>{Qb(r);const i=new AbortController;n(i);const l=UH(async()=>{As(t),As(i.signal);const u=await r({pause:vf(i.signal),delay:nP(i.signal),signal:i.signal});return As(i.signal),u},()=>Ts(i,OH));return a!=null&&a.autoJoin&&e.push(l.catch(xf)),{result:vf(t)(l),cancel(){Ts(i,DH)}}}},$H=(t,e)=>{const n=async(r,a)=>{As(e);let i=()=>{};const u=[new Promise((d,h)=>{let m=t({predicate:r,effect:(g,b)=>{b.unsubscribe(),d([g,b.getState(),b.getOriginalState()])}});i=()=>{m(),h()}})];a!=null&&u.push(new Promise(d=>setTimeout(d,a,null)));try{const d=await tP(e,Promise.race(u));return As(e),d}finally{i()}};return(r,a)=>Z2(n(r,a))},rP=t=>{let{type:e,actionCreator:n,matcher:r,predicate:a,effect:i}=t;if(e)a=ta(e).match;else if(n)e=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(Ir(21));return Qb(i),{predicate:a,type:e,effect:i}},aP=Xo(t=>{const{type:e,predicate:n,effect:r}=rP(t);return{id:kH(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ir(22))}}},{withTypes:()=>aP}),L1=(t,e)=>{const{type:n,effect:r,predicate:a}=rP(e);return Array.from(t.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===a)&&i.effect===r)},U0=t=>{t.pending.forEach(e=>{Ts(e,L0)})},qH=(t,e)=>()=>{for(const n of e.keys())U0(n);t.clear()},U1=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},iP=Xo(ta(`${ph}/add`),{withTypes:()=>iP}),zH=ta(`${ph}/removeAll`),sP=Xo(ta(`${ph}/remove`),{withTypes:()=>sP}),GH=(...t)=>{console.error(`${ph}/error`,...t)},Zc=(t={})=>{const e=new Map,n=new Map,r=v=>{const k=n.get(v)??0;n.set(v,k+1)},a=v=>{const k=n.get(v)??1;k===1?n.delete(v):n.set(v,k-1)},{extra:i,onError:l=GH}=t;Qb(l);const u=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),k=>{v.unsubscribe(),k!=null&&k.cancelActive&&U0(v)}),d=v=>{const k=L1(e,v)??aP(v);return u(k)};Xo(d,{withTypes:()=>d});const h=v=>{const k=L1(e,v);return k&&(k.unsubscribe(),v.cancelActive&&U0(k)),!!k};Xo(h,{withTypes:()=>h});const m=async(v,k,C,N)=>{const T=new AbortController,R=$H(d,T.signal),E=[];try{v.pending.add(T),r(v),await Promise.resolve(v.effect(k,Xo({},C,{getOriginalState:N,condition:(P,j)=>R(P,j).then(Boolean),take:R,delay:nP(T.signal),pause:vf(T.signal),extra:i,signal:T.signal,fork:BH(T.signal,E),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((P,j,I)=>{P!==T&&(Ts(P,L0),I.delete(P))})},cancel:()=>{Ts(T,L0),v.pending.delete(T)},throwIfCancelled:()=>{As(T.signal)}})))}catch(P){P instanceof mh||U1(l,P,{raisedBy:"effect"})}finally{await Promise.all(E),Ts(T,LH),a(v),v.pending.delete(T)}},g=qH(e,n);return{middleware:v=>k=>C=>{if(!U2(C))return k(C);if(iP.match(C))return d(C.payload);if(zH.match(C)){g();return}if(sP.match(C))return h(C.payload);let N=v.getState();const T=()=>{if(N===O1)throw new Error(Ir(23));return N};let R;try{if(R=k(C),e.size>0){const E=v.getState(),P=Array.from(e.values());for(const j of P){let I=!1;try{I=j.predicate(C,E,N)}catch(D){I=!1,U1(l,D,{raisedBy:"predicate"})}I&&m(j,C,v,T)}}}finally{N=O1}return R},startListening:d,stopListening:h,clearListeners:g}};function Ir(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var FH={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},oP=yr({name:"chartLayout",initialState:FH,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,a,i;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(i=e.payload.left)!==null&&i!==void 0?i:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:HH,setLayout:VH,setChartSize:WH,setScale:KH}=oP.actions,YH=oP.reducer;function lP(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function B1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Fo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B1(Object(n),!0).forEach(function(r){JH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JH(t,e,n){return(e=XH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XH(t){var e=QH(t,"string");return typeof e=="symbol"?e:e+""}function QH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vn(t,e,n){return En(t)||En(e)?n:_a(e)?ch(t,e,n):typeof e=="function"?e(t):n}var ZH=(t,e,n)=>{if(e&&n){var{width:r,height:a}=n,{align:i,verticalAlign:l,layout:u}=e;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&De(t[i]))return Fo(Fo({},t),{},{[i]:t[i]+(r||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&De(t[l]))return Fo(Fo({},t),{},{[l]:t[l]+(a||0)})}return t},Ca=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",cP=(t,e,n,r)=>{if(r)return t.map(u=>u.coordinate);var a,i,l=t.map(u=>(u.coordinate===e&&(a=!0),u.coordinate===n&&(i=!0),u.coordinate));return a||l.push(e),i||l.push(n),l},uP=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:a,range:i,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:h,tickCount:m,ticks:g,niceTicks:b,axisType:v}=t;if(!l)return null;var k=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,C=a==="category"&&l.bandwidth?l.bandwidth()/k:0;if(C=v==="angleAxis"&&i&&i.length>=2?Jr(i[0]-i[1])*2*C:C,g||b){var N=(g||b||[]).map((T,R)=>{var E=r?r.indexOf(T):T;return{coordinate:l(E)+C,value:T,offset:C,index:R}});return N.filter(T=>!da(T.coordinate))}return d&&h?h.map((T,R)=>({coordinate:l(T)+C,value:T,index:R,offset:C})):l.ticks&&m!=null?l.ticks(m).map((T,R)=>({coordinate:l(T)+C,value:T,offset:C,index:R})):l.domain().map((T,R)=>({coordinate:l(T)+C,value:r?r[T]:T,index:R,offset:C}))},$1=1e-4,e7=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),a=Math.min(r[0],r[1])-$1,i=Math.max(r[0],r[1])+$1,l=t(e[0]),u=t(e[n-1]);(l<a||l>i||u<a||u>i)&&t.domain([e[0],e[n-1]])}},t7=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var a=0,i=0,l=0;l<e;++l){var u=da(t[l][n][1])?t[l][n][0]:t[l][n][1];u>=0?(t[l][n][0]=a,t[l][n][1]=a+u,a=t[l][n][1]):(t[l][n][0]=i,t[l][n][1]=i+u,i=t[l][n][1])}},n7=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var a=0,i=0;i<e;++i){var l=da(t[i][n][1])?t[i][n][0]:t[i][n][1];l>=0?(t[i][n][0]=a,t[i][n][1]=a+l,a=t[i][n][1]):(t[i][n][0]=0,t[i][n][1]=0)}},r7={sign:t7,expand:TG,none:tl,silhouette:AG,wiggle:jG,positive:n7},a7=(t,e,n)=>{var r=r7[n],a=EG().keys(e).value((i,l)=>Number(Vn(i,l,0))).order(T0).offset(r);return a(t)};function i7(t){return t==null?void 0:String(t)}function wf(t){var{axis:e,ticks:n,bandSize:r,entry:a,index:i,dataKey:l}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!En(a[e.dataKey])){var u=y2(n,"value",a[e.dataKey]);if(u)return u.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var d=Vn(a,En(l)?e.dataKey:l);return En(d)?null:e.scale(d)}var s7=t=>{var e=t.flat(2).filter(De);return[Math.min(...e),Math.max(...e)]},o7=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],l7=(t,e,n)=>{if(t!=null)return o7(Object.keys(t).reduce((r,a)=>{var i=t[a],{stackedData:l}=i,u=l.reduce((d,h)=>{var m=lP(h,e,n),g=s7(m);return[Math.min(d[0],g[0]),Math.max(d[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},q1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,z1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nl=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var a=uh(e,m=>m.coordinate),i=1/0,l=1,u=a.length;l<u;l++){var d=a[l],h=a[l-1];i=Math.min((d.coordinate||0)-(h.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function G1(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:a,name:i}=t;return Fo(Fo({},e),{},{dataKey:n,payload:r,value:a,name:i})}function gh(t,e){if(t)return String(t);if(typeof e=="string")return e}var c7=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},u7=(t,e)=>e==="centric"?t.angle:t.radius,ci=t=>t.layout.width,ui=t=>t.layout.height,d7=t=>t.layout.scale,dP=t=>t.layout.margin,yh=ue(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),bh=ue(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),f7="data-recharts-item-index",h7="data-recharts-item-data-key",eu=60;function F1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Bd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F1(Object(n),!0).forEach(function(r){m7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m7(t,e,n){return(e=p7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p7(t){var e=g7(t,"string");return typeof e=="symbol"?e:e+""}function g7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y7=t=>t.brush.height;function b7(t){var e=bh(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var a=typeof r.width=="number"?r.width:eu;return n+a}return n},0)}function x7(t){var e=bh(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var a=typeof r.width=="number"?r.width:eu;return n+a}return n},0)}function v7(t){var e=yh(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function w7(t){var e=yh(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Wn=ue([ci,ui,dP,y7,b7,x7,v7,w7,M2,JF],(t,e,n,r,a,i,l,u,d,h)=>{var m={left:(n.left||0)+a,right:(n.right||0)+i},g={top:(n.top||0)+l,bottom:(n.bottom||0)+u},b=Bd(Bd({},g),m),v=b.bottom;b.bottom+=r,b=ZH(b,d,h);var k=t-b.left-b.right,C=e-b.top-b.bottom;return Bd(Bd({brushBottom:v},b),{},{width:Math.max(k,0),height:Math.max(C,0)})}),S7=ue(Wn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),fP=ue(ci,ui,(t,e)=>({x:0,y:0,width:t,height:e})),_7=_.createContext(null),ar=()=>_.useContext(_7)!=null,xh=t=>t.brush,vh=ue([xh,Wn,dP],(t,e,n)=>({height:t.height,x:De(t.x)?t.x:e.left,y:De(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:De(t.width)?t.width:e.width})),wy={},Sy={},_y={},H1;function k7(){return H1||(H1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:a,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),h=i==null||i.includes("trailing"),m=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},g=()=>{h&&m(),C()};let b=null;const v=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,g()},r)},k=()=>{b!==null&&(clearTimeout(b),b=null)},C=()=>{k(),l=void 0,u=null},N=()=>{m()},T=function(...R){if(a!=null&&a.aborted)return;l=this,u=R;const E=b==null;v(),d&&E&&m()};return T.schedule=v,T.cancel=C,T.flush=N,a==null||a.addEventListener("abort",C,{once:!0}),T}t.debounce=e})(_y)),_y}var V1;function N7(){return V1||(V1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k7();function n(r,a=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,h=Array(2);l&&(h[0]="leading"),u&&(h[1]="trailing");let m,g=null;const b=e.debounce(function(...C){m=r.apply(this,C),g=null},a,{edges:h}),v=function(...C){return d!=null&&(g===null&&(g=Date.now()),Date.now()-g>=d)?(m=r.apply(this,C),g=Date.now(),b.cancel(),b.schedule(),m):(b.apply(this,C),m)},k=()=>(b.flush(),m);return v.cancel=b.cancel,v.flush=k,v}t.debounce=n})(Sy)),Sy}var W1;function C7(){return W1||(W1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N7();function n(r,a=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return e.debounce(r,a,{leading:l,maxWait:a,trailing:u})}t.throttle=n})(wy)),wy}var ky,K1;function E7(){return K1||(K1=1,ky=C7().throttle),ky}var T7=E7();const A7=fa(T7);var Sf=function(e,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]},hP=(t,e,n)=>{var{width:r="100%",height:a="100%",aspect:i,maxHeight:l}=n,u=ei(r)?t:Number(r),d=ei(a)?e:Number(a);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},j7={width:0,height:0,overflow:"visible"},P7={width:0,overflowX:"visible"},I7={height:0,overflowY:"visible"},R7={},M7=t=>{var{width:e,height:n}=t,r=ei(e),a=ei(n);return r&&a?j7:r?P7:a?I7:R7};function D7(t){var{width:e,height:n,aspect:r}=t,a=e,i=n;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=r&&r>0?void 0:"100%":i===void 0&&(i=r&&r>0?void 0:"100%"),{width:a,height:i}}function nn(t){return Number.isFinite(t)}function ka(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function B0(){return B0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B0.apply(null,arguments)}function Y1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function J1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y1(Object(n),!0).forEach(function(r){O7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O7(t,e,n){return(e=L7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L7(t){var e=U7(t,"string");return typeof e=="symbol"?e:e+""}function U7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mP=_.createContext({width:-1,height:-1});function B7(t){return ka(t.width)&&ka(t.height)}function pP(t){var{children:e,width:n,height:r}=t,a=_.useMemo(()=>({width:n,height:r}),[n,r]);return B7(a)?_.createElement(mP.Provider,{value:a},e):null}var Zb=()=>_.useContext(mP),$7=_.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:a,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:h,debounce:m=0,id:g,className:b,onResize:v,style:k={}}=t,C=_.useRef(null),N=_.useRef();N.current=v,_.useImperativeHandle(e,()=>C.current);var[T,R]=_.useState({containerWidth:r.width,containerHeight:r.height}),E=_.useCallback(($,H)=>{R(z=>{var F=Math.round($),V=Math.round(H);return z.containerWidth===F&&z.containerHeight===V?z:{containerWidth:F,containerHeight:V}})},[]);_.useEffect(()=>{if(C.current==null||typeof ResizeObserver>"u")return ml;var $=V=>{var K,{width:pe,height:Y}=V[0].contentRect;E(pe,Y),(K=N.current)===null||K===void 0||K.call(N,pe,Y)};m>0&&($=A7($,m,{trailing:!0,leading:!1}));var H=new ResizeObserver($),{width:z,height:F}=C.current.getBoundingClientRect();return E(z,F),H.observe(C.current),()=>{H.disconnect()}},[E,m]);var{containerWidth:P,containerHeight:j}=T;Sf(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:I,calculatedHeight:D}=hP(P,j,{width:a,height:i,aspect:n,maxHeight:d});return Sf(I!=null&&I>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,D,a,i,l,u,n),_.createElement("div",{id:g?"".concat(g):void 0,className:Ct("recharts-responsive-container",b),style:J1(J1({},k),{},{width:a,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:C},_.createElement("div",{style:M7({width:a,height:i})},_.createElement(pP,{width:I,height:D},h)))}),ex=_.forwardRef((t,e)=>{var n=Zb();if(ka(n.width)&&ka(n.height))return t.children;var{width:r,height:a}=D7({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:i,calculatedHeight:l}=hP(void 0,void 0,{width:r,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return De(i)&&De(l)?_.createElement(pP,{width:i,height:l},t.children):_.createElement($7,B0({},t,{width:r,height:a,ref:e}))});function gP(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var wh=()=>{var t,e=ar(),n=$e(S7),r=$e(vh),a=(t=$e(xh))===null||t===void 0?void 0:t.padding;return!e||!r||!a?n:{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,x:a.left,y:a.top}},q7={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},yP=()=>{var t;return(t=$e(Wn))!==null&&t!==void 0?t:q7},tx=()=>$e(ci),nx=()=>$e(ui),z7=()=>$e(t=>t.layout.margin),It=t=>t.layout.layoutType,tu=()=>$e(It),G7=()=>{var t=tu();return t!==void 0},Sh=t=>{var e=wn(),n=ar(),{width:r,height:a}=t,i=Zb(),l=r,u=a;return i&&(l=i.width>0?i.width:r,u=i.height>0?i.height:a),_.useEffect(()=>{!n&&ka(l)&&ka(u)&&e(WH({width:l,height:u}))},[e,n,l,u]),null},F7={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},bP=yr({name:"legend",initialState:F7,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Cn()},removeLegendPayload:{reducer(t,e){var n=Xa(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Cn()}}}),{setLegendSize:X1,setLegendSettings:H7,addLegendPayload:V7,removeLegendPayload:W7}=bP.actions,K7=bP.reducer,Y7=["contextPayload"];function $0(){return $0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$0.apply(null,arguments)}function Q1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q1(Object(n),!0).forEach(function(r){J7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J7(t,e,n){return(e=X7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X7(t){var e=Q7(t,"string");return typeof e=="symbol"?e:e+""}function Q7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z7(t,e){if(t==null)return{};var n,r,a=e9(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function e9(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function t9(t){return t.value}function n9(t){var{contextPayload:e}=t,n=Z7(t,Y7),r=j2(e,t.payloadUniqBy,t9),a=rl(rl({},n),{},{payload:r});return _.isValidElement(t.content)?_.cloneElement(t.content,a):typeof t.content=="function"?_.createElement(t.content,a):_.createElement(iF,a)}function r9(t,e,n,r,a,i){var{layout:l,align:u,verticalAlign:d}=e,h,m;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(u==="center"&&l==="vertical"?h={left:((r||0)-i.width)/2}:h=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(d==="middle"?m={top:((a||0)-i.height)/2}:m=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),rl(rl({},h),m)}function a9(t){var e=wn();return _.useEffect(()=>{e(H7(t))},[e,t]),null}function i9(t){var e=wn();return _.useEffect(()=>(e(X1(t)),()=>{e(X1({width:0,height:0}))}),[e,t]),null}function s9(t,e,n,r){return t==="vertical"&&De(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var o9={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function rx(t){var e=Dn(t,o9),n=ZF(),r=Xz(),a=z7(),{width:i,height:l,wrapperStyle:u,portal:d}=e,[h,m]=D2([n]),g=tx(),b=nx();if(g==null||b==null)return null;var v=g-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),k=s9(e.layout,l,i,v),C=d?u:rl(rl({position:"absolute",width:(k==null?void 0:k.width)||i||"auto",height:(k==null?void 0:k.height)||l||"auto"},r9(u,e,a,g,b,h)),u),N=d??r;if(N==null||n==null)return null;var T=_.createElement("div",{className:"recharts-legend-wrapper",style:C,ref:m},_.createElement(a9,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),_.createElement(i9,{width:h.width,height:h.height}),_.createElement(n9,$0({},e,k,{margin:a,chartWidth:g,chartHeight:b,contextPayload:n})));return Lb.createPortal(T,N)}rx.displayName="Legend";function q0(){return q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q0.apply(null,arguments)}function Z1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ny(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z1(Object(n),!0).forEach(function(r){l9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l9(t,e,n){return(e=c9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c9(t){var e=u9(t,"string");return typeof e=="symbol"?e:e+""}function u9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d9(t){return Array.isArray(t)&&_a(t[0])&&_a(t[1])?t.join(" ~ "):t}var f9=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:a={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:h,label:m,labelFormatter:g,accessibilityLayer:b=!1}=t,v=()=>{if(i&&i.length){var j={padding:0,margin:0},I=(u?uh(i,u):i).map((D,$)=>{if(D.type==="none")return null;var H=D.formatter||l||d9,{value:z,name:F}=D,V=z,K=F;if(H){var pe=H(z,F,D,$,i);if(Array.isArray(pe))[V,K]=pe;else if(pe!=null)V=pe;else return null}var Y=Ny({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},r);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:Y},_a(K)?_.createElement("span",{className:"recharts-tooltip-item-name"},K):null,_a(K)?_.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,_.createElement("span",{className:"recharts-tooltip-item-value"},V),_.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},k=Ny({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),C=Ny({margin:0},a),N=!En(m),T=N?m:"",R=Ct("recharts-default-tooltip",d),E=Ct("recharts-tooltip-label",h);N&&g&&i!==void 0&&i!==null&&(T=g(m,i));var P=b?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",q0({className:R,style:k},P),_.createElement("p",{className:E,style:C},_.isValidElement(T)?T:"".concat(T)),v())},bc="recharts-tooltip-wrapper",h9={visibility:"hidden"};function m9(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ct(bc,{["".concat(bc,"-right")]:De(n)&&e&&De(e.x)&&n>=e.x,["".concat(bc,"-left")]:De(n)&&e&&De(e.x)&&n<e.x,["".concat(bc,"-bottom")]:De(r)&&e&&De(e.y)&&r>=e.y,["".concat(bc,"-top")]:De(r)&&e&&De(e.y)&&r<e.y})}function eE(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:a,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:h}=t;if(i&&De(i[r]))return i[r];var m=n[r]-u-(a>0?a:0),g=n[r]+a;if(e[r])return l[r]?m:g;var b=d[r];if(b==null)return 0;if(l[r]){var v=m,k=b;return v<k?Math.max(g,b):Math.max(m,b)}if(h==null)return 0;var C=g+u,N=b+h;return C>N?Math.max(m,b):Math.max(g,b)}function p9(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function g9(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:a,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=t,h,m,g;return l.height>0&&l.width>0&&n?(m=eE({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),g=eE({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),h=p9({translateX:m,translateY:g,useTranslate3d:u})):h=h9,{cssProperties:h,cssClasses:m9({translateX:m,translateY:g,coordinate:n})}}function tE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function $d(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tE(Object(n),!0).forEach(function(r){z0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z0(t,e,n){return(e=y9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y9(t){var e=b9(t,"string");return typeof e=="symbol"?e:e+""}function b9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class x9 extends _.PureComponent{constructor(){super(...arguments),z0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),z0(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:a,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:h,position:m,reverseDirection:g,useTranslate3d:b,viewBox:v,wrapperStyle:k,lastBoundingBox:C,innerRef:N,hasPortalFromProps:T}=this.props,{cssClasses:R,cssProperties:E}=g9({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:m,reverseDirection:g,tooltipBox:{height:C.height,width:C.width},useTranslate3d:b,viewBox:v}),P=T?{}:$d($d({transition:d&&e?"transform ".concat(r,"ms ").concat(a):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),j=$d($d({},P),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},k);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:R,style:j,ref:N},i)}}var v9=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),zs={devToolsEnabled:!1,isSsr:v9()},xP=()=>{var t;return(t=$e(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function G0(){return G0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G0.apply(null,arguments)}function nE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nE(Object(n),!0).forEach(function(r){w9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function w9(t,e,n){return(e=S9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S9(t){var e=_9(t,"string");return typeof e=="symbol"?e:e+""}function _9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aE={curveBasisClosed:gG,curveBasisOpen:yG,curveBasis:pG,curveBumpX:tG,curveBumpY:nG,curveLinearClosed:bG,curveLinear:oh,curveMonotoneX:xG,curveMonotoneY:vG,curveNatural:wG,curveStep:SG,curveStepAfter:kG,curveStepBefore:_G},_f=t=>nn(t.x)&&nn(t.y),iE=t=>t.base!=null&&_f(t.base)&&_f(t),xc=t=>t.x,vc=t=>t.y,k9=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Xc(t));return(n==="curveMonotone"||n==="curveBump")&&e?aE["".concat(n).concat(e==="vertical"?"Y":"X")]:aE[n]||oh},N9=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:a,connectNulls:i=!1}=t,l=k9(e,a),u=i?n.filter(_f):n,d;if(Array.isArray(r)){var h=n.map((v,k)=>rE(rE({},v),{},{base:r[k]}));a==="vertical"?d=Rd().y(vc).x1(xc).x0(v=>v.base.x):d=Rd().x(xc).y1(vc).y0(v=>v.base.y);var m=d.defined(iE).curve(l),g=i?h.filter(iE):h;return m(g)}a==="vertical"&&De(r)?d=Rd().y(vc).x1(xc).x0(r):De(r)?d=Rd().x(xc).y1(vc).y0(r):d=a2().x(xc).y(vc);var b=d.defined(_f).curve(l);return b(u)},Pc=t=>{var{className:e,points:n,path:r,pathRef:a}=t;if((!n||!n.length)&&!r)return null;var i=n&&n.length?N9(t):r;return _.createElement("path",G0({},Zr(t),Hb(t),{className:Ct("recharts-curve",e),d:i===null?void 0:i,ref:a}))},C9=["x","y","top","left","width","height","className"];function F0(){return F0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F0.apply(null,arguments)}function sE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function E9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sE(Object(n),!0).forEach(function(r){T9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T9(t,e,n){return(e=A9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A9(t){var e=j9(t,"string");return typeof e=="symbol"?e:e+""}function j9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P9(t,e){if(t==null)return{};var n,r,a=I9(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function I9(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var R9=(t,e,n,r,a,i)=>"M".concat(t,",").concat(a,"v").concat(r,"M").concat(i,",").concat(e,"h").concat(n),M9=t=>{var{x:e=0,y:n=0,top:r=0,left:a=0,width:i=0,height:l=0,className:u}=t,d=P9(t,C9),h=E9({x:e,y:n,top:r,left:a,width:i,height:l},d);return!De(e)||!De(n)||!De(i)||!De(l)||!De(r)||!De(a)?null:_.createElement("path",F0({},rr(h),{className:Ct("recharts-cross",u),d:R9(e,n,i,l,r,a)}))};function D9(t,e,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-a,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function oE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function lE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oE(Object(n),!0).forEach(function(r){O9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O9(t,e,n){return(e=L9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L9(t){var e=U9(t,"string");return typeof e=="symbol"?e:e+""}function U9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B9=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),vP=(t,e,n)=>t.map(r=>"".concat(B9(r)," ").concat(e,"ms ").concat(n)).join(","),$9=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(a=>r.includes(a))),$c=(t,e)=>Object.keys(e).reduce((n,r)=>lE(lE({},n),{},{[r]:t(r,e[r])}),{});function cE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cE(Object(n),!0).forEach(function(r){q9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q9(t,e,n){return(e=z9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z9(t){var e=G9(t,"string");return typeof e=="symbol"?e:e+""}function G9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kf=(t,e,n)=>t+(e-t)*n,H0=t=>{var{from:e,to:n}=t;return e!==n},wP=(t,e,n)=>{var r=$c((a,i)=>{if(H0(i)){var[l,u]=t(i.from,i.to,i.velocity);return Nn(Nn({},i),{},{from:l,velocity:u})}return i},e);return n<1?$c((a,i)=>H0(i)?Nn(Nn({},i),{},{velocity:kf(i.velocity,r[a].velocity,n),from:kf(i.from,r[a].from,n)}):i,e):wP(t,r,n-1)};function F9(t,e,n,r,a,i){var l,u=r.reduce((b,v)=>Nn(Nn({},b),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),d=()=>$c((b,v)=>v.from,u),h=()=>!Object.values(u).filter(H0).length,m=null,g=b=>{l||(l=b);var v=b-l,k=v/n.dt;u=wP(n,u,k),a(Nn(Nn(Nn({},t),e),d())),l=b,h()||(m=i.setTimeout(g))};return()=>(m=i.setTimeout(g),()=>{var b;(b=m)===null||b===void 0||b()})}function H9(t,e,n,r,a,i,l){var u=null,d=a.reduce((g,b)=>Nn(Nn({},g),{},{[b]:[t[b],e[b]]}),{}),h,m=g=>{h||(h=g);var b=(g-h)/r,v=$c((C,N)=>kf(...N,n(b)),d);if(i(Nn(Nn(Nn({},t),e),v)),b<1)u=l.setTimeout(m);else{var k=$c((C,N)=>kf(...N,n(1)),d);i(Nn(Nn(Nn({},t),e),k))}};return()=>(u=l.setTimeout(m),()=>{var g;(g=u)===null||g===void 0||g()})}const V9=(t,e,n,r,a,i)=>{var l=$9(t,e);return n==null?()=>(a(Nn(Nn({},t),e)),()=>{}):n.isStepper===!0?F9(t,e,n,l,a,i):H9(t,e,n,r,l,a,i)};var Nf=1e-4,SP=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],_P=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),uE=(t,e)=>n=>{var r=SP(t,e);return _P(r,n)},W9=(t,e)=>n=>{var r=SP(t,e),a=[...r.map((i,l)=>i*l).slice(1),0];return _P(a,n)},K9=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,i=n[0].split("(");if(i[0]==="cubic-bezier"&&((a=i[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return n.length===4?n:[0,0,1,1]},Y9=(t,e,n,r)=>{var a=uE(t,n),i=uE(e,r),l=W9(t,n),u=h=>h>1?1:h<0?0:h,d=h=>{for(var m=h>1?1:h,g=m,b=0;b<8;++b){var v=a(g)-m,k=l(g);if(Math.abs(v-m)<Nf||k<Nf)return i(g);g=u(g-v/k)}return i(g)};return d.isStepper=!1,d},dE=function(){return Y9(...K9(...arguments))},J9=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:a=17}=e,i=(l,u,d)=>{var h=-(l-u)*n,m=d*r,g=d+(h-m)*a/1e3,b=d*a/1e3+l;return Math.abs(b-u)<Nf&&Math.abs(g)<Nf?[u,0]:[b,g]};return i.isStepper=!0,i.dt=a,i},X9=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return dE(t);case"spring":return J9();default:if(t.split("(")[0]==="cubic-bezier")return dE(t)}return typeof t=="function"?t:null};function Q9(t){var e,n=()=>null,r=!1,a=null,i=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...h]=u;if(typeof d=="number"){a=t.setTimeout(i.bind(null,h),d);return}i(d),a=t.setTimeout(i.bind(null,h));return}typeof l=="string"&&(e=l,n(e)),typeof l=="object"&&(e=l,n(e)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,a&&(a(),a=null),i(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>t}}class Z9{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),a=null,i=l=>{l-r>=n?e(l):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function eV(){return Q9(new Z9)}var tV=_.createContext(eV);function nV(t,e){var n=_.useContext(tV);return _.useMemo(()=>e??n(t),[t,e,n])}var rV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},fE={t:0},Cy={t:1};function _h(t){var e=Dn(t,rV),{isActive:n,canBegin:r,duration:a,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:h}=e,m=nV(e.animationId,e.animationManager),[g,b]=_.useState(n?fE:Cy),v=_.useRef(null);return _.useEffect(()=>{n||b(Cy)},[n]),_.useEffect(()=>{if(!n||!r)return ml;var k=V9(fE,Cy,X9(i),a,b,m.getTimeoutController()),C=()=>{v.current=k()};return m.start([d,l,C,a,u]),()=>{m.stop(),v.current&&v.current(),u()}},[n,r,a,i,l,d,u,m]),h(g.t)}function kh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=_.useRef(Oc(e)),r=_.useRef(t);return r.current!==t&&(n.current=Oc(e),r.current=t),n.current}var aV=["radius"],iV=["radius"];function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function mE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(r){sV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sV(t,e,n){return(e=oV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oV(t){var e=lV(t,"string");return typeof e=="symbol"?e:e+""}function lV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cf.apply(null,arguments)}function pE(t,e){if(t==null)return{};var n,r,a=cV(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function cV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gE=(t,e,n,r,a)=>{var i=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,h;if(i>0&&a instanceof Array){for(var m=[0,0,0,0],g=0,b=4;g<b;g++)m[g]=a[g]>i?i:a[g];h="M".concat(t,",").concat(e+l*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(t+u*m[0],",").concat(e)),h+="L ".concat(t+n-u*m[1],",").concat(e),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(e+l*m[1])),h+="L ".concat(t+n,",").concat(e+r-l*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(t+n-u*m[2],",").concat(e+r)),h+="L ".concat(t+u*m[3],",").concat(e+r),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(e+r-l*m[3])),h+="Z"}else if(i>0&&a===+a&&a>0){var v=Math.min(i,a);h="M ".concat(t,",").concat(e+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+u*v,",").concat(e,`
            L `).concat(t+n-u*v,",").concat(e,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n,",").concat(e+l*v,`
            L `).concat(t+n,",").concat(e+r-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n-u*v,",").concat(e+r,`
            L `).concat(t+u*v,",").concat(e+r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(e+r-l*v," Z")}else h="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},yE={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kP=t=>{var e=Dn(t,yE),n=_.useRef(null),[r,a]=_.useState(-1);_.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var B=n.current.getTotalLength();B&&a(B)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:h,className:m}=e,{animationEasing:g,animationDuration:b,animationBegin:v,isAnimationActive:k,isUpdateAnimationActive:C}=e,N=_.useRef(u),T=_.useRef(d),R=_.useRef(i),E=_.useRef(l),P=_.useMemo(()=>({x:i,y:l,width:u,height:d,radius:h}),[i,l,u,d,h]),j=kh(P,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var I=Ct("recharts-rectangle",m);if(!C){var D=rr(e),{radius:$}=D,H=pE(D,aV);return _.createElement("path",Cf({},H,{radius:typeof h=="number"?h:void 0,className:I,d:gE(i,l,u,d,h)}))}var z=N.current,F=T.current,V=R.current,K=E.current,pe="0px ".concat(r===-1?1:r,"px"),Y="".concat(r,"px 0px"),q=vP(["strokeDasharray"],b,typeof g=="string"?g:yE.animationEasing);return _.createElement(_h,{animationId:j,key:j,canBegin:r>0,duration:b,easing:g,isActive:C,begin:v},B=>{var ae=xn(z,u,B),X=xn(F,d,B),ve=xn(V,i,B),L=xn(K,l,B);n.current&&(N.current=ae,T.current=X,R.current=ve,E.current=L);var O;k?B>0?O={transition:q,strokeDasharray:Y}:O={strokeDasharray:pe}:O={strokeDasharray:Y};var Z=rr(e),{radius:U}=Z,J=pE(Z,iV);return _.createElement("path",Cf({},J,{radius:typeof h=="number"?h:void 0,className:I,d:gE(ve,L,ae,X,h),ref:n,style:mE(mE({},O),e.style)}))})};function bE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function xE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bE(Object(n),!0).forEach(function(r){uV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uV(t,e,n){return(e=dV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dV(t){var e=fV(t,"string");return typeof e=="symbol"?e:e+""}function fV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ef=Math.PI/180,hV=t=>t*180/Math.PI,Hn=(t,e,n,r)=>({x:t+Math.cos(-Ef*r)*n,y:e+Math.sin(-Ef*r)*n}),mV=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},pV=(t,e)=>{var{x:n,y:r}=t,{x:a,y:i}=e;return Math.sqrt((n-a)**2+(r-i)**2)},gV=(t,e)=>{var{x:n,y:r}=t,{cx:a,cy:i}=e,l=pV({x:n,y:r},{x:a,y:i});if(l<=0)return{radius:l,angle:0};var u=(n-a)/l,d=Math.acos(u);return r>i&&(d=2*Math.PI-d),{radius:l,angle:hV(d),angleInRadian:d}},yV=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),a=Math.floor(n/360),i=Math.min(r,a);return{startAngle:e-i*360,endAngle:n-i*360}},bV=(t,e)=>{var{startAngle:n,endAngle:r}=e,a=Math.floor(n/360),i=Math.floor(r/360),l=Math.min(a,i);return t+l*360},xV=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:a,angle:i}=gV({x:n,y:r},e),{innerRadius:l,outerRadius:u}=e;if(a<l||a>u||a===0)return null;var{startAngle:d,endAngle:h}=yV(e),m=i,g;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=d}return g?xE(xE({},e),{},{radius:a,angle:bV(m,e)}):null};function NP(t){var{cx:e,cy:n,radius:r,startAngle:a,endAngle:i}=t,l=Hn(e,n,r,a),u=Hn(e,n,r,i);return{points:[l,u],cx:e,cy:n,radius:r,startAngle:a,endAngle:i}}function V0(){return V0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V0.apply(null,arguments)}var vV=(t,e)=>{var n=Jr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},qd=t=>{var{cx:e,cy:n,radius:r,angle:a,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=t,h=u*(l?1:-1)+r,m=Math.asin(u/h)/Ef,g=d?a:a+i*m,b=Hn(e,n,h,g),v=Hn(e,n,r,g),k=d?a-i*m:a,C=Hn(e,n,h*Math.cos(m*Ef),k);return{center:b,circleTangency:v,lineTangency:C,theta:m}},CP=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:a,startAngle:i,endAngle:l}=t,u=vV(i,l),d=i+u,h=Hn(e,n,a,i),m=Hn(e,n,a,d),g="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(r>0){var b=Hn(e,n,r,i),v=Hn(e,n,r,d);g+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(b.x,",").concat(b.y," Z")}else g+="L ".concat(e,",").concat(n," Z");return g},wV=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:a,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}=t,m=Jr(h-d),{circleTangency:g,lineTangency:b,theta:v}=qd({cx:e,cy:n,radius:a,angle:d,sign:m,cornerRadius:i,cornerIsExternal:u}),{circleTangency:k,lineTangency:C,theta:N}=qd({cx:e,cy:n,radius:a,angle:h,sign:-m,cornerRadius:i,cornerIsExternal:u}),T=u?Math.abs(d-h):Math.abs(d-h)-v-N;if(T<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):CP({cx:e,cy:n,innerRadius:r,outerRadius:a,startAngle:d,endAngle:h});var R="M ".concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(m<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,`
  `);if(r>0){var{circleTangency:E,lineTangency:P,theta:j}=qd({cx:e,cy:n,radius:r,angle:d,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:I,lineTangency:D,theta:$}=qd({cx:e,cy:n,radius:r,angle:h,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),H=u?Math.abs(d-h):Math.abs(d-h)-j-$;if(H<0&&i===0)return"".concat(R,"L").concat(e,",").concat(n,"Z");R+="L".concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(H>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(P.x,",").concat(P.y,"Z")}else R+="L".concat(e,",").concat(n,"Z");return R},SV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},EP=t=>{var e=Dn(t,SV),{cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:m,className:g}=e;if(i<a||h===m)return null;var b=Ct("recharts-sector",g),v=i-a,k=Fi(l,v,0,!0),C;return k>0&&Math.abs(h-m)<360?C=wV({cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:Math.min(k,v/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:m}):C=CP({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:h,endAngle:m}),_.createElement("path",V0({},rr(e),{className:b,d:C}))};function _V(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(x2(e)){if(t==="centric"){var{cx:r,cy:a,innerRadius:i,outerRadius:l,angle:u}=e,d=Hn(r,a,i,u),h=Hn(r,a,l,u);return[{x:d.x,y:d.y},{x:h.x,y:h.y}]}return NP(e)}}var Ey={},Ty={},Ay={},vE;function kV(){return vE||(vE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I2();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(Ay)),Ay}var wE;function NV(){return wE||(wE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kV();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(Ty)),Ty}var SE;function CV(){return SE||(SE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R2(),n=NV();function r(a,i,l){l&&typeof l!="number"&&e.isIterateeCall(a,i,l)&&(i=l=void 0),a=n.toFinite(a),i===void 0?(i=a,a=0):i=n.toFinite(i),l=l===void 0?a<i?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((i-a)/(l||1)),0),d=new Array(u);for(let h=0;h<u;h++)d[h]=a,a+=l;return d}t.range=r})(Ey)),Ey}var jy,_E;function EV(){return _E||(_E=1,jy=CV().range),jy}var TV=EV();const TP=fa(TV);function Gi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function AV(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ax(t){let e,n,r;t.length!==2?(e=Gi,n=(u,d)=>Gi(t(u),d),r=(u,d)=>t(u)-d):(e=t===Gi||t===AV?t:jV,n=t,r=t);function a(u,d,h=0,m=u.length){if(h<m){if(e(d,d)!==0)return m;do{const g=h+m>>>1;n(u[g],d)<0?h=g+1:m=g}while(h<m)}return h}function i(u,d,h=0,m=u.length){if(h<m){if(e(d,d)!==0)return m;do{const g=h+m>>>1;n(u[g],d)<=0?h=g+1:m=g}while(h<m)}return h}function l(u,d,h=0,m=u.length){const g=a(u,d,h,m-1);return g>h&&r(u[g-1],d)>-r(u[g],d)?g-1:g}return{left:a,center:l,right:i}}function jV(){return 0}function AP(t){return t===null?NaN:+t}function*PV(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const IV=ax(Gi),nu=IV.right;ax(AP).center;class kE extends Map{constructor(e,n=DV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(NE(this,e))}has(e){return super.has(NE(this,e))}set(e,n){return super.set(RV(this,e),n)}delete(e){return super.delete(MV(this,e))}}function NE({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function RV({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function MV({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function DV(t){return t!==null&&typeof t=="object"?t.valueOf():t}function OV(t=Gi){if(t===Gi)return jP;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function jP(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const LV=Math.sqrt(50),UV=Math.sqrt(10),BV=Math.sqrt(2);function Tf(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),l=i>=LV?10:i>=UV?5:i>=BV?2:1;let u,d,h;return a<0?(h=Math.pow(10,-a)/l,u=Math.round(t*h),d=Math.round(e*h),u/h<t&&++u,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*l,u=Math.round(t/h),d=Math.round(e/h),u*h<t&&++u,d*h>e&&--d),d<u&&.5<=n&&n<2?Tf(t,e,n*2):[u,d,h]}function W0(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,l]=r?Tf(e,t,n):Tf(t,e,n);if(!(i>=a))return[];const u=i-a+1,d=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)d[h]=(i-h)/-l;else for(let h=0;h<u;++h)d[h]=(i-h)*l;else if(l<0)for(let h=0;h<u;++h)d[h]=(a+h)/-l;else for(let h=0;h<u;++h)d[h]=(a+h)*l;return d}function K0(t,e,n){return e=+e,t=+t,n=+n,Tf(t,e,n)[2]}function Y0(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?K0(e,t,n):K0(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function CE(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function EE(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function PP(t,e,n=0,r=1/0,a){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(a=a===void 0?jP:OV(a);r>n;){if(r-n>600){const d=r-n+1,h=e-n+1,m=Math.log(d),g=.5*Math.exp(2*m/3),b=.5*Math.sqrt(m*g*(d-g)/d)*(h-d/2<0?-1:1),v=Math.max(n,Math.floor(e-h*g/d+b)),k=Math.min(r,Math.floor(e+(d-h)*g/d+b));PP(t,e,v,k,a)}const i=t[e];let l=n,u=r;for(wc(t,n,e),a(t[r],i)>0&&wc(t,n,r);l<u;){for(wc(t,l,u),++l,--u;a(t[l],i)<0;)++l;for(;a(t[u],i)>0;)--u}a(t[n],i)===0?wc(t,n,u):(++u,wc(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function wc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $V(t,e,n){if(t=Float64Array.from(PV(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return EE(t);if(e>=1)return CE(t);var r,a=(r-1)*e,i=Math.floor(a),l=CE(PP(t,i).subarray(0,i+1)),u=EE(t.subarray(i+1));return l+(u-l)*(a-i)}}function qV(t,e,n=AP){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,a=(r-1)*e,i=Math.floor(a),l=+n(t[i],i,t),u=+n(t[i+1],i+1,t);return l+(u-l)*(a-i)}}function zV(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(a);++r<a;)i[r]=t+r*n;return i}function ra(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function di(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const J0=Symbol("implicit");function ix(){var t=new kE,e=[],n=[],r=J0;function a(i){let l=t.get(i);if(l===void 0){if(r!==J0)return r;t.set(i,l=e.push(i)-1)}return n[l%n.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new kE;for(const l of i)t.has(l)||t.set(l,e.push(l)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return ix(e,n).unknown(r)},ra.apply(a,arguments),a}function sx(){var t=ix().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,i,l,u=!1,d=0,h=0,m=.5;delete t.unknown;function g(){var b=e().length,v=a<r,k=v?a:r,C=v?r:a;i=(C-k)/Math.max(1,b-d+h*2),u&&(i=Math.floor(i)),k+=(C-k-i*(b-d))*m,l=i*(1-d),u&&(k=Math.round(k),l=Math.round(l));var N=zV(b).map(function(T){return k+i*T});return n(v?N.reverse():N)}return t.domain=function(b){return arguments.length?(e(b),g()):e()},t.range=function(b){return arguments.length?([r,a]=b,r=+r,a=+a,g()):[r,a]},t.rangeRound=function(b){return[r,a]=b,r=+r,a=+a,u=!0,g()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(b){return arguments.length?(u=!!b,g()):u},t.padding=function(b){return arguments.length?(d=Math.min(1,h=+b),g()):d},t.paddingInner=function(b){return arguments.length?(d=Math.min(1,b),g()):d},t.paddingOuter=function(b){return arguments.length?(h=+b,g()):h},t.align=function(b){return arguments.length?(m=Math.max(0,Math.min(1,b)),g()):m},t.copy=function(){return sx(e(),[r,a]).round(u).paddingInner(d).paddingOuter(h).align(m)},ra.apply(g(),arguments)}function IP(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return IP(e())},t}function GV(){return IP(sx.apply(null,arguments).paddingInner(1))}function ox(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function RP(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ru(){}var qc=.7,Af=1/qc,Qo="\\s*([+-]?\\d+)\\s*",zc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",FV=/^#([0-9a-f]{3,8})$/,HV=new RegExp(`^rgb\\(${Qo},${Qo},${Qo}\\)$`),VV=new RegExp(`^rgb\\(${Sa},${Sa},${Sa}\\)$`),WV=new RegExp(`^rgba\\(${Qo},${Qo},${Qo},${zc}\\)$`),KV=new RegExp(`^rgba\\(${Sa},${Sa},${Sa},${zc}\\)$`),YV=new RegExp(`^hsl\\(${zc},${Sa},${Sa}\\)$`),JV=new RegExp(`^hsla\\(${zc},${Sa},${Sa},${zc}\\)$`),TE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ox(ru,Gc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:AE,formatHex:AE,formatHex8:XV,formatHsl:QV,formatRgb:jE,toString:jE});function AE(){return this.rgb().formatHex()}function XV(){return this.rgb().formatHex8()}function QV(){return MP(this).formatHsl()}function jE(){return this.rgb().formatRgb()}function Gc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=FV.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?PE(e):n===3?new gr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=HV.exec(t))?new gr(e[1],e[2],e[3],1):(e=VV.exec(t))?new gr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=WV.exec(t))?zd(e[1],e[2],e[3],e[4]):(e=KV.exec(t))?zd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YV.exec(t))?ME(e[1],e[2]/100,e[3]/100,1):(e=JV.exec(t))?ME(e[1],e[2]/100,e[3]/100,e[4]):TE.hasOwnProperty(t)?PE(TE[t]):t==="transparent"?new gr(NaN,NaN,NaN,0):null}function PE(t){return new gr(t>>16&255,t>>8&255,t&255,1)}function zd(t,e,n,r){return r<=0&&(t=e=n=NaN),new gr(t,e,n,r)}function ZV(t){return t instanceof ru||(t=Gc(t)),t?(t=t.rgb(),new gr(t.r,t.g,t.b,t.opacity)):new gr}function X0(t,e,n,r){return arguments.length===1?ZV(t):new gr(t,e,n,r??1)}function gr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ox(gr,X0,RP(ru,{brighter(t){return t=t==null?Af:Math.pow(Af,t),new gr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?qc:Math.pow(qc,t),new gr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gr(js(this.r),js(this.g),js(this.b),jf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IE,formatHex:IE,formatHex8:eW,formatRgb:RE,toString:RE}));function IE(){return`#${Ns(this.r)}${Ns(this.g)}${Ns(this.b)}`}function eW(){return`#${Ns(this.r)}${Ns(this.g)}${Ns(this.b)}${Ns((isNaN(this.opacity)?1:this.opacity)*255)}`}function RE(){const t=jf(this.opacity);return`${t===1?"rgb(":"rgba("}${js(this.r)}, ${js(this.g)}, ${js(this.b)}${t===1?")":`, ${t})`}`}function jf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function js(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ns(t){return t=js(t),(t<16?"0":"")+t.toString(16)}function ME(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ua(t,e,n,r)}function MP(t){if(t instanceof ua)return new ua(t.h,t.s,t.l,t.opacity);if(t instanceof ru||(t=Gc(t)),!t)return new ua;if(t instanceof ua)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),l=NaN,u=i-a,d=(i+a)/2;return u?(e===i?l=(n-r)/u+(n<r)*6:n===i?l=(r-e)/u+2:l=(e-n)/u+4,u/=d<.5?i+a:2-i-a,l*=60):u=d>0&&d<1?0:l,new ua(l,u,d,t.opacity)}function tW(t,e,n,r){return arguments.length===1?MP(t):new ua(t,e,n,r??1)}function ua(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ox(ua,tW,RP(ru,{brighter(t){return t=t==null?Af:Math.pow(Af,t),new ua(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?qc:Math.pow(qc,t),new ua(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new gr(Py(t>=240?t-240:t+120,a,r),Py(t,a,r),Py(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new ua(DE(this.h),Gd(this.s),Gd(this.l),jf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jf(this.opacity);return`${t===1?"hsl(":"hsla("}${DE(this.h)}, ${Gd(this.s)*100}%, ${Gd(this.l)*100}%${t===1?")":`, ${t})`}`}}));function DE(t){return t=(t||0)%360,t<0?t+360:t}function Gd(t){return Math.max(0,Math.min(1,t||0))}function Py(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const lx=t=>()=>t;function nW(t,e){return function(n){return t+n*e}}function rW(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function aW(t){return(t=+t)==1?DP:function(e,n){return n-e?rW(e,n,t):lx(isNaN(e)?n:e)}}function DP(t,e){var n=e-t;return n?nW(t,n):lx(isNaN(t)?e:t)}const OE=(function t(e){var n=aW(e);function r(a,i){var l=n((a=X0(a)).r,(i=X0(i)).r),u=n(a.g,i.g),d=n(a.b,i.b),h=DP(a.opacity,i.opacity);return function(m){return a.r=l(m),a.g=u(m),a.b=d(m),a.opacity=h(m),a+""}}return r.gamma=t,r})(1);function iW(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function sW(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oW(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),l;for(l=0;l<r;++l)a[l]=pl(t[l],e[l]);for(;l<n;++l)i[l]=e[l];return function(u){for(l=0;l<r;++l)i[l]=a[l](u);return i}}function lW(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Pf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function cW(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=pl(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Q0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Iy=new RegExp(Q0.source,"g");function uW(t){return function(){return t}}function dW(t){return function(e){return t(e)+""}}function fW(t,e){var n=Q0.lastIndex=Iy.lastIndex=0,r,a,i,l=-1,u=[],d=[];for(t=t+"",e=e+"";(r=Q0.exec(t))&&(a=Iy.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),u[l]?u[l]+=i:u[++l]=i),(r=r[0])===(a=a[0])?u[l]?u[l]+=a:u[++l]=a:(u[++l]=null,d.push({i:l,x:Pf(r,a)})),n=Iy.lastIndex;return n<e.length&&(i=e.slice(n),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?dW(d[0].x):uW(e):(e=d.length,function(h){for(var m=0,g;m<e;++m)u[(g=d[m]).i]=g.x(h);return u.join("")})}function pl(t,e){var n=typeof e,r;return e==null||n==="boolean"?lx(e):(n==="number"?Pf:n==="string"?(r=Gc(e))?(e=r,OE):fW:e instanceof Gc?OE:e instanceof Date?lW:sW(e)?iW:Array.isArray(e)?oW:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?cW:Pf)(t,e)}function cx(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function hW(t,e){e===void 0&&(e=t,t=pl);for(var n=0,r=e.length-1,a=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(a,a=e[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return i[u](l-u)}}function mW(t){return function(){return t}}function If(t){return+t}var LE=[0,1];function or(t){return t}function Z0(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:mW(isNaN(e)?NaN:.5)}function pW(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function gW(t,e,n){var r=t[0],a=t[1],i=e[0],l=e[1];return a<r?(r=Z0(a,r),i=n(l,i)):(r=Z0(r,a),i=n(i,l)),function(u){return i(r(u))}}function yW(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)a[l]=Z0(t[l],t[l+1]),i[l]=n(e[l],e[l+1]);return function(u){var d=nu(t,u,1,r)-1;return i[d](a[d](u))}}function au(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Nh(){var t=LE,e=LE,n=pl,r,a,i,l=or,u,d,h;function m(){var b=Math.min(t.length,e.length);return l!==or&&(l=pW(t[0],t[b-1])),u=b>2?yW:gW,d=h=null,g}function g(b){return b==null||isNaN(b=+b)?i:(d||(d=u(t.map(r),e,n)))(r(l(b)))}return g.invert=function(b){return l(a((h||(h=u(e,t.map(r),Pf)))(b)))},g.domain=function(b){return arguments.length?(t=Array.from(b,If),m()):t.slice()},g.range=function(b){return arguments.length?(e=Array.from(b),m()):e.slice()},g.rangeRound=function(b){return e=Array.from(b),n=cx,m()},g.clamp=function(b){return arguments.length?(l=b?!0:or,m()):l!==or},g.interpolate=function(b){return arguments.length?(n=b,m()):n},g.unknown=function(b){return arguments.length?(i=b,g):i},function(b,v){return r=b,a=v,m()}}function ux(){return Nh()(or,or)}function bW(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Rf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function al(t){return t=Rf(Math.abs(t)),t?t[1]:NaN}function xW(t,e){return function(n,r){for(var a=n.length,i=[],l=0,u=t[0],d=0;a>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),i.push(n.substring(a-=u,a+u)),!((d+=u+1)>r));)u=t[l=(l+1)%t.length];return i.reverse().join(e)}}function vW(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var wW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fc(t){if(!(e=wW.exec(t)))throw new Error("invalid format: "+t);var e;return new dx({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fc.prototype=dx.prototype;function dx(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}dx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function SW(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var OP;function _W(t,e){var n=Rf(t,e);if(!n)return t+"";var r=n[0],a=n[1],i=a-(OP=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=r.length;return i===l?r:i>l?r+new Array(i-l+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Rf(t,Math.max(0,e+i-1))[0]}function UE(t,e){var n=Rf(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const BE={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:bW,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>UE(t*100,e),r:UE,s:_W,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $E(t){return t}var qE=Array.prototype.map,zE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function kW(t){var e=t.grouping===void 0||t.thousands===void 0?$E:xW(qE.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?$E:vW(qE.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(g){g=Fc(g);var b=g.fill,v=g.align,k=g.sign,C=g.symbol,N=g.zero,T=g.width,R=g.comma,E=g.precision,P=g.trim,j=g.type;j==="n"?(R=!0,j="g"):BE[j]||(E===void 0&&(E=12),P=!0,j="g"),(N||b==="0"&&v==="=")&&(N=!0,b="0",v="=");var I=C==="$"?n:C==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",D=C==="$"?r:/[%p]/.test(j)?l:"",$=BE[j],H=/[defgprs%]/.test(j);E=E===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function z(F){var V=I,K=D,pe,Y,q;if(j==="c")K=$(F)+K,F="";else{F=+F;var B=F<0||1/F<0;if(F=isNaN(F)?d:$(Math.abs(F),E),P&&(F=SW(F)),B&&+F==0&&k!=="+"&&(B=!1),V=(B?k==="("?k:u:k==="-"||k==="("?"":k)+V,K=(j==="s"?zE[8+OP/3]:"")+K+(B&&k==="("?")":""),H){for(pe=-1,Y=F.length;++pe<Y;)if(q=F.charCodeAt(pe),48>q||q>57){K=(q===46?a+F.slice(pe+1):F.slice(pe))+K,F=F.slice(0,pe);break}}}R&&!N&&(F=e(F,1/0));var ae=V.length+F.length+K.length,X=ae<T?new Array(T-ae+1).join(b):"";switch(R&&N&&(F=e(X+F,X.length?T-K.length:1/0),X=""),v){case"<":F=V+F+K+X;break;case"=":F=V+X+F+K;break;case"^":F=X.slice(0,ae=X.length>>1)+V+F+K+X.slice(ae);break;default:F=X+V+F+K;break}return i(F)}return z.toString=function(){return g+""},z}function m(g,b){var v=h((g=Fc(g),g.type="f",g)),k=Math.max(-8,Math.min(8,Math.floor(al(b)/3)))*3,C=Math.pow(10,-k),N=zE[8+k/3];return function(T){return v(C*T)+N}}return{format:h,formatPrefix:m}}var Fd,fx,LP;NW({thousands:",",grouping:[3],currency:["$",""]});function NW(t){return Fd=kW(t),fx=Fd.format,LP=Fd.formatPrefix,Fd}function CW(t){return Math.max(0,-al(Math.abs(t)))}function EW(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(al(e)/3)))*3-al(Math.abs(t)))}function TW(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,al(e)-al(t))+1}function UP(t,e,n,r){var a=Y0(t,e,n),i;switch(r=Fc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=EW(a,l))&&(r.precision=i),LP(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=TW(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=CW(a))&&(r.precision=i-(r.type==="%")*2);break}}return fx(r)}function Ki(t){var e=t.domain;return t.ticks=function(n){var r=e();return W0(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return UP(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,l=r[a],u=r[i],d,h,m=10;for(u<l&&(h=l,l=u,u=h,h=a,a=i,i=h);m-- >0;){if(h=K0(l,u,n),h===d)return r[a]=l,r[i]=u,e(r);if(h>0)l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h;else if(h<0)l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h;else break;d=h}return t},t}function BP(){var t=ux();return t.copy=function(){return au(t,BP())},ra.apply(t,arguments),Ki(t)}function $P(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,If),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return $P(t).unknown(e)},t=arguments.length?Array.from(t,If):[0,1],Ki(n)}function qP(t,e){t=t.slice();var n=0,r=t.length-1,a=t[n],i=t[r],l;return i<a&&(l=n,n=r,r=l,l=a,a=i,i=l),t[n]=e.floor(a),t[r]=e.ceil(i),t}function GE(t){return Math.log(t)}function FE(t){return Math.exp(t)}function AW(t){return-Math.log(-t)}function jW(t){return-Math.exp(-t)}function PW(t){return isFinite(t)?+("1e"+t):t<0?0:t}function IW(t){return t===10?PW:t===Math.E?Math.exp:e=>Math.pow(t,e)}function RW(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function HE(t){return(e,n)=>-t(-e,n)}function hx(t){const e=t(GE,FE),n=e.domain;let r=10,a,i;function l(){return a=RW(r),i=IW(r),n()[0]<0?(a=HE(a),i=HE(i),t(AW,jW)):t(GE,FE),e}return e.base=function(u){return arguments.length?(r=+u,l()):r},e.domain=function(u){return arguments.length?(n(u),l()):n()},e.ticks=u=>{const d=n();let h=d[0],m=d[d.length-1];const g=m<h;g&&([h,m]=[m,h]);let b=a(h),v=a(m),k,C;const N=u==null?10:+u;let T=[];if(!(r%1)&&v-b<N){if(b=Math.floor(b),v=Math.ceil(v),h>0){for(;b<=v;++b)for(k=1;k<r;++k)if(C=b<0?k/i(-b):k*i(b),!(C<h)){if(C>m)break;T.push(C)}}else for(;b<=v;++b)for(k=r-1;k>=1;--k)if(C=b>0?k/i(-b):k*i(b),!(C<h)){if(C>m)break;T.push(C)}T.length*2<N&&(T=W0(h,m,N))}else T=W0(b,v,Math.min(v-b,N)).map(i);return g?T.reverse():T},e.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=Fc(d)).precision==null&&(d.trim=!0),d=fx(d)),u===1/0)return d;const h=Math.max(1,r*u/e.ticks().length);return m=>{let g=m/i(Math.round(a(m)));return g*r<r-.5&&(g*=r),g<=h?d(m):""}},e.nice=()=>n(qP(n(),{floor:u=>i(Math.floor(a(u))),ceil:u=>i(Math.ceil(a(u)))})),e}function zP(){const t=hx(Nh()).domain([1,10]);return t.copy=()=>au(t,zP()).base(t.base()),ra.apply(t,arguments),t}function VE(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function WE(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function mx(t){var e=1,n=t(VE(e),WE(e));return n.constant=function(r){return arguments.length?t(VE(e=+r),WE(e)):e},Ki(n)}function GP(){var t=mx(Nh());return t.copy=function(){return au(t,GP()).constant(t.constant())},ra.apply(t,arguments)}function KE(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function MW(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function DW(t){return t<0?-t*t:t*t}function px(t){var e=t(or,or),n=1;function r(){return n===1?t(or,or):n===.5?t(MW,DW):t(KE(n),KE(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,r()):n},Ki(e)}function gx(){var t=px(Nh());return t.copy=function(){return au(t,gx()).exponent(t.exponent())},ra.apply(t,arguments),t}function OW(){return gx.apply(null,arguments).exponent(.5)}function YE(t){return Math.sign(t)*t*t}function LW(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function FP(){var t=ux(),e=[0,1],n=!1,r;function a(i){var l=LW(t(i));return isNaN(l)?r:n?Math.round(l):l}return a.invert=function(i){return t.invert(YE(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,If)).map(YE)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return FP(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ra.apply(a,arguments),Ki(a)}function HP(){var t=[],e=[],n=[],r;function a(){var l=0,u=Math.max(1,e.length);for(n=new Array(u-1);++l<u;)n[l-1]=qV(t,l/u);return i}function i(l){return l==null||isNaN(l=+l)?r:e[nu(n,l)]}return i.invertExtent=function(l){var u=e.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let u of l)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(Gi),a()},i.range=function(l){return arguments.length?(e=Array.from(l),a()):e.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return HP().domain(t).range(e).unknown(r)},ra.apply(i,arguments)}function VP(){var t=0,e=1,n=1,r=[.5],a=[0,1],i;function l(d){return d!=null&&d<=d?a[nu(r,d,0,n)]:i}function u(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*e-(d-n)*t)/(n+1);return l}return l.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,u()):[t,e]},l.range=function(d){return arguments.length?(n=(a=Array.from(d)).length-1,u()):a.slice()},l.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,r[0]]:h>=n?[r[n-1],e]:[r[h-1],r[h]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return VP().domain([t,e]).range(a).unknown(i)},ra.apply(Ki(l),arguments)}function WP(){var t=[.5],e=[0,1],n,r=1;function a(i){return i!=null&&i<=i?e[nu(t,i,0,r)]:n}return a.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var l=e.indexOf(i);return[t[l-1],t[l]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return WP().domain(t).range(e).unknown(n)},ra.apply(a,arguments)}const Ry=new Date,My=new Date;function Tn(t,e,n,r){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const l=a(i),u=a.ceil(i);return i-l<u-i?l:u},a.offset=(i,l)=>(e(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,u)=>{const d=[];if(i=a.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let h;do d.push(h=new Date(+i)),e(i,u),t(i);while(h<i&&i<l);return d},a.filter=i=>Tn(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;e(l,-1),!i(l););else for(;--u>=0;)for(;e(l,1),!i(l););}),n&&(a.count=(i,l)=>(Ry.setTime(+i),My.setTime(+l),t(Ry),t(My),Math.floor(n(Ry,My))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?l=>r(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const Mf=Tn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Mf.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Tn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Mf);Mf.range;const Ya=1e3,Xr=Ya*60,Ja=Xr*60,ni=Ja*24,yx=ni*7,JE=ni*30,Dy=ni*365,Cs=Tn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ya)},(t,e)=>(e-t)/Ya,t=>t.getUTCSeconds());Cs.range;const bx=Tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ya)},(t,e)=>{t.setTime(+t+e*Xr)},(t,e)=>(e-t)/Xr,t=>t.getMinutes());bx.range;const xx=Tn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Xr)},(t,e)=>(e-t)/Xr,t=>t.getUTCMinutes());xx.range;const vx=Tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ya-t.getMinutes()*Xr)},(t,e)=>{t.setTime(+t+e*Ja)},(t,e)=>(e-t)/Ja,t=>t.getHours());vx.range;const wx=Tn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ja)},(t,e)=>(e-t)/Ja,t=>t.getUTCHours());wx.range;const iu=Tn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xr)/ni,t=>t.getDate()-1);iu.range;const Ch=Tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ni,t=>t.getUTCDate()-1);Ch.range;const KP=Tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ni,t=>Math.floor(t/ni));KP.range;function Gs(t){return Tn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Xr)/yx)}const Eh=Gs(0),Df=Gs(1),UW=Gs(2),BW=Gs(3),il=Gs(4),$W=Gs(5),qW=Gs(6);Eh.range;Df.range;UW.range;BW.range;il.range;$W.range;qW.range;function Fs(t){return Tn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/yx)}const Th=Fs(0),Of=Fs(1),zW=Fs(2),GW=Fs(3),sl=Fs(4),FW=Fs(5),HW=Fs(6);Th.range;Of.range;zW.range;GW.range;sl.range;FW.range;HW.range;const Sx=Tn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Sx.range;const _x=Tn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());_x.range;const ri=Tn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ri.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Tn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ri.range;const ai=Tn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ai.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Tn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ai.range;function YP(t,e,n,r,a,i){const l=[[Cs,1,Ya],[Cs,5,5*Ya],[Cs,15,15*Ya],[Cs,30,30*Ya],[i,1,Xr],[i,5,5*Xr],[i,15,15*Xr],[i,30,30*Xr],[a,1,Ja],[a,3,3*Ja],[a,6,6*Ja],[a,12,12*Ja],[r,1,ni],[r,2,2*ni],[n,1,yx],[e,1,JE],[e,3,3*JE],[t,1,Dy]];function u(h,m,g){const b=m<h;b&&([h,m]=[m,h]);const v=g&&typeof g.range=="function"?g:d(h,m,g),k=v?v.range(h,+m+1):[];return b?k.reverse():k}function d(h,m,g){const b=Math.abs(m-h)/g,v=ax(([,,N])=>N).right(l,b);if(v===l.length)return t.every(Y0(h/Dy,m/Dy,g));if(v===0)return Mf.every(Math.max(Y0(h,m,g),1));const[k,C]=l[b/l[v-1][2]<l[v][2]/b?v-1:v];return k.every(C)}return[u,d]}const[VW,WW]=YP(ai,_x,Th,KP,wx,xx),[KW,YW]=YP(ri,Sx,Eh,iu,vx,bx);function Oy(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ly(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function JW(t){var e=t.dateTime,n=t.date,r=t.time,a=t.periods,i=t.days,l=t.shortDays,u=t.months,d=t.shortMonths,h=_c(a),m=kc(a),g=_c(i),b=kc(i),v=_c(l),k=kc(l),C=_c(u),N=kc(u),T=_c(d),R=kc(d),E={a:B,A:ae,b:X,B:ve,c:null,d:nT,e:nT,f:xK,g:AK,G:PK,H:gK,I:yK,j:bK,L:JP,m:vK,M:wK,p:L,q:O,Q:iT,s:sT,S:SK,u:_K,U:kK,V:NK,w:CK,W:EK,x:null,X:null,y:TK,Y:jK,Z:IK,"%":aT},P={a:Z,A:U,b:J,B:oe,c:null,d:rT,e:rT,f:OK,g:VK,G:KK,H:RK,I:MK,j:DK,L:QP,m:LK,M:UK,p:me,q:xe,Q:iT,s:sT,S:BK,u:$K,U:qK,V:zK,w:GK,W:FK,x:null,X:null,y:HK,Y:WK,Z:YK,"%":aT},j={a:z,A:F,b:V,B:K,c:pe,d:eT,e:eT,f:fK,g:ZE,G:QE,H:tT,I:tT,j:lK,L:dK,m:oK,M:cK,p:H,q:sK,Q:mK,s:pK,S:uK,u:tK,U:nK,V:rK,w:eK,W:aK,x:Y,X:q,y:ZE,Y:QE,Z:iK,"%":hK};E.x=I(n,E),E.X=I(r,E),E.c=I(e,E),P.x=I(n,P),P.X=I(r,P),P.c=I(e,P);function I(Q,we){return function(_e){var ie=[],Le=-1,ce=0,Se=Q.length,je,Ye,Fe;for(_e instanceof Date||(_e=new Date(+_e));++Le<Se;)Q.charCodeAt(Le)===37&&(ie.push(Q.slice(ce,Le)),(Ye=XE[je=Q.charAt(++Le)])!=null?je=Q.charAt(++Le):Ye=je==="e"?" ":"0",(Fe=we[je])&&(je=Fe(_e,Ye)),ie.push(je),ce=Le+1);return ie.push(Q.slice(ce,Le)),ie.join("")}}function D(Q,we){return function(_e){var ie=Sc(1900,void 0,1),Le=$(ie,Q,_e+="",0),ce,Se;if(Le!=_e.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(we&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(ce=Ly(Sc(ie.y,0,1)),Se=ce.getUTCDay(),ce=Se>4||Se===0?Of.ceil(ce):Of(ce),ce=Ch.offset(ce,(ie.V-1)*7),ie.y=ce.getUTCFullYear(),ie.m=ce.getUTCMonth(),ie.d=ce.getUTCDate()+(ie.w+6)%7):(ce=Oy(Sc(ie.y,0,1)),Se=ce.getDay(),ce=Se>4||Se===0?Df.ceil(ce):Df(ce),ce=iu.offset(ce,(ie.V-1)*7),ie.y=ce.getFullYear(),ie.m=ce.getMonth(),ie.d=ce.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),Se="Z"in ie?Ly(Sc(ie.y,0,1)).getUTCDay():Oy(Sc(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(Se+5)%7:ie.w+ie.U*7-(Se+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Ly(ie)):Oy(ie)}}function $(Q,we,_e,ie){for(var Le=0,ce=we.length,Se=_e.length,je,Ye;Le<ce;){if(ie>=Se)return-1;if(je=we.charCodeAt(Le++),je===37){if(je=we.charAt(Le++),Ye=j[je in XE?we.charAt(Le++):je],!Ye||(ie=Ye(Q,_e,ie))<0)return-1}else if(je!=_e.charCodeAt(ie++))return-1}return ie}function H(Q,we,_e){var ie=h.exec(we.slice(_e));return ie?(Q.p=m.get(ie[0].toLowerCase()),_e+ie[0].length):-1}function z(Q,we,_e){var ie=v.exec(we.slice(_e));return ie?(Q.w=k.get(ie[0].toLowerCase()),_e+ie[0].length):-1}function F(Q,we,_e){var ie=g.exec(we.slice(_e));return ie?(Q.w=b.get(ie[0].toLowerCase()),_e+ie[0].length):-1}function V(Q,we,_e){var ie=T.exec(we.slice(_e));return ie?(Q.m=R.get(ie[0].toLowerCase()),_e+ie[0].length):-1}function K(Q,we,_e){var ie=C.exec(we.slice(_e));return ie?(Q.m=N.get(ie[0].toLowerCase()),_e+ie[0].length):-1}function pe(Q,we,_e){return $(Q,e,we,_e)}function Y(Q,we,_e){return $(Q,n,we,_e)}function q(Q,we,_e){return $(Q,r,we,_e)}function B(Q){return l[Q.getDay()]}function ae(Q){return i[Q.getDay()]}function X(Q){return d[Q.getMonth()]}function ve(Q){return u[Q.getMonth()]}function L(Q){return a[+(Q.getHours()>=12)]}function O(Q){return 1+~~(Q.getMonth()/3)}function Z(Q){return l[Q.getUTCDay()]}function U(Q){return i[Q.getUTCDay()]}function J(Q){return d[Q.getUTCMonth()]}function oe(Q){return u[Q.getUTCMonth()]}function me(Q){return a[+(Q.getUTCHours()>=12)]}function xe(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var we=I(Q+="",E);return we.toString=function(){return Q},we},parse:function(Q){var we=D(Q+="",!1);return we.toString=function(){return Q},we},utcFormat:function(Q){var we=I(Q+="",P);return we.toString=function(){return Q},we},utcParse:function(Q){var we=D(Q+="",!0);return we.toString=function(){return Q},we}}}var XE={"-":"",_:" ",0:"0"},On=/^\s*\d+/,XW=/^%/,QW=/[\\^$*+?|[\]().{}]/g;function yt(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(e)+a:a)}function ZW(t){return t.replace(QW,"\\$&")}function _c(t){return new RegExp("^(?:"+t.map(ZW).join("|")+")","i")}function kc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function eK(t,e,n){var r=On.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function tK(t,e,n){var r=On.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function nK(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function rK(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function aK(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function QE(t,e,n){var r=On.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ZE(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function iK(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function sK(t,e,n){var r=On.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function oK(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function eT(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function lK(t,e,n){var r=On.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function tT(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function cK(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function uK(t,e,n){var r=On.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function dK(t,e,n){var r=On.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function fK(t,e,n){var r=On.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hK(t,e,n){var r=XW.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function mK(t,e,n){var r=On.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function pK(t,e,n){var r=On.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function nT(t,e){return yt(t.getDate(),e,2)}function gK(t,e){return yt(t.getHours(),e,2)}function yK(t,e){return yt(t.getHours()%12||12,e,2)}function bK(t,e){return yt(1+iu.count(ri(t),t),e,3)}function JP(t,e){return yt(t.getMilliseconds(),e,3)}function xK(t,e){return JP(t,e)+"000"}function vK(t,e){return yt(t.getMonth()+1,e,2)}function wK(t,e){return yt(t.getMinutes(),e,2)}function SK(t,e){return yt(t.getSeconds(),e,2)}function _K(t){var e=t.getDay();return e===0?7:e}function kK(t,e){return yt(Eh.count(ri(t)-1,t),e,2)}function XP(t){var e=t.getDay();return e>=4||e===0?il(t):il.ceil(t)}function NK(t,e){return t=XP(t),yt(il.count(ri(t),t)+(ri(t).getDay()===4),e,2)}function CK(t){return t.getDay()}function EK(t,e){return yt(Df.count(ri(t)-1,t),e,2)}function TK(t,e){return yt(t.getFullYear()%100,e,2)}function AK(t,e){return t=XP(t),yt(t.getFullYear()%100,e,2)}function jK(t,e){return yt(t.getFullYear()%1e4,e,4)}function PK(t,e){var n=t.getDay();return t=n>=4||n===0?il(t):il.ceil(t),yt(t.getFullYear()%1e4,e,4)}function IK(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+yt(e/60|0,"0",2)+yt(e%60,"0",2)}function rT(t,e){return yt(t.getUTCDate(),e,2)}function RK(t,e){return yt(t.getUTCHours(),e,2)}function MK(t,e){return yt(t.getUTCHours()%12||12,e,2)}function DK(t,e){return yt(1+Ch.count(ai(t),t),e,3)}function QP(t,e){return yt(t.getUTCMilliseconds(),e,3)}function OK(t,e){return QP(t,e)+"000"}function LK(t,e){return yt(t.getUTCMonth()+1,e,2)}function UK(t,e){return yt(t.getUTCMinutes(),e,2)}function BK(t,e){return yt(t.getUTCSeconds(),e,2)}function $K(t){var e=t.getUTCDay();return e===0?7:e}function qK(t,e){return yt(Th.count(ai(t)-1,t),e,2)}function ZP(t){var e=t.getUTCDay();return e>=4||e===0?sl(t):sl.ceil(t)}function zK(t,e){return t=ZP(t),yt(sl.count(ai(t),t)+(ai(t).getUTCDay()===4),e,2)}function GK(t){return t.getUTCDay()}function FK(t,e){return yt(Of.count(ai(t)-1,t),e,2)}function HK(t,e){return yt(t.getUTCFullYear()%100,e,2)}function VK(t,e){return t=ZP(t),yt(t.getUTCFullYear()%100,e,2)}function WK(t,e){return yt(t.getUTCFullYear()%1e4,e,4)}function KK(t,e){var n=t.getUTCDay();return t=n>=4||n===0?sl(t):sl.ceil(t),yt(t.getUTCFullYear()%1e4,e,4)}function YK(){return"+0000"}function aT(){return"%"}function iT(t){return+t}function sT(t){return Math.floor(+t/1e3)}var Oo,eI,tI;JK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JK(t){return Oo=JW(t),eI=Oo.format,Oo.parse,tI=Oo.utcFormat,Oo.utcParse,Oo}function XK(t){return new Date(t)}function QK(t){return t instanceof Date?+t:+new Date(+t)}function kx(t,e,n,r,a,i,l,u,d,h){var m=ux(),g=m.invert,b=m.domain,v=h(".%L"),k=h(":%S"),C=h("%I:%M"),N=h("%I %p"),T=h("%a %d"),R=h("%b %d"),E=h("%B"),P=h("%Y");function j(I){return(d(I)<I?v:u(I)<I?k:l(I)<I?C:i(I)<I?N:r(I)<I?a(I)<I?T:R:n(I)<I?E:P)(I)}return m.invert=function(I){return new Date(g(I))},m.domain=function(I){return arguments.length?b(Array.from(I,QK)):b().map(XK)},m.ticks=function(I){var D=b();return t(D[0],D[D.length-1],I??10)},m.tickFormat=function(I,D){return D==null?j:h(D)},m.nice=function(I){var D=b();return(!I||typeof I.range!="function")&&(I=e(D[0],D[D.length-1],I??10)),I?b(qP(D,I)):m},m.copy=function(){return au(m,kx(t,e,n,r,a,i,l,u,d,h))},m}function ZK(){return ra.apply(kx(KW,YW,ri,Sx,Eh,iu,vx,bx,Cs,eI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function eY(){return ra.apply(kx(VW,WW,ai,_x,Th,Ch,wx,xx,Cs,tI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ah(){var t=0,e=1,n,r,a,i,l=or,u=!1,d;function h(g){return g==null||isNaN(g=+g)?d:l(a===0?.5:(g=(i(g)-n)*a,u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e]=g,n=i(t=+t),r=i(e=+e),a=n===r?0:1/(r-n),h):[t,e]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(l=g,h):l};function m(g){return function(b){var v,k;return arguments.length?([v,k]=b,l=g(v,k),h):[l(0),l(1)]}}return h.range=m(pl),h.rangeRound=m(cx),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return i=g,n=g(t),r=g(e),a=n===r?0:1/(r-n),h}}function Yi(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nI(){var t=Ki(Ah()(or));return t.copy=function(){return Yi(t,nI())},di.apply(t,arguments)}function rI(){var t=hx(Ah()).domain([1,10]);return t.copy=function(){return Yi(t,rI()).base(t.base())},di.apply(t,arguments)}function aI(){var t=mx(Ah());return t.copy=function(){return Yi(t,aI()).constant(t.constant())},di.apply(t,arguments)}function Nx(){var t=px(Ah());return t.copy=function(){return Yi(t,Nx()).exponent(t.exponent())},di.apply(t,arguments)}function tY(){return Nx.apply(null,arguments).exponent(.5)}function iI(){var t=[],e=or;function n(r){if(r!=null&&!isNaN(r=+r))return e((nu(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let a of r)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Gi),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,a)=>e(a/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>$V(t,i/r))},n.copy=function(){return iI(e).domain(t)},di.apply(n,arguments)}function jh(){var t=0,e=.5,n=1,r=1,a,i,l,u,d,h=or,m,g=!1,b;function v(C){return isNaN(C=+C)?b:(C=.5+((C=+m(C))-i)*(r*C<r*i?u:d),h(g?Math.max(0,Math.min(1,C)):C))}v.domain=function(C){return arguments.length?([t,e,n]=C,a=m(t=+t),i=m(e=+e),l=m(n=+n),u=a===i?0:.5/(i-a),d=i===l?0:.5/(l-i),r=i<a?-1:1,v):[t,e,n]},v.clamp=function(C){return arguments.length?(g=!!C,v):g},v.interpolator=function(C){return arguments.length?(h=C,v):h};function k(C){return function(N){var T,R,E;return arguments.length?([T,R,E]=N,h=hW(C,[T,R,E]),v):[h(0),h(.5),h(1)]}}return v.range=k(pl),v.rangeRound=k(cx),v.unknown=function(C){return arguments.length?(b=C,v):b},function(C){return m=C,a=C(t),i=C(e),l=C(n),u=a===i?0:.5/(i-a),d=i===l?0:.5/(l-i),r=i<a?-1:1,v}}function sI(){var t=Ki(jh()(or));return t.copy=function(){return Yi(t,sI())},di.apply(t,arguments)}function oI(){var t=hx(jh()).domain([.1,1,10]);return t.copy=function(){return Yi(t,oI()).base(t.base())},di.apply(t,arguments)}function lI(){var t=mx(jh());return t.copy=function(){return Yi(t,lI()).constant(t.constant())},di.apply(t,arguments)}function Cx(){var t=px(jh());return t.copy=function(){return Yi(t,Cx()).exponent(t.exponent())},di.apply(t,arguments)}function nY(){return Cx.apply(null,arguments).exponent(.5)}const Ec=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:sx,scaleDiverging:sI,scaleDivergingLog:oI,scaleDivergingPow:Cx,scaleDivergingSqrt:nY,scaleDivergingSymlog:lI,scaleIdentity:$P,scaleImplicit:J0,scaleLinear:BP,scaleLog:zP,scaleOrdinal:ix,scalePoint:GV,scalePow:gx,scaleQuantile:HP,scaleQuantize:VP,scaleRadial:FP,scaleSequential:nI,scaleSequentialLog:rI,scaleSequentialPow:Nx,scaleSequentialQuantile:iI,scaleSequentialSqrt:tY,scaleSequentialSymlog:aI,scaleSqrt:OW,scaleSymlog:GP,scaleThreshold:WP,scaleTime:ZK,scaleUtc:eY,tickFormat:UP},Symbol.toStringTag,{value:"Module"}));var Ji=t=>t.chartData,rY=ue([Ji],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),Ph=(t,e,n,r)=>r?rY(t):Ji(t);function Os(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(nn(e)&&nn(n))return!0}return!1}function oT(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function cI(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,a,i;if(nn(n))a=n;else if(typeof n=="function")return;if(nn(r))i=r;else if(typeof r=="function")return;var l=[a,i];if(Os(l))return l}}function aY(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Os(r))return oT(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[a,i]=t,l,u;if(a==="auto")e!=null&&(l=Math.min(...e));else if(De(a))l=a;else if(typeof a=="function")try{e!=null&&(l=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&q1.test(a)){var d=q1.exec(a);if(d==null||e==null)l=void 0;else{var h=+d[1];l=e[0]-h}}else l=e==null?void 0:e[0];if(i==="auto")e!=null&&(u=Math.max(...e));else if(De(i))u=i;else if(typeof i=="function")try{e!=null&&(u=i(e==null?void 0:e[1]))}catch{}else if(typeof i=="string"&&z1.test(i)){var m=z1.exec(i);if(m==null||e==null)u=void 0;else{var g=+m[1];u=e[1]+g}}else u=e==null?void 0:e[1];var b=[l,u];if(Os(b))return e==null?b:oT(b,e,n)}}}var gl=1e9,iY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Tx,Kt=!0,na="[DecimalError] ",Ps=na+"Invalid argument: ",Ex=na+"Exponent out of range: ",yl=Math.floor,xs=Math.pow,sY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Pr,Mn=1e7,Ft=7,uI=9007199254740991,Lf=yl(uI/Ft),Pe={};Pe.absoluteValue=Pe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Pe.comparedTo=Pe.cmp=function(t){var e,n,r,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,a=t.d.length,e=0,n=r<a?r:a;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};Pe.decimalPlaces=Pe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ft;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Pe.dividedBy=Pe.div=function(t){return Qa(this,new this.constructor(t))};Pe.dividedToIntegerBy=Pe.idiv=function(t){var e=this,n=e.constructor;return Mt(Qa(e,new n(t),0,1),n.precision)};Pe.equals=Pe.eq=function(t){return!this.cmp(t)};Pe.exponent=function(){return vn(this)};Pe.greaterThan=Pe.gt=function(t){return this.cmp(t)>0};Pe.greaterThanOrEqualTo=Pe.gte=function(t){return this.cmp(t)>=0};Pe.isInteger=Pe.isint=function(){return this.e>this.d.length-2};Pe.isNegative=Pe.isneg=function(){return this.s<0};Pe.isPositive=Pe.ispos=function(){return this.s>0};Pe.isZero=function(){return this.s===0};Pe.lessThan=Pe.lt=function(t){return this.cmp(t)<0};Pe.lessThanOrEqualTo=Pe.lte=function(t){return this.cmp(t)<1};Pe.logarithm=Pe.log=function(t){var e,n=this,r=n.constructor,a=r.precision,i=a+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Pr))throw Error(na+"NaN");if(n.s<1)throw Error(na+(n.s?"NaN":"-Infinity"));return n.eq(Pr)?new r(0):(Kt=!1,e=Qa(Hc(n,i),Hc(t,i),i),Kt=!0,Mt(e,a))};Pe.minus=Pe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?hI(e,t):dI(e,(t.s=-t.s,t))};Pe.modulo=Pe.mod=function(t){var e,n=this,r=n.constructor,a=r.precision;if(t=new r(t),!t.s)throw Error(na+"NaN");return n.s?(Kt=!1,e=Qa(n,t,0,1).times(t),Kt=!0,n.minus(e)):Mt(new r(n),a)};Pe.naturalExponential=Pe.exp=function(){return fI(this)};Pe.naturalLogarithm=Pe.ln=function(){return Hc(this)};Pe.negated=Pe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Pe.plus=Pe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?dI(e,t):hI(e,(t.s=-t.s,t))};Pe.precision=Pe.sd=function(t){var e,n,r,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ps+t);if(e=vn(a)+1,r=a.d.length-1,n=r*Ft+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Pe.squareRoot=Pe.sqrt=function(){var t,e,n,r,a,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(na+"NaN")}for(t=vn(u),Kt=!1,a=Math.sqrt(+u),a==0||a==1/0?(e=wa(u.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=yl((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new d(e)):r=new d(a.toString()),n=d.precision,a=l=n+3;;)if(i=r,r=i.plus(Qa(u,i,l+2)).times(.5),wa(i.d).slice(0,l)===(e=wa(r.d)).slice(0,l)){if(e=e.slice(l-3,l+1),a==l&&e=="4999"){if(Mt(i,n+1,0),i.times(i).eq(u)){r=i;break}}else if(e!="9999")break;l+=4}return Kt=!0,Mt(r,n)};Pe.times=Pe.mul=function(t){var e,n,r,a,i,l,u,d,h,m=this,g=m.constructor,b=m.d,v=(t=new g(t)).d;if(!m.s||!t.s)return new g(0);for(t.s*=m.s,n=m.e+t.e,d=b.length,h=v.length,d<h&&(i=b,b=v,v=i,l=d,d=h,h=l),i=[],l=d+h,r=l;r--;)i.push(0);for(r=h;--r>=0;){for(e=0,a=d+r;a>r;)u=i[a]+v[r]*b[a-r-1]+e,i[a--]=u%Mn|0,e=u/Mn|0;i[a]=(i[a]+e)%Mn|0}for(;!i[--l];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Kt?Mt(t,g.precision):t};Pe.toDecimalPlaces=Pe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Na(t,0,gl),e===void 0?e=r.rounding:Na(e,0,8),Mt(n,t+vn(n)+1,e))};Pe.toExponential=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=Ls(r,!0):(Na(t,0,gl),e===void 0?e=a.rounding:Na(e,0,8),r=Mt(new a(r),t+1,e),n=Ls(r,!0,t+1)),n};Pe.toFixed=function(t,e){var n,r,a=this,i=a.constructor;return t===void 0?Ls(a):(Na(t,0,gl),e===void 0?e=i.rounding:Na(e,0,8),r=Mt(new i(a),t+vn(a)+1,e),n=Ls(r.abs(),!1,t+vn(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Pe.toInteger=Pe.toint=function(){var t=this,e=t.constructor;return Mt(new e(t),vn(t)+1,e.rounding)};Pe.toNumber=function(){return+this};Pe.toPower=Pe.pow=function(t){var e,n,r,a,i,l,u=this,d=u.constructor,h=12,m=+(t=new d(t));if(!t.s)return new d(Pr);if(u=new d(u),!u.s){if(t.s<1)throw Error(na+"Infinity");return u}if(u.eq(Pr))return u;if(r=d.precision,t.eq(Pr))return Mt(u,r);if(e=t.e,n=t.d.length-1,l=e>=n,i=u.s,l){if((n=m<0?-m:m)<=uI){for(a=new d(Pr),e=Math.ceil(r/Ft+4),Kt=!1;n%2&&(a=a.times(u),cT(a.d,e)),n=yl(n/2),n!==0;)u=u.times(u),cT(u.d,e);return Kt=!0,t.s<0?new d(Pr).div(a):Mt(a,r)}}else if(i<0)throw Error(na+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,Kt=!1,a=t.times(Hc(u,r+h)),Kt=!0,a=fI(a),a.s=i,a};Pe.toPrecision=function(t,e){var n,r,a=this,i=a.constructor;return t===void 0?(n=vn(a),r=Ls(a,n<=i.toExpNeg||n>=i.toExpPos)):(Na(t,1,gl),e===void 0?e=i.rounding:Na(e,0,8),a=Mt(new i(a),t,e),n=vn(a),r=Ls(a,t<=n||n<=i.toExpNeg,t)),r};Pe.toSignificantDigits=Pe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Na(t,1,gl),e===void 0?e=r.rounding:Na(e,0,8)),Mt(new r(n),t,e)};Pe.toString=Pe.valueOf=Pe.val=Pe.toJSON=Pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=vn(t),n=t.constructor;return Ls(t,e<=n.toExpNeg||e>=n.toExpPos)};function dI(t,e){var n,r,a,i,l,u,d,h,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),Kt?Mt(e,g):e;if(d=t.d,h=e.d,l=t.e,a=e.e,d=d.slice(),i=l-a,i){for(i<0?(r=d,i=-i,u=h.length):(r=h,a=l,u=d.length),l=Math.ceil(g/Ft),u=l>u?l+1:u+1,i>u&&(i=u,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(u=d.length,i=h.length,u-i<0&&(i=u,r=h,h=d,d=r),n=0;i;)n=(d[--i]=d[i]+h[i]+n)/Mn|0,d[i]%=Mn;for(n&&(d.unshift(n),++a),u=d.length;d[--u]==0;)d.pop();return e.d=d,e.e=a,Kt?Mt(e,g):e}function Na(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ps+t)}function wa(t){var e,n,r,a=t.length-1,i="",l=t[0];if(a>0){for(i+=l,e=1;e<a;e++)r=t[e]+"",n=Ft-r.length,n&&(i+=Bi(n)),i+=r;l=t[e],r=l+"",n=Ft-r.length,n&&(i+=Bi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Qa=(function(){function t(r,a){var i,l=0,u=r.length;for(r=r.slice();u--;)i=r[u]*a+l,r[u]=i%Mn|0,l=i/Mn|0;return l&&r.unshift(l),r}function e(r,a,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(r[u]!=a[u]){d=r[u]>a[u]?1:-1;break}return d}function n(r,a,i){for(var l=0;i--;)r[i]-=l,l=r[i]<a[i]?1:0,r[i]=l*Mn+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,l){var u,d,h,m,g,b,v,k,C,N,T,R,E,P,j,I,D,$,H=r.constructor,z=r.s==a.s?1:-1,F=r.d,V=a.d;if(!r.s)return new H(r);if(!a.s)throw Error(na+"Division by zero");for(d=r.e-a.e,D=V.length,j=F.length,v=new H(z),k=v.d=[],h=0;V[h]==(F[h]||0);)++h;if(V[h]>(F[h]||0)&&--d,i==null?R=i=H.precision:l?R=i+(vn(r)-vn(a))+1:R=i,R<0)return new H(0);if(R=R/Ft+2|0,h=0,D==1)for(m=0,V=V[0],R++;(h<j||m)&&R--;h++)E=m*Mn+(F[h]||0),k[h]=E/V|0,m=E%V|0;else{for(m=Mn/(V[0]+1)|0,m>1&&(V=t(V,m),F=t(F,m),D=V.length,j=F.length),P=D,C=F.slice(0,D),N=C.length;N<D;)C[N++]=0;$=V.slice(),$.unshift(0),I=V[0],V[1]>=Mn/2&&++I;do m=0,u=e(V,C,D,N),u<0?(T=C[0],D!=N&&(T=T*Mn+(C[1]||0)),m=T/I|0,m>1?(m>=Mn&&(m=Mn-1),g=t(V,m),b=g.length,N=C.length,u=e(g,C,b,N),u==1&&(m--,n(g,D<b?$:V,b))):(m==0&&(u=m=1),g=V.slice()),b=g.length,b<N&&g.unshift(0),n(C,g,N),u==-1&&(N=C.length,u=e(V,C,D,N),u<1&&(m++,n(C,D<N?$:V,N))),N=C.length):u===0&&(m++,C=[0]),k[h++]=m,u&&C[0]?C[N++]=F[P]||0:(C=[F[P]],N=1);while((P++<j||C[0]!==void 0)&&R--)}return k[0]||k.shift(),v.e=d,Mt(v,l?i+vn(v)+1:i)}})();function fI(t,e){var n,r,a,i,l,u,d=0,h=0,m=t.constructor,g=m.precision;if(vn(t)>16)throw Error(Ex+vn(t));if(!t.s)return new m(Pr);for(Kt=!1,u=g,l=new m(.03125);t.abs().gte(.1);)t=t.times(l),h+=5;for(r=Math.log(xs(2,h))/Math.LN10*2+5|0,u+=r,n=a=i=new m(Pr),m.precision=u;;){if(a=Mt(a.times(t),u),n=n.times(++d),l=i.plus(Qa(a,n,u)),wa(l.d).slice(0,u)===wa(i.d).slice(0,u)){for(;h--;)i=Mt(i.times(i),u);return m.precision=g,e==null?(Kt=!0,Mt(i,g)):i}i=l}}function vn(t){for(var e=t.e*Ft,n=t.d[0];n>=10;n/=10)e++;return e}function Uy(t,e,n){if(e>t.LN10.sd())throw Kt=!0,n&&(t.precision=n),Error(na+"LN10 precision limit exceeded");return Mt(new t(t.LN10),e)}function Bi(t){for(var e="";t--;)e+="0";return e}function Hc(t,e){var n,r,a,i,l,u,d,h,m,g=1,b=10,v=t,k=v.d,C=v.constructor,N=C.precision;if(v.s<1)throw Error(na+(v.s?"NaN":"-Infinity"));if(v.eq(Pr))return new C(0);if(e==null?(Kt=!1,h=N):h=e,v.eq(10))return e==null&&(Kt=!0),Uy(C,h);if(h+=b,C.precision=h,n=wa(k),r=n.charAt(0),i=vn(v),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=wa(v.d),r=n.charAt(0),g++;i=vn(v),r>1?(v=new C("0."+n),i++):v=new C(r+"."+n.slice(1))}else return d=Uy(C,h+2,N).times(i+""),v=Hc(new C(r+"."+n.slice(1)),h-b).plus(d),C.precision=N,e==null?(Kt=!0,Mt(v,N)):v;for(u=l=v=Qa(v.minus(Pr),v.plus(Pr),h),m=Mt(v.times(v),h),a=3;;){if(l=Mt(l.times(m),h),d=u.plus(Qa(l,new C(a),h)),wa(d.d).slice(0,h)===wa(u.d).slice(0,h))return u=u.times(2),i!==0&&(u=u.plus(Uy(C,h+2,N).times(i+""))),u=Qa(u,new C(g),h),C.precision=N,e==null?(Kt=!0,Mt(u,N)):u;u=d,a+=2}}function lT(t,e){var n,r,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(r,a),e){if(a-=r,n=n-r-1,t.e=yl(n/Ft),t.d=[],r=(n+1)%Ft,n<0&&(r+=Ft),r<a){for(r&&t.d.push(+e.slice(0,r)),a-=Ft;r<a;)t.d.push(+e.slice(r,r+=Ft));e=e.slice(r),r=Ft-e.length}else r-=a;for(;r--;)e+="0";if(t.d.push(+e),Kt&&(t.e>Lf||t.e<-Lf))throw Error(Ex+n)}else t.s=0,t.e=0,t.d=[0];return t}function Mt(t,e,n){var r,a,i,l,u,d,h,m,g=t.d;for(l=1,i=g[0];i>=10;i/=10)l++;if(r=e-l,r<0)r+=Ft,a=e,h=g[m=0];else{if(m=Math.ceil((r+1)/Ft),i=g.length,m>=i)return t;for(h=i=g[m],l=1;i>=10;i/=10)l++;r%=Ft,a=r-Ft+l}if(n!==void 0&&(i=xs(10,l-a-1),u=h/i%10|0,d=e<0||g[m+1]!==void 0||h%i,d=n<4?(u||d)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(r>0?a>0?h/xs(10,l-a):0:g[m-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return d?(i=vn(t),g.length=1,e=e-i-1,g[0]=xs(10,(Ft-e%Ft)%Ft),t.e=yl(-e/Ft)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=m,i=1,m--):(g.length=m+1,i=xs(10,Ft-r),g[m]=a>0?(h/xs(10,l-a)%xs(10,a)|0)*i:0),d)for(;;)if(m==0){(g[0]+=i)==Mn&&(g[0]=1,++t.e);break}else{if(g[m]+=i,g[m]!=Mn)break;g[m--]=0,i=1}for(r=g.length;g[--r]===0;)g.pop();if(Kt&&(t.e>Lf||t.e<-Lf))throw Error(Ex+vn(t));return t}function hI(t,e){var n,r,a,i,l,u,d,h,m,g,b=t.constructor,v=b.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new b(t),Kt?Mt(e,v):e;if(d=t.d,g=e.d,r=e.e,h=t.e,d=d.slice(),l=h-r,l){for(m=l<0,m?(n=d,l=-l,u=g.length):(n=g,r=h,u=d.length),a=Math.max(Math.ceil(v/Ft),u)+2,l>a&&(l=a,n.length=1),n.reverse(),a=l;a--;)n.push(0);n.reverse()}else{for(a=d.length,u=g.length,m=a<u,m&&(u=a),a=0;a<u;a++)if(d[a]!=g[a]){m=d[a]<g[a];break}l=0}for(m&&(n=d,d=g,g=n,e.s=-e.s),u=d.length,a=g.length-u;a>0;--a)d[u++]=0;for(a=g.length;a>l;){if(d[--a]<g[a]){for(i=a;i&&d[--i]===0;)d[i]=Mn-1;--d[i],d[a]+=Mn}d[a]-=g[a]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(e.d=d,e.e=r,Kt?Mt(e,v):e):new b(0)}function Ls(t,e,n){var r,a=vn(t),i=wa(t.d),l=i.length;return e?(n&&(r=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+Bi(r):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Bi(-a-1)+i,n&&(r=n-l)>0&&(i+=Bi(r))):a>=l?(i+=Bi(a+1-l),n&&(r=n-a-1)>0&&(i=i+"."+Bi(r))):((r=a+1)<l&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-l)>0&&(a+1===l&&(i+="."),i+=Bi(r))),t.s<0?"-"+i:i}function cT(t,e){if(t.length>e)return t.length=e,!0}function mI(t){var e,n,r;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ps+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return lT(l,i.toString())}else if(typeof i!="string")throw Error(Ps+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,sY.test(i))lT(l,i);else throw Error(Ps+i)}if(a.prototype=Pe,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=mI,a.config=a.set=oY,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return a.config(t),a}function oY(t){if(!t||typeof t!="object")throw Error(na+"Object expected");var e,n,r,a=["precision",1,gl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((r=t[n=a[e]])!==void 0)if(yl(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Ps+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ps+n+": "+r);return this}var Tx=mI(iY);Pr=new Tx(1);const Nt=Tx;var lY=t=>t,pI={},gI=t=>t===pI,uT=t=>function e(){return arguments.length===0||arguments.length===1&&gI(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},yI=(t,e)=>t===1?e:uT(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.filter(l=>l!==pI).length;return i>=t?e(...r):yI(t-i,uT(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var h=r.map(m=>gI(m)?u.shift():m);return e(...h,...u)}))}),Ih=t=>yI(t.length,t),eb=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},cY=Ih((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),uY=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return lY;var a=n.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},tb=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),bI=t=>{var e=null,n=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e&&a.every((l,u)=>{var d;return l===((d=e)===null||d===void 0?void 0:d[u])})||(e=a,n=t(...a)),n}};function xI(t){var e;return t===0?e=1:e=Math.floor(new Nt(t).abs().log(10).toNumber())+1,e}function vI(t,e,n){for(var r=new Nt(t),a=0,i=[];r.lt(e)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}Ih((t,e,n)=>{var r=+t,a=+e;return r+n*(a-r)});Ih((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});Ih((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var wI=t=>{var[e,n]=t,[r,a]=[e,n];return e>n&&([r,a]=[n,e]),[r,a]},SI=(t,e,n)=>{if(t.lte(0))return new Nt(0);var r=xI(t.toNumber()),a=new Nt(10).pow(r),i=t.div(a),l=r!==1?.05:.1,u=new Nt(Math.ceil(i.div(l).toNumber())).add(n).mul(l),d=u.mul(a);return e?new Nt(d.toNumber()):new Nt(Math.ceil(d.toNumber()))},dY=(t,e,n)=>{var r=new Nt(1),a=new Nt(t);if(!a.isint()&&n){var i=Math.abs(t);i<1?(r=new Nt(10).pow(xI(t)-1),a=new Nt(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new Nt(Math.floor(t)))}else t===0?a=new Nt(Math.floor((e-1)/2)):n||(a=new Nt(Math.floor(t)));var l=Math.floor((e-1)/2),u=uY(cY(d=>a.add(new Nt(d-l).mul(r)).toNumber()),eb);return u(0,e)},_I=function(e,n,r,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Nt(0),tickMin:new Nt(0),tickMax:new Nt(0)};var l=SI(new Nt(n).sub(e).div(r-1),a,i),u;e<=0&&n>=0?u=new Nt(0):(u=new Nt(e).add(n).div(2),u=u.sub(new Nt(u).mod(l)));var d=Math.ceil(u.sub(e).div(l).toNumber()),h=Math.ceil(new Nt(n).sub(u).div(l).toNumber()),m=d+h+1;return m>r?_I(e,n,r,a,i+1):(m<r&&(h=n>0?h+(r-m):h,d=n>0?d:d+(r-m)),{step:l,tickMin:u.sub(new Nt(d).mul(l)),tickMax:u.add(new Nt(h).mul(l))})};function fY(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(r,2),[l,u]=wI([e,n]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...eb(0,r-1).map(()=>1/0)]:[...eb(0,r-1).map(()=>-1/0),u];return e>n?tb(d):d}if(l===u)return dY(l,r,a);var{step:h,tickMin:m,tickMax:g}=_I(l,u,i,a,0),b=vI(m,g.add(new Nt(.1).mul(h)),h);return e>n?tb(b):b}function hY(t,e){var[n,r]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=wI([n,r]);if(i===-1/0||l===1/0)return[n,r];if(i===l)return[i];var u=Math.max(e,2),d=SI(new Nt(l).sub(i).div(u-1),a,0),h=[...vI(new Nt(i),new Nt(l),d),l];return a===!1&&(h=h.map(m=>Math.round(m))),n>r?tb(h):h}var mY=bI(fY),pY=bI(hY),gY=t=>t.rootProps.barCategoryGap,Rh=t=>t.rootProps.stackOffset,Ax=t=>t.options.chartName,jx=t=>t.rootProps.syncId,kI=t=>t.rootProps.syncMethod,Px=t=>t.options.eventEmitter,yY=t=>t.rootProps.baseValue,nr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Wa={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Tr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Mh=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},bY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Wa.angleAxisId,includeHidden:!1,name:void 0,reversed:Wa.reversed,scale:Wa.scale,tick:Wa.tick,tickCount:void 0,ticks:void 0,type:Wa.type,unit:void 0},xY={allowDataOverflow:Tr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Tr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Tr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Tr.scale,tick:Tr.tick,tickCount:Tr.tickCount,ticks:void 0,type:Tr.type,unit:void 0},vY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Wa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wa.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wa.scale,tick:Wa.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},wY={allowDataOverflow:Tr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Tr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Tr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Tr.scale,tick:Tr.tick,tickCount:Tr.tickCount,ticks:void 0,type:"category",unit:void 0},Ix=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?vY:bY,Rx=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?wY:xY,Dh=t=>t.polarOptions,Mx=ue([ci,ui,Wn],mV),NI=ue([Dh,Mx],(t,e)=>{if(t!=null)return Fi(t.innerRadius,e,0)}),CI=ue([Dh,Mx],(t,e)=>{if(t!=null)return Fi(t.outerRadius,e,e*.8)}),SY=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},EI=ue([Dh],SY);ue([Ix,EI],Mh);var TI=ue([Mx,NI,CI],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ue([Rx,TI],Mh);var AI=ue([It,Dh,NI,CI,ci,ui],(t,e,n,r,a,i)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:l,cy:u,startAngle:d,endAngle:h}=e;return{cx:Fi(l,a,a/2),cy:Fi(u,i,i/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:h,clockWise:!1}}}),An=(t,e)=>e,Oh=(t,e,n)=>n;function Dx(t){return t==null?void 0:t.id}function jI(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:a,dataKey:i}=n,l=new Map;return t.forEach(u=>{var d,h=(d=u.data)!==null&&d!==void 0?d:r;if(!(h==null||h.length===0)){var m=Dx(u);h.forEach((g,b)=>{var v=i==null||a?b:String(Vn(g,i,null)),k=Vn(g,u.dataKey,0),C;l.has(v)?C=l.get(v):C={},Object.assign(C,{[m]:k}),l.set(v,C)})}}),Array.from(l.values())}function Ox(t){return t.stackId!=null&&t.dataKey!=null}var Lh=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Uh(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function _Y(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var jn=t=>{var e=It(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},bl=t=>t.tooltip.settings.axisId;function dT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Uf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dT(Object(n),!0).forEach(function(r){kY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kY(t,e,n){return(e=NY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NY(t){var e=CY(t,"string");return typeof e=="symbol"?e:e+""}function CY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nb=[0,"auto"],Cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},PI=(t,e)=>t.cartesianAxis.xAxis[e],fi=(t,e)=>{var n=PI(t,e);return n??Cr},Er={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:nb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:eu},II=(t,e)=>t.cartesianAxis.yAxis[e],hi=(t,e)=>{var n=II(t,e);return n??Er},EY={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Lx=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??EY},lr=(t,e,n)=>{switch(e){case"xAxis":return fi(t,n);case"yAxis":return hi(t,n);case"zAxis":return Lx(t,n);case"angleAxis":return Ix(t,n);case"radiusAxis":return Rx(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},TY=(t,e,n)=>{switch(e){case"xAxis":return fi(t,n);case"yAxis":return hi(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},su=(t,e,n)=>{switch(e){case"xAxis":return fi(t,n);case"yAxis":return hi(t,n);case"angleAxis":return Ix(t,n);case"radiusAxis":return Rx(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},RI=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function MI(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Ux=t=>t.graphicalItems.cartesianItems,AY=ue([An,Oh],MI),DI=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),ou=ue([Ux,lr,AY],DI,{memoizeOptions:{resultEqualityCheck:Uh}}),OI=ue([ou],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Ox)),LI=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),jY=ue([ou],LI),UI=t=>t.map(e=>e.data).filter(Boolean).flat(1),PY=ue([ou],UI,{memoizeOptions:{resultEqualityCheck:Uh}}),BI=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:a}=e;return t.length>0?t:n.slice(r,a+1)},Bx=ue([PY,Ph],BI),$I=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Vn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(a=>({value:Vn(a,r)}))):t.map(r=>({value:r})),Bh=ue([Bx,lr,ou],$I);function qI(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Xd(t){if(_a(t)||t instanceof Date){var e=Number(t);if(nn(e))return e}}function fT(t){if(Array.isArray(t)){var e=[Xd(t[0]),Xd(t[1])];return Os(e)?e:void 0}var n=Xd(t);if(n!=null)return[n,n]}function ii(t){return t.map(Xd).filter(OG)}function IY(t,e,n){return!n||typeof e!="number"||da(e)?[]:n.length?ii(n.flatMap(r=>{var a=Vn(t,r.dataKey),i,l;if(Array.isArray(a)?[i,l]=a:i=l=a,!(!nn(i)||!nn(l)))return[e-i,e+l]})):[]}var Pn=t=>{var e=jn(t),n=bl(t);return su(t,e,n)},zI=ue([Pn],t=>t==null?void 0:t.dataKey),RY=ue([OI,Ph,Pn],jI),GI=(t,e,n)=>{var r={},a=e.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),r);return Object.fromEntries(Object.entries(a).map(i=>{var[l,u]=i,d=u.map(Dx);return[l,{stackedData:a7(t,d,n),graphicalItems:u}]}))},rb=ue([RY,OI,Rh],GI),FI=(t,e,n,r)=>{var{dataStartIndex:a,dataEndIndex:i}=e;if(r==null&&n!=="zAxis"){var l=l7(t,a,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},MY=ue([lr],t=>t.allowDataOverflow),$x=t=>{var e;if(t==null||!("domain"in t))return nb;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=ii(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:nb},HI=ue([lr],$x),VI=ue([HI,MY],cI),DY=ue([rb,Ji,An,VI],FI,{memoizeOptions:{resultEqualityCheck:Lh}}),qx=t=>t.errorBars,OY=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>qI(n,r)),Bf=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n.filter(Boolean);if(a.length!==0){var i=a.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},WI=(t,e,n,r,a)=>{var i,l;if(n.length>0&&t.forEach(u=>{n.forEach(d=>{var h,m,g=(h=r[d.id])===null||h===void 0?void 0:h.filter(T=>qI(a,T)),b=Vn(u,(m=e.dataKey)!==null&&m!==void 0?m:d.dataKey),v=IY(u,b,g);if(v.length>=2){var k=Math.min(...v),C=Math.max(...v);(i==null||k<i)&&(i=k),(l==null||C>l)&&(l=C)}var N=fT(b);N!=null&&(i=i==null?N[0]:Math.min(i,N[0]),l=l==null?N[1]:Math.max(l,N[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(u=>{var d=fT(Vn(u,e.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),nn(i)&&nn(l))return[i,l]},LY=ue([Bx,lr,jY,qx,An],WI,{memoizeOptions:{resultEqualityCheck:Lh}});function UY(t){var{value:e}=t;if(_a(e)||e instanceof Date)return e}var BY=(t,e,n)=>{var r=t.map(UY).filter(a=>a!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&g2(r))?TP(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},KI=t=>t.referenceElements.dots,xl=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),$Y=ue([KI,An,Oh],xl),YI=t=>t.referenceElements.areas,qY=ue([YI,An,Oh],xl),JI=t=>t.referenceElements.lines,zY=ue([JI,An,Oh],xl),XI=(t,e)=>{var n=ii(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},GY=ue($Y,An,XI),QI=(t,e)=>{var n=ii(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},FY=ue([qY,An],QI);function HY(t){var e;if(t.x!=null)return ii([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:ii(n)}function VY(t){var e;if(t.y!=null)return ii([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:ii(n)}var ZI=(t,e)=>{var n=t.flatMap(r=>e==="xAxis"?HY(r):VY(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},WY=ue([zY,An],ZI),KY=ue(GY,WY,FY,(t,e,n)=>Bf(t,n,e)),eR=(t,e,n,r,a,i,l,u)=>{if(n!=null)return n;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",h=d?Bf(r,i,a):Bf(i,a);return aY(e,h,t.allowDataOverflow)},YY=ue([lr,HI,VI,DY,LY,KY,It,An],eR,{memoizeOptions:{resultEqualityCheck:Lh}}),JY=[0,1],tR=(t,e,n,r,a,i,l)=>{if(!((t==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:d}=t,h=Ca(e,i);if(h&&u==null){var m;return TP(0,(m=n==null?void 0:n.length)!==null&&m!==void 0?m:0)}return d==="category"?BY(r,t,h):a==="expand"?JY:l}},zx=ue([lr,It,Bx,Bh,Rh,An,YY],tR),nR=(t,e,n,r,a)=>{if(t!=null){var{scale:i,type:l}=t;if(i==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(Xc(i));return u in Ec?u:"point"}}},lu=ue([lr,It,RI,Ax,An],nR);function XY(t){if(t!=null){if(t in Ec)return Ec[t]();var e="scale".concat(Xc(t));if(e in Ec)return Ec[e]()}}function Gx(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var a=XY(e);if(a!=null){var i=a.domain(n).range(r);return e7(i),i}}}var rR=(t,e,n)=>{var r=$x(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Os(t))return mY(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Os(t))return pY(t,e.tickCount,e.allowDecimals)}},Fx=ue([zx,su,lu],rR),aR=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Os(e)&&Array.isArray(n)&&n.length>0){var a=e[0],i=n[0],l=e[1],u=n[n.length-1];return[Math.min(a,i),Math.max(l,u)]}return e},QY=ue([lr,zx,Fx,An],aR),ZY=ue(Bh,lr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(ii(t.map(u=>u.value))).sort((u,d)=>u-d);if(r.length<2)return 1/0;var a=r[r.length-1]-r[0];if(a===0)return 1/0;for(var i=0;i<r.length-1;i++){var l=r[i+1]-r[i];n=Math.min(n,l)}return n/a}}),iR=ue(ZY,It,gY,Wn,(t,e,n,r)=>r,(t,e,n,r,a)=>{if(!nn(t))return 0;var i=e==="vertical"?r.height:r.width;if(a==="gap")return t*i/2;if(a==="no-gap"){var l=Fi(n,t*i),u=t*i/2;return u-l-(u-l)/i*l}return 0}),eJ=(t,e)=>{var n=fi(t,e);return n==null||typeof n.padding!="string"?0:iR(t,"xAxis",e,n.padding)},tJ=(t,e)=>{var n=hi(t,e);return n==null||typeof n.padding!="string"?0:iR(t,"yAxis",e,n.padding)},nJ=ue(fi,eJ,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((n=a.left)!==null&&n!==void 0?n:0)+e,right:((r=a.right)!==null&&r!==void 0?r:0)+e}}),rJ=ue(hi,tJ,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((n=a.top)!==null&&n!==void 0?n:0)+e,bottom:((r=a.bottom)!==null&&r!==void 0?r:0)+e}}),aJ=ue([Wn,nJ,vh,xh,(t,e,n)=>n],(t,e,n,r,a)=>{var{padding:i}=r;return a?[i.left,n.width-i.right]:[t.left+e.left,t.left+t.width-e.right]}),iJ=ue([Wn,It,rJ,vh,xh,(t,e,n)=>n],(t,e,n,r,a,i)=>{var{padding:l}=a;return i?[r.height-l.bottom,l.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),cu=(t,e,n,r)=>{var a;switch(e){case"xAxis":return aJ(t,n,r);case"yAxis":return iJ(t,n,r);case"zAxis":return(a=Lx(t,n))===null||a===void 0?void 0:a.range;case"angleAxis":return EI(t);case"radiusAxis":return TI(t,n);default:return}},sR=ue([lr,cu],Mh),vl=ue([lr,lu,QY,sR],Gx);ue([ou,qx,An],OY);function oR(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var $h=(t,e)=>e,qh=(t,e,n)=>n,sJ=ue(yh,$h,qh,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(oR)),oJ=ue(bh,$h,qh,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(oR)),lR=(t,e)=>({width:t.width,height:e.height}),lJ=(t,e)=>{var n=typeof e.width=="number"?e.width:eu;return{width:n,height:t.height}},cJ=ue(Wn,fi,lR),uJ=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},dJ=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},fJ=ue(ui,Wn,sJ,$h,qh,(t,e,n,r,a)=>{var i={},l;return n.forEach(u=>{var d=lR(e,u);l==null&&(l=uJ(e,r,t));var h=r==="top"&&!a||r==="bottom"&&a;i[u.id]=l-Number(h)*d.height,l+=(h?-1:1)*d.height}),i}),hJ=ue(ci,Wn,oJ,$h,qh,(t,e,n,r,a)=>{var i={},l;return n.forEach(u=>{var d=lJ(e,u);l==null&&(l=dJ(e,r,t));var h=r==="left"&&!a||r==="right"&&a;i[u.id]=l-Number(h)*d.width,l+=(h?-1:1)*d.width}),i}),mJ=(t,e)=>{var n=fi(t,e);if(n!=null)return fJ(t,n.orientation,n.mirror)},pJ=ue([Wn,fi,mJ,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var a=n==null?void 0:n[r];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),gJ=(t,e)=>{var n=hi(t,e);if(n!=null)return hJ(t,n.orientation,n.mirror)},yJ=ue([Wn,hi,gJ,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var a=n==null?void 0:n[r];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),bJ=ue(Wn,hi,(t,e)=>{var n=typeof e.width=="number"?e.width:eu;return{width:n,height:t.height}}),cR=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:a,type:i,dataKey:l}=n,u=Ca(t,r),d=e.map(h=>h.value);if(l&&u&&i==="category"&&a&&g2(d))return d}},Hx=ue([It,Bh,lr,An],cR),uR=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:i}=n,l=Ca(t,r);if(l&&(a==="number"||i!=="auto"))return e.map(u=>u.value)}},Vx=ue([It,Bh,su,An],uR),hT=ue([It,TY,lu,vl,Hx,Vx,cu,Fx,An],(t,e,n,r,a,i,l,u,d)=>{if(e!=null){var h=Ca(t,d);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:d,categoricalDomain:i,duplicateDomain:a,isCategorical:h,niceTicks:u,range:l,realScaleType:n,scale:r}}}),xJ=(t,e,n,r,a,i,l,u,d)=>{if(!(e==null||r==null)){var h=Ca(t,d),{type:m,ticks:g,tickCount:b}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,k=m==="category"&&r.bandwidth?r.bandwidth()/v:0;k=d==="angleAxis"&&i!=null&&i.length>=2?Jr(i[0]-i[1])*2*k:k;var C=g||a;if(C){var N=C.map((T,R)=>{var E=l?l.indexOf(T):T;return{index:R,coordinate:r(E)+k,value:T,offset:k}});return N.filter(T=>nn(T.coordinate))}return h&&u?u.map((T,R)=>({coordinate:r(T)+k,value:T,index:R,offset:k})).filter(T=>nn(T.coordinate)):r.ticks?r.ticks(b).map(T=>({coordinate:r(T)+k,value:T,offset:k})):r.domain().map((T,R)=>({coordinate:r(T)+k,value:l?l[T]:T,index:R,offset:k}))}},dR=ue([It,su,lu,vl,Fx,cu,Hx,Vx,An],xJ),vJ=(t,e,n,r,a,i,l)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=Ca(t,l),{tickCount:d}=e,h=0;return h=l==="angleAxis"&&(r==null?void 0:r.length)>=2?Jr(r[0]-r[1])*2*h:h,u&&i?i.map((m,g)=>({coordinate:n(m)+h,value:m,index:g,offset:h})):n.ticks?n.ticks(d).map(m=>({coordinate:n(m)+h,value:m,offset:h})):n.domain().map((m,g)=>({coordinate:n(m)+h,value:a?a[m]:m,index:g,offset:h}))}},zh=ue([It,su,vl,cu,Hx,Vx,An],vJ),Gh=ue(lr,vl,(t,e)=>{if(!(t==null||e==null))return Uf(Uf({},t),{},{scale:e})}),wJ=ue([lr,lu,zx,sR],Gx);ue((t,e,n)=>Lx(t,n),wJ,(t,e)=>{if(!(t==null||e==null))return Uf(Uf({},t),{},{scale:e})});var SJ=ue([It,yh,bh],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),fR=t=>t.options.defaultTooltipEventType,hR=t=>t.options.validateTooltipEventTypes;function mR(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function Wx(t,e){var n=fR(t),r=hR(t);return mR(e,n,r)}function _J(t){return $e(e=>Wx(e,t))}var pR=(t,e)=>{var n,r=Number(e);if(!(da(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},kJ=t=>t.tooltip.settings,zi={active:!1,index:null,dataKey:void 0,coordinate:void 0},NJ={itemInteraction:{click:zi,hover:zi},axisInteraction:{click:zi,hover:zi},keyboardInteraction:zi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},gR=yr({name:"tooltip",initialState:NJ,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Cn()},removeTooltipEntrySettings:{reducer(t,e){var n=Xa(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Cn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:CJ,removeTooltipEntrySettings:EJ,setTooltipSettingsState:TJ,setActiveMouseOverItemIndex:AJ,mouseLeaveItem:oie,mouseLeaveChart:yR,setActiveClickItemIndex:lie,setMouseOverAxisIndex:bR,setMouseClickAxisIndex:jJ,setSyncInteraction:ab,setKeyboardInteraction:ib}=gR.actions,PJ=gR.reducer;function mT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Hd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mT(Object(n),!0).forEach(function(r){IJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IJ(t,e,n){return(e=RJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RJ(t){var e=MJ(t,"string");return typeof e=="symbol"?e:e+""}function MJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DJ(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function OJ(t){return t.index!=null}var xR=(t,e,n,r)=>{if(e==null)return zi;var a=DJ(t,e,n);if(a==null)return zi;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(OJ(a)){if(i)return Hd(Hd({},a),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Hd(Hd({},zi),{},{coordinate:a.coordinate})},Kx=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!nn(r))return n;var a=0,i=1/0;return e.length>0&&(i=e.length-1),String(Math.max(a,Math.min(r,i)))},vR=(t,e,n,r,a,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],h=d==null?void 0:u(d.positions,i);if(h!=null)return h;var m=a==null?void 0:a[Number(i)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:m.coordinate}}}},wR=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;return n==="hover"?a=t.itemInteraction.hover.dataKey:a=t.itemInteraction.click.dataKey,a==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===a})},uu=t=>t.options.tooltipPayloadSearcher,wl=t=>t.tooltip;function pT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pT(Object(n),!0).forEach(function(r){LJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LJ(t,e,n){return(e=UJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UJ(t){var e=BJ(t,"string");return typeof e=="symbol"?e:e+""}function BJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $J(t,e){return t??e}var SR=(t,e,n,r,a,i,l)=>{if(!(e==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:h,dataEndIndex:m}=n,g=[];return t.reduce((b,v)=>{var k,{dataDefinedOnItem:C,settings:N}=v,T=$J(C,u),R=Array.isArray(T)?lP(T,h,m):T,E=(k=N==null?void 0:N.dataKey)!==null&&k!==void 0?k:r,P=N==null?void 0:N.nameKey,j;if(r&&Array.isArray(R)&&!Array.isArray(R[0])&&l==="axis"?j=y2(R,r,a):j=i(R,e,d,P),Array.isArray(j))j.forEach(D=>{var $=gT(gT({},N),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});b.push(G1({tooltipEntrySettings:$,dataKey:D.dataKey,payload:D.payload,value:Vn(D.payload,D.dataKey),name:D.name}))});else{var I;b.push(G1({tooltipEntrySettings:N,dataKey:E,payload:j,value:Vn(j,E),name:(I=Vn(j,P))!==null&&I!==void 0?I:N==null?void 0:N.name}))}return b},g)}},Yx=ue([Pn,It,RI,Ax,jn],nR),qJ=ue([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),zJ=ue([jn,bl],MI),du=ue([qJ,Pn,zJ],DI,{memoizeOptions:{resultEqualityCheck:Uh}}),GJ=ue([du],t=>t.filter(Ox)),FJ=ue([du],UI,{memoizeOptions:{resultEqualityCheck:Uh}}),Sl=ue([FJ,Ji],BI),HJ=ue([GJ,Ji,Pn],jI),Jx=ue([Sl,Pn,du],$I),_R=ue([Pn],$x),VJ=ue([Pn],t=>t.allowDataOverflow),kR=ue([_R,VJ],cI),WJ=ue([du],t=>t.filter(Ox)),KJ=ue([HJ,WJ,Rh],GI),YJ=ue([KJ,Ji,jn,kR],FI),JJ=ue([du],LI),XJ=ue([Sl,Pn,JJ,qx,jn],WI,{memoizeOptions:{resultEqualityCheck:Lh}}),QJ=ue([KI,jn,bl],xl),ZJ=ue([QJ,jn],XI),eX=ue([YI,jn,bl],xl),tX=ue([eX,jn],QI),nX=ue([JI,jn,bl],xl),rX=ue([nX,jn],ZI),aX=ue([ZJ,rX,tX],Bf),iX=ue([Pn,_R,kR,YJ,XJ,aX,It,jn],eR),NR=ue([Pn,It,Sl,Jx,Rh,jn,iX],tR),sX=ue([NR,Pn,Yx],rR),oX=ue([Pn,NR,sX,jn],aR),CR=t=>{var e=jn(t),n=bl(t),r=!1;return cu(t,e,n,r)},ER=ue([Pn,CR],Mh),TR=ue([Pn,Yx,oX,ER],Gx),lX=ue([It,Jx,Pn,jn],cR),cX=ue([It,Jx,Pn,jn],uR),uX=(t,e,n,r,a,i,l,u)=>{if(e){var{type:d}=e,h=Ca(t,u);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=d==="category"&&r.bandwidth?r.bandwidth()/m:0;return g=u==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Jr(a[0]-a[1])*2*g:g,h&&l?l.map((b,v)=>({coordinate:r(b)+g,value:b,index:v,offset:g})):r.domain().map((b,v)=>({coordinate:r(b)+g,value:i?i[b]:b,index:v,offset:g}))}}},mi=ue([It,Pn,Yx,TR,CR,lX,cX,jn],uX),Xx=ue([fR,hR,kJ],(t,e,n)=>mR(n.shared,t,e)),AR=t=>t.tooltip.settings.trigger,Qx=t=>t.tooltip.settings.defaultIndex,Fh=ue([wl,Xx,AR,Qx],xR),Vc=ue([Fh,Sl],Kx),jR=ue([mi,Vc],pR),dX=ue([Fh],t=>{if(t)return t.dataKey}),PR=ue([wl,Xx,AR,Qx],wR),fX=ue([ci,ui,It,Wn,mi,Qx,PR,uu],vR),hX=ue([Fh,fX],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),mX=ue([Fh],t=>t.active),pX=ue([PR,Vc,Ji,zI,jR,uu,Xx],SR),gX=ue([pX],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function yT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yT(Object(n),!0).forEach(function(r){yX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yX(t,e,n){return(e=bX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bX(t){var e=xX(t,"string");return typeof e=="symbol"?e:e+""}function xX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vX=()=>$e(Pn),wX=()=>{var t=vX(),e=$e(mi),n=$e(TR);return nl(!t||!n?void 0:bT(bT({},t),{},{scale:n}),e)};function xT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Lo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xT(Object(n),!0).forEach(function(r){SX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SX(t,e,n){return(e=_X(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _X(t){var e=kX(t,"string");return typeof e=="symbol"?e:e+""}function kX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NX=(t,e,n,r)=>{var a=e.find(i=>i&&i.index===n);if(a){if(t==="horizontal")return{x:a.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:a.coordinate}}return{x:0,y:0}},CX=(t,e,n,r)=>{var a=e.find(h=>h&&h.index===n);if(a){if(t==="centric"){var i=a.coordinate,{radius:l}=r;return Lo(Lo(Lo({},r),Hn(r.cx,r.cy,l,i)),{},{angle:i,radius:l})}var u=a.coordinate,{angle:d}=r;return Lo(Lo(Lo({},r),Hn(r.cx,r.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function EX(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var IR=(t,e,n,r,a)=>{var i,l=-1,u=(i=e==null?void 0:e.length)!==null&&i!==void 0?i:0;if(u<=1||t==null)return 0;if(r==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<u;d++){var h=d>0?n[d-1].coordinate:n[u-1].coordinate,m=n[d].coordinate,g=d>=u-1?n[0].coordinate:n[d+1].coordinate,b=void 0;if(Jr(m-h)!==Jr(g-m)){var v=[];if(Jr(g-m)===Jr(a[1]-a[0])){b=g;var k=m+a[1]-a[0];v[0]=Math.min(k,(k+h)/2),v[1]=Math.max(k,(k+h)/2)}else{b=h;var C=g+a[1]-a[0];v[0]=Math.min(m,(C+m)/2),v[1]=Math.max(m,(C+m)/2)}var N=[Math.min(m,(b+m)/2),Math.max(m,(b+m)/2)];if(t>N[0]&&t<=N[1]||t>=v[0]&&t<=v[1]){({index:l}=n[d]);break}}else{var T=Math.min(h,g),R=Math.max(h,g);if(t>(T+m)/2&&t<=(R+m)/2){({index:l}=n[d]);break}}}else if(e){for(var E=0;E<u;E++)if(E===0&&t<=(e[E].coordinate+e[E+1].coordinate)/2||E>0&&E<u-1&&t>(e[E].coordinate+e[E-1].coordinate)/2&&t<=(e[E].coordinate+e[E+1].coordinate)/2||E===u-1&&t>(e[E].coordinate+e[E-1].coordinate)/2){({index:l}=e[E]);break}}return l},RR=()=>$e(Ax),Zx=(t,e)=>e,MR=(t,e,n)=>n,ev=(t,e,n,r)=>r,TX=ue(mi,t=>uh(t,e=>e.coordinate)),tv=ue([wl,Zx,MR,ev],xR),DR=ue([tv,Sl],Kx),AX=(t,e,n)=>{if(e!=null){var r=wl(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},OR=ue([wl,Zx,MR,ev],wR),$f=ue([ci,ui,It,Wn,mi,ev,OR,uu],vR),jX=ue([tv,$f],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),LR=ue([mi,DR],pR),PX=ue([OR,DR,Ji,zI,LR,uu,Zx],SR),IX=ue([tv],t=>({isActive:t.active,activeIndex:t.index})),RX=(t,e,n,r,a,i,l)=>{if(!(!t||!n||!r||!a)&&EX(t,l)){var u=c7(t,e),d=IR(u,i,a,n,r),h=NX(e,a,d,t);return{activeIndex:String(d),activeCoordinate:h}}},MX=(t,e,n,r,a,i,l)=>{if(!(!t||!r||!a||!i||!n)){var u=xV(t,n);if(u){var d=u7(u,e),h=IR(d,l,i,r,a),m=CX(e,i,h,u);return{activeIndex:String(h),activeCoordinate:m}}}},DX=(t,e,n,r,a,i,l,u)=>{if(!(!t||!e||!r||!a||!i))return e==="horizontal"||e==="vertical"?RX(t,e,r,a,i,l,u):MX(t,e,n,r,a,i,l)},OX=ue(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElementId:r.elementId}}),LX=ue(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(nr)),n=Array.from(new Set(e));return n.sort((r,a)=>r-a)},{memoizeOptions:{resultEqualityCheck:_Y}});function vT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function wT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vT(Object(n),!0).forEach(function(r){UX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UX(t,e,n){return(e=BX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BX(t){var e=$X(t,"string");return typeof e=="symbol"?e:e+""}function $X(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qX={},zX={zIndexMap:Object.values(nr).reduce((t,e)=>wT(wT({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),qX)},GX=new Set(Object.values(nr));function FX(t){return GX.has(t)}var UR=yr({name:"zIndex",initialState:zX,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Cn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!FX(n)&&delete t.zIndexMap[n])},prepare:Cn()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:r,isPanorama:a}=e.payload;t.zIndexMap[n]?a?t.zIndexMap[n].panoramaElementId=r:t.zIndexMap[n].elementId=r:t.zIndexMap[n]={consumers:0,elementId:a?void 0:r,panoramaElementId:a?r:void 0}},prepare:Cn()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:Cn()}}}),{registerZIndexPortal:HX,unregisterZIndexPortal:VX,registerZIndexPortalId:WX,unregisterZIndexPortalId:KX}=UR.actions,YX=UR.reducer;function Ea(t){var{zIndex:e,children:n}=t,r=G7(),a=r&&e!==void 0&&e!==0,i=ar(),l=wn();_.useLayoutEffect(()=>a?(l(HX({zIndex:e})),()=>{l(VX({zIndex:e}))}):ml,[l,e,a]);var u=$e(h=>OX(h,e,i));if(!a)return n;if(!u)return null;var d=document.getElementById(u);return d?Lb.createPortal(n,d):null}function sb(){return sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sb.apply(null,arguments)}function ST(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Vd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ST(Object(n),!0).forEach(function(r){JX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ST(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JX(t,e,n){return(e=XX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XX(t){var e=QX(t,"string");return typeof e=="symbol"?e:e+""}function QX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZX(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return _.isValidElement(e)?_.cloneElement(e,r):_.createElement(n,r)}function eQ(t){var e,{coordinate:n,payload:r,index:a,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:h,chartName:m}=t,g=n,b=r,v=a;if(!d||!g||m!=="ScatterChart"&&h!=="axis")return null;var k,C,N;if(m==="ScatterChart")k=g,C=M9,N=nr.cursorLine;else if(m==="BarChart")k=D9(u,g,i,l),C=kP,N=nr.cursorRectangle;else if(u==="radial"&&x2(g)){var{cx:T,cy:R,radius:E,startAngle:P,endAngle:j}=NP(g);k={cx:T,cy:R,startAngle:P,endAngle:j,innerRadius:E,outerRadius:E},C=EP,N=nr.cursorLine}else k={points:_V(u,g,i)},C=Pc,N=nr.cursorLine;var I=typeof d=="object"&&"className"in d?d.className:void 0,D=Vd(Vd(Vd(Vd({stroke:"#ccc",pointerEvents:"none"},i),k),ih(d)),{},{payload:b,payloadIndex:v,className:Ct("recharts-tooltip-cursor",I)});return _.createElement(Ea,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:N},_.createElement(ZX,{cursor:d,cursorComp:C,cursorProps:D}))}function tQ(t){var e=wX(),n=yP(),r=tu(),a=RR();return e==null||n==null||r==null||a==null?null:_.createElement(eQ,sb({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:a}))}var BR=_.createContext(null),nQ=()=>_.useContext(BR),By={exports:{}},_T;function rQ(){return _T||(_T=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(d,h,m){this.fn=d,this.context=h,this.once=m||!1}function i(d,h,m,g,b){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new a(m,g||d,b),k=n?n+h:h;return d._events[k]?d._events[k].fn?d._events[k]=[d._events[k],v]:d._events[k].push(v):(d._events[k]=v,d._eventsCount++),d}function l(d,h){--d._eventsCount===0?d._events=new r:delete d._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],m,g;if(this._eventsCount===0)return h;for(g in m=this._events)e.call(m,g)&&h.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},u.prototype.listeners=function(h){var m=n?n+h:h,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var b=0,v=g.length,k=new Array(v);b<v;b++)k[b]=g[b].fn;return k},u.prototype.listenerCount=function(h){var m=n?n+h:h,g=this._events[m];return g?g.fn?1:g.length:0},u.prototype.emit=function(h,m,g,b,v,k){var C=n?n+h:h;if(!this._events[C])return!1;var N=this._events[C],T=arguments.length,R,E;if(N.fn){switch(N.once&&this.removeListener(h,N.fn,void 0,!0),T){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,m),!0;case 3:return N.fn.call(N.context,m,g),!0;case 4:return N.fn.call(N.context,m,g,b),!0;case 5:return N.fn.call(N.context,m,g,b,v),!0;case 6:return N.fn.call(N.context,m,g,b,v,k),!0}for(E=1,R=new Array(T-1);E<T;E++)R[E-1]=arguments[E];N.fn.apply(N.context,R)}else{var P=N.length,j;for(E=0;E<P;E++)switch(N[E].once&&this.removeListener(h,N[E].fn,void 0,!0),T){case 1:N[E].fn.call(N[E].context);break;case 2:N[E].fn.call(N[E].context,m);break;case 3:N[E].fn.call(N[E].context,m,g);break;case 4:N[E].fn.call(N[E].context,m,g,b);break;default:if(!R)for(j=1,R=new Array(T-1);j<T;j++)R[j-1]=arguments[j];N[E].fn.apply(N[E].context,R)}}return!0},u.prototype.on=function(h,m,g){return i(this,h,m,g,!1)},u.prototype.once=function(h,m,g){return i(this,h,m,g,!0)},u.prototype.removeListener=function(h,m,g,b){var v=n?n+h:h;if(!this._events[v])return this;if(!m)return l(this,v),this;var k=this._events[v];if(k.fn)k.fn===m&&(!b||k.once)&&(!g||k.context===g)&&l(this,v);else{for(var C=0,N=[],T=k.length;C<T;C++)(k[C].fn!==m||b&&!k[C].once||g&&k[C].context!==g)&&N.push(k[C]);N.length?this._events[v]=N.length===1?N[0]:N:l(this,v)}return this},u.prototype.removeAllListeners=function(h){var m;return h?(m=n?n+h:h,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(By)),By.exports}var aQ=rQ();const iQ=fa(aQ);var Wc=new iQ,ob="recharts.syncEvent.tooltip",kT="recharts.syncEvent.brush";function sQ(t,e){if(e){var n=Number.parseInt(e,10);if(!da(n))return t==null?void 0:t[n]}}var oQ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},$R=yr({name:"options",initialState:oQ,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),lQ=$R.reducer,{createEventEmitter:cQ}=$R.actions;function uQ(t){return t.tooltip.syncInteraction}var dQ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},qR=yr({name:"chartData",initialState:dQ,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:NT,setDataStartEndIndexes:fQ,setComputedData:cie}=qR.actions,hQ=qR.reducer,mQ=["x","y"];function CT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Uo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CT(Object(n),!0).forEach(function(r){pQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pQ(t,e,n){return(e=gQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gQ(t){var e=yQ(t,"string");return typeof e=="symbol"?e:e+""}function yQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bQ(t,e){if(t==null)return{};var n,r,a=xQ(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function xQ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vQ(){var t=$e(jx),e=$e(Px),n=wn(),r=$e(kI),a=$e(mi),i=tu(),l=wh(),u=$e(d=>d.rootProps.className);_.useEffect(()=>{if(t==null)return ml;var d=(h,m,g)=>{if(e!==g&&t===h){if(r==="index"){var b;if(l&&m!==null&&m!==void 0&&(b=m.payload)!==null&&b!==void 0&&b.coordinate&&m.payload.sourceViewBox){var v=m.payload.coordinate,{x:k,y:C}=v,N=bQ(v,mQ),{x:T,y:R,width:E,height:P}=m.payload.sourceViewBox,j=Uo(Uo({},N),{},{x:l.x+(E?(k-T)/E:0)*l.width,y:l.y+(P?(C-R)/P:0)*l.height});n(Uo(Uo({},m),{},{payload:Uo(Uo({},m.payload),{},{coordinate:j})}))}else n(m);return}if(a!=null){var I;if(typeof r=="function"){var D={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},$=r(a,D);I=a[$]}else r==="value"&&(I=a.find(q=>String(q.value)===m.payload.label));var{coordinate:H}=m.payload;if(I==null||m.payload.active===!1||H==null||l==null){n(ab({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:z,y:F}=H,V=Math.min(z,l.x+l.width),K=Math.min(F,l.y+l.height),pe={x:i==="horizontal"?I.coordinate:V,y:i==="horizontal"?K:I.coordinate},Y=ab({active:m.payload.active,coordinate:pe,dataKey:m.payload.dataKey,index:String(I.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox});n(Y)}}};return Wc.on(ob,d),()=>{Wc.off(ob,d)}},[u,n,e,t,r,a,i,l])}function wQ(){var t=$e(jx),e=$e(Px),n=wn();_.useEffect(()=>{if(t==null)return ml;var r=(a,i,l)=>{e!==l&&t===a&&n(fQ(i))};return Wc.on(kT,r),()=>{Wc.off(kT,r)}},[n,e,t])}function SQ(){var t=wn();_.useEffect(()=>{t(cQ())},[t]),vQ(),wQ()}function _Q(t,e,n,r,a,i){var l=$e(v=>AX(v,t,e)),u=$e(Px),d=$e(jx),h=$e(kI),m=$e(uQ),g=m==null?void 0:m.active,b=wh();_.useEffect(()=>{if(!g&&d!=null&&u!=null){var v=ab({active:i,coordinate:n,dataKey:l,index:a,label:typeof r=="number"?String(r):r,sourceViewBox:b});Wc.emit(ob,d,v,u)}},[g,n,l,a,r,u,d,h,i,b])}function ET(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function TT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ET(Object(n),!0).forEach(function(r){kQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kQ(t,e,n){return(e=NQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NQ(t){var e=CQ(t,"string");return typeof e=="symbol"?e:e+""}function CQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EQ(t){return t.dataKey}function TQ(t,e){return _.isValidElement(t)?_.cloneElement(t,e):typeof t=="function"?_.createElement(t,e):_.createElement(f9,e)}var AT=[],AQ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!zs.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function nv(t){var e,n,r=Dn(t,AQ),{active:a,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:h,isAnimationActive:m,offset:g,payloadUniqBy:b,position:v,reverseDirection:k,useTranslate3d:C,wrapperStyle:N,cursor:T,shared:R,trigger:E,defaultIndex:P,portal:j,axisId:I}=r,D=wn(),$=typeof P=="number"?String(P):P;_.useEffect(()=>{D(TJ({shared:R,trigger:E,axisId:I,active:a,defaultIndex:$}))},[D,R,E,I,a,$]);var H=wh(),z=xP(),F=_J(R),{activeIndex:V,isActive:K}=(e=$e(me=>IX(me,F,E,$)))!==null&&e!==void 0?e:{},pe=$e(me=>PX(me,F,E,$)),Y=$e(me=>LR(me,F,E,$)),q=$e(me=>jX(me,F,E,$)),B=pe,ae=nQ(),X=(n=a??K)!==null&&n!==void 0?n:!1,[ve,L]=D2([B,X]),O=F==="axis"?Y:void 0;_Q(F,E,q,O,V,X);var Z=j??ae;if(Z==null||H==null||F==null)return null;var U=B??AT;X||(U=AT),h&&U.length&&(U=j2(U.filter(me=>me.value!=null&&(me.hide!==!0||r.includeHidden)),b,EQ));var J=U.length>0,oe=_.createElement(x9,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:m,active:X,coordinate:q,hasPayload:J,offset:g,position:v,reverseDirection:k,useTranslate3d:C,viewBox:H,wrapperStyle:N,lastBoundingBox:ve,innerRef:L,hasPortalFromProps:!!j},TQ(d,TT(TT({},r),{},{payload:U,label:O,active:X,activeIndex:V,coordinate:q,accessibilityLayer:z})));return _.createElement(_.Fragment,null,Lb.createPortal(oe,Z),X&&_.createElement(tQ,{cursor:T,tooltipEventType:F,coordinate:q,payload:U,index:V}))}function jQ(t,e,n){return(e=PQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PQ(t){var e=IQ(t,"string");return typeof e=="symbol"?e:e+""}function IQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class RQ{constructor(e){jQ(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function jT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function MQ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jT(Object(n),!0).forEach(function(r){DQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DQ(t,e,n){return(e=OQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OQ(t){var e=LQ(t,"string");return typeof e=="symbol"?e:e+""}function LQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UQ={cacheSize:2e3,enableCache:!0},zR=MQ({},UQ),PT=new RQ(zR.cacheSize),BQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IT="recharts_measurement_span";function $Q(t,e){var n=e.fontSize||"",r=e.fontFamily||"",a=e.fontWeight||"",i=e.fontStyle||"",l=e.letterSpacing||"",u=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(i,"|").concat(l,"|").concat(u)}var RT=(t,e)=>{try{var n=document.getElementById(IT);n||(n=document.createElement("span"),n.setAttribute("id",IT),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,BQ,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Ic=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||zs.isSsr)return{width:0,height:0};if(!zR.enableCache)return RT(e,n);var r=$Q(e,n),a=PT.get(r);if(a)return a;var i=RT(e,n);return PT.set(r,i),i},MT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,GR={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},GQ=Object.keys(GR),Ho="NaN";function FQ(t,e){return t*GR[e]}class pr{static parse(e){var n,[,r,a]=(n=zQ.exec(e))!==null&&n!==void 0?n:[];return new pr(parseFloat(r),a??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,da(e)&&(this.unit=""),n!==""&&!qQ.test(n)&&(this.num=NaN,this.unit=""),GQ.includes(n)&&(this.num=FQ(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new pr(NaN,""):new pr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new pr(NaN,""):new pr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new pr(NaN,""):new pr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new pr(NaN,""):new pr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return da(this.num)}}function FR(t){if(t.includes(Ho))return Ho;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,a,i]=(n=MT.exec(e))!==null&&n!==void 0?n:[],l=pr.parse(r??""),u=pr.parse(i??""),d=a==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Ho;e=e.replace(MT,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,m,g,b]=(h=DT.exec(e))!==null&&h!==void 0?h:[],v=pr.parse(m??""),k=pr.parse(b??""),C=g==="+"?v.add(k):v.subtract(k);if(C.isNaN())return Ho;e=e.replace(DT,C.toString())}return e}var OT=/\(([^()]*)\)/;function HQ(t){for(var e=t,n;(n=OT.exec(e))!=null;){var[,r]=n;e=e.replace(OT,FR(r))}return e}function VQ(t){var e=t.replace(/\s+/g,"");return e=HQ(e),e=FR(e),e}function WQ(t){try{return VQ(t)}catch{return Ho}}function $y(t){var e=WQ(t.slice(5,-1));return e===Ho?"":e}var KQ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],YQ=["dx","dy","angle","className","breakAll"];function lb(){return lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lb.apply(null,arguments)}function LT(t,e){if(t==null)return{};var n,r,a=JQ(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function JQ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var HR=/[ \f\n\r\t\v\u2028\u2029]+/,VR=t=>{var{children:e,breakAll:n,style:r}=t;try{var a=[];En(e)||(n?a=e.toString().split(""):a=e.toString().split(HR));var i=a.map(u=>({word:u,width:Ic(u,r).width})),l=n?0:Ic("",r).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function XQ(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var WR=(t,e,n,r)=>t.reduce((a,i)=>{var{word:l,width:u}=i,d=a[a.length-1];if(d&&u!=null&&(e==null||r||d.width+u+n<Number(e)))d.words.push(l),d.width+=u+n;else{var h={words:[l],width:u};a.push(h)}return a},[]),KR=t=>t.reduce((e,n)=>e.width>n.width?e:n),QQ="",UT=(t,e,n,r,a,i,l,u)=>{var d=t.slice(0,e),h=VR({breakAll:n,style:r,children:d+QQ});if(!h)return[!1,[]];var m=WR(h.wordsWithComputedWidth,i,l,u),g=m.length>a||KR(m).width>Number(i);return[g,m]},ZQ=(t,e,n,r,a)=>{var{maxLines:i,children:l,style:u,breakAll:d}=t,h=De(i),m=String(l),g=WR(e,r,n,a);if(!h||a)return g;var b=g.length>i||KR(g).width>Number(r);if(!b)return g;for(var v=0,k=m.length-1,C=0,N;v<=k&&C<=m.length-1;){var T=Math.floor((v+k)/2),R=T-1,[E,P]=UT(m,R,d,u,i,r,n,a),[j]=UT(m,T,d,u,i,r,n,a);if(!E&&!j&&(v=T+1),E&&j&&(k=T-1),!E&&j){N=P;break}C++}return N||g},BT=t=>{var e=En(t)?[]:t.toString().split(HR);return[{words:e,width:void 0}]},eZ=t=>{var{width:e,scaleToFit:n,children:r,style:a,breakAll:i,maxLines:l}=t;if((e||n)&&!zs.isSsr){var u,d,h=VR({breakAll:i,children:r,style:a});if(h){var{wordsWithComputedWidth:m,spaceWidth:g}=h;u=m,d=g}else return BT(r);return ZQ({breakAll:i,children:r,maxLines:l,style:a},u,d,e,!!n)}return BT(r)},YR="#808080",tZ={breakAll:!1,capHeight:"0.71em",fill:YR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},rv=_.forwardRef((t,e)=>{var n=Dn(t,tZ),{x:r,y:a,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:h,verticalAnchor:m}=n,g=LT(n,KQ),b=_.useMemo(()=>eZ({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),{dx:v,dy:k,angle:C,className:N,breakAll:T}=g,R=LT(g,YQ);if(!_a(r)||!_a(a)||b.length===0)return null;var E=Number(r)+(De(v)?v:0),P=Number(a)+(De(k)?k:0);if(!nn(E)||!nn(P))return null;var j;switch(m){case"start":j=$y("calc(".concat(l,")"));break;case"middle":j=$y("calc(".concat((b.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:j=$y("calc(".concat(b.length-1," * -").concat(i,")"));break}var I=[];if(d){var D=b[0].width,{width:$}=g;I.push("scale(".concat(De($)&&De(D)?$/D:1,")"))}return C&&I.push("rotate(".concat(C,", ").concat(E,", ").concat(P,")")),I.length&&(R.transform=I.join(" ")),_.createElement("text",lb({},rr(R),{ref:e,x:E,y:P,className:Ct("recharts-text",N),textAnchor:h,fill:u.includes("url")?YR:u}),b.map((H,z)=>{var F=H.words.join(T?"":" ");return _.createElement("tspan",{x:E,dy:z===0?j:i,key:"".concat(F,"-").concat(z)},F)}))});rv.displayName="Text";var nZ=["labelRef"];function rZ(t,e){if(t==null)return{};var n,r,a=aZ(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function aZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function on(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$T(Object(n),!0).forEach(function(r){iZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iZ(t,e,n){return(e=sZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sZ(t){var e=oZ(t,"string");return typeof e=="symbol"?e:e+""}function oZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ka.apply(null,arguments)}var JR=_.createContext(null),lZ=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:a,width:i,height:l,children:u}=t,d=_.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:a,width:i,height:l}),[e,n,r,a,i,l]);return _.createElement(JR.Provider,{value:d},u)},XR=()=>{var t=_.useContext(JR),e=wh();return t||gP(e)},cZ=_.createContext(null),uZ=()=>{var t=_.useContext(cZ),e=$e(AI);return t||e},dZ=t=>{var{value:e,formatter:n}=t,r=En(t.children)?e:t.children;return typeof n=="function"?n(r):r},av=t=>t!=null&&typeof t=="function",fZ=(t,e)=>{var n=Jr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},hZ=(t,e,n,r,a)=>{var{offset:i,className:l}=t,{cx:u,cy:d,innerRadius:h,outerRadius:m,startAngle:g,endAngle:b,clockWise:v}=a,k=(h+m)/2,C=fZ(g,b),N=C>=0?1:-1,T,R;switch(e){case"insideStart":T=g+N*i,R=v;break;case"insideEnd":T=b-N*i,R=!v;break;case"end":T=b+N*i,R=v;break;default:throw new Error("Unsupported position ".concat(e))}R=C<=0?R:!R;var E=Hn(u,d,k,T),P=Hn(u,d,k,T+(R?1:-1)*359),j="M".concat(E.x,",").concat(E.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(R?0:1,`,
    `).concat(P.x,",").concat(P.y),I=En(t.id)?Oc("recharts-radial-line-"):t.id;return _.createElement("text",Ka({},r,{dominantBaseline:"central",className:Ct("recharts-radial-bar-label",l)}),_.createElement("defs",null,_.createElement("path",{id:I,d:j})),_.createElement("textPath",{xlinkHref:"#".concat(I)},n))},mZ=(t,e,n)=>{var{cx:r,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=t,h=(u+d)/2;if(n==="outside"){var{x:m,y:g}=Hn(r,a,l+e,h);return{x:m,y:g,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"end"};var b=(i+l)/2,{x:v,y:k}=Hn(r,a,b,h);return{x:v,y:k,textAnchor:"middle",verticalAnchor:"middle"}},cb=t=>"cx"in t&&De(t.cx),pZ=(t,e)=>{var{parentViewBox:n,offset:r,position:a}=t,i;n!=null&&!cb(n)&&(i=n);var{x:l,y:u,upperWidth:d,lowerWidth:h,height:m}=e,g=l,b=l+(d-h)/2,v=(g+b)/2,k=(d+h)/2,C=g+d/2,N=m>=0?1:-1,T=N*r,R=N>0?"end":"start",E=N>0?"start":"end",P=d>=0?1:-1,j=P*r,I=P>0?"end":"start",D=P>0?"start":"end";if(a==="top"){var $={x:g+d/2,y:u-T,textAnchor:"middle",verticalAnchor:R};return on(on({},$),i?{height:Math.max(u-i.y,0),width:d}:{})}if(a==="bottom"){var H={x:b+h/2,y:u+m+T,textAnchor:"middle",verticalAnchor:E};return on(on({},H),i?{height:Math.max(i.y+i.height-(u+m),0),width:h}:{})}if(a==="left"){var z={x:v-j,y:u+m/2,textAnchor:I,verticalAnchor:"middle"};return on(on({},z),i?{width:Math.max(z.x-i.x,0),height:m}:{})}if(a==="right"){var F={x:v+k+j,y:u+m/2,textAnchor:D,verticalAnchor:"middle"};return on(on({},F),i?{width:Math.max(i.x+i.width-F.x,0),height:m}:{})}var V=i?{width:k,height:m}:{};return a==="insideLeft"?on({x:v+j,y:u+m/2,textAnchor:D,verticalAnchor:"middle"},V):a==="insideRight"?on({x:v+k-j,y:u+m/2,textAnchor:I,verticalAnchor:"middle"},V):a==="insideTop"?on({x:g+d/2,y:u+T,textAnchor:"middle",verticalAnchor:E},V):a==="insideBottom"?on({x:b+h/2,y:u+m-T,textAnchor:"middle",verticalAnchor:R},V):a==="insideTopLeft"?on({x:g+j,y:u+T,textAnchor:D,verticalAnchor:E},V):a==="insideTopRight"?on({x:g+d-j,y:u+T,textAnchor:I,verticalAnchor:E},V):a==="insideBottomLeft"?on({x:b+j,y:u+m-T,textAnchor:D,verticalAnchor:R},V):a==="insideBottomRight"?on({x:b+h-j,y:u+m-T,textAnchor:I,verticalAnchor:R},V):a&&typeof a=="object"&&(De(a.x)||ei(a.x))&&(De(a.y)||ei(a.y))?on({x:l+Fi(a.x,k),y:u+Fi(a.y,m),textAnchor:"end",verticalAnchor:"end"},V):on({x:C,y:u+m/2,textAnchor:"middle",verticalAnchor:"middle"},V)},gZ={offset:5,zIndex:nr.label};function $i(t){var e=Dn(t,gZ),{viewBox:n,position:r,value:a,children:i,content:l,className:u="",textBreakAll:d,labelRef:h}=e,m=uZ(),g=XR(),b=r==="center"?g:m??g,v,k,C;if(n==null?v=b:cb(n)?v=n:v=gP(n),!v||En(a)&&En(i)&&!_.isValidElement(l)&&typeof l!="function")return null;var N=on(on({},e),{},{viewBox:v});if(_.isValidElement(l)){var{labelRef:T}=N,R=rZ(N,nZ);return _.cloneElement(l,R)}if(typeof l=="function"){if(k=_.createElement(l,N),_.isValidElement(k))return k}else k=dZ(e);var E=rr(e);if(cb(v)){if(r==="insideStart"||r==="insideEnd"||r==="end")return hZ(e,r,k,E,v);C=mZ(v,e.offset,e.position)}else C=pZ(e,v);return _.createElement(Ea,{zIndex:e.zIndex},_.createElement(rv,Ka({ref:h,className:Ct("recharts-label",u)},E,C,{textAnchor:XQ(E.textAnchor)?E.textAnchor:C.textAnchor,breakAll:d}),k))}$i.displayName="Label";var yZ=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?_.createElement($i,Ka({key:"label-implicit"},r)):_a(t)?_.createElement($i,Ka({key:"label-implicit",value:t},r)):_.isValidElement(t)?t.type===$i?_.cloneElement(t,on({key:"label-implicit"},r)):_.createElement($i,Ka({key:"label-implicit",content:t},r)):av(t)?_.createElement($i,Ka({key:"label-implicit",content:t},r)):t&&typeof t=="object"?_.createElement($i,Ka({},t,{key:"label-implicit"},r)):null};function bZ(t){var{label:e,labelRef:n}=t,r=XR();return yZ(e,r,n)||null}var qy={},zy={},qT;function xZ(){return qT||(qT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(zy)),zy}var Gy={},zT;function vZ(){return zT||(zT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Gy)),Gy}var GT;function wZ(){return GT||(GT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xZ(),n=vZ(),r=Vb();function a(i){if(r.isArrayLike(i))return e.last(n.toArray(i))}t.last=a})(qy)),qy}var Fy,FT;function SZ(){return FT||(FT=1,Fy=wZ().last),Fy}var _Z=SZ();const kZ=fa(_Z);var NZ=["valueAccessor"],CZ=["dataKey","clockWise","id","textBreakAll","zIndex"];function qf(){return qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qf.apply(null,arguments)}function HT(t,e){if(t==null)return{};var n,r,a=EZ(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function EZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var TZ=t=>Array.isArray(t.value)?kZ(t.value):t.value,QR=_.createContext(void 0),ZR=QR.Provider,eM=_.createContext(void 0);eM.Provider;function AZ(){return _.useContext(QR)}function jZ(){return _.useContext(eM)}function Qd(t){var{valueAccessor:e=TZ}=t,n=HT(t,NZ),{dataKey:r,clockWise:a,id:i,textBreakAll:l,zIndex:u}=n,d=HT(n,CZ),h=AZ(),m=jZ(),g=h||m;return!g||!g.length?null:_.createElement(Ea,{zIndex:u??nr.label},_.createElement(ea,{className:"recharts-label-list"},g.map((b,v)=>{var k,C=En(r)?e(b,v):Vn(b&&b.payload,r),N=En(i)?{}:{id:"".concat(i,"-").concat(v)};return _.createElement($i,qf({key:"label-".concat(v)},rr(b),d,N,{fill:(k=n.fill)!==null&&k!==void 0?k:b.fill,parentViewBox:b.parentViewBox,value:C,textBreakAll:l,viewBox:b.viewBox,index:v,zIndex:0}))})))}Qd.displayName="LabelList";function tM(t){var{label:e}=t;return e?e===!0?_.createElement(Qd,{key:"labelList-implicit"}):_.isValidElement(e)||av(e)?_.createElement(Qd,{key:"labelList-implicit",content:e}):typeof e=="object"?_.createElement(Qd,qf({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function ub(){return ub=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ub.apply(null,arguments)}var nM=t=>{var{cx:e,cy:n,r,className:a}=t,i=Ct("recharts-dot",a);return De(e)&&De(n)&&De(r)?_.createElement("circle",ub({},Zr(t),Hb(t),{className:i,cx:e,cy:n,r})):null},PZ={radiusAxis:{},angleAxis:{}},rM=yr({name:"polarAxis",initialState:PZ,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:uie,removeRadiusAxis:die,addAngleAxis:fie,removeAngleAxis:hie}=rM.actions,IZ=rM.reducer,iv=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Hy={},VT;function RZ(){return VT||(VT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var a;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&a.writable)?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(Hy)),Hy}var Vy,WT;function MZ(){return WT||(WT=1,Vy=RZ().isPlainObject),Vy}var DZ=MZ();const OZ=fa(DZ);function KT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function YT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KT(Object(n),!0).forEach(function(r){LZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LZ(t,e,n){return(e=UZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UZ(t){var e=BZ(t,"string");return typeof e=="symbol"?e:e+""}function BZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zf(){return zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zf.apply(null,arguments)}var JT=(t,e,n,r,a)=>{var i=n-r,l;return l="M ".concat(t,",").concat(e),l+="L ".concat(t+n,",").concat(e),l+="L ".concat(t+n-i/2,",").concat(e+a),l+="L ".concat(t+n-i/2-r,",").concat(e+a),l+="L ".concat(t,",").concat(e," Z"),l},$Z={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qZ=t=>{var e=Dn(t,$Z),{x:n,y:r,upperWidth:a,lowerWidth:i,height:l,className:u}=e,{animationEasing:d,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=e,b=_.useRef(null),[v,k]=_.useState(-1),C=_.useRef(a),N=_.useRef(i),T=_.useRef(l),R=_.useRef(n),E=_.useRef(r),P=kh(t,"trapezoid-");if(_.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var pe=b.current.getTotalLength();pe&&k(pe)}catch{}},[]),n!==+n||r!==+r||a!==+a||i!==+i||l!==+l||a===0&&i===0||l===0)return null;var j=Ct("recharts-trapezoid",u);if(!g)return _.createElement("g",null,_.createElement("path",zf({},rr(e),{className:j,d:JT(n,r,a,i,l)})));var I=C.current,D=N.current,$=T.current,H=R.current,z=E.current,F="0px ".concat(v===-1?1:v,"px"),V="".concat(v,"px 0px"),K=vP(["strokeDasharray"],h,d);return _.createElement(_h,{animationId:P,key:P,canBegin:v>0,duration:h,easing:d,isActive:g,begin:m},pe=>{var Y=xn(I,a,pe),q=xn(D,i,pe),B=xn($,l,pe),ae=xn(H,n,pe),X=xn(z,r,pe);b.current&&(C.current=Y,N.current=q,T.current=B,R.current=ae,E.current=X);var ve=pe>0?{transition:K,strokeDasharray:V}:{strokeDasharray:F};return _.createElement("path",zf({},rr(e),{className:j,d:JT(ae,X,Y,q,B),ref:b,style:YT(YT({},ve),e.style)}))})},zZ=["option","shapeType","propTransformer","activeClassName","isActive"];function GZ(t,e){if(t==null)return{};var n,r,a=FZ(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function FZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function XT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Gf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XT(Object(n),!0).forEach(function(r){HZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HZ(t,e,n){return(e=VZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VZ(t){var e=WZ(t,"string");return typeof e=="symbol"?e:e+""}function WZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KZ(t,e){return Gf(Gf({},e),t)}function YZ(t,e){return t==="symbols"}function QT(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return _.createElement(kP,n);case"trapezoid":return _.createElement(qZ,n);case"sector":return _.createElement(EP,n);case"symbols":if(YZ(e))return _.createElement(Fb,n);break;case"curve":return _.createElement(Pc,n);default:return null}}function JZ(t){return _.isValidElement(t)?t.props:t}function XZ(t){var{option:e,shapeType:n,propTransformer:r=KZ,activeClassName:a="recharts-active-shape",isActive:i}=t,l=GZ(t,zZ),u;if(_.isValidElement(e))u=_.cloneElement(e,Gf(Gf({},l),JZ(e)));else if(typeof e=="function")u=e(l);else if(OZ(e)&&typeof e!="boolean"){var d=r(e,l);u=_.createElement(QT,{shapeType:n,elementProps:d})}else{var h=l;u=_.createElement(QT,{shapeType:n,elementProps:h})}return i?_.createElement(ea,{className:a},u):u}function aM(t){var{fn:e,args:n}=t,r=wn(),a=ar();return _.useLayoutEffect(()=>{if(!a){var i=e(n);return r(CJ(i)),()=>{r(EJ(i))}}},[e,n,r,a]),null}function iM(t){var{legendPayload:e}=t,n=wn(),r=ar();return _.useLayoutEffect(()=>r?ml:(n(V7(e)),()=>{n(W7(e))}),[n,r,e]),null}var Wy,QZ=()=>{var[t]=_.useState(()=>Oc("uid-"));return t},ZZ=(Wy=o4.useId)!==null&&Wy!==void 0?Wy:QZ;function sM(t,e){var n=ZZ();return e||(t?"".concat(t,"-").concat(n):n)}var eee=_.createContext(void 0),oM=t=>{var{id:e,type:n,children:r}=t,a=sM("recharts-".concat(n),e);return _.createElement(eee.Provider,{value:a},r(a))},tee={cartesianItems:[],polarItems:[]},lM=yr({name:"graphicalItems",initialState:tee,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Cn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,a=Xa(t).cartesianItems.indexOf(n);a>-1&&(t.cartesianItems[a]=r)},prepare:Cn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Xa(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Cn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Cn()},removePolarGraphicalItem:{reducer(t,e){var n=Xa(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Cn()}}}),{addCartesianGraphicalItem:nee,replaceCartesianGraphicalItem:ree,removeCartesianGraphicalItem:aee,addPolarGraphicalItem:mie,removePolarGraphicalItem:pie}=lM.actions,iee=lM.reducer;function cM(t){var e=wn(),n=_.useRef(null);return _.useLayoutEffect(()=>{n.current===null?e(nee(t)):n.current!==t&&e(ree({prev:n.current,next:t})),n.current=t},[e,t]),_.useLayoutEffect(()=>()=>{n.current&&(e(aee(n.current)),n.current=null)},[e]),null}var see=["points"];function ZT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ky(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZT(Object(n),!0).forEach(function(r){oee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oee(t,e,n){return(e=lee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lee(t){var e=cee(t,"string");return typeof e=="symbol"?e:e+""}function cee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ff(){return Ff=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ff.apply(null,arguments)}function uee(t,e){if(t==null)return{};var n,r,a=dee(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function dee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fee(t){var{option:e,dotProps:n,className:r}=t;if(_.isValidElement(e))return _.cloneElement(e,n);if(typeof e=="function")return e(n);var a=Ct(r,typeof e!="boolean"?e.className:""),i=n??{},{points:l}=i,u=uee(i,see);return _.createElement(nM,Ff({},u,{className:a}))}function hee(t,e){return t==null?!1:e?!0:t.length===1}function uM(t){var{points:e,dot:n,className:r,dotClassName:a,dataKey:i,baseProps:l,needClip:u,clipPathId:d,zIndex:h=nr.scatter}=t;if(!hee(e,n))return null;var m=iv(n),g=Fz(n),b=e.map((k,C)=>{var N,T,R=Ky(Ky(Ky({r:3},l),g),{},{index:C,cx:(N=k.x)!==null&&N!==void 0?N:void 0,cy:(T=k.y)!==null&&T!==void 0?T:void 0,dataKey:i,value:k.value,payload:k.payload,points:e});return _.createElement(fee,{key:"dot-".concat(C),option:n,dotProps:R,className:a})}),v={};return u&&d!=null&&(v.clipPath="url(#clipPath-".concat(m?"":"dots-").concat(d,")")),_.createElement(Ea,{zIndex:h},_.createElement(ea,Ff({className:r},v),b))}function eA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function tA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eA(Object(n),!0).forEach(function(r){mee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mee(t,e,n){return(e=pee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pee(t){var e=gee(t,"string");return typeof e=="symbol"?e:e+""}function gee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yee={xAxis:{},yAxis:{},zAxis:{}},dM=yr({name:"cartesianAxis",initialState:yee,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Cn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Cn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Cn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Cn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Cn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Cn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,a=t.yAxis[n];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&r===i[1]&&r!==a.width&&Math.abs(r-i[0])<=1)return;var l=[...i,r].slice(-3);t.yAxis[n]=tA(tA({},t.yAxis[n]),{},{width:r,widthHistory:l})}}}}),{addXAxis:bee,removeXAxis:xee,addYAxis:vee,removeYAxis:wee,addZAxis:gie,removeZAxis:yie,updateYAxisWidth:See}=dM.actions,_ee=dM.reducer,kee=ue([Wn],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Nee=ue([kee,ci,ui],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),Hh=()=>$e(Nee),Cee=()=>$e(gX);function nA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Yy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nA(Object(n),!0).forEach(function(r){Eee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eee(t,e,n){return(e=Tee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tee(t){var e=Aee(t,"string");return typeof e=="symbol"?e:e+""}function Aee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jee=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:a,dataKey:i}=t;if(a===!1||e.x==null||e.y==null)return null;var l={index:n,dataKey:i,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},u=Yy(Yy(Yy({},l),ih(a)),Hb(a)),d;return _.isValidElement(a)?d=_.cloneElement(a,u):typeof a=="function"?d=a(u):d=_.createElement(nM,u),_.createElement(ea,{className:"recharts-active-dot"},d)};function db(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:a,zIndex:i=nr.activeDot}=t,l=$e(Vc),u=Cee();if(e==null||u==null)return null;var d=e.find(h=>u.includes(h.payload));return En(d)?null:_.createElement(Ea,{zIndex:i},_.createElement(jee,{point:d,childIndex:Number(l),mainColor:n,dataKey:a,activeDot:r}))}var Pee={},fM=yr({name:"errorBars",initialState:Pee,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:a}=e.payload;t[n]&&(t[n]=t[n].map(i=>i.dataKey===r.dataKey&&i.direction===r.direction?a:i))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(a=>a.dataKey!==r.dataKey||a.direction!==r.direction))}}}),{addErrorBar:bie,replaceErrorBar:xie,removeErrorBar:vie}=fM.actions,Iee=fM.reducer,Ree=["children"];function Mee(t,e){if(t==null)return{};var n,r,a=Dee(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Dee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Oee={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Lee=_.createContext(Oee);function Uee(t){var{children:e}=t,n=Mee(t,Ree);return _.createElement(Lee.Provider,{value:n},e)}function sv(t,e){var n,r,a=$e(h=>fi(h,t)),i=$e(h=>hi(h,e)),l=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:Cr.allowDataOverflow,u=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:Er.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function hM(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,a=Hh(),{needClipX:i,needClipY:l,needClip:u}=sv(e,n);if(!u||!a)return null;var{x:d,y:h,width:m,height:g}=a;return _.createElement("clipPath",{id:"clipPath-".concat(r)},_.createElement("rect",{x:i?d:d-m/2,y:l?h:h-g/2,width:i?m:m*2,height:l?g:g*2}))}var Bee=t=>{var{chartData:e}=t,n=wn(),r=ar();return _.useEffect(()=>r?()=>{}:(n(NT(e)),()=>{n(NT(void 0))}),[e,n,r]),null},rA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},mM=yr({name:"brush",initialState:rA,reducers:{setBrushSettings(t,e){return e.payload==null?rA:e.payload}}}),{setBrushSettings:wie}=mM.actions,$ee=mM.reducer;function qee(t,e,n){return(e=zee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zee(t){var e=Gee(t,"string");return typeof e=="symbol"?e:e+""}function Gee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ov{static create(e){return new ov(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}default:return this.scale(e)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+l}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],a=n[n.length-1];return r<=a?e>=r&&e<=a:e>=a&&e<=r}}qee(ov,"EPS",1e-4);function Fee(t){return(t%180+180)%180}var Hee=function(e){var{width:n,height:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Fee(a),l=i*Math.PI/180,u=Math.atan(r/n),d=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(d)},Vee={dots:[],areas:[],lines:[]},pM=yr({name:"referenceElements",initialState:Vee,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Xa(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Xa(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Xa(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Sie,removeDot:_ie,addArea:kie,removeArea:Nie,addLine:Cie,removeLine:Eie}=pM.actions,Wee=pM.reducer,Kee=_.createContext(void 0),Yee=t=>{var{children:e}=t,[n]=_.useState("".concat(Oc("recharts"),"-clip")),r=Hh();if(r==null)return null;var{x:a,y:i,width:l,height:u}=r;return _.createElement(Kee.Provider,{value:n},_.createElement("defs",null,_.createElement("clipPath",{id:n},_.createElement("rect",{x:a,y:i,height:u,width:l}))),e)};function ol(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function gM(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e)n.push(t[r]);return n}function Jee(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Hee(r,n)}function Xee(t,e,n){var r=n==="width",{x:a,y:i,width:l,height:u}=t;return e===1?{start:r?a:i,end:r?a+l:i+u}:{start:r?a+l:i+u,end:r?a:i}}function Hf(t,e,n,r,a){if(t*e<t*r||t*e>t*a)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-a)<=0}function Qee(t,e){return gM(t,e+1)}function Zee(t,e,n,r,a){for(var i=(r||[]).slice(),{start:l,end:u}=e,d=0,h=1,m=l,g=function(){var k=r==null?void 0:r[d];if(k===void 0)return{v:gM(r,h)};var C=d,N,T=()=>(N===void 0&&(N=n(k,C)),N),R=k.coordinate,E=d===0||Hf(t,R,T,m,u);E||(d=0,m=l,h+=1),E&&(m=R+t*(T()/2+a),d+=h)},b;h<=i.length;)if(b=g(),b)return b.v;return[]}function aA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aA(Object(n),!0).forEach(function(r){ete(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ete(t,e,n){return(e=tte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tte(t){var e=nte(t,"string");return typeof e=="symbol"?e:e+""}function nte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rte(t,e,n,r,a){for(var i=(r||[]).slice(),l=i.length,{start:u}=e,{end:d}=e,h=function(b){var v=i[b],k,C=()=>(k===void 0&&(k=n(v,b)),k);if(b===l-1){var N=t*(v.coordinate+t*C()/2-d);i[b]=v=Zn(Zn({},v),{},{tickCoord:N>0?v.coordinate-N*t:v.coordinate})}else i[b]=v=Zn(Zn({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var T=Hf(t,v.tickCoord,C,u,d);T&&(d=v.tickCoord-t*(C()/2+a),i[b]=Zn(Zn({},v),{},{isShow:!0}))}},m=l-1;m>=0;m--)h(m);return i}function ate(t,e,n,r,a,i){var l=(r||[]).slice(),u=l.length,{start:d,end:h}=e;if(i){var m=r[u-1],g=n(m,u-1),b=t*(m.coordinate+t*g/2-h);if(l[u-1]=m=Zn(Zn({},m),{},{tickCoord:b>0?m.coordinate-b*t:m.coordinate}),m.tickCoord!=null){var v=Hf(t,m.tickCoord,()=>g,d,h);v&&(h=m.tickCoord-t*(g/2+a),l[u-1]=Zn(Zn({},m),{},{isShow:!0}))}}for(var k=i?u-1:u,C=function(R){var E=l[R],P,j=()=>(P===void 0&&(P=n(E,R)),P);if(R===0){var I=t*(E.coordinate-t*j()/2-d);l[R]=E=Zn(Zn({},E),{},{tickCoord:I<0?E.coordinate-I*t:E.coordinate})}else l[R]=E=Zn(Zn({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var D=Hf(t,E.tickCoord,j,d,h);D&&(d=E.tickCoord+t*(j()/2+a),l[R]=Zn(Zn({},E),{},{isShow:!0}))}},N=0;N<k;N++)C(N);return l}function lv(t,e,n){var{tick:r,ticks:a,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:h,unit:m,angle:g}=t;if(!a||!a.length||!r)return[];if(De(d)||zs.isSsr){var b;return(b=Qee(a,De(d)?d:0))!==null&&b!==void 0?b:[]}var v=[],k=u==="top"||u==="bottom"?"width":"height",C=m&&k==="width"?Ic(m,{fontSize:e,letterSpacing:n}):{width:0,height:0},N=(E,P)=>{var j=typeof h=="function"?h(E.value,P):E.value;return k==="width"?Jee(Ic(j,{fontSize:e,letterSpacing:n}),C,g):Ic(j,{fontSize:e,letterSpacing:n})[k]},T=a.length>=2?Jr(a[1].coordinate-a[0].coordinate):1,R=Xee(i,T,k);return d==="equidistantPreserveStart"?Zee(T,R,N,a,l):(d==="preserveStart"||d==="preserveStartEnd"?v=ate(T,R,N,a,l,d==="preserveStartEnd"):v=rte(T,R,N,a,l),v.filter(E=>E.isShow))}var ite=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:a=0,tickMargin:i=0}=t,l=0;if(e){Array.from(e).forEach(m=>{if(m){var g=m.getBoundingClientRect();g.width>l&&(l=g.width)}});var u=n?n.getBoundingClientRect().width:0,d=a+i,h=l+d+u+(n?r:0);return Math.round(h)}return 0},ste=["axisLine","width","height","className","hide","ticks","axisType"],ote=["viewBox"],lte=["viewBox"];function fb(t,e){if(t==null)return{};var n,r,a=cte(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function cte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Us(){return Us=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Us.apply(null,arguments)}function iA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iA(Object(n),!0).forEach(function(r){ute(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ute(t,e,n){return(e=dte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dte(t){var e=fte(t,"string");return typeof e=="symbol"?e:e+""}function fte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cv={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:nr.axis};function hte(t){var{x:e,y:n,width:r,height:a,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=t;if(!u)return null;var h=bn(bn(bn({},d),Zr(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var m=+(i==="top"&&!l||i==="bottom"&&l);h=bn(bn({},h),{},{x1:e,y1:n+m*a,x2:e+r,y2:n+m*a})}else{var g=+(i==="left"&&!l||i==="right"&&l);h=bn(bn({},h),{},{x1:e+g*r,y1:n,x2:e+g*r,y2:n+a})}return _.createElement("line",Us({},h,{className:Ct("recharts-cartesian-axis-line",ch(u,"className"))}))}function mte(t,e,n,r,a,i,l,u,d){var h,m,g,b,v,k,C=u?-1:1,N=t.tickSize||l,T=De(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":h=m=t.coordinate,b=n+ +!u*a,g=b-C*N,k=g-C*d,v=T;break;case"left":g=b=t.coordinate,m=e+ +!u*r,h=m-C*N,v=h-C*d,k=T;break;case"right":g=b=t.coordinate,m=e+ +u*r,h=m+C*N,v=h+C*d,k=T;break;default:h=m=t.coordinate,b=n+ +u*a,g=b+C*N,k=g+C*d,v=T;break}return{line:{x1:h,y1:g,x2:m,y2:b},tick:{x:v,y:k}}}function pte(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function gte(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function yte(t){var{option:e,tickProps:n,value:r}=t,a,i=Ct(n.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(e))a=_.cloneElement(e,bn(bn({},n),{},{className:i}));else if(typeof e=="function")a=e(bn(bn({},n),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(l=Ct(l,e==null?void 0:e.className)),a=_.createElement(rv,Us({},n,{className:l}),r)}return a}var bte=_.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:a,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:h,orientation:m,mirror:g,x:b,y:v,width:k,height:C,tickSize:N,tickMargin:T,fontSize:R,letterSpacing:E,getTicksConfig:P,events:j,axisType:I}=t,D=lv(bn(bn({},P),{},{ticks:n}),R,E),$=pte(m,g),H=gte(m,g),z=Zr(P),F=ih(r),V={};typeof a=="object"&&(V=a);var K=bn(bn({},z),{},{fill:"none"},V),pe=D.map(B=>bn({entry:B},mte(B,b,v,k,C,m,N,g,T))),Y=pe.map(B=>{var{entry:ae,line:X}=B;return _.createElement(ea,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},a&&_.createElement("line",Us({},K,X,{className:Ct("recharts-cartesian-axis-tick-line",ch(a,"className"))})))}),q=pe.map((B,ae)=>{var{entry:X,tick:ve}=B,L=bn(bn(bn(bn({textAnchor:$,verticalAnchor:H},z),{},{stroke:"none",fill:i},F),ve),{},{index:ae,payload:X,visibleTicksCount:D.length,tickFormatter:l,padding:d},h);return _.createElement(ea,Us({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},v2(j,X,ae)),r&&_.createElement(yte,{option:r,tickProps:L,value:"".concat(typeof l=="function"?l(X.value,ae):X.value).concat(u||"")}))});return _.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},q.length>0&&_.createElement(Ea,{zIndex:nr.label},_.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},q)),Y.length>0&&_.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},Y))}),xte=_.forwardRef((t,e)=>{var{axisLine:n,width:r,height:a,className:i,hide:l,ticks:u,axisType:d}=t,h=fb(t,ste),[m,g]=_.useState(""),[b,v]=_.useState(""),k=_.useRef(null);_.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var N;return ite({ticks:k.current,label:(N=t.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var C=_.useCallback(N=>{if(N){var T=N.getElementsByClassName("recharts-cartesian-axis-tick-value");k.current=T;var R=T[0];if(R){var E=window.getComputedStyle(R),P=E.fontSize,j=E.letterSpacing;(P!==m||j!==b)&&(g(P),v(j))}}},[m,b]);return l||r!=null&&r<=0||a!=null&&a<=0?null:_.createElement(Ea,{zIndex:t.zIndex},_.createElement(ea,{className:Ct("recharts-cartesian-axis",i)},_.createElement(hte,{x:t.x,y:t.y,width:r,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Zr(t)}),_.createElement(bte,{ref:C,axisType:d,events:h,fontSize:m,getTicksConfig:t,height:t.height,letterSpacing:b,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:u,unit:t.unit,width:t.width,x:t.x,y:t.y}),_.createElement(lZ,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},_.createElement(bZ,{label:t.label,labelRef:t.labelRef}),t.children)))}),vte=_.memo(xte,(t,e)=>{var{viewBox:n}=t,r=fb(t,ote),{viewBox:a}=e,i=fb(e,lte);return ol(n,a)&&ol(r,i)}),uv=_.forwardRef((t,e)=>{var n=Dn(t,cv);return _.createElement(vte,Us({},n,{ref:e}))});uv.displayName="CartesianAxis";var wte=["x1","y1","x2","y2","key"],Ste=["offset"],_te=["xAxisId","yAxisId"],kte=["xAxisId","yAxisId"];function sA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sA(Object(n),!0).forEach(function(r){Nte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nte(t,e,n){return(e=Cte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cte(t){var e=Ete(t,"string");return typeof e=="symbol"?e:e+""}function Ete(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Es(){return Es=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Es.apply(null,arguments)}function Vf(t,e){if(t==null)return{};var n,r,a=Tte(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Tte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ate=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:a,width:i,height:l,ry:u}=t;return _.createElement("rect",{x:r,y:a,ry:u,width:i,height:l,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function yM(t){var{option:e,lineItemProps:n}=t,r;if(_.isValidElement(e))r=_.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var a,{x1:i,y1:l,x2:u,y2:d,key:h}=n,m=Vf(n,wte),g=(a=Zr(m))!==null&&a!==void 0?a:{},{offset:b}=g,v=Vf(g,Ste);r=_.createElement("line",Es({},v,{x1:i,y1:l,x2:u,y2:d,fill:"none",key:h}))}return r}function jte(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:a}=t;if(!r||!a||!a.length)return null;var{xAxisId:i,yAxisId:l}=t,u=Vf(t,_te),d=a.map((h,m)=>{var g=er(er({},u),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(m),index:m});return _.createElement(yM,{key:"line-".concat(m),option:r,lineItemProps:g})});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function Pte(t){var{y:e,height:n,vertical:r=!0,verticalPoints:a}=t;if(!r||!a||!a.length)return null;var{xAxisId:i,yAxisId:l}=t,u=Vf(t,kte),d=a.map((h,m)=>{var g=er(er({},u),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(m),index:m});return _.createElement(yM,{option:r,lineItemProps:g,key:"line-".concat(m)})});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function Ite(t){var{horizontalFill:e,fillOpacity:n,x:r,y:a,width:i,height:l,horizontalPoints:u,horizontal:d=!0}=t;if(!d||!e||!e.length||u==null)return null;var h=u.map(g=>Math.round(g+a-a)).sort((g,b)=>g-b);a!==h[0]&&h.unshift(0);var m=h.map((g,b)=>{var v=!h[b+1],k=v?a+l-g:h[b+1]-g;if(k<=0)return null;var C=b%e.length;return _.createElement("rect",{key:"react-".concat(b),y:g,x:r,height:k,width:i,stroke:"none",fill:e[C],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Rte(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:a,y:i,width:l,height:u,verticalPoints:d}=t;if(!e||!n||!n.length)return null;var h=d.map(g=>Math.round(g+a-a)).sort((g,b)=>g-b);a!==h[0]&&h.unshift(0);var m=h.map((g,b)=>{var v=!h[b+1],k=v?a+l-g:h[b+1]-g;if(k<=0)return null;var C=b%n.length;return _.createElement("rect",{key:"react-".concat(b),x:g,y:i,width:k,height:u,stroke:"none",fill:n[C],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Mte=(t,e)=>{var{xAxis:n,width:r,height:a,offset:i}=t;return cP(lv(er(er(er({},cv),n),{},{ticks:uP(n),viewBox:{x:0,y:0,width:r,height:a}})),i.left,i.left+i.width,e)},Dte=(t,e)=>{var{yAxis:n,width:r,height:a,offset:i}=t;return cP(lv(er(er(er({},cv),n),{},{ticks:uP(n),viewBox:{x:0,y:0,width:r,height:a}})),i.top,i.top+i.height,e)},Ote={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:nr.grid};function Vh(t){var e=tx(),n=nx(),r=yP(),a=er(er({},Dn(t,Ote)),{},{x:De(t.x)?t.x:r.left,y:De(t.y)?t.y:r.top,width:De(t.width)?t.width:r.width,height:De(t.height)?t.height:r.height}),{xAxisId:i,yAxisId:l,x:u,y:d,width:h,height:m,syncWithTicks:g,horizontalValues:b,verticalValues:v}=a,k=ar(),C=$e(H=>hT(H,"xAxis",i,k)),N=$e(H=>hT(H,"yAxis",l,k));if(!ka(h)||!ka(m)||!De(u)||!De(d))return null;var T=a.verticalCoordinatesGenerator||Mte,R=a.horizontalCoordinatesGenerator||Dte,{horizontalPoints:E,verticalPoints:P}=a;if((!E||!E.length)&&typeof R=="function"){var j=b&&b.length,I=R({yAxis:N?er(er({},N),{},{ticks:j?b:N.ticks}):void 0,width:e??h,height:n??m,offset:r},j?!0:g);Sf(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(E=I)}if((!P||!P.length)&&typeof T=="function"){var D=v&&v.length,$=T({xAxis:C?er(er({},C),{},{ticks:D?v:C.ticks}):void 0,width:e??h,height:n??m,offset:r},D?!0:g);Sf(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(P=$)}return _.createElement(Ea,{zIndex:a.zIndex},_.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(Ate,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),_.createElement(Ite,Es({},a,{horizontalPoints:E})),_.createElement(Rte,Es({},a,{verticalPoints:P})),_.createElement(jte,Es({},a,{offset:r,horizontalPoints:E,xAxis:C,yAxis:N})),_.createElement(Pte,Es({},a,{offset:r,verticalPoints:P,xAxis:C,yAxis:N}))))}Vh.displayName="CartesianGrid";var bM=(t,e,n,r)=>Gh(t,"xAxis",e,r),xM=(t,e,n,r)=>zh(t,"xAxis",e,r),vM=(t,e,n,r)=>Gh(t,"yAxis",n,r),wM=(t,e,n,r)=>zh(t,"yAxis",n,r),Lte=ue([It,bM,vM,xM,wM],(t,e,n,r,a)=>Ca(t,"xAxis")?nl(e,r,!1):nl(n,a,!1)),Ute=(t,e,n,r,a)=>a;function Bte(t){return t.type==="line"}var $te=ue([Ux,Ute],(t,e)=>t.filter(Bte).find(n=>n.id===e)),qte=ue([It,bM,vM,xM,wM,$te,Lte,Ph],(t,e,n,r,a,i,l,u)=>{var{chartData:d,dataStartIndex:h,dataEndIndex:m}=u;if(!(i==null||e==null||n==null||r==null||a==null||r.length===0||a.length===0||l==null)){var{dataKey:g,data:b}=i,v;if(b!=null&&b.length>0?v=b:v=d==null?void 0:d.slice(h,m+1),v!=null)return one({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataKey:g,bandSize:l,displayedData:v})}});function SM(t){var e=ih(t),n=3,r=2;if(e!=null){var{r:a,strokeWidth:i}=e,l=Number(a),u=Number(i);return(Number.isNaN(l)||l<0)&&(l=n),(Number.isNaN(u)||u<0)&&(u=r),{r:l,strokeWidth:u}}return{r:n,strokeWidth:r}}var zte=["id"],Gte=["type","layout","connectNulls","needClip","shape"],Fte=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Kc(){return Kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kc.apply(null,arguments)}function oA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function va(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oA(Object(n),!0).forEach(function(r){Hte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hte(t,e,n){return(e=Vte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vte(t){var e=Wte(t,"string");return typeof e=="symbol"?e:e+""}function Wte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dv(t,e){if(t==null)return{};var n,r,a=Kte(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Kte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Yte=t=>{var{dataKey:e,name:n,stroke:r,legendType:a,hide:i}=t;return[{inactive:i,dataKey:e,type:a,color:r,value:gh(n,e),payload:t}]};function Jte(t){var{dataKey:e,data:n,stroke:r,strokeWidth:a,fill:i,name:l,hide:u,unit:d}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:i,dataKey:e,nameKey:void 0,name:gh(l,e),hide:u,type:t.tooltipType,color:t.stroke,unit:d}}}var _M=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Xte(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],a=0;a<e;++a)r=[...r,...n];return r}var Qte=(t,e,n)=>{var r=n.reduce((g,b)=>g+b);if(!r)return _M(e,t);for(var a=Math.floor(t/r),i=t%r,l=e-t,u=[],d=0,h=0;d<n.length;h+=n[d],++d)if(h+n[d]>i){u=[...n.slice(0,d),i-h];break}var m=u.length%2===0?[0,l]:[l];return[...Xte(n,a),...u,...m].map(g=>"".concat(g,"px")).join(", ")};function Zte(t){var{clipPathId:e,points:n,props:r}=t,{dot:a,dataKey:i,needClip:l}=r,{id:u}=r,d=dv(r,zte),h=Zr(d);return _.createElement(uM,{points:n,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:h,needClip:l,clipPathId:e})}function ene(t){var{showLabels:e,children:n,points:r}=t,a=_.useMemo(()=>r==null?void 0:r.map(i=>{var l,u,d={x:(l=i.x)!==null&&l!==void 0?l:0,y:(u=i.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return va(va({},d),{},{value:i.value,payload:i.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[r]);return _.createElement(ZR,{value:e?a:void 0},n)}function lA(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:a,props:i}=t,{type:l,layout:u,connectNulls:d,needClip:h,shape:m}=i,g=dv(i,Gte),b=va(va({},rr(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(e,")"):void 0,points:r,type:l,layout:u,connectNulls:d,strokeDasharray:a??i.strokeDasharray});return _.createElement(_.Fragment,null,(r==null?void 0:r.length)>1&&_.createElement(XZ,Kc({shapeType:"curve",option:m},b,{pathRef:n})),_.createElement(Zte,{points:r,clipPathId:e,props:i}))}function tne(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function nne(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:a,longestAnimatedLengthRef:i}=t,{points:l,strokeDasharray:u,isAnimationActive:d,animationBegin:h,animationDuration:m,animationEasing:g,animateNewValues:b,width:v,height:k,onAnimationEnd:C,onAnimationStart:N}=n,T=a.current,R=kh(n,"recharts-line-"),[E,P]=_.useState(!1),j=!E,I=_.useCallback(()=>{typeof C=="function"&&C(),P(!1)},[C]),D=_.useCallback(()=>{typeof N=="function"&&N(),P(!0)},[N]),$=tne(r.current),H=i.current;return _.createElement(ene,{points:l,showLabels:j},n.children,_.createElement(_h,{animationId:R,begin:h,duration:m,isActive:d,easing:g,onAnimationEnd:I,onAnimationStart:D,key:R},z=>{var F=xn(H,$+H,z),V=Math.min(F,$),K;if(d)if(u){var pe="".concat(u).split(/[,\s]+/gim).map(B=>parseFloat(B));K=Qte(V,$,pe)}else K=_M($,V);else K=u==null?void 0:String(u);if(T){var Y=T.length/l.length,q=z===1?l:l.map((B,ae)=>{var X=Math.floor(ae*Y);if(T[X]){var ve=T[X];return va(va({},B),{},{x:xn(ve.x,B.x,z),y:xn(ve.y,B.y,z)})}return b?va(va({},B),{},{x:xn(v*2,B.x,z),y:xn(k/2,B.y,z)}):va(va({},B),{},{x:B.x,y:B.y})});return a.current=q,_.createElement(lA,{props:n,points:q,clipPathId:e,pathRef:r,strokeDasharray:K})}return z>0&&$>0&&(a.current=l,i.current=V),_.createElement(lA,{props:n,points:l,clipPathId:e,pathRef:r,strokeDasharray:K})}),_.createElement(tM,{label:n.label}))}function rne(t){var{clipPathId:e,props:n}=t,r=_.useRef(null),a=_.useRef(0),i=_.useRef(null);return _.createElement(nne,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:a,pathRef:i})}var ane=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Vn(t.payload,e)}};class ine extends _.Component{render(){var{hide:e,dot:n,points:r,className:a,xAxisId:i,yAxisId:l,top:u,left:d,width:h,height:m,id:g,needClip:b,zIndex:v}=this.props;if(e)return null;var k=Ct("recharts-line",a),C=g,{r:N,strokeWidth:T}=SM(n),R=iv(n),E=N*2+T;return _.createElement(Ea,{zIndex:v},_.createElement(ea,{className:k},b&&_.createElement("defs",null,_.createElement(hM,{clipPathId:C,xAxisId:i,yAxisId:l}),!R&&_.createElement("clipPath",{id:"clipPath-dots-".concat(C)},_.createElement("rect",{x:d-E/2,y:u-E/2,width:h+E,height:m+E}))),_.createElement(Uee,{xAxisId:i,yAxisId:l,data:r,dataPointFormatter:ane,errorBarOffset:0},_.createElement(rne,{props:this.props,clipPathId:C}))),_.createElement(db,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var kM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!zs.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:nr.line};function sne(t){var e=Dn(t,kM),{activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:i,animationEasing:l,connectNulls:u,dot:d,hide:h,isAnimationActive:m,label:g,legendType:b,xAxisId:v,yAxisId:k,id:C}=e,N=dv(e,Fte),{needClip:T}=sv(v,k),R=Hh(),E=tu(),P=ar(),j=$e(z=>qte(z,v,k,P,C));if(E!=="horizontal"&&E!=="vertical"||j==null||R==null)return null;var{height:I,width:D,x:$,y:H}=R;return _.createElement(ine,Kc({},N,{id:C,connectNulls:u,dot:d,activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:i,animationEasing:l,isAnimationActive:m,hide:h,label:g,legendType:b,xAxisId:v,yAxisId:k,points:j,layout:E,height:I,width:D,left:$,top:H,needClip:T}))}function one(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:i,dataKey:l,bandSize:u,displayedData:d}=t;return d.map((h,m)=>{var g=Vn(h,l);if(e==="horizontal"){var b=wf({axis:n,ticks:a,bandSize:u,entry:h,index:m}),v=En(g)?null:r.scale(g);return{x:b,y:v,value:g,payload:h}}var k=En(g)?null:n.scale(g),C=wf({axis:r,ticks:i,bandSize:u,entry:h,index:m});return k==null||C==null?null:{x:k,y:C,value:g,payload:h}}).filter(Boolean)}function lne(t){var e=Dn(t,kM),n=ar();return _.createElement(oM,{id:e.id,type:"line"},r=>_.createElement(_.Fragment,null,_.createElement(iM,{legendPayload:Yte(e)}),_.createElement(aM,{fn:Jte,args:e}),_.createElement(cM,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),_.createElement(sne,Kc({},e,{id:r}))))}var Fn=_.memo(lne);Fn.displayName="Line";var NM=(t,e,n,r)=>Gh(t,"xAxis",e,r),CM=(t,e,n,r)=>zh(t,"xAxis",e,r),EM=(t,e,n,r)=>Gh(t,"yAxis",n,r),TM=(t,e,n,r)=>zh(t,"yAxis",n,r),cne=ue([It,NM,EM,CM,TM],(t,e,n,r,a)=>Ca(t,"xAxis")?nl(e,r,!1):nl(n,a,!1)),une=(t,e,n,r,a)=>a,AM=ue([Ux,une],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),dne=(t,e,n,r,a)=>{var i,l=AM(t,e,n,r,a);if(l!=null){var u=It(t),d=Ca(u,"xAxis"),h;if(d?h=rb(t,"yAxis",n,r):h=rb(t,"xAxis",e,r),h!=null){var{stackId:m}=l,g=Dx(l);if(!(m==null||g==null)){var b=(i=h[m])===null||i===void 0?void 0:i.stackedData;return b==null?void 0:b.find(v=>v.key===g)}}}},fne=ue([It,NM,EM,CM,TM,dne,Ph,cne,AM,yY],(t,e,n,r,a,i,l,u,d,h)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:b}=l;if(!(d==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||a==null||r.length===0||a.length===0||u==null)){var{data:v}=d,k;if(v&&v.length>0?k=v:k=m==null?void 0:m.slice(g,b+1),k!=null)return Pne({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataStartIndex:g,areaSettings:d,stackedData:i,displayedData:k,chartBaseValue:h,bandSize:u})}}),hne=["id"],mne=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Is(){return Is=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Is.apply(null,arguments)}function jM(t,e){if(t==null)return{};var n,r,a=pne(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function pne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Vo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cA(Object(n),!0).forEach(function(r){gne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gne(t,e,n){return(e=yne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yne(t){var e=bne(t,"string");return typeof e=="symbol"?e:e+""}function bne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wf(t,e){return t&&t!=="none"?t:e}var xne=t=>{var{dataKey:e,name:n,stroke:r,fill:a,legendType:i,hide:l}=t;return[{inactive:l,dataKey:e,type:i,color:Wf(r,a),value:gh(n,e),payload:t}]};function vne(t){var{dataKey:e,data:n,stroke:r,strokeWidth:a,fill:i,name:l,hide:u,unit:d}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:i,dataKey:e,nameKey:void 0,name:gh(l,e),hide:u,type:t.tooltipType,color:Wf(r,i),unit:d}}}function wne(t){var{clipPathId:e,points:n,props:r}=t,{needClip:a,dot:i,dataKey:l}=r,u=Zr(r);return _.createElement(uM,{points:n,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:l,baseProps:u,needClip:a,clipPathId:e})}function Sne(t){var{showLabels:e,children:n,points:r}=t,a=r.map(i=>{var l,u,d={x:(l=i.x)!==null&&l!==void 0?l:0,y:(u=i.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Vo(Vo({},d),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:d,fill:void 0})});return _.createElement(ZR,{value:e?a:void 0},n)}function uA(t){var{points:e,baseLine:n,needClip:r,clipPathId:a,props:i}=t,{layout:l,type:u,stroke:d,connectNulls:h,isRange:m}=i,{id:g}=i,b=jM(i,hne),v=Zr(b),k=rr(b);return _.createElement(_.Fragment,null,(e==null?void 0:e.length)>1&&_.createElement(ea,{clipPath:r?"url(#clipPath-".concat(a,")"):void 0},_.createElement(Pc,Is({},k,{id:g,points:e,connectNulls:h,type:u,baseLine:n,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&_.createElement(Pc,Is({},v,{className:"recharts-area-curve",layout:l,type:u,connectNulls:h,fill:"none",points:e})),d!=="none"&&m&&_.createElement(Pc,Is({},v,{className:"recharts-area-curve",layout:l,type:u,connectNulls:h,fill:"none",points:n}))),_.createElement(wne,{points:e,props:b,clipPathId:a}))}function _ne(t){var{alpha:e,baseLine:n,points:r,strokeWidth:a}=t,i=r[0].y,l=r[r.length-1].y;if(!nn(i)||!nn(l))return null;var u=e*Math.abs(i-l),d=Math.max(...r.map(h=>h.x||0));return De(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(h=>h.x||0),d)),De(d)?_.createElement("rect",{x:0,y:i<l?i:i-u,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(u)}):null}function kne(t){var{alpha:e,baseLine:n,points:r,strokeWidth:a}=t,i=r[0].x,l=r[r.length-1].x;if(!nn(i)||!nn(l))return null;var u=e*Math.abs(i-l),d=Math.max(...r.map(h=>h.y||0));return De(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(h=>h.y||0),d)),De(d)?_.createElement("rect",{x:i<l?i:i-u,y:0,width:u,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}function Nne(t){var{alpha:e,layout:n,points:r,baseLine:a,strokeWidth:i}=t;return n==="vertical"?_.createElement(_ne,{alpha:e,points:r,baseLine:a,strokeWidth:i}):_.createElement(kne,{alpha:e,points:r,baseLine:a,strokeWidth:i})}function Cne(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:i}=t,{points:l,baseLine:u,isAnimationActive:d,animationBegin:h,animationDuration:m,animationEasing:g,onAnimationStart:b,onAnimationEnd:v}=r,k=kh(r,"recharts-area-"),[C,N]=_.useState(!1),T=!C,R=_.useCallback(()=>{typeof v=="function"&&v(),N(!1)},[v]),E=_.useCallback(()=>{typeof b=="function"&&b(),N(!0)},[b]),P=a.current,j=i.current;return _.createElement(Sne,{showLabels:T,points:l},r.children,_.createElement(_h,{animationId:k,begin:h,duration:m,isActive:d,easing:g,onAnimationEnd:R,onAnimationStart:E,key:k},I=>{if(P){var D=P.length/l.length,$=I===1?l:l.map((z,F)=>{var V=Math.floor(F*D);if(P[V]){var K=P[V];return Vo(Vo({},z),{},{x:xn(K.x,z.x,I),y:xn(K.y,z.y,I)})}return z}),H;return De(u)?H=xn(j,u,I):En(u)||da(u)?H=xn(j,0,I):H=u.map((z,F)=>{var V=Math.floor(F*D);if(Array.isArray(j)&&j[V]){var K=j[V];return Vo(Vo({},z),{},{x:xn(K.x,z.x,I),y:xn(K.y,z.y,I)})}return z}),I>0&&(a.current=$,i.current=H),_.createElement(uA,{points:$,baseLine:H,needClip:e,clipPathId:n,props:r})}return I>0&&(a.current=l,i.current=u),_.createElement(ea,null,d&&_.createElement("defs",null,_.createElement("clipPath",{id:"animationClipPath-".concat(n)},_.createElement(Nne,{alpha:I,points:l,baseLine:u,layout:r.layout,strokeWidth:r.strokeWidth}))),_.createElement(ea,{clipPath:"url(#animationClipPath-".concat(n,")")},_.createElement(uA,{points:l,baseLine:u,needClip:e,clipPathId:n,props:r})))}),_.createElement(tM,{label:r.label}))}function Ene(t){var{needClip:e,clipPathId:n,props:r}=t,a=_.useRef(null),i=_.useRef();return _.createElement(Cne,{needClip:e,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:i})}class Tne extends _.PureComponent{render(){var{hide:e,dot:n,points:r,className:a,top:i,left:l,needClip:u,xAxisId:d,yAxisId:h,width:m,height:g,id:b,baseLine:v,zIndex:k}=this.props;if(e)return null;var C=Ct("recharts-area",a),N=b,{r:T,strokeWidth:R}=SM(n),E=iv(n),P=T*2+R;return _.createElement(Ea,{zIndex:k},_.createElement(ea,{className:C},u&&_.createElement("defs",null,_.createElement(hM,{clipPathId:N,xAxisId:d,yAxisId:h}),!E&&_.createElement("clipPath",{id:"clipPath-dots-".concat(N)},_.createElement("rect",{x:l-P/2,y:i-P/2,width:m+P,height:g+P}))),_.createElement(Ene,{needClip:u,clipPathId:N,props:this.props})),_.createElement(db,{points:r,mainColor:Wf(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(v)&&_.createElement(db,{points:v,mainColor:Wf(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var PM={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!zs.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:nr.area};function Ane(t){var e,n=Dn(t,PM),{activeDot:r,animationBegin:a,animationDuration:i,animationEasing:l,connectNulls:u,dot:d,fill:h,fillOpacity:m,hide:g,isAnimationActive:b,legendType:v,stroke:k,xAxisId:C,yAxisId:N}=n,T=jM(n,mne),R=tu(),E=RR(),{needClip:P}=sv(C,N),j=ar(),{points:I,isRange:D,baseLine:$}=(e=$e(pe=>fne(pe,C,N,j,t.id)))!==null&&e!==void 0?e:{},H=Hh();if(R!=="horizontal"&&R!=="vertical"||H==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:z,width:F,x:V,y:K}=H;return!I||!I.length?null:_.createElement(Tne,Is({},T,{activeDot:r,animationBegin:a,animationDuration:i,animationEasing:l,baseLine:$,connectNulls:u,dot:d,fill:h,fillOpacity:m,height:z,hide:g,layout:R,isAnimationActive:b,isRange:D,legendType:v,needClip:P,points:I,stroke:k,width:F,left:V,top:K,xAxisId:C,yAxisId:N}))}var jne=(t,e,n,r,a)=>{var i=n??e;if(De(i))return i;var l=t==="horizontal"?a:r,u=l.scale.domain();if(l.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return i==="dataMin"?h:i==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return i==="dataMin"?u[0]:i==="dataMax"?u[1]:u[0]};function Pne(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:a,layout:i,chartBaseValue:l,xAxis:u,yAxis:d,displayedData:h,dataStartIndex:m,xAxisTicks:g,yAxisTicks:b,bandSize:v}=t,k=a&&a.length,C=jne(i,l,n,u,d),N=i==="horizontal",T=!1,R=h.map((P,j)=>{var I;k?I=a[m+j]:(I=Vn(P,r),Array.isArray(I)?T=!0:I=[C,I]);var D=I[1]==null||k&&!e&&Vn(P,r)==null;return N?{x:wf({axis:u,ticks:g,bandSize:v,entry:P,index:j}),y:D?null:d.scale(I[1]),value:I,payload:P}:{x:D?null:u.scale(I[1]),y:wf({axis:d,ticks:b,bandSize:v,entry:P,index:j}),value:I,payload:P}}),E;return k||T?E=R.map(P=>{var j=Array.isArray(P.value)?P.value[0]:null;return N?{x:P.x,y:j!=null&&P.y!=null?d.scale(j):null,payload:P.payload}:{x:j!=null?u.scale(j):null,y:P.y,payload:P.payload}}):E=N?d.scale(C):u.scale(C),{points:R,baseLine:E,isRange:T}}function Ine(t){var e=Dn(t,PM),n=ar();return _.createElement(oM,{id:e.id,type:"area"},r=>_.createElement(_.Fragment,null,_.createElement(iM,{legendPayload:xne(e)}),_.createElement(aM,{fn:vne,args:e}),_.createElement(cM,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:i7(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),_.createElement(Ane,Is({},e,{id:r}))))}var IM=_.memo(Ine);IM.displayName="Area";var Rne=["dangerouslySetInnerHTML","ticks"],Mne=["id"],Dne=["domain"],One=["domain"];function hb(){return hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hb.apply(null,arguments)}function Kf(t,e){if(t==null)return{};var n,r,a=Lne(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Lne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Une(t){var e=wn();return _.useLayoutEffect(()=>(e(bee(t)),()=>{e(xee(t))}),[t,e]),null}var Bne=t=>{var{xAxisId:e,className:n}=t,r=$e(fP),a=ar(),i="xAxis",l=$e(N=>vl(N,i,e,a)),u=$e(N=>dR(N,i,e,a)),d=$e(N=>cJ(N,e)),h=$e(N=>pJ(N,e)),m=$e(N=>PI(N,e));if(d==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:g,ticks:b}=t,v=Kf(t,Rne),{id:k}=m,C=Kf(m,Mne);return _.createElement(uv,hb({},v,C,{scale:l,x:h.x,y:h.y,width:d.width,height:d.height,className:Ct("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:u,axisType:i}))},$ne={allowDataOverflow:Cr.allowDataOverflow,allowDecimals:Cr.allowDecimals,allowDuplicatedCategory:Cr.allowDuplicatedCategory,height:Cr.height,hide:!1,mirror:Cr.mirror,orientation:Cr.orientation,padding:Cr.padding,reversed:Cr.reversed,scale:Cr.scale,tickCount:Cr.tickCount,type:Cr.type,xAxisId:0},qne=t=>{var e,n,r,a,i,l=Dn(t,$ne);return _.createElement(_.Fragment,null,_.createElement(Une,{interval:(e=l.interval)!==null&&e!==void 0?e:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(a=l.minTickGap)!==null&&a!==void 0?a:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),_.createElement(Bne,l))},zne=(t,e)=>{var{domain:n}=t,r=Kf(t,Dne),{domain:a}=e,i=Kf(e,One);return ol(r,i)?Array.isArray(n)&&n.length===2&&Array.isArray(a)&&a.length===2?n[0]===a[0]&&n[1]===a[1]:ol({domain:n},{domain:a}):!1},Wh=_.memo(qne,zne);Wh.displayName="XAxis";var Gne=["dangerouslySetInnerHTML","ticks"],Fne=["id"],Hne=["domain"],Vne=["domain"];function mb(){return mb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mb.apply(null,arguments)}function Yf(t,e){if(t==null)return{};var n,r,a=Wne(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Wne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Kne(t){var e=wn();return _.useLayoutEffect(()=>(e(vee(t)),()=>{e(wee(t))}),[t,e]),null}var Yne=t=>{var{yAxisId:e,className:n,width:r,label:a}=t,i=_.useRef(null),l=_.useRef(null),u=$e(fP),d=ar(),h=wn(),m="yAxis",g=$e(j=>vl(j,m,e,d)),b=$e(j=>bJ(j,e)),v=$e(j=>yJ(j,e)),k=$e(j=>dR(j,m,e,d)),C=$e(j=>II(j,e));if(_.useLayoutEffect(()=>{if(!(r!=="auto"||!b||av(a)||_.isValidElement(a)||C==null)){var j=i.current;if(j){var I=j.getCalculatedWidth();Math.round(b.width)!==Math.round(I)&&h(See({id:e,width:I}))}}},[k,b,h,a,e,r,C]),b==null||v==null||C==null)return null;var{dangerouslySetInnerHTML:N,ticks:T}=t,R=Yf(t,Gne),{id:E}=C,P=Yf(C,Fne);return _.createElement(uv,mb({},R,P,{ref:i,labelRef:l,scale:g,x:v.x,y:v.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:b.width,height:b.height,className:Ct("recharts-".concat(m," ").concat(m),n),viewBox:u,ticks:k,axisType:m}))},Jne={allowDataOverflow:Er.allowDataOverflow,allowDecimals:Er.allowDecimals,allowDuplicatedCategory:Er.allowDuplicatedCategory,hide:!1,mirror:Er.mirror,orientation:Er.orientation,padding:Er.padding,reversed:Er.reversed,scale:Er.scale,tickCount:Er.tickCount,type:Er.type,width:Er.width,yAxisId:0},Xne=t=>{var e,n,r,a,i,l=Dn(t,Jne);return _.createElement(_.Fragment,null,_.createElement(Kne,{interval:(e=l.interval)!==null&&e!==void 0?e:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(a=l.minTickGap)!==null&&a!==void 0?a:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),_.createElement(Yne,l))},Qne=(t,e)=>{var{domain:n}=t,r=Yf(t,Hne),{domain:a}=e,i=Yf(e,Vne);return ol(r,i)?Array.isArray(n)&&n.length===2&&Array.isArray(a)&&a.length===2?n[0]===a[0]&&n[1]===a[1]:ol({domain:n},{domain:a}):!1},Bs=_.memo(Xne,Qne);Bs.displayName="YAxis";var Jy={exports:{}},Xy={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA;function Zne(){if(dA)return Xy;dA=1;var t=ll();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,a=t.useRef,i=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Xy.useSyncExternalStoreWithSelector=function(d,h,m,g,b){var v=a(null);if(v.current===null){var k={hasValue:!1,value:null};v.current=k}else k=v.current;v=l(function(){function N(j){if(!T){if(T=!0,R=j,j=g(j),b!==void 0&&k.hasValue){var I=k.value;if(b(I,j))return E=I}return E=j}if(I=E,n(R,j))return I;var D=g(j);return b!==void 0&&b(I,D)?(R=j,I):(R=j,E=D)}var T=!1,R,E,P=m===void 0?null:m;return[function(){return N(h())},P===null?void 0:function(){return N(P())}]},[h,m,g,b]);var C=r(d,v[0],v[1]);return i(function(){k.hasValue=!0,k.value=C},[C]),u(C),C},Xy}var fA;function ere(){return fA||(fA=1,Jy.exports=Zne()),Jy.exports}ere();function tre(t){t()}function nre(){let t=null,e=null;return{clear(){t=null,e=null},notify(){tre(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const a=e={callback:n,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!r||t===null||(r=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var hA={notify(){},get:()=>[]};function rre(t,e){let n,r=hA,a=0,i=!1;function l(C){m();const N=r.subscribe(C);let T=!1;return()=>{T||(T=!0,N(),g())}}function u(){r.notify()}function d(){k.onStateChange&&k.onStateChange()}function h(){return i}function m(){a++,n||(n=t.subscribe(d),r=nre())}function g(){a--,n&&a===0&&(n(),n=void 0,r.clear(),r=hA)}function b(){i||(i=!0,m())}function v(){i&&(i=!1,g())}const k={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:h,trySubscribe:b,tryUnsubscribe:v,getListeners:()=>r};return k}var are=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ire=are(),sre=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ore=sre(),lre=()=>ire||ore?_.useLayoutEffect:_.useEffect,cre=lre(),Qy=Symbol.for("react-redux-context"),Zy=typeof globalThis<"u"?globalThis:{};function ure(){if(!_.createContext)return{};const t=Zy[Qy]??(Zy[Qy]=new Map);let e=t.get(_.createContext);return e||(e=_.createContext(null),t.set(_.createContext,e)),e}var dre=ure();function fre(t){const{children:e,context:n,serverState:r,store:a}=t,i=_.useMemo(()=>{const d=rre(a);return{store:a,subscription:d,getServerState:r?()=>r:void 0}},[a,r]),l=_.useMemo(()=>a.getState(),[a]);cre(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=n||dre;return _.createElement(u.Provider,{value:i},e)}var hre=fre,mre=(t,e)=>e,fv=ue([mre,It,AI,jn,ER,mi,TX,Wn],DX),hv=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},RM=ta("mouseClick"),MM=Zc();MM.startListening({actionCreator:RM,effect:(t,e)=>{var n=t.payload,r=fv(e.getState(),hv(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(jJ({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var pb=ta("mouseMove"),DM=Zc();DM.startListening({actionCreator:pb,effect:(t,e)=>{var n=t.payload,r=e.getState(),a=Wx(r,r.tooltip.settings.shared),i=fv(r,hv(n));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?e.dispatch(bR({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(yR()))}});var mA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},OM=yr({name:"rootProps",initialState:mA,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:mA.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue}}}),pre=OM.reducer,{updateOptions:gre}=OM.actions,LM=yr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Tie}=LM.actions,yre=LM.reducer,UM=ta("keyDown"),BM=ta("focus"),mv=Zc();mv.startListening({actionCreator:UM,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(Kx(a,Sl(n))),u=mi(n);if(i==="Enter"){var d=$f(n,"axis","hover",String(a.index));e.dispatch(ib({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:d}));return}var h=SJ(n),m=h==="left-to-right"?1:-1,g=i==="ArrowRight"?1:-1,b=l+g*m;if(!(u==null||b>=u.length||b<0)){var v=$f(n,"axis","hover",String(b));e.dispatch(ib({active:!0,activeIndex:b.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}});mv.startListening({actionCreator:BM,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var i="0",l=$f(n,"axis","hover",String(i));e.dispatch(ib({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Wr=ta("externalEvent"),$M=Zc();$M.startListening({actionCreator:Wr,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:hX(n),activeDataKey:dX(n),activeIndex:Vc(n),activeLabel:jR(n),activeTooltipIndex:Vc(n),isTooltipActive:mX(n)};t.payload.handler(r,t.payload.reactEvent)}}});var bre=ue([wl],t=>t.tooltipItemPayloads),xre=ue([bre,uu,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var a=t.find(u=>u.settings.dataKey===r);if(a!=null){var{positions:i}=a;if(i!=null){var l=e(i,n);return l}}}),qM=ta("touchMove"),zM=Zc();zM.startListening({actionCreator:qM,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),a=Wx(r,r.tooltip.settings.shared);if(a==="axis"){var i=fv(r,hv({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(bR({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var l,u=n.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(f7),m=(l=d.getAttribute(h7))!==null&&l!==void 0?l:void 0,g=xre(e.getState(),h,m);e.dispatch(AJ({activeDataKey:m,activeIndex:h,activeCoordinate:g}))}}}});var vre=L2({brush:$ee,cartesianAxis:_ee,chartData:hQ,errorBars:Iee,graphicalItems:iee,layout:YH,legend:K7,options:lQ,polarAxis:IZ,polarOptions:yre,referenceElements:Wee,rootProps:pre,tooltip:PJ,zIndex:YX}),wre=function(e){return vH({reducer:vre,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([MM.middleware,DM.middleware,mv.middleware,$M.middleware,zM.middleware]),enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(Y2({type:"raf"}))},devTools:zs.devToolsEnabled})};function Sre(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,a=ar(),i=_.useRef(null);if(a)return n;i.current==null&&(i.current=wre(e));var l=Wb;return _.createElement(hre,{context:l,store:i.current},n)}function _re(t){var{layout:e,margin:n}=t,r=wn(),a=ar();return _.useEffect(()=>{a||(r(VH(e)),r(HH(n)))},[r,a,e,n]),null}function kre(t){var e=wn();return _.useEffect(()=>{e(gre(t))},[e,t]),null}function pA(t){var{zIndex:e,isPanorama:n}=t,r=n?"recharts-zindex-panorama-":"recharts-zindex-",a=sM("".concat(r).concat(e)),i=wn();return _.useLayoutEffect(()=>(i(WX({zIndex:e,elementId:a,isPanorama:n})),()=>{i(KX({zIndex:e,isPanorama:n}))}),[i,e,a,n]),_.createElement("g",{id:a})}function gA(t){var{children:e,isPanorama:n}=t,r=$e(LX);if(!r||r.length===0)return e;var a=r.filter(l=>l<0),i=r.filter(l=>l>0);return _.createElement(_.Fragment,null,a.map(l=>_.createElement(pA,{key:l,zIndex:l,isPanorama:n})),e,i.map(l=>_.createElement(pA,{key:l,zIndex:l,isPanorama:n})))}var Nre=["children"];function Cre(t,e){if(t==null)return{};var n,r,a=Ere(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ere(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jf.apply(null,arguments)}var Tre={width:"100%",height:"100%",display:"block"},Are=_.forwardRef((t,e)=>{var n=tx(),r=nx(),a=xP();if(!ka(n)||!ka(r))return null;var{children:i,otherAttributes:l,title:u,desc:d}=t,h,m;return l!=null&&(typeof l.tabIndex=="number"?h=l.tabIndex:h=a?0:void 0,typeof l.role=="string"?m=l.role:m=a?"application":void 0),_.createElement(Ob,Jf({},l,{title:u,desc:d,role:m,tabIndex:h,width:n,height:r,style:Tre,ref:e}),i)}),jre=t=>{var{children:e}=t,n=$e(vh);if(!n)return null;var{width:r,height:a,y:i,x:l}=n;return _.createElement(Ob,{width:r,height:a,x:l,y:i},e)},yA=_.forwardRef((t,e)=>{var{children:n}=t,r=Cre(t,Nre),a=ar();return a?_.createElement(jre,null,_.createElement(gA,{isPanorama:!0},n)):_.createElement(Are,Jf({ref:e},r),_.createElement(gA,{isPanorama:!1},n))});function Pre(){var t=wn(),[e,n]=_.useState(null),r=$e(d7);return _.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),i=a.width/e.offsetWidth;nn(i)&&i!==r&&t(KH(i))}},[e,t,r]),n}function bA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ire(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bA(Object(n),!0).forEach(function(r){Rre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rre(t,e,n){return(e=Mre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mre(t){var e=Dre(t,"string");return typeof e=="symbol"?e:e+""}function Dre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $s(){return $s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$s.apply(null,arguments)}var Ore=()=>(SQ(),null);function Xf(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Lre=_.forwardRef((t,e)=>{var n,r,a=_.useRef(null),[i,l]=_.useState({containerWidth:Xf((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Xf((r=t.style)===null||r===void 0?void 0:r.height)}),u=_.useCallback((h,m)=>{l(g=>{var b=Math.round(h),v=Math.round(m);return g.containerWidth===b&&g.containerHeight===v?g:{containerWidth:b,containerHeight:v}})},[]),d=_.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null&&typeof ResizeObserver<"u"){var{width:m,height:g}=h.getBoundingClientRect();u(m,g);var b=k=>{var{width:C,height:N}=k[0].contentRect;u(C,N)},v=new ResizeObserver(b);v.observe(h),a.current=v}},[e,u]);return _.useEffect(()=>()=>{var h=a.current;h!=null&&h.disconnect()},[u]),_.createElement(_.Fragment,null,_.createElement(Sh,{width:i.containerWidth,height:i.containerHeight}),_.createElement("div",$s({ref:d},t)))}),Ure=_.forwardRef((t,e)=>{var{width:n,height:r}=t,[a,i]=_.useState({containerWidth:Xf(n),containerHeight:Xf(r)}),l=_.useCallback((d,h)=>{i(m=>{var g=Math.round(d),b=Math.round(h);return m.containerWidth===g&&m.containerHeight===b?m:{containerWidth:g,containerHeight:b}})},[]),u=_.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null){var{width:h,height:m}=d.getBoundingClientRect();l(h,m)}},[e,l]);return _.createElement(_.Fragment,null,_.createElement(Sh,{width:a.containerWidth,height:a.containerHeight}),_.createElement("div",$s({ref:u},t)))}),Bre=_.forwardRef((t,e)=>{var{width:n,height:r}=t;return _.createElement(_.Fragment,null,_.createElement(Sh,{width:n,height:r}),_.createElement("div",$s({ref:e},t)))}),$re=_.forwardRef((t,e)=>{var{width:n,height:r}=t;return ei(n)||ei(r)?_.createElement(Ure,$s({},t,{ref:e})):_.createElement(Bre,$s({},t,{ref:e}))});function qre(t){return t===!0?Lre:$re}var zre=_.forwardRef((t,e)=>{var{children:n,className:r,height:a,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:h,onMouseLeave:m,onMouseMove:g,onMouseUp:b,onTouchEnd:v,onTouchMove:k,onTouchStart:C,style:N,width:T,responsive:R,dispatchTouchEvents:E=!0}=t,P=_.useRef(null),j=wn(),[I,D]=_.useState(null),[$,H]=_.useState(null),z=Pre(),F=Zb(),V=(F==null?void 0:F.width)>0?F.width:T,K=(F==null?void 0:F.height)>0?F.height:a,pe=_.useCallback(Q=>{z(Q),typeof e=="function"&&e(Q),D(Q),H(Q),Q!=null&&(P.current=Q)},[z,e,D,H]),Y=_.useCallback(Q=>{j(RM(Q)),j(Wr({handler:i,reactEvent:Q}))},[j,i]),q=_.useCallback(Q=>{j(pb(Q)),j(Wr({handler:h,reactEvent:Q}))},[j,h]),B=_.useCallback(Q=>{j(yR()),j(Wr({handler:m,reactEvent:Q}))},[j,m]),ae=_.useCallback(Q=>{j(pb(Q)),j(Wr({handler:g,reactEvent:Q}))},[j,g]),X=_.useCallback(()=>{j(BM())},[j]),ve=_.useCallback(Q=>{j(UM(Q.key))},[j]),L=_.useCallback(Q=>{j(Wr({handler:l,reactEvent:Q}))},[j,l]),O=_.useCallback(Q=>{j(Wr({handler:u,reactEvent:Q}))},[j,u]),Z=_.useCallback(Q=>{j(Wr({handler:d,reactEvent:Q}))},[j,d]),U=_.useCallback(Q=>{j(Wr({handler:b,reactEvent:Q}))},[j,b]),J=_.useCallback(Q=>{j(Wr({handler:C,reactEvent:Q}))},[j,C]),oe=_.useCallback(Q=>{E&&j(qM(Q)),j(Wr({handler:k,reactEvent:Q}))},[j,E,k]),me=_.useCallback(Q=>{j(Wr({handler:v,reactEvent:Q}))},[j,v]),xe=qre(R);return _.createElement(BR.Provider,{value:I},_.createElement(Qj.Provider,{value:$},_.createElement(xe,{width:V??(N==null?void 0:N.width),height:K??(N==null?void 0:N.height),className:Ct("recharts-wrapper",r),style:Ire({position:"relative",cursor:"default",width:V,height:K},N),onClick:Y,onContextMenu:L,onDoubleClick:O,onFocus:X,onKeyDown:ve,onMouseDown:Z,onMouseEnter:q,onMouseLeave:B,onMouseMove:ae,onMouseUp:U,onTouchEnd:me,onTouchMove:oe,onTouchStart:J,ref:pe},_.createElement(Ore,null),n)))}),Gre=["width","height","responsive","children","className","style","compact","title","desc"];function Fre(t,e){if(t==null)return{};var n,r,a=Hre(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Hre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Vre=_.forwardRef((t,e)=>{var{width:n,height:r,responsive:a,children:i,className:l,style:u,compact:d,title:h,desc:m}=t,g=Fre(t,Gre),b=Zr(g);return d?_.createElement(_.Fragment,null,_.createElement(Sh,{width:n,height:r}),_.createElement(yA,{otherAttributes:b,title:h,desc:m},i)):_.createElement(zre,{className:l,style:u,width:n,height:r,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},_.createElement(yA,{otherAttributes:b,title:h,desc:m,ref:e},_.createElement(Yee,null,i)))});function gb(){return gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gb.apply(null,arguments)}var Wre={top:5,right:5,bottom:5,left:5},Kre={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Wre,reverseStackOrder:!1,syncMethod:"index",responsive:!1},Yre=_.forwardRef(function(e,n){var r,a=Dn(e.categoricalChartProps,Kre),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:h}=e,m={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return _.createElement(Sre,{preloadedState:{options:m},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:i},_.createElement(Bee,{chartData:h.data}),_.createElement(_re,{layout:a.layout,margin:a.margin}),_.createElement(kre,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),_.createElement(Vre,gb({},a,{ref:n})))}),Jre=["axis"],pv=_.forwardRef((t,e)=>_.createElement(Yre,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Jre,tooltipPayloadSearcher:sQ,categoricalChartProps:t,ref:e}));const Pt={revenue:{color:"#10B981",strokeWidth:4,type:"monotone",label:"Revenue ($)"},appointments:{color:"#3B82F6",strokeWidth:3,type:"monotone",label:"Appointments"},calls:{color:"#8B5CF6",strokeWidth:3,type:"monotone",label:"Calls"},leads:{color:"#F59E0B",strokeWidth:3,type:"monotone",label:"New Leads"},proposals:{color:"#EC4899",strokeWidth:3,type:"monotone",label:"Proposals"}},Xre=({active:t,payload:e,label:n})=>t&&e&&e.length?o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border-2 border-gray-200",children:[o.jsx("p",{className:"font-semibold text-gray-800 mb-2",children:n}),e.map((r,a)=>o.jsxs("p",{style:{color:r.color},className:"text-sm font-medium",children:[r.name,": ",r.name==="Revenue ($)"?`$${(r.value/1e3).toFixed(1)}K`:r.value]},a))]}):null,Qre=({activeMetrics:t,data:e})=>{if(!Object.values(t).some(i=>i))return o.jsx("div",{className:"flex items-center justify-center h-96 bg-white rounded-lg shadow-md",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Select at least one metric to display the chart"})});if(!e||e.length===0)return o.jsx("div",{className:"flex items-center justify-center h-96 bg-white rounded-lg shadow-md",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"No data available for the selected period"})});const r=t.revenue?Pt.revenue.color:"#10B981",a=t.appointments?Pt.appointments.color:t.calls?Pt.calls.color:"#3B82F6";return o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsx(ex,{width:"100%",height:500,children:o.jsxs(pv,{data:e,margin:{top:20,right:50,left:50,bottom:20},children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),o.jsx(Vh,{strokeDasharray:"3 3",stroke:"#E2E8F0"}),o.jsx(Wh,{dataKey:"date",stroke:"#64748B",style:{fontSize:12,fontWeight:600},angle:-45,textAnchor:"end",height:80}),o.jsx(Bs,{yAxisId:"left",stroke:r,style:{fontSize:12,fontWeight:600},tickFormatter:i=>`$${(i/1e3).toFixed(0)}K`,label:{value:"Revenue ($)",angle:-90,position:"insideLeft",style:{fill:r,fontWeight:"bold"}}}),o.jsx(Bs,{yAxisId:"right",orientation:"right",stroke:a,style:{fontSize:12,fontWeight:600},label:{value:"Count",angle:90,position:"insideRight",style:{fill:a,fontWeight:"bold"}}}),o.jsx(nv,{content:o.jsx(Xre,{})}),o.jsx(rx,{wrapperStyle:{paddingTop:20},iconType:"line"}),t.revenue&&o.jsxs(o.Fragment,{children:[o.jsx(IM,{type:"monotone",dataKey:"revenue",stroke:"none",fillOpacity:1,fill:"url(#colorRevenue)",yAxisId:"left",isAnimationActive:!0,animationDuration:500}),o.jsx(Fn,{type:Pt.revenue.type,dataKey:"revenue",stroke:Pt.revenue.color,strokeWidth:Pt.revenue.strokeWidth,yAxisId:"left",dot:{r:4,fill:Pt.revenue.color},activeDot:{r:6},name:Pt.revenue.label,isAnimationActive:!0,animationDuration:500})]}),t.appointments&&o.jsx(Fn,{type:Pt.appointments.type,dataKey:"appointments",stroke:Pt.appointments.color,strokeWidth:Pt.appointments.strokeWidth,yAxisId:"right",dot:{r:3,fill:Pt.appointments.color},activeDot:{r:5},name:Pt.appointments.label,isAnimationActive:!0,animationDuration:500}),t.calls&&o.jsx(Fn,{type:Pt.calls.type,dataKey:"calls",stroke:Pt.calls.color,strokeWidth:Pt.calls.strokeWidth,yAxisId:"right",dot:{r:3,fill:Pt.calls.color},activeDot:{r:5},name:Pt.calls.label,isAnimationActive:!0,animationDuration:500}),t.leads&&o.jsx(Fn,{type:Pt.leads.type,dataKey:"leads",stroke:Pt.leads.color,strokeWidth:Pt.leads.strokeWidth,yAxisId:"right",dot:{r:3,fill:Pt.leads.color},activeDot:{r:5},name:Pt.leads.label,isAnimationActive:!0,animationDuration:500}),t.proposals&&o.jsx(Fn,{type:Pt.proposals.type,dataKey:"proposals",stroke:Pt.proposals.color,strokeWidth:Pt.proposals.strokeWidth,yAxisId:"right",dot:{r:3,fill:Pt.proposals.color},activeDot:{r:5},name:Pt.proposals.label,isAnimationActive:!0,animationDuration:500})]})})})},Zre={revenue:{label:"Total Revenue",color:"#10B981",format:t=>`$${(t/1e3).toFixed(1)}K`},appointments:{label:"Total Appointments",color:"#3B82F6",format:t=>t.toString()},calls:{label:"Total Calls",color:"#8B5CF6",format:t=>t.toString()},leads:{label:"Total Leads",color:"#F59E0B",format:t=>t.toString()},proposals:{label:"Total Proposals",color:"#EC4899",format:t=>t.toString()}},eae=({activeMetrics:t,data:e})=>{const n=_.useMemo(()=>!e||e.length===0?[]:Object.keys(t).filter(a=>t[a]).slice(0,3).map(a=>{const i=Zre[a],l=e.reduce((h,m)=>h+(m[a]||0),0),u=l/e.length,d=e.length>1?((e[e.length-1][a]||0)-(e[0][a]||0))/(e[0][a]||1)*100:0;return{label:i.label,value:i.format(l),average:i.format(Math.round(u)),trend:d.toFixed(1),color:i.color,isPositive:d>=0}}),[t,e]);return n.length===0?null:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:n.map((r,a)=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 hover:shadow-lg transition-shadow duration-300",style:{borderLeftColor:r.color},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:r.label}),o.jsxs("div",{className:`text-xs font-bold px-2 py-1 rounded ${r.isPositive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[r.isPositive?"":""," ",Math.abs(parseFloat(r.trend)),"%"]})]}),o.jsx("div",{className:"mb-2",children:o.jsx("p",{className:"text-3xl font-bold",style:{color:r.color},children:r.value})}),o.jsxs("div",{className:"text-sm text-gray-500",children:[o.jsx("span",{className:"font-medium",children:"Avg per day:"})," ",r.average]})]},a))})},tae=({labels:t,rawData:e,selectedUsers:n,userColors:r,usersById:a})=>{var h;const[i,l]=_.useState({revenue:!0,appointments:!0,calls:!0,leads:!1,proposals:!1}),u=m=>{l(g=>({...g,[m]:!g[m]}))},d=_.useMemo(()=>n.length===0?[]:t.map((m,g)=>{let b=0,v=0,k=0,C=0,N=0;return n.forEach(T=>{var E,P,j,I;const R=e[T];R&&(b+=((E=R.revenue)==null?void 0:E[g])||0,v+=((P=R.appts)==null?void 0:P[g])||0,k+=((j=R.calls)==null?void 0:j[g])||0,C+=((I=R.leads)==null?void 0:I[g])||0)}),{date:m,revenue:b,appointments:v,calls:k,leads:C,proposals:N}}),[t,e,n]);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"Click to toggle metrics on/off  Hover for details  Compare trends across time"}),n.length>1&&o.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Showing combined data for ",n.length," selected rep",n.length>1?"s":""]}),n.length===1&&o.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Showing data for ",((h=a[n[0]])==null?void 0:h.name)||"Unknown"]})]}),o.jsx(qz,{activeMetrics:i,onToggle:u}),o.jsx(Qre,{activeMetrics:i,data:d}),o.jsx(eae,{activeMetrics:i,data:d})]})},nae=({isOpen:t,onClose:e,modalData:n})=>{if(!t||!n)return null;const{label:r,metric:a,data:i,usersById:l}=n,u={revenue:"Revenue Transactions",appts:"Appointments Set",calls:"Calls Made",leads:"New Leads"},d=()=>{switch(a){case"revenue":return i.revenue.length>0?o.jsx("ul",{className:"divide-y divide-brand-light-border dark:divide-brand-gray",children:i.revenue.map(h=>{var m;return o.jsxs("li",{className:"py-2 flex justify-between",children:[o.jsxs("span",{children:[h.clientName," (",((m=l[h.userId])==null?void 0:m.name)||"Unknown",")"]}),o.jsx("span",{className:"font-bold text-brand-lime",children:ft(h.amount)})]},h.id)})}):o.jsx("p",{children:"No revenue transactions for this period."});case"appts":return i.appts.length>0?o.jsx("ul",{className:"divide-y divide-brand-light-border dark:divide-brand-gray",children:i.appts.map(h=>{var m;return o.jsxs("li",{className:"py-2",children:[h.name," (",((m=l[h.userId])==null?void 0:m.name)||"Unknown",")"]},h.id)})}):o.jsx("p",{children:"No appointments were set in this period."});case"calls":return i.calls.length>0?o.jsx("ul",{className:"divide-y divide-brand-light-border dark:divide-brand-gray",children:i.calls.map(h=>{var m;return o.jsxs("li",{className:"py-2",children:[h.name," (",((m=l[h.userId])==null?void 0:m.name)||"Unknown",")"]},h.id)})}):o.jsx("p",{children:"No calls were made in this period."});case"leads":return i.leads.length>0?o.jsx("ul",{className:"divide-y divide-brand-light-border dark:divide-brand-gray",children:i.leads.map(h=>{var m;return o.jsxs("li",{className:"py-2",children:[h.name," (",((m=l[h.userId])==null?void 0:m.name)||"Unknown",")"]},h.id)})}):o.jsx("p",{children:"No new leads were added in this period."});default:return null}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsxs("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:["Details for ",r]}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsxs("div",{className:"p-6 flex-grow overflow-y-auto",children:[o.jsx("h3",{className:"font-bold text-lg mb-3 text-brand-light-text dark:text-white",children:u[a]}),o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:d()})]})]})})},rae=({isOpen:t,onClose:e,userName:n,userId:r,eodSubmissions:a})=>{if(!t)return null;const i=_.useMemo(()=>{var d;const l=[],u=new Date;for(let h=0;h<30;h++){const m=new Date;m.setDate(u.getDate()-h);const g=m.getDay();if(g===0||g===6)continue;const b=m.toISOString().split("T")[0],v=(d=a[r])==null?void 0:d[b];l.push({date:m,dateKey:b,isSubmitted:v})}return l},[r,a]);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 transition-opacity",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-md flex flex-col max-h-[80vh]",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsxs("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:["EOD Reports: ",n]}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-3 uppercase",children:"Last 30 Days (Weekdays)"}),o.jsx("ul",{className:"space-y-2",children:i.map(({date:l,dateKey:u,isSubmitted:d})=>o.jsxs("li",{className:"flex justify-between items-center text-sm p-2 rounded-md bg-brand-light-bg dark:bg-brand-gray/20",children:[o.jsx("span",{className:"text-brand-light-text dark:text-white",children:l.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),d?o.jsxs("span",{className:"text-brand-lime font-bold flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Submitted"]}):o.jsxs("span",{className:"text-brand-red font-bold flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Missed"]})]},u))})]})]})})},qo=({title:t,children:e,className:n=""})=>o.jsxs("div",{className:`bg-brand-light-card dark:bg-brand-navy p-4 sm:p-6 rounded-lg border border-brand-light-border dark:border-brand-gray ${n}`,children:[o.jsx("h3",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 uppercase mb-4",children:t}),e]}),aae=({summaryData:t})=>{const[e,n]=_.useState({key:"revenue",direction:"desc"}),r=_.useMemo(()=>{const l=t.map(u=>({...u,avgDealSize:u.deals>0?u.revenue/u.deals:0,callToApptRate:u.calls>0?u.appts/u.calls*100:0,apptToDealRate:u.appts>0?u.deals/u.appts*100:0,leadToDealRate:u.leads>0?u.deals/u.leads*100:0}));return l.sort((u,d)=>u[e.key]<d[e.key]?e.direction==="asc"?-1:1:u[e.key]>d[e.key]?e.direction==="asc"?1:-1:0),l},[t,e]),a=l=>{let u="desc";e.key===l&&e.direction==="desc"&&(u="asc"),n({key:l,direction:u})},i=({headerKey:l,label:u})=>{const h=e.key===l?e.direction==="desc"?"":"":"";return o.jsxs("th",{className:"p-2 text-right cursor-pointer hover:bg-brand-light-bg dark:hover:bg-brand-gray/50",onClick:()=>a(l),children:[u," ",o.jsx("span",{className:"text-xs",children:h})]})};return o.jsx(qo,{title:"Team KPI Analysis",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 cursor-pointer hover:bg-brand-light-bg dark:hover:bg-brand-gray/50",onClick:()=>a("userName"),children:"Rep Name"}),o.jsx(i,{headerKey:"revenue",label:"Revenue"}),o.jsx(i,{headerKey:"deals",label:"Deals"}),o.jsx(i,{headerKey:"avgDealSize",label:"Avg Deal"}),o.jsx(i,{headerKey:"calls",label:"Calls"}),o.jsx(i,{headerKey:"appts",label:"Appts"}),o.jsx(i,{headerKey:"callToApptRate",label:"Call  Appt %"}),o.jsx(i,{headerKey:"apptToDealRate",label:"Appt  Deal %"}),o.jsx(i,{headerKey:"leadToDealRate",label:"Lead  Deal %"})]})}),o.jsx("tbody",{children:r.map(l=>o.jsxs("tr",{className:"border-t border-brand-light-border dark:border-brand-gray font-medium text-brand-light-text dark:text-white",children:[o.jsx("td",{className:"p-2",children:l.userName}),o.jsx("td",{className:"p-2 text-right font-bold text-brand-lime",children:ft(l.revenue)}),o.jsx("td",{className:"p-2 text-right",children:l.deals}),o.jsx("td",{className:"p-2 text-right",children:ft(l.avgDealSize)}),o.jsx("td",{className:"p-2 text-right",children:l.calls}),o.jsx("td",{className:"p-2 text-right",children:l.appts}),o.jsxs("td",{className:"p-2 text-right",children:[l.callToApptRate.toFixed(1),"%"]}),o.jsxs("td",{className:"p-2 text-right",children:[l.apptToDealRate.toFixed(1),"%"]}),o.jsxs("td",{className:"p-2 text-right",children:[l.leadToDealRate.toFixed(1),"%"]})]},l.userId))})]})})})},iae=({allData:t,transactions:e,users:n,contextualUserId:r,setContextualUserId:a,eodSubmissions:i})=>{const l=new Date,u=new Date;u.setDate(l.getDate()-29);const[d,h]=_.useState({start:u.toISOString().split("T")[0],end:l.toISOString().split("T")[0]}),[m,g]=_.useState([]),[b,v]=_.useState("revenue"),[k,C]=_.useState("line"),[N,T]=_.useState("dashboard"),[R,E]=_.useState(null),[P,j]=_.useState(!1),[I,D]=_.useState(null),[$,H]=_.useState(null),z=_.useMemo(()=>n.filter(X=>X.status==="Active"),[n]),F=_.useMemo(()=>Object.fromEntries(n.map(X=>[X.id,X])),[n]),V=_.useMemo(()=>{const X=["#2F81F7","#34D399","#FBBF24","#A855F7","#E53E3E","#EC4899","#06B6D4"];return Object.fromEntries(z.map((ve,L)=>[ve.id,X[L%X.length]]))},[z]);_.useEffect(()=>{r?g([r]):z.length>0&&g(z.map(X=>X.id))},[r,z]);const K=X=>{g(ve=>ve.includes(X)?ve.filter(L=>L!==X):[...ve,X])},pe=(X,ve)=>{var me;console.log("[PERF DEBUG] ===== processData called ====="),console.log("[PERF DEBUG] Date range:",X,"to",ve),console.log("[PERF DEBUG] Total transactions:",e.length),console.log("[PERF DEBUG] Sales Reps:",z.map(xe=>({id:xe.id,name:xe.name,role:xe.role,status:xe.status}))),console.log("[PERF DEBUG] First 3 transactions:",e.slice(0,3).map(xe=>({id:xe.id,date:xe.date,amount:xe.amount,userId:xe.userId,user_id:xe.user_id})));const L=(me=e[0])==null?void 0:me.userId;if(L){const xe=n.find(Q=>Q.id===L);console.log("[PERF DEBUG] Transaction owner:",xe?{id:xe.id,name:xe.name,email:xe.email,role:xe.role,status:xe.status}:"USER NOT FOUND IN USERS ARRAY")}const O=[],Z={},U={};z.forEach(xe=>{Z[xe.id]={revenue:[],appts:[],calls:[],leads:[]},U[xe.id]={userId:xe.id,userName:xe.name,revenue:0,appts:0,calls:0,leads:0,deals:0}});const J=new Date(X+"T00:00:00"),oe=new Date(ve+"T00:00:00");for(let xe=new Date(J);xe<=oe;xe.setDate(xe.getDate()+1)){const Q=xe.toISOString().split("T")[0];O.push(Q),z.forEach(we=>{var Fe;const _e=t[Q],ie=e.filter(Je=>Je.date===Q&&Je.userId===we.id);Q===O[0]&&ie.length>0&&console.log(`[PERF DEBUG] ${we.name} (${we.id}) on ${Q}: ${ie.length} transactions, $${ie.reduce((Je,fe)=>Je+fe.amount,0)}`);const Le=ie.reduce((Je,fe)=>Je+fe.amount,0),ce=((Fe=_e==null?void 0:_e.prospectingContacts)==null?void 0:Fe.filter(Je=>Je.userId===we.id))||[],Se=ce.filter(Je=>Je.prospecting.SA).length,je=ce.filter(Je=>Je.prospecting.SW||Je.prospecting.NA||Je.prospecting.LM).length,Ye=ce.filter(Je=>Je.name).length;Z[we.id].revenue.push(Le),Z[we.id].appts.push(Se),Z[we.id].calls.push(je),Z[we.id].leads.push(Ye),U[we.id].revenue+=Le,U[we.id].appts+=Se,U[we.id].calls+=je,U[we.id].leads+=Ye,U[we.id].deals+=ie.length})}return console.log("[PERF DEBUG] Summary data:",Object.values(U).map(xe=>({name:xe.userName,revenue:xe.revenue,deals:xe.deals}))),{labels:O,rawData:Z,summaryData:U}},Y=_.useMemo(()=>pe(d.start,d.end),[d,t,e]),q=_.useMemo(()=>{const X=m.map(L=>{var Z;const O=z.find(U=>U.id===L);return{userId:L,userName:(O==null?void 0:O.name)||"Unknown",color:V[L],data:((Z=Y.rawData[L])==null?void 0:Z[b])||[]}}),ve=Object.keys(Y.summaryData).map(L=>Y.summaryData[L]).sort((L,O)=>O.revenue-L.revenue);return{labels:Y.labels.map(L=>new Date(L+"T00:00:00").toLocaleDateString("en-us",{month:"short",day:"numeric"})),datasets:X,summary:ve}},[Y,m,b,V,z]),B=async()=>{if(m.length!==1){alert("Please select exactly one sales rep to evaluate.");return}j(!0),E(null);const X=m[0],ve=Y.summaryData[X],L=(new Date(d.end).getTime()-new Date(d.start).getTime())/(1e3*3600*24)+1;try{const O=await D8({revenue:ve.revenue,calls:ve.calls,appts:ve.appts,deals:ve.deals,timeframeDays:Math.round(L)});E(O)}catch(O){console.error(O),alert("Failed to get AI evaluation.")}finally{j(!1)}},ae=_.useMemo(()=>z.map(X=>{var O;let ve=0;const L=new Date;for(let Z=1;Z<=30;Z++){const U=new Date;if(U.setDate(L.getDate()-Z),U.getDay()===0||U.getDay()===6)continue;const J=U.toISOString().split("T")[0];(O=i[X.id])!=null&&O[J]||ve++}return{user:X,missedReports:ve}}).filter(X=>X.missedReports>=3).sort((X,ve)=>ve.missedReports-X.missedReports),[z,i]);return o.jsxs(o.Fragment,{children:[o.jsx(nae,{isOpen:!!I,onClose:()=>D(null),modalData:I}),o.jsx(rae,{isOpen:!!$,onClose:()=>H(null),userName:($==null?void 0:$.name)||"",userId:($==null?void 0:$.id)||"",eodSubmissions:i}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:"Performance Dashboard"}),r&&o.jsx("button",{onClick:()=>{a(null),g(z.map(X=>X.id))},className:"text-sm text-brand-blue hover:underline",children:" Back to Full Dashboard"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rs,{value:d.start,onChange:X=>h(ve=>({...ve,start:X}))}),o.jsx("span",{className:"font-semibold text-gray-500",children:"to"}),o.jsx(Rs,{value:d.end,onChange:X=>h(ve=>({...ve,end:X}))})]})]}),o.jsxs("div",{className:"flex items-center border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("button",{onClick:()=>T("dashboard"),className:`px-4 py-2 text-sm font-bold transition-colors ${N==="dashboard"?"border-b-2 border-brand-blue text-brand-blue":"text-gray-500 dark:text-gray-400 hover:text-brand-blue/80"}`,children:"Dashboard"}),o.jsx("button",{onClick:()=>T("analysis"),className:`px-4 py-2 text-sm font-bold transition-colors ${N==="analysis"?"border-b-2 border-brand-blue text-brand-blue":"text-gray-500 dark:text-gray-400 hover:text-brand-blue/80"}`,children:"KPI Analysis"})]}),N==="dashboard"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 animate-fade-in",children:[o.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[o.jsx(qo,{title:"Select Sales Reps",children:o.jsx("div",{className:"space-y-2",children:z.map(X=>o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:m.includes(X.id),onChange:()=>K(X.id),className:"h-4 w-4 rounded border-gray-300 focus:ring-blue-500",style:{accentColor:V[X.id]}}),o.jsx("span",{className:"text-sm font-medium text-brand-light-text dark:text-white",children:X.name})]},X.id))})}),o.jsx(qo,{title:"Alerts & Notifications",children:ae.length>0?o.jsx("ul",{className:"space-y-2",children:ae.map(({user:X,missedReports:ve})=>o.jsxs("li",{className:"text-sm flex justify-between items-center",children:[o.jsx("span",{className:"text-brand-light-text dark:text-gray-300",children:X.name}),o.jsxs("button",{onClick:()=>H(X),className:"text-brand-red font-bold hover:underline",children:[ve," missed EODs"]})]},X.id))}):o.jsx("p",{className:"text-xs text-gray-500",children:"No critical alerts."})}),o.jsx(qo,{title:"AI Performance Coach",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Select one sales rep to generate an AI-powered performance evaluation for the selected date range."}),o.jsx("button",{onClick:B,disabled:P||m.length!==1,className:"w-full bg-brand-red text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition disabled:bg-brand-gray",children:P?"Analyzing...":"Evaluate Performance"}),R&&o.jsxs("div",{className:"p-3 bg-brand-light-bg dark:bg-brand-gray/20 rounded-md animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-baseline",children:[o.jsx("h4",{className:"font-bold text-brand-light-text dark:text-white",children:"Activity Score:"}),o.jsxs("p",{className:"text-2xl font-black text-brand-lime",children:[R.score,o.jsx("span",{className:"text-base",children:"/100"})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:[o.jsx("h5",{className:"font-bold mb-1",children:"Suggestions:"}),R.suggestions]})]})]})})]}),o.jsxs("div",{className:"lg:col-span-9 space-y-6",children:[o.jsx(qo,{title:"Leaderboard",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2",children:"Rep"}),o.jsx("th",{className:"p-2 text-right",children:"Revenue"}),o.jsx("th",{className:"p-2 text-right",children:"Deals"}),o.jsx("th",{className:"p-2 text-right",children:"Appts"}),o.jsx("th",{className:"p-2 text-right",children:"Calls"}),o.jsx("th",{className:"p-2 text-right",children:"Leads"})]})}),o.jsx("tbody",{children:q.summary.map(X=>o.jsxs("tr",{className:`border-t border-brand-light-border dark:border-brand-gray font-medium ${m.includes(X.userId)?"text-brand-light-text dark:text-white":"text-gray-400 dark:text-gray-600"}`,children:[o.jsxs("td",{className:"p-2 flex items-center gap-2",children:[o.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:V[X.userId]}}),X.userName]}),o.jsx("td",{className:"p-2 text-right font-bold text-brand-lime",children:ft(X.revenue)}),o.jsx("td",{className:"p-2 text-right",children:X.deals}),o.jsx("td",{className:"p-2 text-right",children:X.appts}),o.jsx("td",{className:"p-2 text-right",children:X.calls}),o.jsx("td",{className:"p-2 text-right",children:X.leads})]},X.userId))})]})})}),o.jsx(qo,{title:"Activity Trends",children:o.jsx(tae,{labels:q.labels,rawData:Y.rawData,selectedUsers:m,userColors:V,usersById:F})})]})]}),N==="analysis"&&o.jsx("div",{className:"animate-fade-in",children:o.jsx(aae,{summaryData:q.summary})})]})]})},Wt={newRevenue:{color:"#10B981",yAxisId:"left",strokeWidth:4,label:"New Revenue"},recurringRevenue:{color:"#60A5FA",yAxisId:"left",strokeWidth:4,label:"Recurring Revenue"},appointments:{color:"#3B82F6",yAxisId:"right",strokeWidth:3,label:"Appointments"},calls:{color:"#8B5CF6",yAxisId:"right",strokeWidth:3,label:"Calls"},texts:{color:"#F59E0B",yAxisId:"right",strokeWidth:3,label:"Texts"},emails:{color:"#EC4899",yAxisId:"right",strokeWidth:3,label:"Emails"}},sae=({active:t,payload:e,label:n})=>t&&e&&e.length?o.jsxs("div",{className:"bg-white dark:bg-brand-navy p-4 rounded-lg shadow-lg border-2 border-gray-200 dark:border-brand-gray",children:[o.jsx("p",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:n}),e.map((r,a)=>o.jsxs("p",{style:{color:r.color},className:"text-sm font-medium",children:[r.name,": ",r.name.includes("Revenue")?`$${r.value.toLocaleString()}`:r.value]},a))]}):null,oae=({allData:t,transactions:e,hotLeads:n,userId:r})=>{const[a,i]=_.useState("week"),[l,u]=_.useState(""),[d,h]=_.useState(""),[m,g]=_.useState({newRevenue:!0,recurringRevenue:!0,appointments:!0,calls:!0,texts:!1,emails:!1}),[b,v]=_.useState(!1);_.useEffect(()=>{const j=()=>v(window.innerWidth<640);return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const k=b?{top:10,right:10,left:10,bottom:10}:{top:20,right:50,left:50,bottom:20},C=j=>{g(I=>({...I,[j]:!I[j]}))},N=_.useMemo(()=>{const j=new Date;let I,D=new Date(j);return a==="week"?(I=new Date(j),I.setDate(j.getDate()-6)):a==="month"?(I=new Date(j),I.setDate(j.getDate()-29)):l&&d?(I=new Date(l),D=new Date(d)):(I=new Date(j),I.setDate(j.getDate()-6)),{start:I,end:D}},[a,l,d]),T=_.useMemo(()=>{const j=[],{start:I,end:D}=N,$=new Date(I);for(;$<=D;){const H=$.toISOString().split("T")[0],z=t[H];let F=0,V=0,K=0,pe=0,Y=0;z&&(F=(z.prospectingContacts||[]).filter(X=>X.prospecting.SW||X.prospecting.NA||X.prospecting.LM).length,V=(z.prospectingContacts||[]).filter(X=>X.prospecting.ST).length,K=(z.prospectingContacts||[]).filter(X=>X.prospecting.EP).length,pe=(z.prospectingContacts||[]).filter(X=>X.prospecting.SA).length);const q=e.filter(X=>X.date===H&&X.userId===r);let B=0,ae=0;q.forEach(X=>{const ve=e.filter(L=>L.clientName.toLowerCase()===X.clientName.toLowerCase()).sort((L,O)=>L.date.localeCompare(O.date))[0];(ve==null?void 0:ve.date)===H?B+=X.amount:ae+=X.amount}),Y=B+ae,j.push({date:$.toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:Y,newRevenue:B,recurringRevenue:ae,appointments:pe,calls:F,texts:V,emails:K}),$.setDate($.getDate()+1)}return j},[N,t,e,r]),R=Object.values(m).some(j=>j),E=m.newRevenue?Wt.newRevenue.color:m.recurringRevenue?Wt.recurringRevenue.color:"#10B981",P=m.appointments?Wt.appointments.color:m.calls?Wt.calls.color:"#3B82F6";return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-3 sm:p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white mb-2",children:"Performance Trends"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track your key performance indicators over time"})]}),o.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-end",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i("week"),className:`px-4 py-2 rounded-lg font-bold transition ${a==="week"?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:"Week"}),o.jsx("button",{onClick:()=>i("month"),className:`px-4 py-2 rounded-lg font-bold transition ${a==="month"?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:"Month"}),o.jsx("button",{onClick:()=>i("custom"),className:`px-4 py-2 rounded-lg font-bold transition ${a==="custom"?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:"Custom"})]}),a==="custom"&&o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"date",value:l,onChange:j=>u(j.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-brand-gray bg-white dark:bg-brand-navy text-brand-light-text dark:text-white"}),o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"to"}),o.jsx("input",{type:"date",value:d,onChange:j=>h(j.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-brand-gray bg-white dark:bg-brand-navy text-brand-light-text dark:text-white"})]})]}),o.jsx("div",{className:"mb-6 flex flex-wrap gap-3",children:Object.entries(Wt).map(([j,I])=>o.jsxs("button",{onClick:()=>C(j),className:`px-4 py-2 rounded-lg font-bold transition flex items-center gap-2 ${m[j]?"opacity-100":"opacity-40"}`,style:{backgroundColor:m[j]?I.color:"#E5E7EB",color:m[j]?"white":"#6B7280"},children:[o.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:I.color}}),I.label]},j))}),R?T.length===0?o.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-50 dark:bg-brand-gray/20 rounded-lg",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No data available for the selected period"})}):o.jsx("div",{className:"bg-white dark:bg-brand-gray/20 rounded-lg p-2 sm:p-4",children:o.jsx(ex,{width:"100%",height:400,children:o.jsxs(pv,{data:T,margin:k,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),o.jsx(Vh,{strokeDasharray:"3 3",stroke:"#E2E8F0",className:"dark:opacity-20"}),o.jsx(Wh,{dataKey:"date",stroke:"#64748B",style:{fontSize:12,fontWeight:600},angle:-45,textAnchor:"end",height:80}),o.jsx(Bs,{yAxisId:"left",stroke:E,style:{fontSize:12,fontWeight:600},tickFormatter:j=>`$${(j/1e3).toFixed(0)}K`,label:{value:"Revenue ($)",angle:-90,position:"insideLeft",style:{fill:E,fontWeight:"bold"}}}),o.jsx(Bs,{yAxisId:"right",orientation:"right",stroke:P,style:{fontSize:12,fontWeight:600},label:{value:"Count",angle:90,position:"insideRight",style:{fill:P,fontWeight:"bold"}}}),o.jsx(nv,{content:o.jsx(sae,{})}),o.jsx(rx,{wrapperStyle:{paddingTop:"20px"},iconType:"line"}),m.newRevenue&&o.jsx(Fn,{yAxisId:"left",type:"monotone",dataKey:"newRevenue",stroke:Wt.newRevenue.color,strokeWidth:Wt.newRevenue.strokeWidth,name:Wt.newRevenue.label,dot:{r:4},activeDot:{r:6}}),m.recurringRevenue&&o.jsx(Fn,{yAxisId:"left",type:"monotone",dataKey:"recurringRevenue",stroke:Wt.recurringRevenue.color,strokeWidth:Wt.recurringRevenue.strokeWidth,name:Wt.recurringRevenue.label,dot:{r:4},activeDot:{r:6}}),m.appointments&&o.jsx(Fn,{yAxisId:"right",type:"monotone",dataKey:"appointments",stroke:Wt.appointments.color,strokeWidth:Wt.appointments.strokeWidth,name:Wt.appointments.label,dot:{r:4},activeDot:{r:6}}),m.calls&&o.jsx(Fn,{yAxisId:"right",type:"monotone",dataKey:"calls",stroke:Wt.calls.color,strokeWidth:Wt.calls.strokeWidth,name:Wt.calls.label,dot:{r:4},activeDot:{r:6}}),m.texts&&o.jsx(Fn,{yAxisId:"right",type:"monotone",dataKey:"texts",stroke:Wt.texts.color,strokeWidth:Wt.texts.strokeWidth,name:Wt.texts.label,dot:{r:4},activeDot:{r:6}}),m.emails&&o.jsx(Fn,{yAxisId:"right",type:"monotone",dataKey:"emails",stroke:Wt.emails.color,strokeWidth:Wt.emails.strokeWidth,name:Wt.emails.label,dot:{r:4},activeDot:{r:6}})]})})}):o.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-50 dark:bg-brand-gray/20 rounded-lg",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"Select at least one metric to display the chart"})}),o.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(Wt).map(([j,I])=>{const D=T.reduce((H,z)=>H+(z[j]||0),0),$=T.length>0?D/T.length:0;return o.jsxs("div",{className:"bg-gray-50 dark:bg-brand-gray/20 p-4 rounded-lg border-l-4",style:{borderColor:I.color},children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:I.label}),o.jsx("p",{className:"text-2xl font-black text-brand-light-text dark:text-white",children:j==="revenue"?`$${D.toLocaleString()}`:Math.round(D)}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Avg: ",j==="revenue"?`$${Math.round($).toLocaleString()}`:Math.round($),"/day"]})]},j)})})]})},lae=({userId:t,selectedDate:e})=>{const[n,r]=_.useState({contentGenerated:0,contentPosted:0,avatarsCreated:0,avgRating:null}),[a,i]=_.useState(!0);_.useEffect(()=>{l()},[t,e]);const l=async()=>{i(!0);try{const u=e.toISOString().split("T")[0],d=`${u}T00:00:00`,h=`${u}T23:59:59`,{data:m,error:g}=await Ee.from("generated_content").select("id, used, performance_rating").eq("assigned_to",t).gte("created_at",d).lte("created_at",h);if(g)throw g;const{data:b,error:v}=await Ee.from("buyer_avatars").select("id").eq("assigned_to",t).gte("created_at",d).lte("created_at",h);if(v)throw v;const k=(m==null?void 0:m.length)||0,C=(m==null?void 0:m.filter(P=>P.used))||[],N=C.length,T=C.map(P=>P.performance_rating).filter(P=>P!=null),R=T.length>0?T.reduce((P,j)=>P+j,0)/T.length:null,E=(b==null?void 0:b.length)||0;r({contentGenerated:k,contentPosted:N,avatarsCreated:E,avgRating:R})}catch(u){console.error("Error fetching Dream Client Studio stats:",u)}finally{i(!1)}};return!a&&n.contentGenerated===0&&n.avatarsCreated===0?null:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white flex items-center gap-2",children:" Dream Client Studio"}),o.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-semibold mt-1",children:"Content Creation Activity"})]}),o.jsx("a",{href:"#",onClick:u=>{u.preventDefault();const d=new CustomEvent("navigate-to-content-library");window.dispatchEvent(d)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-semibold text-sm flex items-center gap-1",children:"View Library "})]}),a?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-gray/20 p-4 rounded-lg",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Content Generated"}),o.jsx("p",{className:"text-3xl font-black text-brand-light-text dark:text-white",children:n.contentGenerated}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n.contentGenerated===1?"post":"posts"})]}),o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-gray/20 p-4 rounded-lg",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Content Posted"}),o.jsx("p",{className:"text-3xl font-black text-green-600 dark:text-green-400",children:n.contentPosted}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n.contentPosted===1?"post":"posts"})]}),o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-gray/20 p-4 rounded-lg",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Avatars Created"}),o.jsx("p",{className:"text-3xl font-black text-purple-600 dark:text-purple-400",children:n.avatarsCreated}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n.avatarsCreated===1?"avatar":"avatars"})]}),o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-gray/20 p-4 rounded-lg",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Avg Performance"}),o.jsx("p",{className:"text-3xl font-black text-yellow-600 dark:text-yellow-400",children:n.avgRating!==null?n.avgRating.toFixed(1):"-"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n.contentPosted>0?"out of 10":"no ratings"})]})]}),!a&&(n.contentGenerated>0||n.avatarsCreated>0)&&o.jsx("div",{className:"mt-4 pt-4 border-t border-brand-light-border dark:border-brand-gray",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.jsx("span",{className:"font-semibold text-brand-light-text dark:text-white",children:n.contentGenerated+n.avatarsCreated})," ","massive actions from Dream Client Studio"]}),n.contentPosted>0&&o.jsxs("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-3 py-1 rounded-full font-semibold",children:[" ",n.contentPosted," Posted"]})]})})]})},Vr=({label:t,value:e,isInput:n=!1,onInputChange:r,disabled:a})=>o.jsxs("div",{className:"bg-brand-light-bg dark:bg-brand-gray/20 p-3 rounded-md",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:t}),n?o.jsx("input",{type:"text",value:e,onChange:i=>r==null?void 0:r(i.target.value),disabled:a,placeholder:"e.g., 2.5 hours",className:"w-full bg-transparent text-2xl font-black text-brand-light-text dark:text-white mt-1 p-0 border-none focus:ring-0"}):o.jsx("p",{className:"text-2xl font-black text-brand-light-text dark:text-white mt-1",children:e})]}),e0=({title:t,subtitle:e,children:n})=>o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("h2",{className:"text-lg font-bold text-brand-light-text dark:text-white",children:t}),o.jsx("p",{className:"text-xs text-brand-red font-semibold mb-4",children:e}),o.jsx("div",{className:"space-y-3",children:n})]}),cae=({allData:t,hotLeads:e,transactions:n,onSubmission:r,onDataChange:a,userId:i,selectedDate:l,onDateChange:u})=>{const h=(R=>R.toISOString().split("T")[0])(l),[m,g]=_.useState(""),[b,v]=_.useState(0),k=_.useMemo(()=>t[h]||sr(),[t,h]),C=k.eodSubmitted;_.useEffect(()=>{g(k.talkTime||"")},[k]),_.useEffect(()=>{(async()=>{try{const{data:E,error:P}=await Ee.from("generated_content").select("id").eq("assigned_to",i).eq("used",!0).gte("created_at",`${h}T00:00:00`).lte("created_at",`${h}T23:59:59`);if(P)throw P;v((E==null?void 0:E.length)||0)}catch(E){console.error("Error fetching content posted count:",E),v(0)}})()},[i,h]);const N=_.useMemo(()=>{const R=(k.prospectingContacts||[]).filter(J=>J.prospecting.SW||J.prospecting.NA||J.prospecting.LM).length,E=(k.prospectingContacts||[]).filter(J=>J.name).length,P=(k.prospectingContacts||[]).filter(J=>J.prospecting.ST).length,j=b,I=e.filter(J=>J.dateAdded&&J.dateAdded.startsWith(h)).length,D=(k.events||[]).filter(J=>J.type==="Appointment"&&J.conducted).length,$=(k.prospectingContacts||[]).filter(J=>J.prospecting.EP).length,H=(k.prospectingContacts||[]).filter(J=>J.prospecting.SA).length,z=n.filter(J=>J.date===h),F=z.filter(J=>{const oe=n.filter(me=>me.clientName.toLowerCase()===J.clientName.toLowerCase()).sort((me,xe)=>me.date.localeCompare(xe.date))[0];return(oe==null?void 0:oe.date)===h}),V=z.filter(J=>{const oe=n.filter(me=>me.clientName.toLowerCase()===J.clientName.toLowerCase()).sort((me,xe)=>me.date.localeCompare(xe.date))[0];return(oe==null?void 0:oe.date)!==h}),K=F.length,pe=F.reduce((J,oe)=>J+oe.amount,0),Y=V.reduce((J,oe)=>J+oe.amount,0),q=pe+Y,B=q>0?(pe/q*100).toFixed(1):"0",ae=z.length,X=z.reduce((J,oe)=>J+oe.amount,0),ve=ae>0?X/ae:0,L=z.filter(J=>J.isRecurring).reduce((J,oe)=>J+oe.amount*12,0),O=R>0?(H/R*100).toFixed(1):"0",Z=I>0?(H/I*100).toFixed(1):"0",U=D>0?(ae/D*100).toFixed(1):"0";return{callsMade:R,prospectsCollected:E,texts:P,socialMediaTouches:j,newLeads:I,demosHeld:D,proposalsSent:$,apptsSet:H,closedDeals:ae,revenueCollected:X,avgDeal:ve,acv:L,newClosedDeals:K,newRevenue:pe,recurringRevenue:Y,percentNewRevenue:B,callToApptRate:O,leadToApptRate:Z,demoToCloseRate:U}},[k,e,n,h,b]),T=async()=>{const R={...k,talkTime:m,eodSubmitted:!0};await a(h,R),r(h)};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[o.jsx(Wi,{selectedDate:l,onDateChange:u}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 rounded-lg border border-brand-light-border dark:border-brand-gray text-center",children:[o.jsx("h3",{className:"font-bold text-brand-light-text dark:text-white",children:"Submit Report"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Submit your report to lock in today's numbers."}),o.jsx("button",{onClick:T,disabled:C,className:"w-full bg-brand-lime text-brand-ink font-black py-3 px-6 rounded-lg hover:bg-green-400 transition text-md disabled:bg-brand-gray disabled:cursor-not-allowed disabled:text-gray-500",children:C?`Submitted for ${l.toLocaleDateString()}`:"Submit EOD Report"})]})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsxs("div",{className:"text-left mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-brand-light-text dark:text-white",children:"End of Day Report"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:l.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs(e0,{title:"Activity",subtitle:"Input",children:[o.jsx(Vr,{label:"Calls Made",value:N.callsMade}),o.jsx(Vr,{label:"Prospects Collected",value:N.prospectsCollected}),o.jsx(Vr,{label:"Texts Sent",value:N.texts}),o.jsx(Vr,{label:"Social Media Posts",value:N.socialMediaTouches})]}),o.jsxs(e0,{title:"Pipeline",subtitle:"Progress",children:[o.jsx(Vr,{label:"New Leads",value:N.newLeads}),o.jsx(Vr,{label:"Demos Held",value:N.demosHeld}),o.jsx(Vr,{label:"Proposals Sent",value:N.proposalsSent}),o.jsx(Vr,{label:"Appts Set",value:N.apptsSet})]}),o.jsxs(e0,{title:"Results",subtitle:"Outcome",children:[o.jsx(Vr,{label:"New Closed Deals",value:N.newClosedDeals}),o.jsx(Vr,{label:"New Revenue",value:ft(N.newRevenue)}),o.jsx(Vr,{label:"Recurring Revenue",value:ft(N.recurringRevenue)}),o.jsx(Vr,{label:"% New Revenue",value:`${N.percentNewRevenue}%`})]})]})]})]}),o.jsx(lae,{userId:i,selectedDate:l}),o.jsx(oae,{allData:t,transactions:n,hotLeads:e,userId:i})]})},uae=({onClose:t})=>{var te;const[e,n]=_.useState(null),[r,a]=_.useState(""),[i,l]=_.useState(null),[u,d]=_.useState(!0),[h,m]=_.useState(!1),[g,b]=_.useState(!1),[v,k]=_.useState(""),[C,N]=_.useState(""),[T,R]=_.useState(!1),[E,P]=_.useState(""),[j,I]=_.useState(""),[D,$]=_.useState(""),[H,z]=_.useState(!1),[F,V]=_.useState(!1),[K,pe]=_.useState(!1),[Y,q]=_.useState(!1),[B,ae]=_.useState(!1),[X,ve]=_.useState(""),[L,O]=_.useState(""),[Z,U]=_.useState(""),[J,oe]=_.useState(!1),[me,xe]=_.useState([]),[Q,we]=_.useState(!1),[_e,ie]=_.useState(""),[Le,ce]=_.useState(""),[Se,je]=_.useState(""),[Ye,Fe]=_.useState(""),[Je,fe]=_.useState(!1),[Ne,ye]=_.useState("standalone"),[Re,Ce]=_.useState("ghl"),[He,nt]=_.useState("solo");_.useEffect(()=>{Dt(),Ut()},[]);const We=async de=>{try{await navigator.clipboard.writeText(de),k("Email copied to clipboard!"),setTimeout(()=>k(""),2e3)}catch{const Be=document.createElement("textarea");Be.value=de,Be.style.position="fixed",Be.style.opacity="0",document.body.appendChild(Be),Be.select();try{document.execCommand("copy"),k("Email copied to clipboard!"),setTimeout(()=>k(""),2e3)}catch{N("Failed to copy email")}document.body.removeChild(Be)}},Dt=async()=>{try{const{data:{user:de}}=await Xt.auth.getUser();if(!de){N("Not logged in"),d(!1);return}n(de);const{data:ke}=await Xt.from("users").select("company_id, role").eq("id",de.id).single();if(ke?(console.log("AccountSettings - Loaded user role:",ke.role),a(ke.role||"Sales Rep")):(console.log("AccountSettings - No userData found, defaulting to Sales Rep"),a("Sales Rep")),ke!=null&&ke.company_id){const{data:Be}=await Xt.from("companies").select("*").eq("id",ke.company_id).single();l(Be)}d(!1)}catch(de){console.error("Error loading user data:",de),N(de.message),d(!1)}},Yt=async()=>{if(q(!0),N(""),k(""),j!==D){N("New passwords do not match"),q(!1);return}if(j.length<6){N("Password must be at least 6 characters"),q(!1);return}try{const{error:de}=await Xt.auth.updateUser({password:j});if(de)throw de;k("Password changed successfully!"),R(!1),P(""),I(""),$("")}catch(de){console.error("Error changing password:",de),N(de.message)}finally{q(!1)}},Ut=async()=>{try{const{data:{user:de}}=await Xt.auth.getUser();if(!de)return;const{data:ke}=await Xt.from("companies").select(`
          id,
          name,
          is_gifted_account,
          gifted_at,
          account_status,
          users!inner(id, email, name)
        `).eq("sponsored_by_user_id",de.id).eq("is_gifted_account",!0);xe(ke||[])}catch(de){console.error("Error loading gifted accounts:",de)}},ln=async()=>{fe(!0),N(""),k("");try{if(Ne==="team"){const de=await fetch("/.netlify/functions/create-team-member",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyId:i.id,email:_e,name:Le,password:Ye})}),ke=await de.json();if(!de.ok)throw new Error(ke.error||"Failed to create team member");k(`Team member ${Le} added successfully!`)}else{const de=await fetch("/.netlify/functions/create-gifted-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sponsorUserId:e.id,email:_e,name:Le,companyName:Se,password:Ye,billingType:Re,plan:He})}),ke=await de.json();if(!de.ok)throw new Error(ke.error||"Failed to create standalone account");k(`Standalone account created successfully for ${_e}`)}we(!1),ie(""),ce(""),je(""),Fe(""),ye("standalone"),Ce("ghl"),nt("solo"),await Ut()}catch(de){console.error("Error creating account:",de),N(de.message)}finally{fe(!1)}},cn=async(de,ke)=>{const Be=ke==="active"?"disabled":"active";try{const{error:ct}=await Xt.from("companies").update({account_status:Be}).eq("id",de);if(ct)throw ct;k(`Account ${Be==="active"?"activated":"disabled"} successfully`),await Ut()}catch(ct){console.error("Error toggling account:",ct),N(ct.message)}},Qt=async()=>{m(!0),N(""),k("");try{const de=await fetch("/.netlify/functions/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,subscriptionId:i==null?void 0:i.stripe_subscription_id})}),ke=await de.json();if(!de.ok)throw new Error(ke.error||"Failed to cancel subscription");k("Subscription cancelled successfully. You will have access until the end of your billing period."),b(!1),await Dt()}catch(de){console.error("Error cancelling subscription:",de),N(de.message)}finally{m(!1)}};return u?o.jsx("div",{className:"min-h-screen bg-brand-light-bg dark:bg-brand-ink flex items-center justify-center",children:o.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})}):o.jsx("div",{className:"min-h-screen bg-brand-light-bg dark:bg-brand-ink p-4 lg:p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-black text-brand-light-text dark:text-white mb-2",children:"Account Settings"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account and subscription"})]}),v&&o.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-500 rounded-lg text-green-700 dark:text-green-300",children:v}),C&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-500 rounded-lg text-red-700 dark:text-red-300",children:C}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-4",children:"Account Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("a",{href:`mailto:${e==null?void 0:e.email}`,className:"text-brand-light-text dark:text-white font-medium hover:text-blue-600 dark:hover:text-blue-400 hover:underline",children:e==null?void 0:e.email}),o.jsx("button",{onClick:()=>We(e==null?void 0:e.email),className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Copy email to clipboard",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Name"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:((te=e==null?void 0:e.user_metadata)==null?void 0:te.full_name)||"Not set"})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Company"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:i.name})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Plan"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:i.plan})]})]})]})]}),i&&o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-4",children:"Subscription & Billing"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Current Plan"}),o.jsx("p",{className:"text-2xl font-bold text-brand-blue capitalize",children:i.subscription_tier||"Starter"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[i.max_users," user",i.max_users>1?"s":""," maximum"]}),(i==null?void 0:i.stripe_subscription_id)&&o.jsx("button",{onClick:()=>b(!0),className:"text-xs text-gray-500 dark:text-gray-500 hover:text-gray-700 dark:hover:text-gray-400 underline mt-1",children:"Cancellation"})]}),(i==null?void 0:i.stripe_subscription_id)&&o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:" Active Subscription"}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Your subscription will automatically renew. You can cancel anytime."})]})]}),(console.log("AccountSettings - Rendering check - userRole:",r,"Show button:",r==="Admin"||r==="Manager"),r==="Admin"||r==="Manager")&&o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-4",children:"Account Management"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add team members or create standalone accounts for others."}),o.jsx("button",{onClick:()=>we(!0),className:"px-6 py-3 bg-brand-blue hover:bg-blue-700 text-white font-bold rounded-lg transition mb-6",children:"Add Account"}),me.length>0&&o.jsxs("div",{className:"mt-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-3",children:["Your Gifted Accounts (",me.length,")"]}),o.jsx("div",{className:"space-y-3",children:me.map(de=>{var ke,Be;return o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-brand-ink rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-brand-light-text dark:text-white",children:((ke=de.users[0])==null?void 0:ke.name)||"Unknown"}),(Be=de.users[0])!=null&&Be.email?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("a",{href:`mailto:${de.users[0].email}`,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:de.users[0].email}),o.jsx("button",{onClick:()=>We(de.users[0].email),className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Copy email to clipboard",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}):o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No email"}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Company: ",de.name,"  Created: ",new Date(de.gifted_at).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${de.account_status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:de.account_status==="active"?"Active":"Disabled"}),o.jsx("button",{onClick:()=>cn(de.id,de.account_status),className:`px-4 py-2 rounded-lg font-bold text-sm transition ${de.account_status==="active"?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:de.account_status==="active"?"Disable":"Activate"})]})]},de.id)})})]})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-4",children:"Password"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Change your password to keep your account secure."}),o.jsx("button",{onClick:()=>R(!0),className:"px-6 py-3 bg-brand-blue hover:bg-blue-700 text-white font-bold rounded-lg transition",children:"Change Password"})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>b(!1),children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl p-6 w-full max-w-md",onClick:de=>de.stopPropagation(),children:[o.jsx("h3",{className:"text-xl font-bold text-brand-red mb-4",children:"Cancel Subscription?"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to cancel your subscription? You'll continue to have access until the end of your current billing period."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>b(!1),disabled:h,className:"flex-1 bg-gray-500 text-white font-bold py-3 rounded-lg hover:bg-gray-600 transition",children:"Keep Subscription"}),o.jsx("button",{onClick:Qt,disabled:h,className:"flex-1 bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 transition disabled:opacity-70",children:h?"Cancelling...":"Yes, Cancel"})]})]})}),Q&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>we(!1),children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl p-4 sm:p-6 w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",onClick:de=>de.stopPropagation(),children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-brand-light-text dark:text-white mb-4 sm:mb-6",children:"Add Account"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Account Type"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx("button",{onClick:()=>ye("team"),className:`p-4 rounded-lg border-2 transition ${Ne==="team"?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-brand-blue"}`,children:o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white mb-1",children:"Team Member"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Joins your company  You see their data  Free"})]})}),o.jsx("button",{onClick:()=>ye("standalone"),className:`p-4 rounded-lg border-2 transition ${Ne==="standalone"?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-brand-blue"}`,children:o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white mb-1",children:"Standalone Account"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Own company  Private data  Paid"})]})})]})]}),Ne==="standalone"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Billing Method"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx("button",{onClick:()=>Ce("ghl"),className:`p-4 rounded-lg border-2 transition ${Re==="ghl"?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-brand-blue"}`,children:o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white mb-1",children:"I'll Bill Them (GHL)"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"You manage billing in GoHighLevel"})]})}),o.jsx("button",{onClick:()=>Ce("stripe"),className:`p-4 rounded-lg border-2 transition ${Re==="stripe"?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-brand-blue"}`,children:o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white mb-1",children:"They Pay Direct (Stripe)"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Automatic Stripe subscription"})]})})]})]}),Ne==="standalone"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Plan Tier"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[o.jsx("button",{onClick:()=>nt("solo"),className:`p-4 rounded-lg border-2 transition ${He==="solo"?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-brand-blue"}`,children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white mb-1",children:"Solo"}),o.jsx("p",{className:"text-lg font-bold text-brand-blue",children:"$39"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"1 user"})]})}),o.jsx("button",{onClick:()=>nt("team"),className:`p-4 rounded-lg border-2 transition ${He==="team"?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-brand-blue"}`,children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white mb-1",children:"Team"}),o.jsx("p",{className:"text-lg font-bold text-brand-blue",children:"$149"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"5 users"})]})}),o.jsx("button",{onClick:()=>nt("elite"),className:`p-4 rounded-lg border-2 transition ${He==="elite"?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-brand-blue"}`,children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"font-bold text-brand-light-text dark:text-white mb-1",children:"Elite"}),o.jsx("p",{className:"text-lg font-bold text-brand-blue",children:"$399"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"10 users"})]})})]})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"User Details"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Full Name"}),o.jsx("input",{type:"text",value:Le,onChange:de=>ce(de.target.value),placeholder:"John Doe",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-brand-ink text-brand-light-text dark:text-white focus:border-blue-500 focus:ring-0 transition"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:_e,onChange:de=>ie(de.target.value),placeholder:"john@example.com",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-brand-ink text-brand-light-text dark:text-white focus:border-blue-500 focus:ring-0 transition"})]}),Ne==="standalone"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Company Name"}),o.jsx("input",{type:"text",value:Se,onChange:de=>je(de.target.value),placeholder:"Acme Inc",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-brand-ink text-brand-light-text dark:text-white focus:border-blue-500 focus:ring-0 transition"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Password"}),o.jsx("input",{type:"password",value:Ye,onChange:de=>Fe(de.target.value),placeholder:"Set their password",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-brand-ink text-brand-light-text dark:text-white focus:border-blue-500 focus:ring-0 transition"})]})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx("button",{onClick:()=>we(!1),disabled:Je,className:"flex-1 bg-gray-500 text-white font-bold py-3 rounded-lg hover:bg-gray-600 transition",children:"Cancel"}),o.jsx("button",{onClick:ln,disabled:Je||!_e||!Le||!Ye||Ne==="standalone"&&!Se,className:"flex-1 bg-brand-blue text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:Je?"Creating...":"Create Account"})]})]})}),T&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>R(!1),children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl p-6 w-full max-w-md",onClick:de=>de.stopPropagation(),children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-4",children:"Change Password"}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:F?"text":"password",value:j,onChange:de=>I(de.target.value),placeholder:"Enter new password",className:"w-full px-4 py-3 pr-12 rounded-xl border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-brand-ink text-brand-light-text dark:text-white focus:border-blue-500 focus:ring-0 transition"}),o.jsx("button",{type:"button",onClick:()=>V(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:F?o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:K?"text":"password",value:D,onChange:de=>$(de.target.value),placeholder:"Confirm new password",className:"w-full px-4 py-3 pr-12 rounded-xl border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-brand-ink text-brand-light-text dark:text-white focus:border-blue-500 focus:ring-0 transition"}),o.jsx("button",{type:"button",onClick:()=>pe(!K),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:K?o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>R(!1),disabled:Y,className:"flex-1 bg-gray-500 text-white font-bold py-3 rounded-lg hover:bg-gray-600 transition",children:"Cancel"}),o.jsx("button",{onClick:Yt,disabled:Y||!j||!D,className:"flex-1 bg-brand-blue text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:Y?"Changing...":"Change Password"})]})]})})]})})},dae=({userId:t,companyId:e,userRole:n})=>{const[r,a]=_.useState(null),[i,l]=_.useState(""),[u,d]=_.useState(""),[h,m]=_.useState(!0),[g,b]=_.useState(!1),[v,k]=_.useState(null),[C,N]=_.useState(!1),T=n==="Admin";_.useEffect(()=>{R()},[e]);const R=async()=>{try{const{data:I,error:D}=await Xt.from("ghl_integrations").select("*").eq("company_id",e).single();if(D&&D.code!=="PGRST116")throw D;I&&(a(I),d(I.ghl_location_id||""))}catch(I){console.error("Error loading GHL integration:",I),k({type:"error",text:"Failed to load integration settings"})}finally{m(!1)}},E=async()=>{var D;if(!i&&!(r!=null&&r.ghl_api_key)){k({type:"error",text:"Please enter an API key first"});return}const I=u||(r==null?void 0:r.ghl_location_id);if(!I){k({type:"error",text:"Please enter a Location ID first"});return}N(!0),k(null);try{const $=i||(r==null?void 0:r.ghl_api_key),H=await fetch(`https://services.leadconnectorhq.com/locations/${I}`,{headers:{Authorization:`Bearer ${$}`,Version:"2021-07-28"}});if(H.ok){const F=((D=(await H.json()).location)==null?void 0:D.name)||"Unknown";k({type:"success",text:` Connection successful! Connected to location: ${F}`})}else{const z=await H.json().catch(()=>({}));k({type:"error",text:` Connection failed: ${z.message||"Invalid API key or Location ID"}`})}}catch($){k({type:"error",text:` Connection test failed: ${$.message||"Network error"}`})}finally{N(!1)}},P=async()=>{if(!T){k({type:"error",text:"Only admins can manage integrations"});return}if(!i){k({type:"error",text:"API key is required"});return}if(!u){k({type:"error",text:"Location ID is required"});return}b(!0),k(null);try{if(r){const{error:I}=await Xt.from("ghl_integrations").update({ghl_api_key:i,ghl_location_id:u||null,is_active:!0,updated_at:new Date().toISOString()}).eq("id",r.id);if(I)throw I}else{const{error:I}=await Xt.from("ghl_integrations").insert({company_id:e,ghl_api_key:i,ghl_location_id:u||null,is_active:!0});if(I)throw I}k({type:"success",text:" Integration saved successfully!"}),await R(),l("")}catch(I){console.error("Error saving integration:",I),k({type:"error",text:`Failed to save: ${I.message}`})}finally{b(!1)}},j=async()=>{if(!(!T||!r)&&confirm("Are you sure you want to disconnect GoHighLevel? This will stop all syncing.")){b(!0);try{const{error:I}=await Xt.from("ghl_integrations").update({is_active:!1}).eq("id",r.id);if(I)throw I;k({type:"success",text:"Integration disconnected"}),await R()}catch(I){k({type:"error",text:`Failed to disconnect: ${I.message}`})}finally{b(!1)}}};return h?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"text-lg",children:"Loading integration settings..."})}):o.jsx("div",{className:"max-w-4xl mx-auto p-8",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"GoHighLevel Integration"}),o.jsx("p",{className:"text-gray-600 mb-8",children:"Connect your GoHighLevel account to sync contacts, appointments, and revenue data."}),r&&o.jsx("div",{className:`mb-6 p-4 rounded-lg ${r.is_active?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:r.is_active?" Connected":" Disconnected"}),r.last_sync_at&&o.jsxs("div",{className:"text-sm text-gray-600",children:["Last synced: ",new Date(r.last_sync_at).toLocaleString()]})]}),T&&r.is_active&&o.jsx("button",{onClick:j,disabled:g,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:"Disconnect"})]})}),v&&o.jsx("div",{className:`mb-6 p-4 rounded-lg ${v.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:v.text}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GoHighLevel API Key"}),o.jsx("input",{type:"password",value:i,onChange:I=>l(I.target.value),disabled:!T,placeholder:r?"":"Enter your GHL Agency API Key",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"}),o.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Find this in your GHL account: ",o.jsx("strong",{children:"Settings  API"})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sub-Account Location ID ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:u,onChange:I=>d(I.target.value),disabled:!T,placeholder:"Enter your GHL Location ID",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Find this in your sub-account settings. Leave blank to use default location."})]}),T&&o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:E,disabled:C||!i&&!r,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Testing...":"Test Connection"}),o.jsx("button",{onClick:P,disabled:g||!i&&!r||!u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":r?"Update Integration":"Save Integration"})]}),!T&&o.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsx("p",{className:"text-yellow-800",children:" Only administrators can manage the GoHighLevel integration. Please contact your admin."})}),o.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"How It Works"}),o.jsxs("div",{className:"space-y-4 text-gray-700",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-2xl mr-3",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Add Prospects in MAT"}),"  Automatically creates contacts in GoHighLevel with ",o.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"mat-prospect"})," tag"]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-2xl mr-3",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Log Calls/Emails"}),"  Adds notes to the contact's activity timeline in GHL"]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-2xl mr-3",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Set Appointments"}),"  Syncs to GHL calendar and your Google Calendar"]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"text-2xl mr-3",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Close Deals in GHL"}),"  Revenue automatically updates in MAT dashboard"]})]})]})]})]})})},GM=({isOpen:t,onClose:e,onSuccess:n,user:r,existingAvatar:a})=>{const[i,l]=_.useState(1),[u,d]=_.useState(!1),[h,m]=_.useState(a||{avatar_name:"",industry:"",age_range:"",gender:"",education_level:"",marital_status:"",occupation:"",income_range:"",location:"",goals:[],fears:[],dreams:[],pain_points:[],desires:[],beliefs:[],buying_triggers:[],objections:[],preferred_content_types:[],social_platforms:[],relationships:"",daily_habits:"",media_consumption:"",expectations:"",obsessed_stalker_insights:"",deep_seeded_triggers:"",market_wants:""}),g=7,b=()=>{i<g&&l(i+1)},v=()=>{i>1&&l(i-1)},k=async()=>{try{d(!0);const T={company_id:r.company_id,user_id:r.id,assigned_to:r.id,avatar_name:h.avatar_name||"Unnamed Avatar",industry:h.industry||null,age_range:h.age_range||null,gender:h.gender||null,education_level:h.education_level||null,marital_status:h.marital_status||null,occupation:h.occupation||null,income_range:h.income_range||null,location:h.location||null,goals:h.goals||[],fears:h.fears||[],dreams:h.dreams||[],pain_points:h.pain_points||[],desires:h.desires||[],beliefs:h.beliefs||[],buying_triggers:h.buying_triggers||[],objections:h.objections||[],preferred_content_types:h.preferred_content_types||[],social_platforms:h.social_platforms||[],relationships:h.relationships||null,daily_habits:h.daily_habits||null,media_consumption:h.media_consumption||null,expectations:h.expectations||null,obsessed_stalker_insights:h.obsessed_stalker_insights||null,deep_seeded_triggers:h.deep_seeded_triggers||null,market_wants:h.market_wants||null,is_active:!0};let R;if(a){const{error:E}=await Ee.from("buyer_avatars").update(T).eq("id",a.id);R=E}else{const{error:E}=await Ee.from("buyer_avatars").insert([T]);R=E}if(R)throw R;n(),e(),l(1),m({})}catch(T){console.error("Error creating avatar:",T),alert("Failed to create avatar. Please try again.")}finally{d(!1)}},C=(T,R)=>{if(!R.trim())return;const E=h[T]||[];m({...h,[T]:[...E,R.trim()]})},N=(T,R)=>{const E=h[T]||[];m({...h,[T]:E.filter((P,j)=>j!==R)})};return t?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray max-w-3xl w-full my-8",children:[o.jsxs("div",{className:"border-b border-brand-light-border dark:border-brand-gray p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:"Create Dream Client Avatar"}),o.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:g}).map((T,R)=>o.jsx("div",{className:`flex-1 h-2 rounded-full transition-all ${R+1<=i?"bg-purple-600":"bg-gray-300 dark:bg-gray-700"}`},R))}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Step ",i," of ",g]})]}),o.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[i===1&&o.jsx(fae,{formData:h,setFormData:m}),i===2&&o.jsx(hae,{formData:h,setFormData:m}),i===3&&o.jsx(mae,{formData:h,addArrayItem:C,removeArrayItem:N}),i===4&&o.jsx(pae,{formData:h,addArrayItem:C,removeArrayItem:N}),i===5&&o.jsx(gae,{formData:h,addArrayItem:C,removeArrayItem:N,setFormData:m}),i===6&&o.jsx(yae,{formData:h,setFormData:m}),i===7&&o.jsx(bae,{formData:h})]}),o.jsxs("div",{className:"border-t border-brand-light-border dark:border-brand-gray p-6 flex justify-between",children:[o.jsx("button",{onClick:v,disabled:i===1,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-brand-light-text dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Back"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-brand-light-text dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:"Cancel"}),i<g?o.jsx("button",{onClick:b,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"Next"}):o.jsx("button",{onClick:k,disabled:u,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Creating...":"Create Avatar"})]})]})]})}):null},fae=({formData:t,setFormData:e})=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-2",children:"Basic Information"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Let's start with the basics about your ideal client."})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:["Avatar Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:t.avatar_name||"",onChange:n=>e({...t,avatar_name:n.target.value}),placeholder:"e.g., High-Earning Entrepreneur Sarah",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Industry"}),o.jsx("input",{type:"text",value:t.industry||"",onChange:n=>e({...t,industry:n.target.value}),placeholder:"e.g., Real Estate, E-commerce, Coaching",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent"})]})]}),hae=({formData:t,setFormData:e})=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-2",children:"Demographics"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Paint a picture of who they are."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Age Range"}),o.jsxs("select",{value:t.age_range||"",onChange:n=>e({...t,age_range:n.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600",children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"18-24",children:"18-24"}),o.jsx("option",{value:"25-34",children:"25-34"}),o.jsx("option",{value:"35-44",children:"35-44"}),o.jsx("option",{value:"45-54",children:"45-54"}),o.jsx("option",{value:"55-64",children:"55-64"}),o.jsx("option",{value:"65+",children:"65+"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Gender"}),o.jsxs("select",{value:t.gender||"",onChange:n=>e({...t,gender:n.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600",children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"Male",children:"Male"}),o.jsx("option",{value:"Female",children:"Female"}),o.jsx("option",{value:"Non-binary",children:"Non-binary"}),o.jsx("option",{value:"All",children:"All"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Education Level"}),o.jsxs("select",{value:t.education_level||"",onChange:n=>e({...t,education_level:n.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600",children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"High School",children:"High School"}),o.jsx("option",{value:"Some College",children:"Some College"}),o.jsx("option",{value:"Bachelor's Degree",children:"Bachelor's Degree"}),o.jsx("option",{value:"Master's Degree",children:"Master's Degree"}),o.jsx("option",{value:"Doctorate",children:"Doctorate"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Marital Status"}),o.jsxs("select",{value:t.marital_status||"",onChange:n=>e({...t,marital_status:n.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600",children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"Single",children:"Single"}),o.jsx("option",{value:"Married",children:"Married"}),o.jsx("option",{value:"Divorced",children:"Divorced"}),o.jsx("option",{value:"Widowed",children:"Widowed"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Occupation"}),o.jsx("input",{type:"text",value:t.occupation||"",onChange:n=>e({...t,occupation:n.target.value}),placeholder:"e.g., Business Owner, Marketing Director",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Income Range"}),o.jsxs("select",{value:t.income_range||"",onChange:n=>e({...t,income_range:n.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600",children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"Under $50k",children:"Under $50k"}),o.jsx("option",{value:"$50k-$100k",children:"$50k-$100k"}),o.jsx("option",{value:"$100k-$200k",children:"$100k-$200k"}),o.jsx("option",{value:"$200k-$500k",children:"$200k-$500k"}),o.jsx("option",{value:"$500k+",children:"$500k+"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Location"}),o.jsx("input",{type:"text",value:t.location||"",onChange:n=>e({...t,location:n.target.value}),placeholder:"e.g., Urban areas, Suburban, Nationwide",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"})]})]}),mae=({formData:t,addArrayItem:e,removeArrayItem:n})=>{const[r,a]=_.useState(""),[i,l]=_.useState("");return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-2",children:"Goals & Dreams"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"What do they want to achieve?"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Goals"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:r,onChange:u=>a(u.target.value),onKeyPress:u=>{u.key==="Enter"&&(e("goals",r),a(""))},placeholder:"Add a goal and press Enter",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("button",{onClick:()=>{e("goals",r),a("")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"Add"})]}),o.jsx("div",{className:"space-y-2",children:(t.goals||[]).map((u,d)=>o.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 dark:bg-purple-900/20 px-3 py-2 rounded-lg",children:[o.jsx("span",{className:"flex-1 text-sm text-brand-light-text dark:text-white",children:u}),o.jsx("button",{onClick:()=>n("goals",d),className:"text-red-500 hover:text-red-700",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},d))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Dreams"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:i,onChange:u=>l(u.target.value),onKeyPress:u=>{u.key==="Enter"&&(e("dreams",i),l(""))},placeholder:"Add a dream and press Enter",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("button",{onClick:()=>{e("dreams",i),l("")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"Add"})]}),o.jsx("div",{className:"space-y-2",children:(t.dreams||[]).map((u,d)=>o.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 dark:bg-purple-900/20 px-3 py-2 rounded-lg",children:[o.jsx("span",{className:"flex-1 text-sm text-brand-light-text dark:text-white",children:u}),o.jsx("button",{onClick:()=>n("dreams",d),className:"text-red-500 hover:text-red-700",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},d))})]})]})},pae=({formData:t,addArrayItem:e,removeArrayItem:n})=>{const[r,a]=_.useState(""),[i,l]=_.useState("");return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-2",children:"Fears & Pain Points"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"What keeps them up at night?"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Fears"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:r,onChange:u=>a(u.target.value),onKeyPress:u=>{u.key==="Enter"&&(e("fears",r),a(""))},placeholder:"Add a fear and press Enter",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("button",{onClick:()=>{e("fears",r),a("")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"Add"})]}),o.jsx("div",{className:"space-y-2",children:(t.fears||[]).map((u,d)=>o.jsxs("div",{className:"flex items-center gap-2 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg",children:[o.jsx("span",{className:"flex-1 text-sm text-brand-light-text dark:text-white",children:u}),o.jsx("button",{onClick:()=>n("fears",d),className:"text-red-500 hover:text-red-700",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},d))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Pain Points"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:i,onChange:u=>l(u.target.value),onKeyPress:u=>{u.key==="Enter"&&(e("pain_points",i),l(""))},placeholder:"Add a pain point and press Enter",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("button",{onClick:()=>{e("pain_points",i),l("")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"Add"})]}),o.jsx("div",{className:"space-y-2",children:(t.pain_points||[]).map((u,d)=>o.jsxs("div",{className:"flex items-center gap-2 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg",children:[o.jsx("span",{className:"flex-1 text-sm text-brand-light-text dark:text-white",children:u}),o.jsx("button",{onClick:()=>n("pain_points",d),className:"text-red-500 hover:text-red-700",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},d))})]})]})},gae=({formData:t,addArrayItem:e,removeArrayItem:n,setFormData:r})=>{const[a,i]=_.useState(""),[l,u]=_.useState(""),d=["Facebook","Instagram","LinkedIn","TikTok","Twitter","YouTube"],h=m=>{const g=t.social_platforms||[];g.includes(m)?r({...t,social_platforms:g.filter(b=>b!==m)}):r({...t,social_platforms:[...g,m]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-2",children:"Buying Behavior"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"What triggers them to buy?"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Buying Triggers"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:a,onChange:m=>i(m.target.value),onKeyPress:m=>{m.key==="Enter"&&(e("buying_triggers",a),i(""))},placeholder:"e.g., Urgency, Social proof, Limited availability",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("button",{onClick:()=>{e("buying_triggers",a),i("")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"Add"})]}),o.jsx("div",{className:"space-y-2",children:(t.buying_triggers||[]).map((m,g)=>o.jsxs("div",{className:"flex items-center gap-2 bg-green-50 dark:bg-green-900/20 px-3 py-2 rounded-lg",children:[o.jsx("span",{className:"flex-1 text-sm text-brand-light-text dark:text-white",children:m}),o.jsx("button",{onClick:()=>n("buying_triggers",g),className:"text-red-500 hover:text-red-700",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},g))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Common Objections"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:l,onChange:m=>u(m.target.value),onKeyPress:m=>{m.key==="Enter"&&(e("objections",l),u(""))},placeholder:"e.g., Too expensive, No time, Need to think about it",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("button",{onClick:()=>{e("objections",l),u("")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"Add"})]}),o.jsx("div",{className:"space-y-2",children:(t.objections||[]).map((m,g)=>o.jsxs("div",{className:"flex items-center gap-2 bg-yellow-50 dark:bg-yellow-900/20 px-3 py-2 rounded-lg",children:[o.jsx("span",{className:"flex-1 text-sm text-brand-light-text dark:text-white",children:m}),o.jsx("button",{onClick:()=>n("objections",g),className:"text-red-500 hover:text-red-700",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},g))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Active Social Platforms"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:d.map(m=>o.jsx("button",{onClick:()=>h(m),className:`px-4 py-2 rounded-lg border-2 transition ${(t.social_platforms||[]).includes(m)?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300"}`,children:m},m))})]})]})},yae=({formData:t,setFormData:e})=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-2",children:"Deep Insights"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sabri Suby's framework for obsessed stalker-level understanding."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Obsessed Stalker Insights"}),o.jsx("textarea",{value:t.obsessed_stalker_insights||"",onChange:n=>e({...t,obsessed_stalker_insights:n.target.value}),placeholder:"What would you know if you were obsessively studying this person? Their habits, preferences, daily routines...",rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Deep-Seeded Buying Triggers"}),o.jsx("textarea",{value:t.deep_seeded_triggers||"",onChange:n=>e({...t,deep_seeded_triggers:n.target.value}),placeholder:"What deep psychological triggers make them buy? Status, security, belonging, achievement...",rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"What Your Market REALLY Wants"}),o.jsx("textarea",{value:t.market_wants||"",onChange:n=>e({...t,market_wants:n.target.value}),placeholder:"Beyond features and benefits, what transformation are they truly seeking?",rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"})]})]}),bae=({formData:t})=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-2",children:"Review Your Dream Client"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Make sure everything looks good before creating."})]}),o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Avatar Name"}),o.jsx("p",{className:"text-lg font-bold text-brand-light-text dark:text-white",children:t.avatar_name||"Not set"})]}),t.industry&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Industry"}),o.jsx("p",{className:"text-brand-light-text dark:text-white",children:t.industry})]}),t.goals&&t.goals.length>0&&o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:["Goals (",t.goals.length,")"]}),o.jsx("ul",{className:"list-disc list-inside text-brand-light-text dark:text-white",children:t.goals.slice(0,3).map((e,n)=>o.jsx("li",{children:e},n))})]}),t.fears&&t.fears.length>0&&o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:["Fears (",t.fears.length,")"]}),o.jsx("ul",{className:"list-disc list-inside text-brand-light-text dark:text-white",children:t.fears.slice(0,3).map((e,n)=>o.jsx("li",{children:e},n))})]}),t.social_platforms&&t.social_platforms.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Social Platforms"}),o.jsx("p",{className:"text-brand-light-text dark:text-white",children:t.social_platforms.join(", ")})]})]}),o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[o.jsx("strong",{children:"Ready to dominate?"})," Once created, you can generate high-converting content tailored specifically to this avatar!"]})})]}),yn={starter:{max_avatars:2,max_posts_per_month:50,max_users:1,price:47},pro:{max_avatars:10,max_posts_per_month:200,max_users:3,price:97},agency:{max_users:10,price:197}};async function _l(t){try{const{data:e,error:n}=await Ee.from("user_subscriptions").select("*").eq("user_id",t).single();return n?(console.error("Error fetching subscription:",n),null):e}catch(e){return console.error("Error in getUserSubscription:",e),null}}async function Yc(t){try{const{count:e,error:n}=await Ee.from("buyer_avatars").select("*",{count:"exact",head:!0}).eq("user_id",t);if(n)throw n;const r=await _l(t);if(!r)return!1;const a=new Date(r.billing_cycle_start).toISOString(),i=new Date(r.billing_cycle_end).toISOString(),{count:l,error:u}=await Ee.from("generated_content").select("*",{count:"exact",head:!0}).eq("user_id",t).gte("created_at",a).lte("created_at",i);if(u)throw u;const{error:d}=await Ee.from("user_subscriptions").update({current_avatars:e||0,current_posts_this_month:l||0}).eq("user_id",t);if(d)throw d;return!0}catch(e){return console.error("Error syncing usage counts:",e),!1}}async function xae(t){try{await Yc(t);const e=await _l(t);return e?e.current_avatars>=e.max_avatars?{allowed:!1,reason:`You've reached your limit of ${e.max_avatars} avatars on the ${e.plan_tier} plan`}:{allowed:!0}:{allowed:!1,reason:"No subscription found"}}catch(e){return console.error("Error checking avatar limit:",e),{allowed:!1,reason:"Error checking limits"}}}async function vae(t){try{await Yc(t);const e=await _l(t);if(!e)return{allowed:!1,reason:"No subscription found"};if(e.current_posts_this_month>=e.max_posts_per_month){const n=new Date(e.next_reset_date).toLocaleDateString();return{allowed:!1,reason:`You've used ${e.current_posts_this_month}/${e.max_posts_per_month} posts this month. Resets on ${n}`}}return{allowed:!0}}catch(e){return console.error("Error checking content limit:",e),{allowed:!1,reason:"Error checking limits"}}}async function wae(t){try{const{error:e}=await Ee.rpc("increment_post_count",{p_user_id:t});return e&&await Yc(t),!0}catch(e){return console.error("Error incrementing post count:",e),await Yc(t),!1}}async function Sae(t){try{await Yc(t);const e=await _l(t);if(!e)return null;const n=e.current_avatars/e.max_avatars*100,r=e.current_posts_this_month/e.max_posts_per_month*100;return{avatars:{current:e.current_avatars,max:e.max_avatars,percentage:Math.min(n,100)},posts:{current:e.current_posts_this_month,max:e.max_posts_per_month,percentage:Math.min(r,100),resetsOn:new Date(e.next_reset_date).toLocaleDateString()},plan:e.plan_tier,canUpgrade:e.plan_tier!=="agency"}}catch(e){return console.error("Error getting usage summary:",e),null}}const _ae="AIzaSyDckvKJTvGuykfDjSnF2f2pwbTQGQfXd5s",kae=new Fj({apiKey:_ae}),Nae=({isOpen:t,onClose:e,avatar:n,user:r})=>{const[a,i]=_.useState("Facebook"),[l,u]=_.useState("PAS"),[d,h]=_.useState("Professional"),[m,g]=_.useState(""),[b,v]=_.useState(""),[k,C]=_.useState(""),[N,T]=_.useState(!1),[R,E]=_.useState(!1),[P,j]=_.useState(null),[I,D]=_.useState([]),[$,H]=_.useState(null),[z,F]=_.useState(""),[V,K]=_.useState(""),pe=`content-draft-${n.id}`;_.useEffect(()=>{if(t){const O=localStorage.getItem(pe);if(O)try{const Z=JSON.parse(O);j(Z.content),D(Z.images||[]),H(Z.selectedImageIndex),F(Z.customImagePrompt||"")}catch(Z){console.error("Error restoring draft:",Z)}}},[t,pe]),_.useEffect(()=>{if(P)try{const O={content:P,images:[],selectedImageIndex:$,customImagePrompt:z,timestamp:Date.now()};localStorage.setItem(pe,JSON.stringify(O))}catch(O){console.warn("localStorage quota exceeded - draft not saved:",O)}},[P,I,$,z,pe]);const Y={PAS:{name:"Problem-Agitate-Solution",description:"Hook with a problem, agitate the pain, present your solution",icon:""},BAB:{name:"Before-After-Bridge",description:"Show the before state, paint the after picture, bridge with your solution",icon:""},Dream:{name:"Dream Outcome",description:"Lead with the dream result they want to achieve",icon:""},SocialProof:{name:"Social Proof",description:"Leverage customer success stories and testimonials",icon:""},Custom:{name:"Custom Topic",description:"Specify your own topic or theme for the content",icon:""}},q=[{value:"leads",label:" Generate Leads",icon:""},{value:"sales",label:" Drive Sales",icon:""},{value:"awareness",label:" Build Awareness",icon:""},{value:"appointments",label:" Book Appointments",icon:""},{value:"offer",label:" Promote Offer",icon:""},{value:"engagement",label:" Increase Engagement",icon:""},{value:"custom",label:" Custom Objective",icon:""}],B=async()=>{var Z;const O=await vae(r.id);if(!O.allowed){alert(O.reason||"Cannot generate content");return}T(!0);try{const U=m==="custom"?b:((Z=q.find(_e=>_e.value===m))==null?void 0:Z.label)||"",J={Professional:"",Friendly:`

WRITING TONE: Friendly and conversational:
- Use warm, approachable language
- Write like you're talking to a friend
- Be personable and relatable
- Use "you" and "we" language
- Keep it light and engaging
- Show empathy and understanding`,Business:`

WRITING TONE: Business and corporate:
- Use polished, professional language
- Maintain authoritative credibility
- Focus on ROI and business outcomes
- Use industry terminology appropriately
- Be clear, concise, and strategic
- Project competence and expertise`,Bold:`

WRITING TONE: Bold and direct-response:
- Write with bold, attention-grabbing headlines
- Use specific numbers, dates, and details (never vague claims)
- Include reason-why explanations for every claim
- Create urgency and scarcity (limited time, limited availability)
- Be direct and no-nonsense - cut the fluff
- Use strong opinions and personality
- Include proof elements (case studies, testimonials, specific results)
- Make the call-to-action crystal clear and urgent
- Don't be afraid of longer copy if it converts`,Fiery:`

WRITING TONE: Fiery and aggressive:
- Lead with bold, provocative statements
- Focus on tangible, measurable outcomes
- Use urgency and FOMO (fear of missing out)
- Include social proof and authority
- Challenge the status quo
- Be confident and assertive
- Use short, punchy sentences
- Create immediate desire for action`,Confident:`

WRITING TONE: Confident and commanding:
- Write with absolute certainty and authority
- Use declarative statements
- Project expertise and mastery
- Be assertive without being aggressive
- Use power words and strong verbs
- Command attention and respect
- Show unwavering belief in your solution`};let oe="";l==="Custom"?oe=`Create a ${a} post about this specific topic: ${k}

Use your expertise to structure the content in the most effective way for this topic.`:oe=`Framework: ${Y[l].name} - ${Y[l].description}`;const me=`You are an expert copywriter specializing in high-converting ${a} content${l!=="Custom"?` using the ${Y[l].name} framework`:""}.${J[d]}

Create a ${a} ${l==="Custom"?"post":"ad"} for a ${n.industry||"business"} targeting this avatar:

Avatar: ${n.avatar_name}
Demographics: ${n.age_range||"N/A"} | ${n.gender||"N/A"} | ${n.income_range||"N/A"}
Goals: ${(n.goals||[]).slice(0,3).join(", ")}
Fears: ${(n.fears||[]).slice(0,3).join(", ")}
Pain Points: ${(n.pain_points||[]).slice(0,3).join(", ")}
Buying Triggers: ${(n.buying_triggers||[]).slice(0,3).join(", ")}

${l==="Custom"?oe:`Campaign Objective: ${U}
${oe}`}
${V?`
Image Requirements: ${V}`:""}

Return ONLY a JSON object with this exact structure:
{
  "headline": "Attention-grabbing headline (max 60 characters)",
  "body": "Main ad copy (3-5 paragraphs, use line breaks)",
  "cta": "Clear call-to-action (max 30 characters)",
  "imagePrompt": "Detailed, specific prompt for AI image generation${V?" that incorporates: "+V:` showing ${n.avatar_name} (${n.age_range}, ${n.gender}) in a realistic, relatable scenario that visually represents their main pain point or desired transformation. Avoid generic business imagery like charts or graphs. Focus on human emotion and specific context relevant to ${n.industry||"their industry"}`}"
}`,Q=(await kae.models.generateContent({model:"gemini-2.5-pro",contents:me,config:{responseMimeType:"application/json",responseSchema:{type:lt.OBJECT,properties:{headline:{type:lt.STRING},body:{type:lt.STRING},cta:{type:lt.STRING},imagePrompt:{type:lt.STRING}},required:["headline","body","cta","imagePrompt"]}}})).text.replace(/^```json\s*/,"").replace(/\s*```$/,""),we=JSON.parse(Q);j(we),D([]),H(null),F(we.imagePrompt),await wae(r.id)}catch(U){console.error("Error generating content:",U),alert("Failed to generate content. Please try again.")}finally{T(!1)}},ae=async()=>{if(P){E(!0);try{const O=z||P.imagePrompt,Z=[1,2,3].map(()=>Hj(O,"16:9")),U=await Promise.all(Z);D(U),H(null)}catch(O){console.error("Error generating images:",O),alert("Failed to generate images. Please try again.")}finally{E(!1)}}},X=async()=>{var O;if(P)try{const Z=m==="custom"?b:((O=q.find(oe=>oe.value===m))==null?void 0:O.label)||"",U={company_id:r.company_id,assigned_to:r.id,avatar_id:n.id,platform:a,content_type:"Ad",headline:P.headline,body_copy:P.body,call_to_action:P.cta,image_prompt:P.imagePrompt,image_url:null,hook_type:l,campaign_objective:Z,used:!1,performance_rating:null,version:1},{error:J}=await Ee.from("generated_content").insert([U]);if(J)throw J;localStorage.removeItem(pe),alert("Content saved to your Content Library!"),e()}catch(Z){console.error("Error saving content:",Z),alert("Failed to save content. Please try again.")}},ve=O=>{navigator.clipboard.writeText(O),alert("Copied to clipboard!")};if(!t)return null;const L=a&&l&&(l==="Custom"?k.trim():m!=="custom"?m:b.trim());return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 sm:p-4",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray max-w-6xl w-full max-h-[95vh] sm:max-h-[90vh] flex flex-col",children:[o.jsx("div",{className:"border-b border-brand-light-border dark:border-brand-gray p-4 sm:p-6 flex-shrink-0",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-brand-light-text dark:text-white",children:"Generate Content"}),o.jsxs("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1",children:["For: ",o.jsx("span",{className:"font-semibold text-purple-600",children:n.avatar_name})]})]}),o.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-6",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-bold text-brand-light-text dark:text-white mb-3 sm:mb-4",children:"1. Select Platform"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:["Facebook","Instagram","LinkedIn","TikTok"].map(O=>o.jsx("button",{onClick:()=>i(O),className:`px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 transition font-semibold text-sm sm:text-base ${a===O?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:border-purple-400"}`,children:O},O))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-bold text-brand-light-text dark:text-white mb-3 sm:mb-4",children:"2. Choose Framework"}),o.jsx("div",{className:"space-y-3",children:Object.keys(Y).map(O=>o.jsx("button",{onClick:()=>u(O),className:`w-full text-left px-4 py-3 rounded-lg border-2 transition ${l===O?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-2xl",children:Y[O].icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:`font-semibold ${l===O?"text-purple-700 dark:text-purple-300":"text-brand-light-text dark:text-white"}`,children:Y[O].name}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:Y[O].description})]})]})},O))}),l==="Custom"&&o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"What topic would you like to discuss?"}),o.jsx("textarea",{value:k,onChange:O=>C(O.target.value),placeholder:"e.g., How to handle objections in sales calls, Tips for better prospecting, Why follow-up is critical for closing deals, Introducing our new coaching program...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-brand-gray text-brand-light-text dark:text-white focus:border-purple-600 focus:outline-none resize-none",rows:3}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:' Be specific! Examples: "Prospecting tips for B2B coaches", "How to overcome price objections", "Why consistency beats talent in business"'})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-bold text-brand-light-text dark:text-white mb-3 sm:mb-4",children:"3. Writing Tone"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Professional","Friendly","Business","Bold","Fiery","Confident"].map(O=>o.jsxs("button",{onClick:()=>h(O),className:`px-4 py-3 rounded-lg border-2 transition text-center ${d===O?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 font-semibold":"border-gray-300 dark:border-gray-600 hover:border-purple-400 text-brand-light-text dark:text-white"}`,children:[O==="Professional"&&" ",O==="Friendly"&&" ",O==="Business"&&" ",O==="Bold"&&" ",O==="Fiery"&&" ",O==="Confident"&&" ",O]},O))}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[d==="Professional"&&"Balanced, credible, framework-focused",d==="Friendly"&&"Warm, conversational, approachable",d==="Business"&&"Corporate, polished, authoritative",d==="Bold"&&"Direct-response, urgent, no-nonsense",d==="Fiery"&&"Aggressive, provocative, results-driven",d==="Confident"&&"Assertive, expert, commanding"]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-bold text-brand-light-text dark:text-white mb-3 sm:mb-4",children:"4. Campaign Objective"}),o.jsx("div",{className:"space-y-2",children:q.map(O=>o.jsxs("button",{onClick:()=>g(O.value),className:`w-full text-left px-4 py-2 rounded-lg border-2 transition flex items-center gap-3 ${m===O.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:border-purple-400"}`,children:[o.jsx("span",{className:"text-xl",children:O.icon}),o.jsx("span",{className:"font-semibold",children:O.label.replace(/^[^\s]+ /,"")})]},O.value))}),m==="custom"&&o.jsx("div",{className:"mt-3",children:o.jsx("input",{type:"text",value:b,onChange:O=>v(O.target.value),placeholder:"Enter your custom objective...",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-2",children:"5. Image Description (Optional)"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Describe what you want in the image, or leave blank for AI to decide"}),o.jsx("textarea",{value:V,onChange:O=>K(O.target.value),placeholder:'e.g., "Include a team cheering for the winner" or "Stressed business owner at desk" or "Before/after transformation split screen"',rows:3,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600 resize-none"})]}),o.jsx("button",{onClick:B,disabled:N||!L,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:N?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generating..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generate Content"]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-4",children:"Preview"}),P?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border-2 border-gray-300 dark:border-gray-600 overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold text-brand-light-text dark:text-white",children:n.industry||"Your Business"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sponsored"})]})]})}),o.jsxs("div",{className:"p-4",children:[o.jsx("h4",{className:"font-bold text-lg text-brand-light-text dark:text-white mb-2",children:P.headline}),o.jsx("div",{className:"text-sm text-brand-light-text dark:text-white whitespace-pre-wrap mb-4",children:P.body})]}),$!==null&&I[$]?o.jsx("img",{src:I[$],alt:"Selected",className:"w-full border-y border-gray-200 dark:border-gray-700"}):I.length>0?o.jsxs("div",{className:"border-y border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-800/50",children:[o.jsx("p",{className:"text-sm font-semibold text-brand-light-text dark:text-white mb-3 text-center",children:"Choose your favorite image:"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:I.map((O,Z)=>o.jsxs("button",{onClick:()=>H(Z),className:`relative rounded-lg overflow-hidden border-2 transition ${$===Z?"border-purple-600 ring-2 ring-purple-600":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,children:[o.jsx("img",{src:O,alt:`Option ${Z+1}`,className:"w-full h-auto"}),$===Z&&o.jsx("div",{className:"absolute top-2 right-2 bg-purple-600 text-white rounded-full p-1",children:o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},Z))}),o.jsx("button",{onClick:ae,disabled:R,className:"w-full mt-3 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white rounded-lg text-sm font-semibold transition",children:" Generate 3 New Options"})]}):o.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-blue-100 dark:from-purple-900/20 dark:to-blue-900/20 p-8 text-center border-y border-gray-200 dark:border-gray-700",children:[o.jsx("svg",{className:"w-16 h-16 mx-auto text-purple-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Customize Image Prompt (Optional):"}),o.jsx("textarea",{value:z,onChange:O=>F(O.target.value),placeholder:"Describe the image you want...",className:"w-full px-3 py-2 text-xs border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:3})]}),o.jsx("button",{onClick:ae,disabled:R,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-semibold transition disabled:opacity-50",children:R?"Generating 3 Options...":" Generate 3 Image Options"})]}),o.jsx("div",{className:"p-4",children:o.jsx("button",{className:"w-full bg-purple-600 text-white font-bold py-2 px-4 rounded-lg",children:P.cta})}),o.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ve(`${P.headline}

${P.body}

${P.cta}`),className:"flex-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white font-semibold py-2 px-4 rounded-lg transition text-sm",children:" Copy Text"}),$!==null&&I[$]&&o.jsx("button",{onClick:()=>{const O=document.createElement("a");O.href=I[$],O.download=`${n.avatar_name.replace(/\s+/g,"-")}-post-image.png`,document.body.appendChild(O),O.click(),document.body.removeChild(O)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition text-sm",children:" Download Image"}),o.jsx("button",{onClick:X,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition text-sm",children:" Save to Library"})]})})]}):o.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-12 text-center",children:[o.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:'Select platform, framework, and objective, then click "Generate Content"'})]})]})]})}),o.jsxs("div",{className:"border-t border-brand-light-border dark:border-brand-gray p-6 flex justify-between flex-shrink-0",children:[o.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-brand-light-text dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:"Close"}),P&&o.jsx("button",{onClick:B,disabled:N,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white rounded-lg transition disabled:opacity-50",children:"Regenerate"})]})]})})},Cae=({isOpen:t,onClose:e,onSave:n})=>{const[r,a]=_.useState({facebook_url:"",instagram_url:"",linkedin_url:"",tiktok_url:""}),[i,l]=_.useState(!1),[u,d]=_.useState(!1);_.useEffect(()=>{t&&h()},[t]);const h=async()=>{l(!0);try{const{data:{user:g}}=await Ee.auth.getUser();if(!g)return;const{data:b,error:v}=await Ee.from("social_media_links").select("*").eq("user_id",g.id).single();if(v&&v.code!=="PGRST116")throw v;b&&a({facebook_url:b.facebook_url||"",instagram_url:b.instagram_url||"",linkedin_url:b.linkedin_url||"",tiktok_url:b.tiktok_url||""})}catch(g){console.error("Error fetching social media links:",g)}finally{l(!1)}},m=async()=>{d(!0);try{const{data:{user:g}}=await Ee.auth.getUser();if(!g)throw new Error("Not authenticated");const{data:b}=await Ee.from("users").select("company_id").eq("id",g.id).single();if(!b)throw new Error("User data not found");const{error:v}=await Ee.from("social_media_links").upsert({user_id:g.id,company_id:b.company_id,...r},{onConflict:"user_id"});if(v)throw v;alert("Social media links saved successfully!"),n(),e()}catch(g){console.error("Error saving social media links:",g),alert("Failed to save social media links")}finally{d(!1)}};return t?o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 p-6 flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:"Social Media Dashboard Links"}),o.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add your social media dashboard URLs for quick access when posting content. Click the platform icons in your content preview to instantly open your dashboard with content copied to clipboard!"}),i?o.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4].map(g=>o.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-800 rounded"},g))}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:[o.jsx("span",{className:"text-2xl",children:""}),"Facebook Business Suite"]}),o.jsx("input",{type:"url",value:r.facebook_url,onChange:g=>a({...r,facebook_url:g.target.value}),placeholder:"https://business.facebook.com/latest/posts",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Example: https://business.facebook.com/latest/posts"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:[o.jsx("span",{className:"text-2xl",children:""}),"Instagram Creator Studio"]}),o.jsx("input",{type:"url",value:r.instagram_url,onChange:g=>a({...r,instagram_url:g.target.value}),placeholder:"https://www.instagram.com/",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Example: https://www.instagram.com/ or https://business.facebook.com/creatorstudio"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:[o.jsx("span",{className:"text-2xl",children:""}),"LinkedIn"]}),o.jsx("input",{type:"url",value:r.linkedin_url,onChange:g=>a({...r,linkedin_url:g.target.value}),placeholder:"https://www.linkedin.com/feed/",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Example: https://www.linkedin.com/feed/"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:[o.jsx("span",{className:"text-2xl",children:""}),"TikTok Creator Center"]}),o.jsx("input",{type:"url",value:r.tiktok_url,onChange:g=>a({...r,tiktok_url:g.target.value}),placeholder:"https://www.tiktok.com/creator-center/content",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Example: https://www.tiktok.com/creator-center/content"})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 p-6 flex justify-end gap-3",children:[o.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-brand-light-text dark:text-white hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:"Cancel"}),o.jsx("button",{onClick:m,disabled:u,className:"px-6 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white font-semibold transition disabled:opacity-50",children:u?"Saving...":"Save Links"})]})]})}):null},Eae=({isOpen:t,onClose:e,content:n,onUpdate:r})=>{const[a,i]=_.useState(n.performance_rating),[l,u]=_.useState(!1),[d,h]=_.useState(null),[m,g]=_.useState(!1);_.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{const{data:{user:E}}=await Ee.auth.getUser();if(!E)return;const{data:P,error:j}=await Ee.from("social_media_links").select("*").eq("user_id",E.id).single();if(j&&j.code!=="PGRST116")throw j;h(P)}catch(E){console.error("Error fetching social links:",E)}},v=async E=>{i(E),u(!0);try{const{error:P}=await Ee.from("generated_content").update({performance_rating:E}).eq("id",n.id);if(P)throw P;r()}catch(P){console.error("Error updating rating:",P),alert("Failed to update rating")}finally{u(!1)}},k=async()=>{u(!0);try{const{error:E}=await Ee.from("generated_content").update({used:!n.used}).eq("id",n.id);if(E)throw E;r()}catch(E){console.error("Error updating used status:",E),alert("Failed to update status")}finally{u(!1)}},C=()=>{const E=`${n.headline}

${n.body_copy}

${n.call_to_action}`;navigator.clipboard.writeText(E),alert("Content copied to clipboard!")},N=E=>{const P=`${n.headline}

${n.body_copy}

${n.call_to_action}`;navigator.clipboard.writeText(P);let j="";if(!d){g(!0);return}switch(E){case"Facebook":j=d.facebook_url||"https://business.facebook.com/latest/posts";break;case"Instagram":j=d.instagram_url||"https://www.instagram.com/";break;case"LinkedIn":j=d.linkedin_url||"https://www.linkedin.com/feed/";break;case"TikTok":j=d.tiktok_url||"https://www.tiktok.com/creator-center/content";break}if(!j){g(!0);return}window.open(j,"_blank"),alert(`Content copied! Opening ${E} dashboard...`)},T=async()=>{if(confirm("Are you sure you want to delete this content?")){u(!0);try{const{error:E}=await Ee.from("generated_content").delete().eq("id",n.id);if(E)throw E;r(),e()}catch(E){console.error("Error deleting content:",E),alert("Failed to delete content")}finally{u(!1)}}};if(!t)return null;const R={Facebook:"",Instagram:"",LinkedIn:"",TikTok:""};return o.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray max-w-3xl w-full max-h-[90vh] flex flex-col",children:[o.jsx("div",{className:"border-b border-brand-light-border dark:border-brand-gray p-6 flex-shrink-0",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:R[n.platform]||""}),o.jsxs("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:[n.platform," Ad"]}),n.used&&o.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 text-xs font-semibold rounded",children:"POSTED"})]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[n.campaign_objective&&`${n.campaign_objective}  `,"Created ",new Date(n.created_at).toLocaleDateString()]})]}),o.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border-2 border-gray-300 dark:border-gray-600 overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold text-brand-light-text dark:text-white",children:"Your Business"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sponsored"})]})]})}),o.jsxs("div",{className:"p-4",children:[o.jsx("h4",{className:"font-bold text-lg text-brand-light-text dark:text-white mb-2",children:n.headline}),o.jsx("div",{className:"text-sm text-brand-light-text dark:text-white whitespace-pre-wrap mb-4",children:n.body_copy})]}),n.image_url?o.jsx("img",{src:n.image_url,alt:"Ad visual",className:"w-full border-y border-gray-200 dark:border-gray-700"}):o.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-blue-100 dark:from-purple-900/20 dark:to-blue-900/20 p-8 text-center border-y border-gray-200 dark:border-gray-700",children:[o.jsx("svg",{className:"w-16 h-16 mx-auto text-purple-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-semibold mb-1",children:" Image saved to your computer"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:n.image_prompt||"Images are downloaded to your hard drive to save storage costs"})]}),o.jsx("div",{className:"p-4",children:o.jsx("button",{className:"w-full bg-purple-600 text-white font-bold py-2 px-4 rounded-lg",children:n.call_to_action})})]}),o.jsxs("div",{className:"mt-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-brand-light-text dark:text-white mb-2",children:"Rate Performance (1-10)"}),o.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(E=>o.jsx("button",{onClick:()=>v(E),disabled:l,className:`flex-1 py-2 rounded-lg font-semibold transition ${a===E?"bg-purple-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-purple-100 dark:hover:bg-purple-900/20"} ${l?"opacity-50 cursor-not-allowed":""}`,children:E},E))}),a&&o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Current rating: ",o.jsxs("span",{className:"font-semibold text-purple-600",children:[a,"/10"]})]})]})]}),o.jsxs("div",{className:"border-t border-brand-light-border dark:border-brand-gray p-6 flex-shrink-0",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-semibold text-brand-light-text dark:text-white",children:"Quick Post To:"}),o.jsx("button",{onClick:()=>g(!0),className:"text-xs text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300",children:" Configure Links"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>N("Facebook"),className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition",children:[o.jsx("span",{className:"text-xl",children:""}),"Facebook"]}),o.jsxs("button",{onClick:()=>N("Instagram"),className:"flex-1 flex items-center justify-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-2 px-4 rounded-lg transition",children:[o.jsx("span",{className:"text-xl",children:""}),"Instagram"]}),o.jsxs("button",{onClick:()=>N("LinkedIn"),className:"flex-1 flex items-center justify-center gap-2 bg-blue-700 hover:bg-blue-800 text-white font-semibold py-2 px-4 rounded-lg transition",children:[o.jsx("span",{className:"text-xl",children:""}),"LinkedIn"]}),o.jsxs("button",{onClick:()=>N("TikTok"),className:"flex-1 flex items-center justify-center gap-2 bg-black hover:bg-gray-900 text-white font-semibold py-2 px-4 rounded-lg transition",children:[o.jsx("span",{className:"text-xl",children:""}),"TikTok"]})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:C,className:"flex-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white font-semibold py-2 px-4 rounded-lg transition",children:" Copy Text"}),o.jsx("button",{onClick:k,disabled:l,className:`flex-1 font-semibold py-2 px-4 rounded-lg transition ${n.used?"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:n.used?" Posted":" Mark as Posted"}),o.jsx("button",{onClick:T,disabled:l,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition disabled:opacity-50",children:" Delete"})]})]})]}),o.jsx(Cae,{isOpen:m,onClose:()=>g(!1),onSave:b})]})},Tae=({avatarId:t})=>{const[e,n]=_.useState([]),[r,a]=_.useState(!0),[i,l]=_.useState(null),[u,d]=_.useState(!1),h={Facebook:"",Instagram:"",LinkedIn:"",TikTok:""},m=async()=>{try{const{data:C,error:N}=await Ee.from("generated_content").select("*").eq("avatar_id",t).order("created_at",{ascending:!1});if(N)throw N;n(C||[])}catch(C){console.error("Error fetching content:",C)}finally{a(!1)}};_.useEffect(()=>{m()},[t]);const g=C=>{l(C),d(!0)},b=()=>{d(!1),l(null)},v=()=>{m()},k=async(C,N)=>{try{const{error:T}=await Ee.from("generated_content").update({performance_rating:N}).eq("id",C);if(T)throw T;m()}catch(T){console.error("Error updating rating:",T),alert("Failed to update rating")}};return r?o.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:o.jsxs("div",{className:"animate-pulse flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded"}),o.jsx("div",{className:"flex-1 h-4 bg-gray-300 dark:bg-gray-700 rounded"})]})}):e.length===0?o.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg text-center",children:o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:'No content generated yet. Click "Generate Content" to create your first post!'})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:["Saved Content (",e.length,")"]}),e.map(C=>o.jsx("div",{className:`border rounded-lg p-3 transition ${C.used?"bg-purple-50 dark:bg-purple-900/10 border-purple-300 dark:border-purple-700/50":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-purple-400 dark:hover:border-purple-600"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("span",{className:"text-2xl",children:h[C.platform]||""})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"text-sm font-semibold text-brand-light-text dark:text-white truncate",children:C.headline}),C.used&&o.jsx("svg",{className:"flex-shrink-0 w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[new Date(C.created_at).toLocaleDateString(),C.campaign_objective&&`  ${C.campaign_objective}`]})]}),o.jsx("div",{className:"flex-shrink-0",children:o.jsxs("select",{value:C.performance_rating||"",onChange:N=>k(C.id,parseInt(N.target.value)),className:"text-xs px-2 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-brand-light-text dark:text-white focus:ring-2 focus:ring-purple-600",children:[o.jsx("option",{value:"",children:"Rate"}),[1,2,3,4,5,6,7,8,9,10].map(N=>o.jsxs("option",{value:N,children:[" ",N]},N))]})}),o.jsx("div",{className:"flex-shrink-0",children:o.jsx("button",{onClick:()=>g(C),className:`px-3 py-1 text-xs font-semibold rounded transition ${C.used?"bg-purple-500 hover:bg-purple-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:"Open"})})]})},C.id))]}),i&&o.jsx(Eae,{isOpen:u,onClose:b,content:i,onUpdate:v})]})},Aae=({isOpen:t,onClose:e,avatar:n})=>t?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray max-w-4xl w-full max-h-[90vh] flex flex-col",children:[o.jsx("div",{className:"border-b border-brand-light-border dark:border-brand-gray p-6 flex-shrink-0",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:n.avatar_image_url?o.jsx("img",{src:n.avatar_image_url,alt:n.avatar_name,className:"w-full h-full rounded-full object-cover"}):o.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:n.avatar_name}),n.industry&&o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:n.industry})]})]}),o.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-4",children:"Demographics"}),o.jsxs("div",{className:"space-y-3",children:[n.age_range&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Age Range"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:n.age_range})]}),n.gender&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Gender"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:n.gender})]}),n.income_range&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Income Range"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:n.income_range})]}),n.education&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Education"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:n.education})]}),n.marital_status&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Marital Status"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:n.marital_status})]}),n.occupation&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:n.occupation})]}),n.location&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Location"}),o.jsx("p",{className:"text-brand-light-text dark:text-white font-medium",children:n.location})]})]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-4",children:"Goals & Dreams"}),n.goals&&n.goals.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Goals:"}),o.jsx("ul",{className:"space-y-2",children:n.goals.map((r,a)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 mt-1",children:""}),o.jsx("span",{className:"flex-1",children:r})]},a))})]}),n.dreams&&n.dreams.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Dreams:"}),o.jsx("ul",{className:"space-y-2",children:n.dreams.map((r,a)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 mt-1",children:""}),o.jsx("span",{className:"flex-1",children:r})]},a))})]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-4",children:"Fears & Pain Points"}),n.fears&&n.fears.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fears:"}),o.jsx("ul",{className:"space-y-2",children:n.fears.map((r,a)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx("span",{className:"text-red-500 mt-1",children:""}),o.jsx("span",{className:"flex-1",children:r})]},a))})]}),n.pain_points&&n.pain_points.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Pain Points:"}),o.jsx("ul",{className:"space-y-2",children:n.pain_points.map((r,a)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx("span",{className:"text-orange-500 mt-1",children:""}),o.jsx("span",{className:"flex-1",children:r})]},a))})]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-4",children:"Buying Behavior"}),n.buying_triggers&&n.buying_triggers.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Buying Triggers:"}),o.jsx("ul",{className:"space-y-2",children:n.buying_triggers.map((r,a)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx("span",{className:"text-green-600 mt-1",children:""}),o.jsx("span",{className:"flex-1",children:r})]},a))})]}),n.objections&&n.objections.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Common Objections:"}),o.jsx("ul",{className:"space-y-2",children:n.objections.map((r,a)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-600 mt-1",children:""}),o.jsx("span",{className:"flex-1",children:r})]},a))})]}),n.social_platforms&&n.social_platforms.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Active Platforms:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:n.social_platforms.map((r,a)=>o.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 text-xs font-semibold rounded-full",children:r},a))})]})]}),n.deep_insights&&o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 md:col-span-2",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white mb-4",children:"Deep Insights"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:n.deep_insights})]})]})}),o.jsx("div",{className:"border-t border-brand-light-border dark:border-brand-gray p-6 flex justify-end flex-shrink-0",children:o.jsx("button",{onClick:e,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition",children:"Close"})})]})}):null,jae=({user:t})=>{const[e,n]=_.useState([]),[r,a]=_.useState(!0),[i,l]=_.useState(!1),[u,d]=_.useState(null),[h,m]=_.useState(!1),[g,b]=_.useState("pro");_.useEffect(()=>{k(),v()},[t]);const v=async()=>{const C=await _l(t.id);C&&b(C.plan_tier)},k=async()=>{try{a(!0);let C=Ee.from("buyer_avatars").select("*").eq("is_active",!0).order("created_at",{ascending:!1});t.role==="admin"?C=C.eq("company_id",t.company_id):C=C.eq("assigned_to",t.id);const{data:N,error:T}=await C;if(T)throw T;n(N||[])}catch(C){console.error("Error fetching avatars:",C)}finally{a(!1)}};return o.jsxs("div",{className:"min-h-screen bg-brand-light-bg dark:bg-brand-ink p-3 sm:p-6",children:[o.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-brand-light-text dark:text-white mb-2",children:"Dream Client Studio"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Create detailed buyer avatars and generate high-converting content that attracts your ideal clients."})]}),o.jsxs("button",{onClick:async()=>{const C=await xae(t.id);C.allowed?(l(!0),d(null)):d(C.reason||"Cannot create avatar")},className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 sm:py-3 px-4 sm:px-6 rounded-lg transition-all duration-200 flex items-center gap-2 shadow-lg text-sm sm:text-base w-full sm:w-auto justify-center",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Dream Avatar"]})]})}),u&&o.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-600 p-4 rounded-r-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("svg",{className:"w-6 h-6 text-red-600 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-bold text-red-800 dark:text-red-400 mb-1",children:"Limit Reached"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:u}),o.jsx("button",{onClick:()=>{m(!0),d(null)},className:"mt-3 text-sm font-semibold text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 underline",children:"View Plans & Upgrade "})]}),o.jsx("button",{onClick:()=>d(null),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 ml-4",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),r&&o.jsx("div",{className:"max-w-7xl mx-auto flex justify-center items-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}),!r&&e.length===0&&o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-12 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx("svg",{className:"w-10 h-10 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white mb-3",children:"Create Your First Dream Client Avatar"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Build a detailed profile of your ideal client to generate laser-focused content that attracts quality leads."}),o.jsxs("button",{onClick:()=>l(!0),className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-8 rounded-lg transition-all duration-200 inline-flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Dream Avatar"]})]})}),!r&&e.length>0&&o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(C=>o.jsx(Pae,{avatar:C,onRefresh:k,user:t},C.id))})}),o.jsx(GM,{isOpen:i,onClose:()=>l(!1),onSuccess:k,user:t})]})},Pae=({avatar:t,user:e,onRefresh:n})=>{const[r,a]=_.useState(!1),[i,l]=_.useState(!1),[u,d]=_.useState(!1),[h,m]=_.useState(!1),[g,b]=_.useState(!1),[v,k]=_.useState(!1),C=async()=>{try{k(!0);const{error:N}=await Ee.from("buyer_avatars").update({is_active:!1}).eq("id",t.id);if(N)throw N;b(!1),n()}catch(N){console.error("Error deleting avatar:",N),alert("Failed to delete avatar. Please try again.")}finally{k(!1)}};return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray hover:shadow-lg transition-all duration-200 hover:border-purple-500",children:[o.jsxs("div",{className:"flex items-start gap-4 p-6 cursor-pointer",onClick:()=>a(!r),children:[o.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.avatar_image_url?o.jsx("img",{src:t.avatar_image_url,alt:t.avatar_name,className:"w-full h-full rounded-full object-cover"}):o.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-light-text dark:text-white truncate mb-1",children:t.avatar_name}),t.industry&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:t.industry})]}),o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:`w-6 h-6 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r&&o.jsxs("div",{className:"px-6 pb-6",children:[o.jsxs("div",{className:"space-y-2 mb-4",children:[t.age_range&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Age:"}),o.jsx("span",{className:"text-brand-light-text dark:text-white font-medium",children:t.age_range})]}),t.income_range&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Income:"}),o.jsx("span",{className:"text-brand-light-text dark:text-white font-medium",children:t.income_range})]})]}),t.goals&&t.goals.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Top Goals:"}),o.jsx("ul",{className:"space-y-1",children:t.goals.slice(0,3).map((N,T)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 mt-1",children:""}),o.jsx("span",{className:"flex-1",children:N})]},T))})]}),t.fears&&t.fears.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Top Fears:"}),o.jsx("ul",{className:"space-y-1",children:t.fears.slice(0,3).map((N,T)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx("span",{className:"text-red-500 mt-1",children:""}),o.jsx("span",{className:"flex-1",children:N})]},T))})]}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("button",{onClick:()=>l(!0),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition text-sm",children:"Generate Content"}),o.jsx("button",{onClick:()=>d(!0),className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white font-semibold py-2 px-4 rounded-lg transition text-sm",children:"View Full"}),o.jsx("button",{onClick:()=>m(!0),className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white font-semibold py-2 px-4 rounded-lg transition text-sm",children:"Edit"})]}),o.jsxs("button",{onClick:()=>b(!0),className:"w-full bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 font-semibold py-2 px-4 rounded-lg transition text-sm flex items-center justify-center gap-2 border border-red-200 dark:border-red-800",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Avatar"]})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6 max-w-md w-full",children:[o.jsx("h3",{className:"text-xl font-bold text-brand-light-text dark:text-white mb-3",children:"Delete Avatar?"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",o.jsx("strong",{children:t.avatar_name}),"? This will also delete all associated content. This action cannot be undone."]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>b(!1),disabled:v,className:"flex-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white font-semibold py-2 px-4 rounded-lg transition",children:"Cancel"}),o.jsx("button",{onClick:C,disabled:v,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),o.jsx(Tae,{avatarId:t.id}),o.jsx(Aae,{isOpen:u,onClose:()=>d(!1),avatar:t}),o.jsx(GM,{isOpen:h,onClose:()=>m(!1),onSuccess:()=>{m(!1),n()},user:e,existingAvatar:t}),i&&o.jsx(Nae,{isOpen:i,onClose:()=>l(!1),avatar:t,user:e})]})},pn={revenue:{color:"#10B981",yAxisId:"left",strokeWidth:4,label:"Revenue ($)"},appointments:{color:"#3B82F6",yAxisId:"right",strokeWidth:3,label:"Appointments"},calls:{color:"#8B5CF6",yAxisId:"right",strokeWidth:3,label:"Calls"},posts:{color:"#EC4899",yAxisId:"right",strokeWidth:3,label:"Posts Created"},avatars:{color:"#F59E0B",yAxisId:"right",strokeWidth:3,label:"Avatars Created"}},Iae=({active:t,payload:e,label:n})=>t&&e&&e.length?o.jsxs("div",{className:"bg-white dark:bg-brand-navy p-4 rounded-lg shadow-lg border-2 border-gray-200 dark:border-brand-gray",children:[o.jsx("p",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:n}),e.map((r,a)=>o.jsxs("p",{style:{color:r.color},className:"text-sm font-medium",children:[r.name,": ",r.name==="Revenue ($)"?`$${r.value.toLocaleString()}`:r.value]},a))]}):null,Rae=({userId:t,allData:e,transactions:n,contentData:r,avatarsData:a})=>{const[i,l]=_.useState("week"),[u,d]=_.useState(""),[h,m]=_.useState(""),[g,b]=_.useState({revenue:!0,appointments:!0,calls:!0,posts:!0,avatars:!1}),v=E=>{b(P=>({...P,[E]:!P[E]}))},k=_.useMemo(()=>{const E=new Date;let P,j=new Date(E);return i==="week"?(P=new Date(E),P.setDate(E.getDate()-6)):i==="month"?(P=new Date(E),P.setDate(E.getDate()-29)):u&&h?(P=new Date(u),j=new Date(h)):(P=new Date(E),P.setDate(E.getDate()-6)),{start:P,end:j}},[i,u,h]),C=_.useMemo(()=>{const E=[],{start:P,end:j}=k,I=new Date(P);for(;I<=j;){const D=I.toISOString().split("T")[0],$=e[D];let H=0,z=0,F=0,V=0,K=0;$&&(H=($.prospectingContacts||[]).filter(Y=>Y.prospecting.SW||Y.prospecting.NA||Y.prospecting.LM).length,z=($.prospectingContacts||[]).filter(Y=>Y.prospecting.SA).length,(H>0||z>0)&&console.log(`${D}: Calls=${H}, Appointments=${z}`,$.prospectingContacts)),F=n.filter(Y=>Y.date===D&&Y.user_id===t).reduce((Y,q)=>Y+q.amount,0),V=r.filter(Y=>new Date(Y.created_at).toISOString().split("T")[0]===D&&Y.used===!0).length,K=a.filter(Y=>new Date(Y.created_at).toISOString().split("T")[0]===D).length,E.push({date:I.toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:F,appointments:z,calls:H,posts:V,avatars:K}),I.setDate(I.getDate()+1)}return E},[k,e,n,r,a,t]),N=Object.values(g).some(E=>E),T=g.revenue?pn.revenue.color:"#10B981",R=g.appointments?pn.appointments.color:g.calls?pn.calls.color:"#3B82F6";return o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white mb-2",children:" Marketing Performance Trends"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track content activity  leads  revenue correlation"})]}),o.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-end",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>l("week"),className:`px-4 py-2 rounded-lg font-bold transition ${i==="week"?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:"Week"}),o.jsx("button",{onClick:()=>l("month"),className:`px-4 py-2 rounded-lg font-bold transition ${i==="month"?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:"Month"}),o.jsx("button",{onClick:()=>l("custom"),className:`px-4 py-2 rounded-lg font-bold transition ${i==="custom"?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-gray-700 dark:text-gray-300"}`,children:"Custom"})]}),i==="custom"&&o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"date",value:u,onChange:E=>d(E.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-brand-gray bg-white dark:bg-brand-navy text-brand-light-text dark:text-white"}),o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"to"}),o.jsx("input",{type:"date",value:h,onChange:E=>m(E.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-brand-gray bg-white dark:bg-brand-navy text-brand-light-text dark:text-white"})]})]}),o.jsx("div",{className:"mb-6 flex flex-wrap gap-3",children:Object.entries(pn).map(([E,P])=>o.jsxs("button",{onClick:()=>v(E),className:`px-4 py-2 rounded-lg font-bold transition flex items-center gap-2 ${g[E]?"opacity-100":"opacity-40"}`,style:{backgroundColor:g[E]?P.color:"#E5E7EB",color:g[E]?"white":"#6B7280"},children:[o.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:P.color}}),P.label]},E))}),N?C.length===0?o.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-50 dark:bg-brand-gray/20 rounded-lg",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No data available for the selected period"})}):o.jsx("div",{className:"bg-white dark:bg-brand-gray/20 rounded-lg p-4",children:o.jsx(ex,{width:"100%",height:400,children:o.jsxs(pv,{data:C,margin:{top:20,right:50,left:50,bottom:20},children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),o.jsx(Vh,{strokeDasharray:"3 3",stroke:"#E2E8F0",className:"dark:opacity-20"}),o.jsx(Wh,{dataKey:"date",stroke:"#64748B",style:{fontSize:12,fontWeight:600},angle:-45,textAnchor:"end",height:80}),o.jsx(Bs,{yAxisId:"left",stroke:T,style:{fontSize:12,fontWeight:600},tickFormatter:E=>`$${E.toLocaleString()}`,label:{value:"Revenue ($)",angle:-90,position:"insideLeft",style:{fill:T,fontWeight:600}}}),o.jsx(Bs,{yAxisId:"right",orientation:"right",stroke:R,style:{fontSize:12,fontWeight:600},label:{value:"Count",angle:90,position:"insideRight",style:{fill:R,fontWeight:600}}}),o.jsx(nv,{content:o.jsx(Iae,{})}),g.revenue&&o.jsx(Fn,{yAxisId:"left",type:"monotone",dataKey:"revenue",stroke:pn.revenue.color,strokeWidth:pn.revenue.strokeWidth,dot:{r:6,fill:pn.revenue.color,strokeWidth:2,stroke:"#fff"},activeDot:{r:8},name:"Revenue ($)"}),g.appointments&&o.jsx(Fn,{yAxisId:"right",type:"monotone",dataKey:"appointments",stroke:pn.appointments.color,strokeWidth:pn.appointments.strokeWidth,dot:{r:5,fill:pn.appointments.color,strokeWidth:2,stroke:"#fff"},activeDot:{r:7},name:"Appointments"}),g.calls&&o.jsx(Fn,{yAxisId:"right",type:"monotone",dataKey:"calls",stroke:pn.calls.color,strokeWidth:pn.calls.strokeWidth,dot:{r:5,fill:pn.calls.color,strokeWidth:2,stroke:"#fff"},activeDot:{r:7},name:"Calls"}),g.posts&&o.jsx(Fn,{yAxisId:"right",type:"monotone",dataKey:"posts",stroke:pn.posts.color,strokeWidth:pn.posts.strokeWidth,dot:{r:5,fill:pn.posts.color,strokeWidth:2,stroke:"#fff"},activeDot:{r:7},name:"Posts Created"}),g.avatars&&o.jsx(Fn,{yAxisId:"right",type:"monotone",dataKey:"avatars",stroke:pn.avatars.color,strokeWidth:pn.avatars.strokeWidth,dot:{r:5,fill:pn.avatars.color,strokeWidth:2,stroke:"#fff"},activeDot:{r:7},name:"Avatars Created"})]})})}):o.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-50 dark:bg-brand-gray/20 rounded-lg",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"Select at least one metric to display the chart"})}),o.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(pn).map(([E,P])=>{const j=C.reduce((D,$)=>D+($[E]||0),0),I=C.length>0?(j/C.length).toFixed(1):"0";return o.jsxs("div",{className:"p-4 rounded-lg border-l-4",style:{borderColor:P.color},children:[o.jsx("div",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-1",children:P.label}),o.jsx("div",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:E==="revenue"?`$${j.toLocaleString()}`:j}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Avg: ",E==="revenue"?`$${parseFloat(I).toLocaleString()}`:I,"/day"]})]},E)})})]})},Mae=({user:t})=>{const[e,n]=_.useState({totalAvatars:0,totalContentGenerated:0,totalContentPosted:0,overallAvgRating:null}),[r,a]=_.useState([]),[i,l]=_.useState([]),[u,d]=_.useState([]),[h,m]=_.useState(!0),[g,b]=_.useState({}),[v,k]=_.useState([]),[C,N]=_.useState([]),[T,R]=_.useState([]);_.useEffect(()=>{E()},[t.id]);const E=async()=>{m(!0);try{const{data:P,error:j}=await Ee.from("buyer_avatars").select("*").eq("assigned_to",t.id).order("created_at",{ascending:!1});if(j)throw j;const{data:I,error:D}=await Ee.from("generated_content").select("*").eq("assigned_to",t.id);if(D)throw D;const $=(P==null?void 0:P.length)||0,H=(I==null?void 0:I.length)||0,z=(I==null?void 0:I.filter(Z=>Z.used))||[],F=z.length,V=z.map(Z=>Z.performance_rating).filter(Z=>Z!=null),K=V.length>0?V.reduce((Z,U)=>Z+U,0)/V.length:null;n({totalAvatars:$,totalContentGenerated:H,totalContentPosted:F,overallAvgRating:K});const pe=(P||[]).map(Z=>{const U=(I==null?void 0:I.filter(me=>me.avatar_id===Z.id))||[],J=U.filter(me=>me.used),oe=J.map(me=>me.performance_rating).filter(me=>me!=null);return{avatar:Z,contentGenerated:U.length,contentPosted:J.length,avgRating:oe.length>0?oe.reduce((me,xe)=>me+xe,0)/oe.length:null}});a(pe);const Y=new Map;I==null||I.forEach(Z=>{if(Z.framework){const U=Y.get(Z.framework)||{count:0,ratings:[]};U.count++,Z.used&&Z.performance_rating!==null&&Z.performance_rating!==void 0&&U.ratings.push(Z.performance_rating),Y.set(Z.framework,U)}});const q=Array.from(Y.entries()).map(([Z,U])=>({framework:Z,count:U.count,avgRating:U.ratings.length>0?U.ratings.reduce((J,oe)=>J+oe,0)/U.ratings.length:null}));l(q);const B=new Map;I==null||I.forEach(Z=>{if(Z.platform){const U=B.get(Z.platform)||{count:0,ratings:[]};U.count++,Z.used&&Z.performance_rating!==null&&Z.performance_rating!==void 0&&U.ratings.push(Z.performance_rating),B.set(Z.platform,U)}});const ae=Array.from(B.entries()).map(([Z,U])=>({platform:Z,count:U.count,avgRating:U.ratings.length>0?U.ratings.reduce((J,oe)=>J+oe,0)/U.ratings.length:null}));d(ae),N(P||[]),R(I||[]);const{data:X,error:ve}=await Ee.from("day_data").select("*").eq("user_id",t.id);if(ve)console.error("Error fetching day_data:",ve);else{const Z={};X==null||X.forEach(U=>{Z[U.date]=U}),b(Z)}const{data:L,error:O}=await Ee.from("transactions").select("*").eq("user_id",t.id);O?console.error("Error fetching transactions:",O):k(L||[])}catch(P){console.error("Error fetching scorecard stats:",P)}finally{m(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-brand-light-text dark:text-white",children:" Dream Client Studio Scorecard"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1",children:"All-Time Analytics & Performance Insights"})]})}),h?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 sm:p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("p",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Total Avatars"}),o.jsx("p",{className:"text-4xl font-black text-purple-600 dark:text-purple-400",children:e.totalAvatars}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Buyer personas created"})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 sm:p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("p",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Content Generated"}),o.jsx("p",{className:"text-4xl font-black text-blue-600 dark:text-blue-400",children:e.totalContentGenerated}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Total posts created"})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 sm:p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("p",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Content Posted"}),o.jsx("p",{className:"text-4xl font-black text-green-600 dark:text-green-400",children:e.totalContentPosted}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:e.totalContentGenerated>0?`${Math.round(e.totalContentPosted/e.totalContentGenerated*100)}% usage rate`:"No content yet"})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-4 sm:p-6 rounded-lg border border-brand-light-border dark:border-brand-gray",children:[o.jsx("p",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Avg Performance"}),o.jsx("p",{className:"text-4xl font-black text-yellow-600 dark:text-yellow-400",children:e.overallAvgRating!==null?e.overallAvgRating.toFixed(1):"-"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:e.totalContentPosted>0?"out of 10":"No ratings yet"})]})]}),o.jsx(Rae,{userId:t.id,allData:g,transactions:v,contentData:T,avatarsData:C})]})]})},Dae=({isOpen:t,onClose:e,currentPlan:n,limitType:r})=>{if(!t)return null;const a=[{tier:"starter",name:"Starter",price:yn.starter.price,description:"Perfect for solo entrepreneurs",features:[`${yn.starter.max_avatars} Buyer Avatars`,`${yn.starter.max_posts_per_month} Posts/Month`,`${yn.starter.max_users} User Seat`,"Basic Analytics","Social Media Quick Links","Performance Ratings","Lead Source Attribution"],highlighted:!1},{tier:"pro",name:"Pro",price:yn.pro.price,description:"Best for agencies & teams",features:[`${yn.pro.max_avatars} Buyer Avatars`,`${yn.pro.max_posts_per_month} Posts/Month`,`${yn.pro.max_users} User Seats`,"Advanced Analytics","Full Scorecard Dashboard","Social Media ROI Tracking","Team Collaboration","Priority Support"],highlighted:!0,badge:"MOST POPULAR"},{tier:"agency",name:"Agency",price:yn.agency.price,description:"For power users & enterprises",features:["UNLIMITED Avatars","UNLIMITED Posts",`${yn.agency.max_users} User Seats`,"Full Analytics Suite","White-Label Options (Coming Soon)","API Access (Coming Soon)","Dedicated Support","Custom Integrations"],highlighted:!1}],i=()=>{switch(r){case"avatars":return`You've reached your avatar limit on the ${n} plan`;case"posts":return`You've used all your posts this month on the ${n} plan`;case"users":return`You've reached your user limit on the ${n} plan`;default:return`Upgrade your ${n} plan for more features`}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-brand-light-card dark:bg-brand-navy border-b border-brand-light-border dark:border-brand-gray p-6 flex justify-between items-start z-10",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-brand-light-text dark:text-white mb-2",children:"Upgrade Your Plan"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[i(),". Choose a plan that fits your needs."]})]}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white text-2xl font-bold",children:""})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:a.map(l=>{const u=l.tier===n,d=!u&&(n==="starter"&&(l.tier==="pro"||l.tier==="agency")||n==="pro"&&l.tier==="agency");return o.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${l.highlighted?"border-purple-600 bg-purple-50 dark:bg-purple-900/10":u?"border-gray-400 dark:border-gray-600 opacity-60":"border-gray-200 dark:border-gray-700"}`,children:[l.badge&&o.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:o.jsx("span",{className:"bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:l.badge})}),u&&o.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:o.jsx("span",{className:"bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"CURRENT PLAN"})}),o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-2xl font-bold text-brand-light-text dark:text-white mb-2",children:l.name}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:l.description}),o.jsxs("div",{className:"flex items-baseline justify-center",children:[o.jsxs("span",{className:"text-4xl font-black text-brand-light-text dark:text-white",children:["$",l.price]}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-2",children:"/month"})]})]}),o.jsx("ul",{className:"space-y-3 mb-6",children:l.features.map((h,m)=>o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("svg",{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:h})]},m))}),u?o.jsx("button",{disabled:!0,className:"w-full py-3 px-4 rounded-lg font-semibold bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed",children:"Current Plan"}):d?o.jsxs("button",{onClick:()=>{alert(`Upgrade to ${l.name} - Payment integration coming soon!`),e()},className:`w-full py-3 px-4 rounded-lg font-semibold transition ${l.highlighted?"bg-purple-600 hover:bg-purple-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-brand-light-text dark:text-white"}`,children:["Upgrade to ",l.name]}):o.jsx("button",{disabled:!0,className:"w-full py-3 px-4 rounded-lg font-semibold bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed",children:"Not Available"})]},l.tier)})}),o.jsxs("div",{className:"mt-8 text-center",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",o.jsx("strong",{children:"Annual Plans:"})," Save 20% when you pay yearly!"]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"All plans include 7-day free trial. Cancel anytime."})]})]})]})})},Oae=({user:t})=>{const[e,n]=_.useState(null),[r,a]=_.useState(null),[i,l]=_.useState(!1),[u,d]=_.useState(!0);_.useEffect(()=>{h()},[t.id]);const h=async()=>{d(!0);const[b,v]=await Promise.all([_l(t.id),Sae(t.id)]);n(b),a(v),d(!1)},m=b=>{switch(b){case"starter":return"bg-gray-500";case"pro":return"bg-purple-600";case"agency":return"bg-blue-600";default:return"bg-gray-400"}},g=b=>b>=90?"bg-red-600":b>=75?"bg-yellow-600":"bg-green-600";return u?o.jsx("div",{className:"min-h-screen bg-brand-light-bg dark:bg-brand-ink flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):o.jsxs("div",{className:"min-h-screen bg-brand-light-bg dark:bg-brand-ink p-6",children:[o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-brand-light-text dark:text-white mb-2",children:"Billing & Plans"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your subscription and view usage details"})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white",children:"Current Plan"}),o.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-bold text-white ${m((e==null?void 0:e.plan_tier)||"pro")}`,children:((e==null?void 0:e.plan_tier)||"pro").toUpperCase()})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:(e==null?void 0:e.status)==="active"?"Active subscription":"Inactive"})]}),o.jsx("button",{onClick:()=>l(!0),className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-6 rounded-lg transition",children:"Change Plan"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Buyer Avatars"}),o.jsxs("span",{className:"text-sm font-bold text-brand-light-text dark:text-white",children:[(r==null?void 0:r.avatars.current)||0," / ",(r==null?void 0:r.avatars.max)||0]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:o.jsx("div",{className:`h-3 rounded-full transition-all ${g((r==null?void 0:r.avatars.percentage)||0)}`,style:{width:`${Math.min((r==null?void 0:r.avatars.percentage)||0,100)}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Posts This Month"}),o.jsxs("span",{className:"text-sm font-bold text-brand-light-text dark:text-white",children:[(r==null?void 0:r.posts.current)||0," / ",(r==null?void 0:r.posts.max)||0]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:o.jsx("div",{className:`h-3 rounded-full transition-all ${g((r==null?void 0:r.posts.percentage)||0)}`,style:{width:`${Math.min((r==null?void 0:r.posts.percentage)||0,100)}%`}})}),o.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Resets on ",(r==null?void 0:r.posts.resetsOn)||"N/A"]})]})]})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6 mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white mb-6",children:"Compare Plans"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[o.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Feature"}),o.jsxs("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Starter",o.jsx("br",{}),o.jsxs("span",{className:"text-xs font-normal",children:["$",yn.starter.price,"/mo"]})]}),o.jsxs("th",{className:"text-center py-3 px-4 text-sm font-semibold text-purple-600",children:["Pro",o.jsx("br",{}),o.jsxs("span",{className:"text-xs font-normal",children:["$",yn.pro.price,"/mo"]})]}),o.jsxs("th",{className:"text-center py-3 px-4 text-sm font-semibold text-blue-600",children:["Agency",o.jsx("br",{}),o.jsxs("span",{className:"text-xs font-normal",children:["$",yn.agency.price,"/mo"]})]})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[o.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 dark:text-gray-300",children:"Buyer Avatars"}),o.jsx("td",{className:"py-3 px-4 text-sm text-center text-gray-700 dark:text-gray-300",children:yn.starter.max_avatars}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:yn.pro.max_avatars}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:"Unlimited"})]}),o.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[o.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 dark:text-gray-300",children:"Posts per Month"}),o.jsx("td",{className:"py-3 px-4 text-sm text-center text-gray-700 dark:text-gray-300",children:yn.starter.max_posts_per_month}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:yn.pro.max_posts_per_month}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:"Unlimited"})]}),o.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[o.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 dark:text-gray-300",children:"User Seats"}),o.jsx("td",{className:"py-3 px-4 text-sm text-center text-gray-700 dark:text-gray-300",children:yn.starter.max_users}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:yn.pro.max_users}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:yn.agency.max_users})]}),o.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[o.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 dark:text-gray-300",children:"Scorecard Dashboard"}),o.jsx("td",{className:"py-3 px-4 text-sm text-center text-gray-700 dark:text-gray-300",children:"Basic"}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:" Full"}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:" Full"})]}),o.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[o.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 dark:text-gray-300",children:"Social Media ROI Tracking"}),o.jsx("td",{className:"py-3 px-4 text-sm text-center text-gray-700 dark:text-gray-300",children:""}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:""}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:""})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 dark:text-gray-300",children:"Priority Support"}),o.jsx("td",{className:"py-3 px-4 text-sm text-center text-gray-700 dark:text-gray-300",children:""}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:""}),o.jsx("td",{className:"py-3 px-4 text-sm text-center font-semibold text-gray-700 dark:text-gray-300",children:" Dedicated"})]})]})]})})]}),o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy rounded-lg border border-brand-light-border dark:border-brand-gray p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-light-text dark:text-white mb-4",children:"Billing Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Billing Cycle"}),o.jsx("span",{className:"font-semibold text-brand-light-text dark:text-white",children:"Monthly"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Current Period"}),o.jsxs("span",{className:"font-semibold text-brand-light-text dark:text-white",children:[e!=null&&e.billing_cycle_start?new Date(e.billing_cycle_start).toLocaleDateString():"N/A"," - ",e!=null&&e.billing_cycle_end?new Date(e.billing_cycle_end).toLocaleDateString():"N/A"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Next Reset"}),o.jsx("span",{className:"font-semibold text-brand-light-text dark:text-white",children:e!=null&&e.next_reset_date?new Date(e.next_reset_date).toLocaleDateString():"N/A"})]})]}),o.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",o.jsx("strong",{children:"Save 20%"})," by switching to annual billing!"]})})]})]}),o.jsx(Dae,{isOpen:i,onClose:()=>l(!1),currentPlan:(e==null?void 0:e.plan_tier)||"pro"})]})},Lae=({onClick:t})=>o.jsx("button",{onClick:t,className:"fixed bottom-6 right-6 bg-brand-red text-white p-4 rounded-full shadow-lg hover:bg-red-700 transition-transform transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-brand-ink focus:ring-brand-red z-50","aria-label":"Open AI Coach",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),Uae=({isOpen:t,onClose:e})=>{const[n,r]=_.useState([{role:"model",text:"Hello! I am your AI Coach. How can I help you improve your productivity today?"}]),[a,i]=_.useState(""),[l,u]=_.useState(!1),[d,h]=_.useState(!1),m=_.useRef(null),g=()=>{var k;(k=m.current)==null||k.scrollIntoView({behavior:"smooth"})};_.useEffect(g,[n]);const b=async()=>{if(a.trim()===""||l)return;const k={role:"user",text:a};r(C=>[...C,k]),i(""),u(!0);try{const N={role:"model",text:await A8(a,d)};r(T=>[...T,N])}catch(C){console.error("Gemini API error:",C);const N={role:"model",text:"Sorry, I encountered an error. Please try again."};r(T=>[...T,N])}finally{u(!1)}},v=k=>{k.key==="Enter"&&b()};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy border border-brand-light-border dark:border-brand-gray rounded-lg shadow-xl w-full max-w-2xl h-[80vh] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-light-border dark:border-brand-gray",children:[o.jsx("h2",{className:"text-xl font-bold text-brand-light-text dark:text-white",children:"AI Coach"}),o.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white",children:""})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[n.map((k,C)=>o.jsx("div",{className:`flex ${k.role==="user"?"justify-end":"justify-start"}`,children:o.jsx("div",{className:`max-w-md p-3 rounded-lg ${k.role==="user"?"bg-brand-blue text-white":"bg-gray-200 dark:bg-brand-gray text-brand-light-text dark:text-gray-200"}`,children:o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:k.text})})},C)),l&&o.jsx("div",{className:"flex justify-start",children:o.jsx("div",{className:"max-w-md p-3 rounded-lg bg-gray-200 dark:bg-brand-gray text-brand-light-text dark:text-gray-200",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:0.2s]"}),o.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:0.4s]"})]})})}),o.jsx("div",{ref:m})]}),o.jsxs("div",{className:"p-4 border-t border-brand-light-border dark:border-brand-gray flex items-center justify-end space-x-3 text-sm",children:[o.jsx("label",{htmlFor:"thinking-mode",className:"text-gray-500 dark:text-gray-400",children:"Complex Query?"}),o.jsxs("div",{className:"flex items-center cursor-pointer",children:[o.jsx("span",{className:"mr-2 text-sm font-medium text-gray-600 dark:text-gray-300",children:"Thinking Mode"}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",id:"thinking-mode",checked:d,onChange:()=>h(!d),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-300 dark:bg-brand-gray peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-red"})]})]})]}),o.jsxs("div",{className:"p-4 border-t border-brand-light-border dark:border-brand-gray flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:a,onChange:k=>i(k.target.value),onKeyPress:v,placeholder:"Ask your AI coach...",className:"flex-1 bg-brand-light-bg dark:bg-brand-ink border border-brand-light-border dark:border-brand-gray rounded-full px-4 py-2 text-brand-light-text dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue",disabled:l}),o.jsx("button",{onClick:b,disabled:l,className:"bg-brand-blue text-white rounded-full p-2 hover:bg-blue-600 disabled:bg-brand-gray disabled:cursor-not-allowed",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})}):null},Bae=()=>{const t=Array.from({length:150}).map((e,n)=>{const r={left:`${Math.random()*100}%`,animationDelay:`${Math.random()*.5}s`,animationDuration:`${3+Math.random()*2}s`,backgroundColor:["#E53E3E","#34D399","#2F81F7","#FBBF24","#A855F7","#EC4899"][Math.floor(Math.random()*6)],width:`${6+Math.random()*4}px`,height:`${12+Math.random()*8}px`};return o.jsx("div",{className:"confetti-piece",style:r},n)});return o.jsx("div",{className:"confetti","aria-hidden":"true",children:t})},$ae=!1,qae=({message:t,onRetry:e})=>o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-light-bg dark:bg-brand-ink text-center p-4",children:o.jsxs("div",{className:"bg-brand-light-card dark:bg-brand-navy p-8 rounded-lg border border-brand-light-border dark:border-brand-gray max-w-lg",children:[o.jsx("h2",{className:"text-2xl font-bold text-brand-red mb-4",children:"Application Error"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:t}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-6",children:"This can happen if the app can't connect to the database or if there's a problem with your account credentials. Please check your internet connection and try again."}),o.jsx("button",{onClick:e,className:"bg-brand-blue text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition",children:"Retry Connection"})]})}),zae=()=>{const[t,e]=_.useState(null),[n,r]=_.useState(null),[a,i]=_.useState(!0),[l,u]=_.useState(null),[d,h]=_.useState("dark"),[m,g]=_.useState("day-view"),[b,v]=_.useState(new Date),[k,C]=_.useState({}),[N,T]=_.useState([]),[R,E]=_.useState([]),[P,j]=_.useState([]),[I,D]=_.useState([]),[$,H]=_.useState([]),[z,F]=_.useState(!1),[V,K]=_.useState(!1),[pe,Y]=_.useState(""),[q,B]=_.useState(null),[ae,X]=_.useState(null);_.useEffect(()=>{const Ne=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");h(Ne)},[]),_.useEffect(()=>{document.documentElement.className=d,localStorage.setItem("theme",d)},[d]),_.useEffect(()=>{(async()=>{i(!0),u(null);try{const{data:{session:ye},error:Re}=await Ee.auth.getSession();if(Re)throw Re;e(ye),ye||i(!1)}catch(ye){console.error("Error fetching initial session:",ye),u("Could not connect to authentication service."),i(!1)}})();const{data:Ne}=Ee.auth.onAuthStateChange((ye,Re)=>{e(Re),Re||(r(null),C({}),E([]),T([]),j([]),D([]),H([]))});return()=>{Ne.subscription.unsubscribe()}},[]),_.useEffect(()=>{if(!t)return;(async()=>{var Ne,ye,Re,Ce,He,nt;i(!0),u(null);try{const{data:We,error:Dt}=await Ee.from("users").select("*").eq("id",t.user.id).single();if(Dt)throw Dt;const{data:Yt,error:Ut}=await Ee.from("companies").select("stripe_subscription_id, subscription_tier, account_status").eq("id",We.company_id).single();if(Ut&&console.error("Error fetching company data:",Ut),(Yt==null?void 0:Yt.account_status)==="disabled"){await Ee.auth.signOut(),u("Your account has been disabled. Please contact your account sponsor."),i(!1);return}if(Yt!=null&&Yt.stripe_subscription_id)try{if(!(await(await fetch("/.netlify/functions/check-subscription-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:Yt.stripe_subscription_id})})).json()).isActive){await Ee.auth.signOut(),u("Your subscription has expired. Please contact support to renew access."),i(!1);return}}catch(Ae){console.error("Error checking subscription status:",Ae)}r(We);const ln=We.role==="Manager"||We.role==="Admin"?null:We.id;let cn=Ee.from("day_data").select("*"),Qt=Ee.from("hot_leads").select("*"),te=Ee.from("transactions").select("*"),de=Ee.from("clients").select("*").eq("company_id",We.company_id),ke=Ee.from("quotes").select("*");ln?(cn=cn.eq("user_id",ln),Qt=Qt.eq("user_id",ln),te=te.eq("user_id",ln),de=de.eq("user_id",ln),ke=ke.eq("user_id",ln)):(console.log("[DEBUG] Manager mode - filtering by company_id:",We.company_id),cn=cn.eq("company_id",We.company_id),Qt=Qt.eq("company_id",We.company_id),te=te.eq("company_id",We.company_id),ke=ke.eq("company_id",We.company_id)),console.log("[DEBUG] Executing queries...");const[Be,ct,vt,it,Bt,Ve]=await Promise.all([cn,Qt,te,de,ke,Ee.from("users").select("*")]);console.log("[DEBUG] Query results:"),console.log("  - dayDataRes:",(Ne=Be.data)==null?void 0:Ne.length,"rows"),console.log("  - hotLeadsRes:",(ye=ct.data)==null?void 0:ye.length,"rows"),console.log("  - transactionsRes:",(Re=vt.data)==null?void 0:Re.length,"rows"),console.log("  - clientsRes:",(Ce=it.data)==null?void 0:Ce.length,"rows"),console.log("  - quotesRes:",(He=Bt.data)==null?void 0:He.length,"rows"),console.log("  - usersRes:",(nt=Ve.data)==null?void 0:nt.length,"rows");for(const Ae of[Be,ct,vt,it,Bt,Ve])if(Ae.error)throw console.error("[DEBUG] Query error:",Ae.error),Ae.error;if(Be.data&&C(Be.data.reduce((Ae,Et)=>({...Ae,[Et.date]:$L({...Et.data,userId:Et.user_id})}),{})),ct.data&&E(ct.data.map(Ae=>({...Ae,id:String(Ae.id),interestLevel:Ae.interest_level,dateAdded:Ae.date_added,appointmentDate:Ae.appointment_date,completedFollowUps:Ae.completed_follow_ups,userId:Ae.user_id}))),vt.data){const Ae=vt.data.map(Et=>({...Et,id:String(Et.id),clientName:Et.client_name,isRecurring:Et.is_recurring,userId:Et.user_id}));console.log("[DEBUG] Setting transactions state:",Ae.length,"transactions"),console.log("[DEBUG] First 3 transactions:",Ae.slice(0,3)),T(Ae)}it.data&&j(it.data.map(Ae=>({...Ae,id:String(Ae.id),city:Ae.city,state:Ae.state,zip:Ae.zip,monthlyContractValue:Ae.monthly_contract_value,initialAmountCollected:Ae.initial_amount_collected,closeDate:Ae.close_date,salesProcessLength:Ae.sales_process_length,userId:Ae.user_id}))),Bt.data&&D(Bt.data.map(Ae=>({...Ae,id:String(Ae.id),savedAt:Ae.saved_at}))),Ve.data&&H(Ve.data)}catch(We){console.error("Error fetching application data:",We),u(We.message||"Failed to load application data. This might be a temporary network issue.")}finally{i(!1)}})()},[t]),_.useEffect(()=>{if(V){const fe=setTimeout(()=>{K(!1),Y("")},5e3);return()=>clearTimeout(fe)}},[V]);const ve=async(fe,Ne,ye=1,Re)=>{let Ce=0,He=0;for(let nt=0;nt<ye;nt++){const We=new Date(Ne);We.setDate(We.getDate()+nt);const Dt=We.toISOString().split("T")[0],Yt=k[Dt]||Wd();let Ut=Yt.speedOfImplementation||[];Ut.length===0&&(Ut=Array.from({length:3},(cn,Qt)=>({id:`soi-${Qt+1}`,text:"",completed:!1,currentDay:0,totalDays:0,startDate:""})));const ln=Ut.findIndex(cn=>!cn.text||cn.text.trim()==="");if(ln!==-1){const cn=[...Ut];cn[ln]={...cn[ln],text:fe,completed:!1,source:Re||"Coaching",currentDay:nt+1,totalDays:ye,startDate:Ne};const Qt={...Yt,speedOfImplementation:cn};await O(Dt,Qt),Ce++}else He++}Ce>0&&He===0?alert(` Action item added to Implement Now for the next ${Ce} ${Ce===1?"day":"days"}!`):Ce>0&&He>0?alert(` Added to ${Ce} ${Ce===1?"day":"days"}. Skipped ${He} ${He===1?"day":"days"} because all 3 Implement Now slots were full.

Tip: Complete or remove existing targets to make room for new ones.`):Ce===0&&alert(` Cannot add target. All 3 Implement Now slots are full for the selected dates.

Please complete or remove existing targets first, then try again.`)},L=async()=>{await Ee.auth.signOut(),r(null),e(null),window.location.href="/"},O=async(fe,Ne)=>{if(!n)return;const ye=Ne.userId||n.id,Re={...Ne,userId:ye};C(nt=>({...nt,[fe]:Re}));const{userId:Ce,...He}=Re;await Ee.from("day_data").upsert({user_id:ye,company_id:n.company_id,date:fe,data:He},{onConflict:"user_id, date"})},Z=(fe,Ne)=>{C(ye=>{const Re=ye[fe]||Wd(),Ce=[...Re.winsToday||[],Ne],He={...Re,winsToday:Ce};return(async()=>{if(!n)return;const nt=He.userId||n.id,{userId:We,...Dt}={...He};await Ee.from("day_data").upsert({user_id:nt,company_id:n.company_id,date:fe,data:Dt},{onConflict:"user_id, date"})})(),{...ye,[fe]:He}}),Y(Ne),K(!0)},U=async fe=>{if(!n)return null;const Ne={user_id:n.id,company_id:n.company_id,name:fe.name,company:fe.company,date:fe.date,phone:fe.phone,email:fe.email,interest_level:fe.interestLevel,prospecting:fe.prospecting,date_added:fe.dateAdded,appointment_date:fe.appointmentDate,completed_follow_ups:fe.completedFollowUps},{data:ye,error:Re}=await Ee.from("hot_leads").insert(Ne).select().single();if(Re)return console.error("Error adding hot lead:",Re),null;const Ce={...ye,id:String(ye.id),interestLevel:ye.interest_level,dateAdded:ye.date_added,appointmentDate:ye.appointment_date,completedFollowUps:ye.completed_follow_ups,userId:ye.user_id};return E(He=>[...He,Ce]),Ce},J=async fe=>{E(Ne=>Ne.map(ye=>ye.id===fe.id?fe:ye)),n&&await Ee.from("hot_leads").update({name:fe.name,company:fe.company,date:fe.date,phone:fe.phone,email:fe.email,interest_level:fe.interestLevel,prospecting:fe.prospecting,date_added:fe.dateAdded,appointment_date:fe.appointmentDate,completed_follow_ups:fe.completedFollowUps}).eq("id",fe.id)},oe=async fe=>{E(Ne=>Ne.filter(ye=>ye.id!==fe)),n&&await Ee.from("hot_leads").delete().eq("id",fe)},me=async fe=>{if(console.log(" handleSaveNewClient called with:",fe),!n){console.log(" No user, returning early");return}const Ne={name:fe.name,company:fe.company,phone:fe.phone,email:fe.email,address:fe.address,city:fe.city,state:fe.state,zip:fe.zip,sales_process_length:fe.salesProcessLength,monthly_contract_value:fe.monthlyContractValue,initial_amount_collected:fe.initialAmountCollected,close_date:fe.closeDate,stage:fe.stage,user_id:fe.userId,company_id:n.company_id};if(fe.ghl_contact_id&&(Ne.ghl_contact_id=fe.ghl_contact_id),!fe.id||String(fe.id).startsWith("manual-")||String(fe.id).startsWith("ghl-")||String(fe.id).startsWith("auto-")){const{data:ye,error:Re}=await Ee.from("clients").insert(Ne).select().single();if(ye)j(Ce=>[...Ce,{...ye,id:String(ye.id),city:ye.city,state:ye.state,zip:ye.zip,monthlyContractValue:ye.monthly_contract_value,initialAmountCollected:ye.initial_amount_collected,closeDate:ye.close_date,salesProcessLength:ye.sales_process_length,userId:ye.user_id}]),ye.ghl_contact_id?console.log("  Skipping GHL sync - contact imported from GHL (ID:",ye.ghl_contact_id,")"):(console.log(" Attempting to sync client to GHL:",ye.id),Hk(String(ye.id)).then(Ce=>{console.log(" Client synced to GHL successfully! GHL Contact ID:",Ce)}).catch(Ce=>{console.error(" GHL sync failed:",Ce)}));else throw console.error(" Failed to insert client:",Re),Re}else{const{data:ye,error:Re}=await Ee.from("clients").update(Ne).eq("id",fe.id).select().single();if(ye)j(Ce=>Ce.map(He=>He.id===fe.id?{...ye,id:String(ye.id),city:ye.city,state:ye.state,zip:ye.zip,monthlyContractValue:ye.monthly_contract_value,initialAmountCollected:ye.initial_amount_collected,closeDate:ye.close_date,salesProcessLength:ye.sales_process_length,userId:ye.user_id}:He)),ye.ghl_contact_id?console.log("  Skipping GHL sync - contact imported from GHL (ID:",ye.ghl_contact_id,")"):(console.log(" Attempting to sync client to GHL:",ye.id),Hk(String(ye.id)).then(Ce=>{console.log(" Client synced to GHL successfully! GHL Contact ID:",Ce)}).catch(Ce=>{console.error(" GHL sync failed:",Ce)}));else throw console.error(" Failed to insert client:",Re),Re}},xe=async fe=>{if(!n)throw new Error("User not authenticated");const Ne={user_id:fe.userId||n.id,company_id:n.company_id,date:fe.date,client_name:fe.clientName,product:fe.product,amount:fe.amount,is_recurring:fe.isRecurring};if(String(fe.id).startsWith("new-")){const{data:ye,error:Re}=await Ee.from("transactions").insert(Ne).select().single();if(Re)throw console.error("Error saving new transaction:",Re),Re;ye&&T(Ce=>[...Ce,{...ye,id:String(ye.id),clientName:ye.client_name,isRecurring:ye.is_recurring,userId:ye.user_id}])}else{const{data:ye,error:Re}=await Ee.from("transactions").update(Ne).eq("id",fe.id).select().single();if(Re)throw console.error("Error updating transaction:",Re),Re;ye&&T(Ce=>Ce.map(He=>He.id===fe.id?{...ye,id:String(ye.id),clientName:ye.client_name,isRecurring:ye.is_recurring,userId:ye.user_id}:He))}},Q=async fe=>{T(Ne=>Ne.filter(ye=>ye.id!==fe)),n&&await Ee.from("transactions").delete().eq("id",fe)},we=async fe=>{if(!n)return;const{data:Ne,error:ye}=await Ee.from("quotes").insert({...fe,user_id:n.id,company_id:n.company_id}).select().single();Ne?D(Re=>[{...Ne,id:String(Ne.id),savedAt:Ne.saved_at},...Re]):console.error(ye)},_e=async fe=>{D(Ne=>Ne.filter(ye=>ye.id!==fe)),n&&await Ee.from("quotes").delete().eq("id",fe)},ie=(fe,Ne)=>{const ye=Ne.toISOString().split("T")[0],Re=k[ye]||Wd(),Ce={id:`appt-${Date.now()}`,time:fe.time,type:"Appointment",title:`Appt: ${fe.client}`,client:fe.client,details:fe.details||`From ${fe.lead}`,conducted:!1},He=[...Re.events||[],Ce].sort((We,Dt)=>We.time.localeCompare(Dt.time));O(ye,{...Re,events:He});const nt=new Date().toISOString().split("T")[0];Z(nt,`Appointment Set: ${fe.client}`),g("month-view"),v(Ne)},Le=async(fe,Ne)=>{if(!n)return;const ye=new Date().toISOString().split("T")[0];await me({id:`manual-${Date.now()}`,name:fe.name,company:fe.company||"",phone:fe.phone,email:fe.email,address:"",salesProcessLength:"",monthlyContractValue:0,initialAmountCollected:Ne,closeDate:ye,stage:"New",userId:n.id}),await xe({id:"new-",date:ye,clientName:fe.name,product:"Initial Service",amount:Ne,isRecurring:!1,userId:n.id}),await oe(String(fe.id)),Z(ye,`New Client Won! ${fe.name}`),g("new-clients")},ce=fe=>{B(fe),g("performance-dashboard")},Se=fe=>{const Ne=Re=>Re.toISOString().split("T")[0];let ye={viewMode:"analysis"};if(fe==="today")ye={viewMode:"daily"};else{let Re=new Date(b),Ce=new Date(b);switch(fe){case"week":Re.setDate(Re.getDate()-b.getDay()),Ce=new Date(Re),Ce.setDate(Ce.getDate()+6);break;case"month":case"mcv":case"acv":Re=new Date(b.getFullYear(),b.getMonth(),1),Ce=new Date(b.getFullYear(),b.getMonth()+1,0);break;case"ytd":Re=new Date(b.getFullYear(),0,1);break}ye.dateRange={start:Ne(Re),end:Ne(Ce)}}X(ye),g("revenue")},je=()=>window.location.reload();if(a)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-light-bg dark:bg-brand-ink",children:o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-brand-red"})});if(l)return o.jsx(qae,{message:l,onRetry:je});new URLSearchParams(window.location.search);const Ye=window.location.pathname.includes("/billing/success"),Fe=window.location.pathname.includes("/billing/cancelled");if(Ye||Fe)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:Ye?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Payment Successful!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been created successfully. Please check your email to verify your account."}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[o.jsx("p",{className:"text-sm text-blue-800",children:o.jsx("strong",{children:"Next Steps:"})}),o.jsxs("ol",{className:"text-sm text-blue-700 text-left mt-2 space-y-1",children:[o.jsx("li",{children:"1. Check your email inbox"}),o.jsx("li",{children:"2. Click the verification link"}),o.jsx("li",{children:"3. Return to this page"}),o.jsx("li",{children:"4. Sign in with your credentials"})]})]}),o.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition",children:"Go to Login"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Payment Cancelled"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your payment was cancelled. No charges have been made to your account."}),o.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition",children:"Return to Home"})]})})});if(window.location.pathname==="/reset-password")return o.jsx(YL,{});if(!t||!n)return o.jsx(KL,{});const Je=()=>{const fe=Object.entries(k).reduce((Ne,[ye,Re])=>{const Ce=Re;if(Ce&&Ce.eodSubmitted&&Ce.userId){const He=Ce.userId;Ne[He]||(Ne[He]={}),Ne[He][ye]=!0}return Ne},{});switch(m){case"day-view":return o.jsx(W8,{user:n,onDataChange:O,allData:k,selectedDate:b,onDateChange:v,onAddWin:Z,onAddHotLead:U,onUpdateHotLead:J,hotLeads:R,transactions:N,users:$,onNavigateToRevenue:Se});case"month-view":return o.jsx(xz,{allData:k,onDataChange:O,transactions:N,selectedDate:b,onDateChange:v,setView:g});case"prospecting":return o.jsx(Y8,{allData:k,onDataChange:O,selectedDate:b,onDateChange:v,onAddHotLead:U,onAddWin:Z,handleSetAppointment:ie,hotLeads:R});case"hot-leads":return o.jsx(tz,{hotLeads:R,onAddHotLead:U,onUpdateHotLead:J,onDeleteHotLead:oe,selectedDate:b,onDateChange:v,handleSetAppointment:ie,onConvertToClient:Le});case"new-clients":return o.jsx(sz,{newClients:P,onSaveClient:me,onSaveTransaction:xe,selectedDate:b,onDateChange:v,loggedInUser:n,users:$,transactions:N,companyId:n.company_id||""});case"revenue":return o.jsx(mz,{transactions:N,onSaveTransaction:xe,onDeleteTransaction:Q,selectedDate:b,onDateChange:v,initialState:ae,onInitialStateConsumed:()=>X(null),loggedInUser:n,users:$,companyId:n.company_id||""});case"ai-images":return o.jsx(Sz,{});case"ai-content":return o.jsx(Ez,{});case"coaching":return o.jsx(Uz,{userId:n.id,companyId:n.company_id,savedQuotes:I,onSaveQuote:we,onRemoveQuote:_e,onAddToTargets:ve});case"team-control":return o.jsx(Bz,{users:$,onViewUserTrends:ce,companyId:n.company_id||""});case"performance-dashboard":return o.jsx(iae,{allData:k,transactions:N,users:$,contextualUserId:q,setContextualUserId:B,eodSubmissions:fe});case"eod-report":return o.jsx(cae,{allData:k,selectedDate:b,onDateChange:v,hotLeads:R,transactions:N,onSubmission:Ne=>Z(Ne,"EOD Report Submitted!"),userId:n.id,onDataChange:O});case"account-settings":return o.jsx(uae,{});case"ghl-integration":return o.jsx(dae,{userId:n.id,companyId:n.company_id||"",userRole:n.role});case"dream-avatars":return o.jsx(jae,{user:n});case"scorecard-dashboard":return o.jsx(Mae,{user:n});case"billing-plans":return o.jsx(Oae,{user:n});default:return o.jsx("div",{children:"View not found"})}};return o.jsxs("div",{className:"min-h-screen font-sans antialiased bg-brand-light-bg dark:bg-brand-ink transition-colors duration-300",children:[V&&o.jsx(Bae,{}),o.jsx(QL,{theme:d,setTheme:h,setView:g,currentView:m,userRole:n.role,onLogout:L,userName:n.name,isDemoMode:$ae}),o.jsx("main",{className:"max-w-screen-2xl mx-auto p-4 sm:p-6 lg:p-8",children:Je()}),V&&o.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 bg-brand-lime text-brand-ink font-bold p-4 rounded-lg shadow-2xl z-50",children:[" ",pe," "]}),o.jsx(Lae,{onClick:()=>F(!0)}),o.jsx(Uae,{isOpen:z,onClose:()=>F(!1)})]})};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fae=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),xA=t=>{const e=Fae(t);return e.charAt(0).toUpperCase()+e.slice(1)},FM=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Hae=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:l,...u},d)=>_.createElement("svg",{ref:d,...Vae,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:FM("lucide",a),...!i&&!Hae(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,m])=>_.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=(t,e)=>{const n=_.forwardRef(({className:r,...a},i)=>_.createElement(Wae,{ref:i,iconNode:e,className:FM(`lucide-${Gae(xA(t))}`,`lucide-${t}`,r),...a}));return n.displayName=xA(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Yae=HM("external-link",Kae);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Xae=HM("share-2",Jae),Qae=()=>{const[t,e]=_.useState(null),n=[{id:"1",title:"The Art of Exceptional Living",author:"Jim Rohn",youtubeId:"L7BHMXcoibc",commentary:"Jim Rohn's philosophy on daily disciplines transformed how I approach business. This talk reminds us that massive success isn't built in a dayit's the compound effect of small, consistent actions. If you're serious about growth, this is required viewing.",dateAdded:"December 17, 2025"},{id:"2",title:"How to Take Charge of Your Life",author:"Jim Rohn",youtubeId:"pUz06GHWWuM",commentary:"Jim Rohn's masterclass on personal responsibility and taking control of your destiny. This is the blueprint for massive actionunderstanding that you are 100% responsible for your results. If you want to change your life, this is where it starts.",dateAdded:"December 17, 2025"},{id:"3",title:"20 Minutes of Life-Changing Advice",author:"Tony Robbins",youtubeId:"8hUTeZpVdGw",commentary:"Tony delivers a powerful reminder that creating an extraordinary life starts with focus, discipline, and action. His energy is contagious, and his strategies are immediately actionable. Watch this when you need a mindset shift.",dateAdded:"December 17, 2025"},{id:"4",title:"The Only 13 Minutes You Need To Master Discipline",author:"Jocko Willink",youtubeId:"WlRmAC37vLQ",commentary:"Jocko's no-nonsense approach to discipline cuts through all the excuses. This 13-minute talk is brutal, direct, and exactly what you need to hear when motivation fades. Discipline equals freedomand this video proves it.",dateAdded:"December 17, 2025"},{id:"5",title:"Think And Grow Rich - Full Audiobook",author:"Napoleon Hill",youtubeId:"ttehHU9NdaA",commentary:"Napoleon Hill's timeless masterpiece on the principles of success. The 13 steps to riches aren't just about moneythey're about mastering your mindset and taking control of your destiny. A must-listen for any serious entrepreneur.",dateAdded:"December 17, 2025"},{id:"6",title:"Success Secrets Of High Achievers",author:"Brian Tracy",youtubeId:"XucPNce3t0Y",commentary:"Brian Tracy reveals the strategies that high achievers use to consistently outperform everyone else. His practical, step-by-step approach makes success feel achievable. This is the blueprint for turning goals into reality.",dateAdded:"December 17, 2025"}],r=a=>{const i=`${window.location.origin}/learning#${a.id}`,l=`Check out this powerful video: "${a.title}" by ${a.author} - curated by Massive Action Tracker`;navigator.share?navigator.share({title:`Massive Action Tracker: ${a.title}`,text:l,url:i}):(navigator.clipboard.writeText(i),alert("Link copied to clipboard!"))};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[o.jsx("div",{className:"bg-gradient-to-r from-brand-red via-red-600 to-brand-red text-white py-16 px-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[o.jsx("h1",{className:"text-5xl md:text-6xl font-black mb-4",children:" MASSIVE ACTION TRACKER"}),o.jsx("p",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Curated Business Wisdom & Success Strategies"}),o.jsxs("div",{className:"max-w-3xl mx-auto",children:[o.jsx("p",{className:"text-lg md:text-xl text-red-100 mb-4",children:`"I'm constantly learning from the best minds in business. Here's what's transforming my approach to success right now."`}),o.jsx("p",{className:"text-lg font-semibold",children:" Don, Founder of TrueXpanse & Creator of the Massive Action Tracker"})]})]})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-12",children:[o.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white mb-4",children:"Why This Library?"}),o.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-4",children:"Success leaves clues. The greatest minds in businessJim Rohn, Tony Robbins, Jocko Willink, Napoleon Hill, and Brian Tracyhave shared their wisdom freely. My job is to curate the best of the best and share what's actually working."}),o.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-4",children:"Each video below includes my personal take on why it matters and how it applies to real business growth. This isn't just a playlistit's a curated learning library designed to help you take massive action."}),o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-brand-red p-6 rounded-lg",children:o.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[" Want to apply these lessons? The ",o.jsx("span",{className:"text-brand-red",children:"Massive Action Tracker"})," helps you turn wisdom into daily habits and track your progress toward your goals."]})})]}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:n.map(a=>o.jsxs("div",{id:a.id,className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300",children:[o.jsx("div",{className:"relative pb-[56.25%] bg-black",children:o.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${a.youtubeId}`,title:a.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white mb-1",children:a.title}),o.jsx("p",{className:"text-lg text-brand-red font-bold",children:a.author})]}),o.jsx("button",{onClick:()=>r(a),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Share this video",children:o.jsx(Xae,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-lg mb-4",children:[o.jsx("p",{className:"text-sm font-bold text-blue-900 dark:text-blue-300 mb-2",children:" Don's Take:"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:a.commentary})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Added: ",a.dateAdded]}),o.jsxs("a",{href:`https://www.youtube.com/watch?v=${a.youtubeId}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:text-brand-red transition-colors",children:["Watch on YouTube",o.jsx(Yae,{className:"w-4 h-4"})]})]})]})]},a.id))}),o.jsxs("div",{className:"mt-16 bg-gradient-to-r from-brand-blue via-blue-600 to-blue-800 rounded-2xl shadow-2xl p-12 text-center text-white",children:[o.jsx("h2",{className:"text-4xl font-black mb-4",children:"Ready to Apply These Lessons?"}),o.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto",children:"Knowledge without action is just entertainment. The Massive Action Tracker helps you turn these powerful insights into daily habits and measurable results."}),o.jsx("a",{href:"/",className:"inline-block bg-brand-red hover:bg-red-700 text-white font-black text-xl px-12 py-5 rounded-xl shadow-2xl transform hover:scale-105 transition-all duration-200",children:"Start Tracking Your Progress "})]}),o.jsxs("div",{className:"mt-12 text-center text-sm text-gray-500 dark:text-gray-400",children:[o.jsx("p",{children:"All videos are embedded from their original sources and remain the property of their respective creators."}),o.jsx("p",{children:"We do not host or claim ownership of any video content. Commentary and curation by Don @ TrueXpanse."})]})]})]})},VM=document.getElementById("root");if(!VM)throw new Error("Could not find root element to mount to");const Zae=window.location.pathname==="/learning"||window.location.pathname==="/learning/",eie=m4.createRoot(VM);eie.render(zo.createElement(zo.StrictMode,null,Zae?zo.createElement(Qae):zo.createElement(zae)));
